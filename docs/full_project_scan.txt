--- PROJECT SCAN REPORT ---

--- FILE STRUCTURE ---
./
    eslint.config.js
    package-lock.json
    package.json
    postcss.config.js
    tailwind.config.js
    tsconfig.json
    tsconfig.node.json
    vite.config.ts
    vitest.config.ts
    .cursor/
        worktrees.json
    flexpro-ai-service/
        app/
            api/
                v1/
                    endpoints/
            core/
            db/
            models/
            services/
    public/
        sw.js
    scripts/
        check-raw.js
        check-tables.js
        comprehensive-check.js
        create-tables.js
        migrate-data-to-supabase.js
        migrate-data.js
        run-migrations.js
        setup-complete.js
        test-tables.js
    src/
        App.css
        App.tsx
        index.css
        main.tsx
        assets/
        components/
            AdminRoute.tsx
            AdvancedSkeleton.tsx
            AnimatedCounter.tsx
            AuthModal.tsx
            Badge.tsx
            ClientInfoPanel.tsx
            DietPanel.tsx
            EmptyState.tsx
            EnhancedCard.tsx
            ErrorBoundary.tsx
            ErrorMessage.tsx
            FloatingActionButton.tsx
            Header.tsx
            index.ts
            LoadingSpinner.tsx
            Modal.tsx
            Notification.tsx
            PrintModal.tsx
            PrivateRoute.tsx
            ProfilePanel.tsx
            Progress.tsx
            ProtectedRoute.tsx
            PublicRoute.tsx
            SavePlanModal.tsx
            Sidebar.tsx
            SkeletonLoader.tsx
            SuccessMessage.tsx
            SupabaseDebug.tsx
            SupplementsPanel.tsx
            TemplateLoader.tsx
            TextAnimation.tsx
            Tooltip.tsx
            TrainingPanel.tsx
            UserList.tsx
            UserModal.tsx
            backgrounds/
                index.ts
                LightRays.css
                LightRays.tsx
            chat/
                ChatWindow.tsx
            gallery/
                GalleryPanel.tsx
            print/
                PrintClientReport.tsx
                PrintPanel.tsx
                PrintPrograms.tsx
                PrintProgress.tsx
            tabs/
                AnthropometryTab.tsx
                FinancialTab.tsx
                IdentityTab.tsx
                MedicalTab.tsx
            TrainingPanel/
                AddExerciseForm.tsx
                ExerciseCard.tsx
                ExerciseRow.tsx
                index.ts
                MobileExerciseCard.tsx
                WorkoutDayTabs.tsx
            ui/
                SpotlightCard.tsx
            workout/
                ActiveWorkoutMode.tsx
        context/
            AppContext.tsx
            AuthContext.tsx
            DataContext.tsx
            UIContext.tsx
        data/
            cardioExercises.ts
            correctiveExercises.ts
            foodData.ts
            nasmImages.ts
            nasmPrograms.ts
            resistanceExercises.ts
            supplementsData.ts
            warmupCooldown.ts
        hooks/
            useChat.ts
            useDatabaseQueries.ts
            useDebounce.ts
            useDietTemplates.ts
            useExercises.ts
            useExerciseSearch.ts
            useFoodSearch.ts
            useProgressPhotos.ts
            useRole.ts
            useSync.ts
            useTemplates.ts
            useUserForm.ts
            useWorkoutLog.ts
            __tests__/
                useAuth.test.tsx
                useRole.test.tsx
        lib/
            database.ts
            queryClient.tsx
            supabaseApi.ts
            supabaseClient.ts
        pages/
            AdminDashboard.tsx
            ClientDashboard.tsx
            CoachDashboard.tsx
            Dashboard.tsx
            LoginPage.tsx
            RegisterPage.tsx
        test/
            setup.ts
        types/
            database.ts
            index.ts
            interactive.ts
            types.ts
        utils/
            calculations.ts
            cn.ts
            pushNotifications.ts
            sanitization.ts
            supabaseTest.ts
            __tests__/
                calculations.test.ts
    supabase/
        .temp/
        functions/
            import_map.json
            send-push-notification/
                index.ts
        migrations/


--- FILE CONTENTS ---

==================================================
FILE: .\eslint.config.js
==================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'
import tsParser from '@typescript-eslint/parser'
import tsPlugin from '@typescript-eslint/eslint-plugin'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx,ts,tsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
      parser: tsParser,
    },
    plugins: {
      '@typescript-eslint': tsPlugin,
    },
    rules: {
      'no-unused-vars': 'off', // Turn off base rule
      '@typescript-eslint/no-unused-vars': ['error', {
        argsIgnorePattern: '^_',
        varsIgnorePattern: '^_',
        // Allow unused parameters in interface method signatures
        ignoreRestSiblings: true,
      }],
    },
  },
])


==================================================
FILE: .\package-lock.json
==================================================
{
  "name": "flexpro-v2",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "flexpro-v2",
      "version": "0.0.0",
      "dependencies": {
        "@dnd-kit/core": "^6.1.0",
        "@dnd-kit/sortable": "^8.0.0",
        "@dnd-kit/utilities": "^3.2.2",
        "@supabase/supabase-js": "^2.48.0",
        "@tanstack/react-query": "^5.90.12",
        "chart.js": "^4.5.1",
        "clsx": "^2.1.1",
        "framer-motion": "^12.23.24",
        "html2canvas": "^1.4.1",
        "jspdf": "^3.0.4",
        "lucide-react": "^0.555.0",
        "react": "^18.3.1",
        "react-chartjs-2": "^5.3.1",
        "react-dom": "^18.3.1",
        "react-hot-toast": "^2.6.0",
        "react-router-dom": "^7.10.1",
        "sweetalert2": "^11.26.3",
        "tailwind-merge": "^3.4.0"
      },
      "devDependencies": {
        "@eslint/js": "^9.39.1",
        "@playwright/test": "^1.57.0",
        "@testing-library/dom": "^10.4.1",
        "@testing-library/jest-dom": "^6.9.1",
        "@testing-library/react": "^16.3.0",
        "@testing-library/user-event": "^14.6.1",
        "@types/node": "^22.9.4",
        "@types/react": "^18.3.12",
        "@types/react-dom": "^18.3.1",
        "@typescript-eslint/eslint-plugin": "^8.49.0",
        "@typescript-eslint/parser": "^8.49.0",
        "@vitejs/plugin-react": "^5.1.1",
        "autoprefixer": "^10.4.19",
        "dotenv": "^16.4.5",
        "eslint": "^9.39.1",
        "eslint-plugin-react-hooks": "^7.0.1",
        "eslint-plugin-react-refresh": "^0.4.24",
        "globals": "^16.5.0",
        "jsdom": "^27.3.0",
        "postcss": "^8.4.35",
        "tailwindcss": "^3.4.17",
        "typescript": "^5.6.3",
        "vite": "npm:rolldown-vite@7.2.5",
        "vite-plugin-pwa": "^1.2.0",
        "vitest": "^4.0.15"
      }
    },
    "node_modules/@acemir/cssom": {
      "version": "0.9.29",
      "resolved": "https://registry.npmjs.org/@acemir/cssom/-/cssom-0.9.29.tgz",
      "integrity": "sha512-G90x0VW+9nW4dFajtjCoT+NM0scAfH9Mb08IcjgFHYbfiL/lU04dTF9JuVOi3/OH+DJCQdcIseSXkdCB9Ky6JA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@adobe/css-tools": {
      "version": "4.4.4",
      "resolved": "https://registry.npmjs.org/@adobe/css-tools/-/css-tools-4.4.4.tgz",
      "integrity": "sha512-Elp+iwUx5rN5+Y8xLt5/GRoG20WGoDCQ/1Fb+1LiGtvwbDavuSk0jhD/eZdckHAuzcDzccnkv+rEjyWfRx18gg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@asamuzakjp/css-color": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@asamuzakjp/css-color/-/css-color-4.1.0.tgz",
      "integrity": "sha512-9xiBAtLn4aNsa4mDnpovJvBn72tNEIACyvlqaNJ+ADemR+yeMJWnBudOi2qGDviJa7SwcDOU/TRh5dnET7qk0w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@csstools/css-calc": "^2.1.4",
        "@csstools/css-color-parser": "^3.1.0",
        "@csstools/css-parser-algorithms": "^3.0.5",
        "@csstools/css-tokenizer": "^3.0.4",
        "lru-cache": "^11.2.2"
      }
    },
    "node_modules/@asamuzakjp/css-color/node_modules/lru-cache": {
      "version": "11.2.4",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-11.2.4.tgz",
      "integrity": "sha512-B5Y16Jr9LB9dHVkh6ZevG+vAbOsNOYCX+sXvFWFu7B3Iz5mijW3zdbMyhsh8ANd2mSWBYdJgnqi+mL7/LrOPYg==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/@asamuzakjp/dom-selector": {
      "version": "6.7.6",
      "resolved": "https://registry.npmjs.org/@asamuzakjp/dom-selector/-/dom-selector-6.7.6.tgz",
      "integrity": "sha512-hBaJER6A9MpdG3WgdlOolHmbOYvSk46y7IQN/1+iqiCuUu6iWdQrs9DGKF8ocqsEqWujWf/V7b7vaDgiUmIvUg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@asamuzakjp/nwsapi": "^2.3.9",
        "bidi-js": "^1.0.3",
        "css-tree": "^3.1.0",
        "is-potential-custom-element-name": "^1.0.1",
        "lru-cache": "^11.2.4"
      }
    },
    "node_modules/@asamuzakjp/dom-selector/node_modules/lru-cache": {
      "version": "11.2.4",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-11.2.4.tgz",
      "integrity": "sha512-B5Y16Jr9LB9dHVkh6ZevG+vAbOsNOYCX+sXvFWFu7B3Iz5mijW3zdbMyhsh8ANd2mSWBYdJgnqi+mL7/LrOPYg==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/@asamuzakjp/nwsapi": {
      "version": "2.3.9",
      "resolved": "https://registry.npmjs.org/@asamuzakjp/nwsapi/-/nwsapi-2.3.9.tgz",
      "integrity": "sha512-n8GuYSrI9bF7FFZ/SjhwevlHc8xaVlb/7HmHelnc/PZXBD2ZR49NnN9sMMuDdEGPeeRQ5d0hqlSlEpgCX3Wl0Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-annotate-as-pure": {
      "version": "7.27.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-annotate-as-pure/-/helper-annotate-as-pure-7.27.3.tgz",
      "integrity": "sha512-fXSwMQqitTGeHLBC08Eq5yXz2m37E4pJX1qAU1+2cNedz/ifv/bVXft90VeSav5nFO61EcNgwr0aJxbyPaWBPg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.3"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-create-class-features-plugin": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-create-class-features-plugin/-/helper-create-class-features-plugin-7.28.5.tgz",
      "integrity": "sha512-q3WC4JfdODypvxArsJQROfupPBq9+lMwjKq7C33GhbFYJsufD0yd/ziwD+hJucLeWsnFPWZjsU2DNFqBPE7jwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.3",
        "@babel/helper-member-expression-to-functions": "^7.28.5",
        "@babel/helper-optimise-call-expression": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1",
        "@babel/traverse": "^7.28.5",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-create-regexp-features-plugin": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-create-regexp-features-plugin/-/helper-create-regexp-features-plugin-7.28.5.tgz",
      "integrity": "sha512-N1EhvLtHzOvj7QQOUCCS3NrPJP8c5W6ZXCHDn7Yialuy1iu4r5EmIYkXlKNqT99Ciw+W0mDqWoR6HWMZlFP3hw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.3",
        "regexpu-core": "^6.3.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-define-polyfill-provider": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-define-polyfill-provider/-/helper-define-polyfill-provider-0.6.5.tgz",
      "integrity": "sha512-uJnGFcPsWQK8fvjgGP5LZUZZsYGIoPeRjSF5PGwrelYgq7Q15/Ft9NGFp1zglwgIv//W0uG4BevRuSJRyylZPg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "debug": "^4.4.1",
        "lodash.debounce": "^4.0.8",
        "resolve": "^1.22.10"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-member-expression-to-functions": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-member-expression-to-functions/-/helper-member-expression-to-functions-7.28.5.tgz",
      "integrity": "sha512-cwM7SBRZcPCLgl8a7cY0soT1SptSzAlMH39vwiRpOQkJlh53r5hdHwLSCZpQdVLT39sZt+CRpNwYG4Y2v77atg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-optimise-call-expression": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-optimise-call-expression/-/helper-optimise-call-expression-7.27.1.tgz",
      "integrity": "sha512-URMGH08NzYFhubNSGJrpUEphGKQwMQYBySzat5cAByY1/YgIRkULnIy3tAMeszlL/so2HbeilYloUmSpd7GdVw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-remap-async-to-generator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-remap-async-to-generator/-/helper-remap-async-to-generator-7.27.1.tgz",
      "integrity": "sha512-7fiA521aVw8lSPeI4ZOD3vRFkoqkJcS+z4hFo82bFSH/2tNd6eJ5qCVMS5OzDmZh/kaHQeBaeyxK6wljcPtveA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.1",
        "@babel/helper-wrap-function": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-replace-supers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-replace-supers/-/helper-replace-supers-7.27.1.tgz",
      "integrity": "sha512-7EHz6qDZc8RYS5ElPoShMheWvEgERonFCs7IAonWLLUTXW59DP14bCZt89/GKyreYn8g3S83m21FelHKbeDCKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-member-expression-to-functions": "^7.27.1",
        "@babel/helper-optimise-call-expression": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-skip-transparent-expression-wrappers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-skip-transparent-expression-wrappers/-/helper-skip-transparent-expression-wrappers-7.27.1.tgz",
      "integrity": "sha512-Tub4ZKEXqbPjXgWLl2+3JpQAYBJ8+ikpQ2Ocj/q/r0LwE3UhENh7EUabyHjz2kCEsrRY83ew2DQdHluuiDQFzg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-wrap-function": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-wrap-function/-/helper-wrap-function-7.28.3.tgz",
      "integrity": "sha512-zdf983tNfLZFletc0RRXYrHrucBEg95NIFMkn6K9dbeMYnsgHaSBGcQqdsCSStG2PYwRre0Qc2NNSCXbG+xc6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.3",
        "@babel/types": "^7.28.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-firefox-class-in-computed-class-key": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-firefox-class-in-computed-class-key/-/plugin-bugfix-firefox-class-in-computed-class-key-7.28.5.tgz",
      "integrity": "sha512-87GDMS3tsmMSi/3bWOte1UblL+YUTFMV8SZPZ2eSEL17s74Cw/l63rR6NmGVKMYW2GYi85nE+/d6Hw5N0bEk2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-safari-class-field-initializer-scope": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-safari-class-field-initializer-scope/-/plugin-bugfix-safari-class-field-initializer-scope-7.27.1.tgz",
      "integrity": "sha512-qNeq3bCKnGgLkEXUuFry6dPlGfCdQNZbn7yUAPCInwAJHMU7THJfrBSozkcWq5sNM6RcF3S8XyQL2A52KNR9IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression/-/plugin-bugfix-safari-id-destructuring-collision-in-function-expression-7.27.1.tgz",
      "integrity": "sha512-g4L7OYun04N1WyqMNjldFwlfPCLVkgB54A/YCXICZYBsvJJE3kByKv9c9+R/nAfmIfjl2rKYLNyMHboYbZaWaA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining/-/plugin-bugfix-v8-spread-parameters-in-optional-chaining-7.27.1.tgz",
      "integrity": "sha512-oO02gcONcD5O1iTLi/6frMJBIwWEHceWGSGqrpCmEL8nogiS6J9PBlE48CaK20/Jx1LuRml9aDftLgdjXT8+Cw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1",
        "@babel/plugin-transform-optional-chaining": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.13.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly/-/plugin-bugfix-v8-static-class-fields-redefine-readonly-7.28.3.tgz",
      "integrity": "sha512-b6YTX108evsvE4YgWyQ921ZAFFQm3Bn+CA3+ZXlNVnPhx+UfsVURoPjfGAPCjBgrqo30yX/C2nZGX96DxvR9Iw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-proposal-private-property-in-object": {
      "version": "7.21.0-placeholder-for-preset-env.2",
      "resolved": "https://registry.npmjs.org/@babel/plugin-proposal-private-property-in-object/-/plugin-proposal-private-property-in-object-7.21.0-placeholder-for-preset-env.2.tgz",
      "integrity": "sha512-SOSkfJDddaM7mak6cPEpswyTRnuRltl429hMraQEglW+OkovnCzsiszTmsrlY//qLFjCpQDFRvjdm2wA5pPm9w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-assertions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-assertions/-/plugin-syntax-import-assertions-7.27.1.tgz",
      "integrity": "sha512-UT/Jrhw57xg4ILHLFnzFpPDlMbcdEicaAtjPQpbj9wa8T4r5KVWCimHcL/460g8Ht0DMxDyjsLgiWSkVjnwPFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-attributes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-attributes/-/plugin-syntax-import-attributes-7.27.1.tgz",
      "integrity": "sha512-oFT0FrKHgF53f4vOsZGi2Hh3I35PfSmVs4IBFLFj4dnafP+hIWDLg3VyKmUHfLoLHlyxY4C7DGtmHuJgn+IGww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-unicode-sets-regex": {
      "version": "7.18.6",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-unicode-sets-regex/-/plugin-syntax-unicode-sets-regex-7.18.6.tgz",
      "integrity": "sha512-727YkEAPwSIQTv5im8QHz3upqp92JTWhidIC81Tdx4VJYIte/VndKf1qKrfnnhPLiPghStWfvC/iFaMCQu7Nqg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.18.6",
        "@babel/helper-plugin-utils": "^7.18.6"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-arrow-functions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-arrow-functions/-/plugin-transform-arrow-functions-7.27.1.tgz",
      "integrity": "sha512-8Z4TGic6xW70FKThA5HYEKKyBpOOsucTOD1DjU3fZxDg+K3zBJcXMFnt/4yQiZnf5+MiOMSXQ9PaEK/Ilh1DeA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-async-generator-functions": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-async-generator-functions/-/plugin-transform-async-generator-functions-7.28.0.tgz",
      "integrity": "sha512-BEOdvX4+M765icNPZeidyADIvQ1m1gmunXufXxvRESy/jNNyfovIqUyE7MVgGBjWktCoJlzvFA1To2O4ymIO3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-remap-async-to-generator": "^7.27.1",
        "@babel/traverse": "^7.28.0"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-async-to-generator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-async-to-generator/-/plugin-transform-async-to-generator-7.27.1.tgz",
      "integrity": "sha512-NREkZsZVJS4xmTr8qzE5y8AfIPqsdQfRuUiLRTEzb7Qii8iFWCyDKaUV2c0rCuh4ljDZ98ALHP/PetiBV2nddA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-remap-async-to-generator": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-block-scoped-functions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-block-scoped-functions/-/plugin-transform-block-scoped-functions-7.27.1.tgz",
      "integrity": "sha512-cnqkuOtZLapWYZUYM5rVIdv1nXYuFVIltZ6ZJ7nIj585QsjKM5dhL2Fu/lICXZ1OyIAFc7Qy+bvDAtTXqGrlhg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-block-scoping": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-block-scoping/-/plugin-transform-block-scoping-7.28.5.tgz",
      "integrity": "sha512-45DmULpySVvmq9Pj3X9B+62Xe+DJGov27QravQJU1LLcapR6/10i+gYVAucGGJpHBp5mYxIMK4nDAT/QDLr47g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-class-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-class-properties/-/plugin-transform-class-properties-7.27.1.tgz",
      "integrity": "sha512-D0VcalChDMtuRvJIu3U/fwWjf8ZMykz5iZsg77Nuj821vCKI3zCyRLwRdWbsuJ/uRwZhZ002QtCqIkwC/ZkvbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-class-static-block": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-class-static-block/-/plugin-transform-class-static-block-7.28.3.tgz",
      "integrity": "sha512-LtPXlBbRoc4Njl/oh1CeD/3jC+atytbnf/UqLoqTDcEYGUPj022+rvfkbDYieUrSj3CaV4yHDByPE+T2HwfsJg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.28.3",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.12.0"
      }
    },
    "node_modules/@babel/plugin-transform-classes": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-classes/-/plugin-transform-classes-7.28.4.tgz",
      "integrity": "sha512-cFOlhIYPBv/iBoc+KS3M6et2XPtbT2HiCRfBXWtfpc9OAyostldxIf9YAYB6ypURBBbx+Qv6nyrLzASfJe+hBA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-globals": "^7.28.0",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1",
        "@babel/traverse": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-computed-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-computed-properties/-/plugin-transform-computed-properties-7.27.1.tgz",
      "integrity": "sha512-lj9PGWvMTVksbWiDT2tW68zGS/cyo4AkZ/QTp0sQT0mjPopCmrSkzxeXkznjqBxzDI6TclZhOJbBmbBLjuOZUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/template": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-destructuring": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-destructuring/-/plugin-transform-destructuring-7.28.5.tgz",
      "integrity": "sha512-Kl9Bc6D0zTUcFUvkNuQh4eGXPKKNDOJQXVyyM4ZAQPMveniJdxi8XMJwLo+xSoW3MIq81bD33lcUe9kZpl0MCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-dotall-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-dotall-regex/-/plugin-transform-dotall-regex-7.27.1.tgz",
      "integrity": "sha512-gEbkDVGRvjj7+T1ivxrfgygpT7GUd4vmODtYpbs0gZATdkX8/iSnOtZSxiZnsgm1YjTgjI6VKBGSJJevkrclzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-duplicate-keys": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-duplicate-keys/-/plugin-transform-duplicate-keys-7.27.1.tgz",
      "integrity": "sha512-MTyJk98sHvSs+cvZ4nOauwTTG1JeonDjSGvGGUNHreGQns+Mpt6WX/dVzWBHgg+dYZhkC4X+zTDfkTU+Vy9y7Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-duplicate-named-capturing-groups-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-duplicate-named-capturing-groups-regex/-/plugin-transform-duplicate-named-capturing-groups-regex-7.27.1.tgz",
      "integrity": "sha512-hkGcueTEzuhB30B3eJCbCYeCaaEQOmQR0AdvzpD4LoN0GXMWzzGSuRrxR2xTnCrvNbVwK9N6/jQ92GSLfiZWoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-dynamic-import": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-dynamic-import/-/plugin-transform-dynamic-import-7.27.1.tgz",
      "integrity": "sha512-MHzkWQcEmjzzVW9j2q8LGjwGWpG2mjwaaB0BNQwst3FIjqsg8Ct/mIZlvSPJvfi9y2AC8mi/ktxbFVL9pZ1I4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-explicit-resource-management": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-explicit-resource-management/-/plugin-transform-explicit-resource-management-7.28.0.tgz",
      "integrity": "sha512-K8nhUcn3f6iB+P3gwCv/no7OdzOZQcKchW6N389V6PD8NUWKZHzndOd9sPDVbMoBsbmjMqlB4L9fm+fEFNVlwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.0"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-exponentiation-operator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-exponentiation-operator/-/plugin-transform-exponentiation-operator-7.28.5.tgz",
      "integrity": "sha512-D4WIMaFtwa2NizOp+dnoFjRez/ClKiC2BqqImwKd1X28nqBtZEyCYJ2ozQrrzlxAFrcrjxo39S6khe9RNDlGzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-export-namespace-from": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-export-namespace-from/-/plugin-transform-export-namespace-from-7.27.1.tgz",
      "integrity": "sha512-tQvHWSZ3/jH2xuq/vZDy0jNn+ZdXJeM8gHvX4lnJmsc3+50yPlWdZXIc5ay+umX+2/tJIqHqiEqcJvxlmIvRvQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-for-of": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-for-of/-/plugin-transform-for-of-7.27.1.tgz",
      "integrity": "sha512-BfbWFFEJFQzLCQ5N8VocnCtA8J1CLkNTe2Ms2wocj75dd6VpiqS5Z5quTYcUoo4Yq+DN0rtikODccuv7RU81sw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-function-name": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-function-name/-/plugin-transform-function-name-7.27.1.tgz",
      "integrity": "sha512-1bQeydJF9Nr1eBCMMbC+hdwmRlsv5XYOMu03YSWFwNs0HsAmtSxxF1fyuYPqemVldVyFmlCU7w8UE14LupUSZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-json-strings": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-json-strings/-/plugin-transform-json-strings-7.27.1.tgz",
      "integrity": "sha512-6WVLVJiTjqcQauBhn1LkICsR2H+zm62I3h9faTDKt1qP4jn2o72tSvqMwtGFKGTpojce0gJs+76eZ2uCHRZh0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-literals/-/plugin-transform-literals-7.27.1.tgz",
      "integrity": "sha512-0HCFSepIpLTkLcsi86GG3mTUzxV5jpmbv97hTETW3yzrAij8aqlD36toB1D0daVFJM8NK6GvKO0gslVQmm+zZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-logical-assignment-operators": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-logical-assignment-operators/-/plugin-transform-logical-assignment-operators-7.28.5.tgz",
      "integrity": "sha512-axUuqnUTBuXyHGcJEVVh9pORaN6wC5bYfE7FGzPiaWa3syib9m7g+/IT/4VgCOe2Upef43PHzeAvcrVek6QuuA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-member-expression-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-member-expression-literals/-/plugin-transform-member-expression-literals-7.27.1.tgz",
      "integrity": "sha512-hqoBX4dcZ1I33jCSWcXrP+1Ku7kdqXf1oeah7ooKOIiAdKQ+uqftgCFNOSzA5AMS2XIHEYeGFg4cKRCdpxzVOQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-amd": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-amd/-/plugin-transform-modules-amd-7.27.1.tgz",
      "integrity": "sha512-iCsytMg/N9/oFq6n+gFTvUYDZQOMK5kEdeYxmxt91fcJGycfxVP9CnrxoliM0oumFERba2i8ZtwRUCMhvP1LnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-commonjs": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-commonjs/-/plugin-transform-modules-commonjs-7.27.1.tgz",
      "integrity": "sha512-OJguuwlTYlN0gBZFRPqwOGNWssZjfIUdS7HMYtN8c1KmwpwHFBwTeFZrg9XZa+DFTitWOW5iTAG7tyCUPsCCyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-systemjs": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-systemjs/-/plugin-transform-modules-systemjs-7.28.5.tgz",
      "integrity": "sha512-vn5Jma98LCOeBy/KpeQhXcV2WZgaRUtjwQmjoBuLNlOmkg0fB5pdvYVeWRYI69wWKwK2cD1QbMiUQnoujWvrew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5",
        "@babel/traverse": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-umd": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-umd/-/plugin-transform-modules-umd-7.27.1.tgz",
      "integrity": "sha512-iQBE/xC5BV1OxJbp6WG7jq9IWiD+xxlZhLrdwpPkTX3ydmXdvoCpyfJN7acaIBZaOqTfr76pgzqBJflNbeRK+w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-named-capturing-groups-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-named-capturing-groups-regex/-/plugin-transform-named-capturing-groups-regex-7.27.1.tgz",
      "integrity": "sha512-SstR5JYy8ddZvD6MhV0tM/j16Qds4mIpJTOd1Yu9J9pJjH93bxHECF7pgtc28XvkzTD6Pxcm/0Z73Hvk7kb3Ng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-new-target": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-new-target/-/plugin-transform-new-target-7.27.1.tgz",
      "integrity": "sha512-f6PiYeqXQ05lYq3TIfIDu/MtliKUbNwkGApPUvyo6+tc7uaR4cPjPe7DFPr15Uyycg2lZU6btZ575CuQoYh7MQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-nullish-coalescing-operator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-nullish-coalescing-operator/-/plugin-transform-nullish-coalescing-operator-7.27.1.tgz",
      "integrity": "sha512-aGZh6xMo6q9vq1JGcw58lZ1Z0+i0xB2x0XaauNIUXd6O1xXc3RwoWEBlsTQrY4KQ9Jf0s5rgD6SiNkaUdJegTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-numeric-separator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-numeric-separator/-/plugin-transform-numeric-separator-7.27.1.tgz",
      "integrity": "sha512-fdPKAcujuvEChxDBJ5c+0BTaS6revLV7CJL08e4m3de8qJfNIuCc2nc7XJYOjBoTMJeqSmwXJ0ypE14RCjLwaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-object-rest-spread": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-object-rest-spread/-/plugin-transform-object-rest-spread-7.28.4.tgz",
      "integrity": "sha512-373KA2HQzKhQCYiRVIRr+3MjpCObqzDlyrM6u4I201wL8Mp2wHf7uB8GhDwis03k2ti8Zr65Zyyqs1xOxUF/Ew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.0",
        "@babel/plugin-transform-parameters": "^7.27.7",
        "@babel/traverse": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-object-super": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-object-super/-/plugin-transform-object-super-7.27.1.tgz",
      "integrity": "sha512-SFy8S9plRPbIcxlJ8A6mT/CxFdJx/c04JEctz4jf8YZaVS2px34j7NXRrlGlHkN/M2gnpL37ZpGRGVFLd3l8Ng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-optional-catch-binding": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-optional-catch-binding/-/plugin-transform-optional-catch-binding-7.27.1.tgz",
      "integrity": "sha512-txEAEKzYrHEX4xSZN4kJ+OfKXFVSWKB2ZxM9dpcE3wT7smwkNmXo5ORRlVzMVdJbD+Q8ILTgSD7959uj+3Dm3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-optional-chaining": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-optional-chaining/-/plugin-transform-optional-chaining-7.28.5.tgz",
      "integrity": "sha512-N6fut9IZlPnjPwgiQkXNhb+cT8wQKFlJNqcZkWlcTqkcqx6/kU4ynGmLFoa4LViBSirn05YAwk+sQBbPfxtYzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-parameters": {
      "version": "7.27.7",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-parameters/-/plugin-transform-parameters-7.27.7.tgz",
      "integrity": "sha512-qBkYTYCb76RRxUM6CcZA5KRu8K4SM8ajzVeUgVdMVO9NN9uI/GaVmBg/WKJJGnNokV9SY8FxNOVWGXzqzUidBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-private-methods": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-private-methods/-/plugin-transform-private-methods-7.27.1.tgz",
      "integrity": "sha512-10FVt+X55AjRAYI9BrdISN9/AQWHqldOeZDUoLyif1Kn05a56xVBXb8ZouL8pZ9jem8QpXaOt8TS7RHUIS+GPA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-private-property-in-object": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-private-property-in-object/-/plugin-transform-private-property-in-object-7.27.1.tgz",
      "integrity": "sha512-5J+IhqTi1XPa0DXF83jYOaARrX+41gOewWbkPyjMNRDqgOCqdffGh8L3f/Ek5utaEBZExjSAzcyjmV9SSAWObQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.1",
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-property-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-property-literals/-/plugin-transform-property-literals-7.27.1.tgz",
      "integrity": "sha512-oThy3BCuCha8kDZ8ZkgOg2exvPYUlprMukKQXI1r1pJ47NCvxfkEy8vK+r/hT9nF0Aa4H1WUPZZjHTFtAhGfmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-regenerator": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-regenerator/-/plugin-transform-regenerator-7.28.4.tgz",
      "integrity": "sha512-+ZEdQlBoRg9m2NnzvEeLgtvBMO4tkFBw5SQIUgLICgTrumLoU7lr+Oghi6km2PFj+dbUt2u1oby2w3BDO9YQnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-regexp-modifiers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-regexp-modifiers/-/plugin-transform-regexp-modifiers-7.27.1.tgz",
      "integrity": "sha512-TtEciroaiODtXvLZv4rmfMhkCv8jx3wgKpL68PuiPh2M4fvz5jhsA7697N1gMvkvr/JTF13DrFYyEbY9U7cVPA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-reserved-words": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-reserved-words/-/plugin-transform-reserved-words-7.27.1.tgz",
      "integrity": "sha512-V2ABPHIJX4kC7HegLkYoDpfg9PVmuWy/i6vUM5eGK22bx4YVFD3M5F0QQnWQoDs6AGsUWTVOopBiMFQgHaSkVw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-shorthand-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-shorthand-properties/-/plugin-transform-shorthand-properties-7.27.1.tgz",
      "integrity": "sha512-N/wH1vcn4oYawbJ13Y/FxcQrWk63jhfNa7jef0ih7PHSIHX2LB7GWE1rkPrOnka9kwMxb6hMl19p7lidA+EHmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-spread": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-spread/-/plugin-transform-spread-7.27.1.tgz",
      "integrity": "sha512-kpb3HUqaILBJcRFVhFUs6Trdd4mkrzcGXss+6/mxUd273PfbWqSDHRzMT2234gIg2QYfAjvXLSquP1xECSg09Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-sticky-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-sticky-regex/-/plugin-transform-sticky-regex-7.27.1.tgz",
      "integrity": "sha512-lhInBO5bi/Kowe2/aLdBAawijx+q1pQzicSgnkB6dUPc1+RC8QmJHKf2OjvU+NZWitguJHEaEmbV6VWEouT58g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-template-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-template-literals/-/plugin-transform-template-literals-7.27.1.tgz",
      "integrity": "sha512-fBJKiV7F2DxZUkg5EtHKXQdbsbURW3DZKQUWphDum0uRP6eHGGa/He9mc0mypL680pb+e/lDIthRohlv8NCHkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-typeof-symbol": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-typeof-symbol/-/plugin-transform-typeof-symbol-7.27.1.tgz",
      "integrity": "sha512-RiSILC+nRJM7FY5srIyc4/fGIwUhyDuuBSdWn4y6yT6gm652DpCHZjIipgn6B7MQ1ITOUnAKWixEUjQRIBIcLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-escapes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-escapes/-/plugin-transform-unicode-escapes-7.27.1.tgz",
      "integrity": "sha512-Ysg4v6AmF26k9vpfFuTZg8HRfVWzsh1kVfowA23y9j/Gu6dOuahdUVhkLqpObp3JIv27MLSii6noRnuKN8H0Mg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-property-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-property-regex/-/plugin-transform-unicode-property-regex-7.27.1.tgz",
      "integrity": "sha512-uW20S39PnaTImxp39O5qFlHLS9LJEmANjMG7SxIhap8rCHqu0Ik+tLEPX5DKmHn6CsWQ7j3lix2tFOa5YtL12Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-regex/-/plugin-transform-unicode-regex-7.27.1.tgz",
      "integrity": "sha512-xvINq24TRojDuyt6JGtHmkVkrfVV3FPT16uytxImLeBZqW3/H52yN+kM1MGuyPkIQxrzKwPHs5U/MP3qKyzkGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-sets-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-sets-regex/-/plugin-transform-unicode-sets-regex-7.27.1.tgz",
      "integrity": "sha512-EtkOujbc4cgvb0mlpQefi4NTPBzhSIevblFevACNLUspmrALgmEBdL/XfnyyITfd8fKBZrZys92zOWcik7j9Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/preset-env": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/preset-env/-/preset-env-7.28.5.tgz",
      "integrity": "sha512-S36mOoi1Sb6Fz98fBfE+UZSpYw5mJm0NUHtIKrOuNcqeFauy1J6dIvXm2KRVKobOSaGq4t/hBXdN4HGU3wL9Wg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-validator-option": "^7.27.1",
        "@babel/plugin-bugfix-firefox-class-in-computed-class-key": "^7.28.5",
        "@babel/plugin-bugfix-safari-class-field-initializer-scope": "^7.27.1",
        "@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression": "^7.27.1",
        "@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining": "^7.27.1",
        "@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly": "^7.28.3",
        "@babel/plugin-proposal-private-property-in-object": "7.21.0-placeholder-for-preset-env.2",
        "@babel/plugin-syntax-import-assertions": "^7.27.1",
        "@babel/plugin-syntax-import-attributes": "^7.27.1",
        "@babel/plugin-syntax-unicode-sets-regex": "^7.18.6",
        "@babel/plugin-transform-arrow-functions": "^7.27.1",
        "@babel/plugin-transform-async-generator-functions": "^7.28.0",
        "@babel/plugin-transform-async-to-generator": "^7.27.1",
        "@babel/plugin-transform-block-scoped-functions": "^7.27.1",
        "@babel/plugin-transform-block-scoping": "^7.28.5",
        "@babel/plugin-transform-class-properties": "^7.27.1",
        "@babel/plugin-transform-class-static-block": "^7.28.3",
        "@babel/plugin-transform-classes": "^7.28.4",
        "@babel/plugin-transform-computed-properties": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.5",
        "@babel/plugin-transform-dotall-regex": "^7.27.1",
        "@babel/plugin-transform-duplicate-keys": "^7.27.1",
        "@babel/plugin-transform-duplicate-named-capturing-groups-regex": "^7.27.1",
        "@babel/plugin-transform-dynamic-import": "^7.27.1",
        "@babel/plugin-transform-explicit-resource-management": "^7.28.0",
        "@babel/plugin-transform-exponentiation-operator": "^7.28.5",
        "@babel/plugin-transform-export-namespace-from": "^7.27.1",
        "@babel/plugin-transform-for-of": "^7.27.1",
        "@babel/plugin-transform-function-name": "^7.27.1",
        "@babel/plugin-transform-json-strings": "^7.27.1",
        "@babel/plugin-transform-literals": "^7.27.1",
        "@babel/plugin-transform-logical-assignment-operators": "^7.28.5",
        "@babel/plugin-transform-member-expression-literals": "^7.27.1",
        "@babel/plugin-transform-modules-amd": "^7.27.1",
        "@babel/plugin-transform-modules-commonjs": "^7.27.1",
        "@babel/plugin-transform-modules-systemjs": "^7.28.5",
        "@babel/plugin-transform-modules-umd": "^7.27.1",
        "@babel/plugin-transform-named-capturing-groups-regex": "^7.27.1",
        "@babel/plugin-transform-new-target": "^7.27.1",
        "@babel/plugin-transform-nullish-coalescing-operator": "^7.27.1",
        "@babel/plugin-transform-numeric-separator": "^7.27.1",
        "@babel/plugin-transform-object-rest-spread": "^7.28.4",
        "@babel/plugin-transform-object-super": "^7.27.1",
        "@babel/plugin-transform-optional-catch-binding": "^7.27.1",
        "@babel/plugin-transform-optional-chaining": "^7.28.5",
        "@babel/plugin-transform-parameters": "^7.27.7",
        "@babel/plugin-transform-private-methods": "^7.27.1",
        "@babel/plugin-transform-private-property-in-object": "^7.27.1",
        "@babel/plugin-transform-property-literals": "^7.27.1",
        "@babel/plugin-transform-regenerator": "^7.28.4",
        "@babel/plugin-transform-regexp-modifiers": "^7.27.1",
        "@babel/plugin-transform-reserved-words": "^7.27.1",
        "@babel/plugin-transform-shorthand-properties": "^7.27.1",
        "@babel/plugin-transform-spread": "^7.27.1",
        "@babel/plugin-transform-sticky-regex": "^7.27.1",
        "@babel/plugin-transform-template-literals": "^7.27.1",
        "@babel/plugin-transform-typeof-symbol": "^7.27.1",
        "@babel/plugin-transform-unicode-escapes": "^7.27.1",
        "@babel/plugin-transform-unicode-property-regex": "^7.27.1",
        "@babel/plugin-transform-unicode-regex": "^7.27.1",
        "@babel/plugin-transform-unicode-sets-regex": "^7.27.1",
        "@babel/preset-modules": "0.1.6-no-external-plugins",
        "babel-plugin-polyfill-corejs2": "^0.4.14",
        "babel-plugin-polyfill-corejs3": "^0.13.0",
        "babel-plugin-polyfill-regenerator": "^0.6.5",
        "core-js-compat": "^3.43.0",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/preset-modules": {
      "version": "0.1.6-no-external-plugins",
      "resolved": "https://registry.npmjs.org/@babel/preset-modules/-/preset-modules-0.1.6-no-external-plugins.tgz",
      "integrity": "sha512-HrcgcIESLm9aIR842yhJ5RWan/gebQUJ6E/E5+rf0y9o6oj7w0Br+sWuL6kEQ/o/AdfvR1Je9jG18/gnpwjEyA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.0.0",
        "@babel/types": "^7.4.4",
        "esutils": "^2.0.2"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.28.4.tgz",
      "integrity": "sha512-Q/N6JNWvIvPnLDvjlE1OUBLPQHH6l3CltCEsHIujp45zQUSSh8K+gHnaEX45yAT1nyngnINhvWtzN+Nb9D8RAQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@csstools/color-helpers": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/@csstools/color-helpers/-/color-helpers-5.1.0.tgz",
      "integrity": "sha512-S11EXWJyy0Mz5SYvRmY8nJYTFFd1LCNV+7cXyAgQtOOuzb4EsgfqDufL+9esx72/eLhsRdGZwaldu/h+E4t4BA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT-0",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@csstools/css-calc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@csstools/css-calc/-/css-calc-2.1.4.tgz",
      "integrity": "sha512-3N8oaj+0juUw/1H3YwmDDJXCgTB1gKU6Hc/bB502u9zR0q2vd786XJH9QfrKIEgFlZmhZiq6epXl4rHqhzsIgQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "@csstools/css-parser-algorithms": "^3.0.5",
        "@csstools/css-tokenizer": "^3.0.4"
      }
    },
    "node_modules/@csstools/css-color-parser": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/@csstools/css-color-parser/-/css-color-parser-3.1.0.tgz",
      "integrity": "sha512-nbtKwh3a6xNVIp/VRuXV64yTKnb1IjTAEEh3irzS+HkKjAOYLTGNb9pmVNntZ8iVBHcWDA2Dof0QtPgFI1BaTA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "@csstools/color-helpers": "^5.1.0",
        "@csstools/css-calc": "^2.1.4"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "@csstools/css-parser-algorithms": "^3.0.5",
        "@csstools/css-tokenizer": "^3.0.4"
      }
    },
    "node_modules/@csstools/css-parser-algorithms": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/@csstools/css-parser-algorithms/-/css-parser-algorithms-3.0.5.tgz",
      "integrity": "sha512-DaDeUkXZKjdGhgYaHNJTV9pV7Y9B3b644jCLs9Upc3VeNGg6LWARAT6O+Q+/COo+2gg/bM5rhpMAtf70WqfBdQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "@csstools/css-tokenizer": "^3.0.4"
      }
    },
    "node_modules/@csstools/css-syntax-patches-for-csstree": {
      "version": "1.0.14",
      "resolved": "https://registry.npmjs.org/@csstools/css-syntax-patches-for-csstree/-/css-syntax-patches-for-csstree-1.0.14.tgz",
      "integrity": "sha512-zSlIxa20WvMojjpCSy8WrNpcZ61RqfTfX3XTaOeVlGJrt/8HF3YbzgFZa01yTbT4GWQLwfTcC3EB8i3XnB647Q==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT-0",
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "postcss": "^8.4"
      }
    },
    "node_modules/@csstools/css-tokenizer": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@csstools/css-tokenizer/-/css-tokenizer-3.0.4.tgz",
      "integrity": "sha512-Vd/9EVDiu6PPJt9yAh6roZP6El1xHrdvIVGjyBsHR0RYwNHgL7FJPyIIW4fANJNG6FtyZfvlRPpFI4ZM/lubvw==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/csstools"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/csstools"
        }
      ],
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@dnd-kit/accessibility": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/@dnd-kit/accessibility/-/accessibility-3.1.1.tgz",
      "integrity": "sha512-2P+YgaXF+gRsIihwwY1gCsQSYnu9Zyj2py8kY5fFvUM1qm2WA2u639R6YNVfU4GWr+ZM5mqEsfHZZLoRONbemw==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8.0"
      }
    },
    "node_modules/@dnd-kit/core": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/@dnd-kit/core/-/core-6.3.1.tgz",
      "integrity": "sha512-xkGBRQQab4RLwgXxoqETICr6S5JlogafbhNsidmrkVv2YRs5MLwpjoF2qpiGjQt8S9AoxtIV603s0GIUpY5eYQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@dnd-kit/accessibility": "^3.1.1",
        "@dnd-kit/utilities": "^3.2.2",
        "tslib": "^2.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8.0",
        "react-dom": ">=16.8.0"
      }
    },
    "node_modules/@dnd-kit/sortable": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/@dnd-kit/sortable/-/sortable-8.0.0.tgz",
      "integrity": "sha512-U3jk5ebVXe1Lr7c2wU7SBZjcWdQP+j7peHJfCspnA81enlu88Mgd7CC8Q+pub9ubP7eKVETzJW+IBAhsqbSu/g==",
      "license": "MIT",
      "dependencies": {
        "@dnd-kit/utilities": "^3.2.2",
        "tslib": "^2.0.0"
      },
      "peerDependencies": {
        "@dnd-kit/core": "^6.1.0",
        "react": ">=16.8.0"
      }
    },
    "node_modules/@dnd-kit/utilities": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/@dnd-kit/utilities/-/utilities-3.2.2.tgz",
      "integrity": "sha512-+MKAJEOfaBe5SmV6t34p80MMKhjvUz0vRrvVJbPT0WElzaOJ/1xs+D+KDv+tD/NE5ujfrChEcshd4fLn0wpiqg==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8.0"
      }
    },
    "node_modules/@emnapi/core": {
      "version": "1.7.1",
      "resolved": "https://registry.npmjs.org/@emnapi/core/-/core-1.7.1.tgz",
      "integrity": "sha512-o1uhUASyo921r2XtHYOHy7gdkGLge8ghBEQHMWmyJFoXlpU58kIrhhN3w26lpQb6dspetweapMn2CSNwQ8I4wg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/wasi-threads": "1.1.0",
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/runtime": {
      "version": "1.7.1",
      "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.7.1.tgz",
      "integrity": "sha512-PVtJr5CmLwYAU9PZDMITZoR5iAOShYREoR45EyyLrbntV50mdePTgUn4AmOw90Ifcj+x2kRjdzr1HP3RrNiHGA==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/wasi-threads": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@emnapi/wasi-threads/-/wasi-threads-1.1.0.tgz",
      "integrity": "sha512-WI0DdZ8xFSbgMjR1sFsKABJ/C5OnRrjT06JXbZKexJGrDuPTzZdDYfFlsgcCXCyf+suG5QU2e/y1Wo2V/OapLQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.1.tgz",
      "integrity": "sha512-S26Stp4zCy88tH94QbBv3XCuzRQiZ9yXofEILmglYTh/Ug/a9/umqvgFtYBAo3Lp0nsI/5/qH1CCrbdK3AP1Tw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@isaacs/balanced-match": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/@isaacs/balanced-match/-/balanced-match-4.0.1.tgz",
      "integrity": "sha512-yzMTt9lEb8Gv7zRioUilSglI0c0smZ9k5D65677DLWLtWJaXIS3CqcGyUFByYKlnUj6TkjLVs54fBl6+TiGQDQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/@isaacs/brace-expansion": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/@isaacs/brace-expansion/-/brace-expansion-5.0.0.tgz",
      "integrity": "sha512-ZT55BDLV0yv0RBm2czMiZ+SqCGO7AvmOM3G/w2xhVPH+te0aKgFjmBvGlL1dH+ql2tgGO3MVrbb3jCKyvpgnxA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@isaacs/balanced-match": "^4.0.1"
      },
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/@isaacs/cliui": {
      "version": "8.0.2",
      "resolved": "https://registry.npmjs.org/@isaacs/cliui/-/cliui-8.0.2.tgz",
      "integrity": "sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^5.1.2",
        "string-width-cjs": "npm:string-width@^4.2.0",
        "strip-ansi": "^7.0.1",
        "strip-ansi-cjs": "npm:strip-ansi@^6.0.1",
        "wrap-ansi": "^8.1.0",
        "wrap-ansi-cjs": "npm:wrap-ansi@^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/source-map": {
      "version": "0.3.11",
      "resolved": "https://registry.npmjs.org/@jridgewell/source-map/-/source-map-0.3.11.tgz",
      "integrity": "sha512-ZMp1V8ZFcPG5dIWnQLr3NSI1MiCU7UETdS/A0G8V/XWHvJv3ZsFqutJn1Y5RPmAPX6F3BiE397OqveU/9NCuIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.25"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@kurkle/color": {
      "version": "0.3.4",
      "resolved": "https://registry.npmjs.org/@kurkle/color/-/color-0.3.4.tgz",
      "integrity": "sha512-M5UknZPHRu3DEDWoipU6sE8PdkZ6Z/S+v4dD+Ke8IaNlpdSQah50lz1KtcFBa2vsdOnwbbnxJwVM4wty6udA5w==",
      "license": "MIT"
    },
    "node_modules/@napi-rs/wasm-runtime": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-1.0.7.tgz",
      "integrity": "sha512-SeDnOO0Tk7Okiq6DbXmmBODgOAb9dp9gjlphokTUxmt8U3liIP1ZsozBahH69j/RJv+Rfs6IwUKHTgQYJ/HBAw==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.5.0",
        "@emnapi/runtime": "^1.5.0",
        "@tybys/wasm-util": "^0.10.1"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@oxc-project/runtime": {
      "version": "0.97.0",
      "resolved": "https://registry.npmjs.org/@oxc-project/runtime/-/runtime-0.97.0.tgz",
      "integrity": "sha512-yH0zw7z+jEws4dZ4IUKoix5Lh3yhqIJWF9Dc8PWvhpo7U7O+lJrv7ZZL4BeRO0la8LBQFwcCewtLBnVV7hPe/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@oxc-project/types": {
      "version": "0.97.0",
      "resolved": "https://registry.npmjs.org/@oxc-project/types/-/types-0.97.0.tgz",
      "integrity": "sha512-lxmZK4xFrdvU0yZiDwgVQTCvh2gHWBJCBk5ALsrtsBWhs0uDIi+FTOnXRQeQfs304imdvTdaakT/lqwQ8hkOXQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/Boshen"
      }
    },
    "node_modules/@playwright/test": {
      "version": "1.57.0",
      "resolved": "https://registry.npmjs.org/@playwright/test/-/test-1.57.0.tgz",
      "integrity": "sha512-6TyEnHgd6SArQO8UO2OMTxshln3QMWBtPGrOCgs3wVEmQmwyuNtB10IZMfmYDE0riwNR1cu4q+pPcxMVtaG3TA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "playwright": "1.57.0"
      },
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@rolldown/binding-android-arm64": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-android-arm64/-/binding-android-arm64-1.0.0-beta.50.tgz",
      "integrity": "sha512-XlEkrOIHLyGT3avOgzfTFSjG+f+dZMw+/qd+Y3HLN86wlndrB/gSimrJCk4gOhr1XtRtEKfszpadI3Md4Z4/Ag==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-darwin-arm64": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-darwin-arm64/-/binding-darwin-arm64-1.0.0-beta.50.tgz",
      "integrity": "sha512-+JRqKJhoFlt5r9q+DecAGPLZ5PxeLva+wCMtAuoFMWPoZzgcYrr599KQ+Ix0jwll4B4HGP43avu9My8KtSOR+w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-darwin-x64": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-darwin-x64/-/binding-darwin-x64-1.0.0-beta.50.tgz",
      "integrity": "sha512-fFXDjXnuX7/gQZQm/1FoivVtRcyAzdjSik7Eo+9iwPQ9EgtA5/nB2+jmbzaKtMGG3q+BnZbdKHCtOacmNrkIDA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-freebsd-x64": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-freebsd-x64/-/binding-freebsd-x64-1.0.0-beta.50.tgz",
      "integrity": "sha512-F1b6vARy49tjmT/hbloplzgJS7GIvwWZqt+tAHEstCh0JIh9sa8FAMVqEmYxDviqKBaAI8iVvUREm/Kh/PD26Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-linux-arm-gnueabihf": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-linux-arm-gnueabihf/-/binding-linux-arm-gnueabihf-1.0.0-beta.50.tgz",
      "integrity": "sha512-U6cR76N8T8M6lHj7EZrQ3xunLPxSvYYxA8vJsBKZiFZkT8YV4kjgCO3KwMJL0NOjQCPGKyiXO07U+KmJzdPGRw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-linux-arm64-gnu": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-linux-arm64-gnu/-/binding-linux-arm64-gnu-1.0.0-beta.50.tgz",
      "integrity": "sha512-ONgyjofCrrE3bnh5GZb8EINSFyR/hmwTzZ7oVuyUB170lboza1VMCnb8jgE6MsyyRgHYmN8Lb59i3NKGrxrYjw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-linux-arm64-musl": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-linux-arm64-musl/-/binding-linux-arm64-musl-1.0.0-beta.50.tgz",
      "integrity": "sha512-L0zRdH2oDPkmB+wvuTl+dJbXCsx62SkqcEqdM+79LOcB+PxbAxxjzHU14BuZIQdXcAVDzfpMfaHWzZuwhhBTcw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-linux-x64-gnu": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-linux-x64-gnu/-/binding-linux-x64-gnu-1.0.0-beta.50.tgz",
      "integrity": "sha512-gyoI8o/TGpQd3OzkJnh1M2kxy1Bisg8qJ5Gci0sXm9yLFzEXIFdtc4EAzepxGvrT2ri99ar5rdsmNG0zP0SbIg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-linux-x64-musl": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-linux-x64-musl/-/binding-linux-x64-musl-1.0.0-beta.50.tgz",
      "integrity": "sha512-zti8A7M+xFDpKlghpcCAzyOi+e5nfUl3QhU023ce5NCgUxRG5zGP2GR9LTydQ1rnIPwZUVBWd4o7NjZDaQxaXA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-openharmony-arm64": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-openharmony-arm64/-/binding-openharmony-arm64-1.0.0-beta.50.tgz",
      "integrity": "sha512-eZUssog7qljrrRU9Mi0eqYEPm3Ch0UwB+qlWPMKSUXHNqhm3TvDZarJQdTevGEfu3EHAXJvBIe0YFYr0TPVaMA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-wasm32-wasi": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-wasm32-wasi/-/binding-wasm32-wasi-1.0.0-beta.50.tgz",
      "integrity": "sha512-nmCN0nIdeUnmgeDXiQ+2HU6FT162o+rxnF7WMkBm4M5Ds8qTU7Dzv2Wrf22bo4ftnlrb2hKK6FSwAJSAe2FWLg==",
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@napi-rs/wasm-runtime": "^1.0.7"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@rolldown/binding-win32-arm64-msvc": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-win32-arm64-msvc/-/binding-win32-arm64-msvc-1.0.0-beta.50.tgz",
      "integrity": "sha512-7kcNLi7Ua59JTTLvbe1dYb028QEPaJPJQHqkmSZ5q3tJueUeb6yjRtx8mw4uIqgWZcnQHAR3PrLN4XRJxvgIkA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-win32-ia32-msvc": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-win32-ia32-msvc/-/binding-win32-ia32-msvc-1.0.0-beta.50.tgz",
      "integrity": "sha512-lL70VTNvSCdSZkDPPVMwWn/M2yQiYvSoXw9hTLgdIWdUfC3g72UaruezusR6ceRuwHCY1Ayu2LtKqXkBO5LIwg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/binding-win32-x64-msvc": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/binding-win32-x64-msvc/-/binding-win32-x64-msvc-1.0.0-beta.50.tgz",
      "integrity": "sha512-4qU4x5DXWB4JPjyTne/wBNPqkbQU8J45bl21geERBKtEittleonioACBL1R0PsBu0Aq21SwMK5a9zdBkWSlQtQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.47",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.47.tgz",
      "integrity": "sha512-8QagwMH3kNCuzD8EWL8R2YPW5e4OrHNSAHRFDdmFqEwEaD/KcNKjVoumo+gP2vW5eKB2UPbM6vTYiGZX0ixLnw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/plugin-babel": {
      "version": "5.3.1",
      "resolved": "https://registry.npmjs.org/@rollup/plugin-babel/-/plugin-babel-5.3.1.tgz",
      "integrity": "sha512-WFfdLWU/xVWKeRQnKmIAQULUI7Il0gZnBIH/ZFO069wYIfPu+8zrfp/KMW0atmELoRDq8FbiP3VCss9MhCut7Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.10.4",
        "@rollup/pluginutils": "^3.1.0"
      },
      "engines": {
        "node": ">= 10.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0",
        "@types/babel__core": "^7.1.9",
        "rollup": "^1.20.0||^2.0.0"
      },
      "peerDependenciesMeta": {
        "@types/babel__core": {
          "optional": true
        }
      }
    },
    "node_modules/@rollup/plugin-node-resolve": {
      "version": "15.3.1",
      "resolved": "https://registry.npmjs.org/@rollup/plugin-node-resolve/-/plugin-node-resolve-15.3.1.tgz",
      "integrity": "sha512-tgg6b91pAybXHJQMAAwW9VuWBO6Thi+q7BCNARLwSqlmsHz0XYURtGvh/AuwSADXSI4h/2uHbs7s4FzlZDGSGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@rollup/pluginutils": "^5.0.1",
        "@types/resolve": "1.20.2",
        "deepmerge": "^4.2.2",
        "is-module": "^1.0.0",
        "resolve": "^1.22.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "rollup": "^2.78.0||^3.0.0||^4.0.0"
      },
      "peerDependenciesMeta": {
        "rollup": {
          "optional": true
        }
      }
    },
    "node_modules/@rollup/plugin-node-resolve/node_modules/@rollup/pluginutils": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/@rollup/pluginutils/-/pluginutils-5.3.0.tgz",
      "integrity": "sha512-5EdhGZtnu3V88ces7s53hhfK5KSASnJZv8Lulpc04cWO3REESroJXg73DFsOmgbU2BhwV0E20bu2IDZb3VKW4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "^1.0.0",
        "estree-walker": "^2.0.2",
        "picomatch": "^4.0.2"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "rollup": "^1.20.0||^2.0.0||^3.0.0||^4.0.0"
      },
      "peerDependenciesMeta": {
        "rollup": {
          "optional": true
        }
      }
    },
    "node_modules/@rollup/plugin-node-resolve/node_modules/estree-walker": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz",
      "integrity": "sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/plugin-replace": {
      "version": "2.4.2",
      "resolved": "https://registry.npmjs.org/@rollup/plugin-replace/-/plugin-replace-2.4.2.tgz",
      "integrity": "sha512-IGcu+cydlUMZ5En85jxHH4qj2hta/11BHq95iHEyb2sbgiN0eCdzvUcHw5gt9pBL5lTi4JDYJ1acCoMGpTvEZg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@rollup/pluginutils": "^3.1.0",
        "magic-string": "^0.25.7"
      },
      "peerDependencies": {
        "rollup": "^1.20.0 || ^2.0.0"
      }
    },
    "node_modules/@rollup/plugin-terser": {
      "version": "0.4.4",
      "resolved": "https://registry.npmjs.org/@rollup/plugin-terser/-/plugin-terser-0.4.4.tgz",
      "integrity": "sha512-XHeJC5Bgvs8LfukDwWZp7yeqin6ns8RTl2B9avbejt6tZqsqvVoWI7ZTQrcNsfKEDWBTnTxM8nMDkO2IFFbd0A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "serialize-javascript": "^6.0.1",
        "smob": "^1.0.0",
        "terser": "^5.17.4"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "rollup": "^2.0.0||^3.0.0||^4.0.0"
      },
      "peerDependenciesMeta": {
        "rollup": {
          "optional": true
        }
      }
    },
    "node_modules/@rollup/pluginutils": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/@rollup/pluginutils/-/pluginutils-3.1.0.tgz",
      "integrity": "sha512-GksZ6pr6TpIjHm8h9lSQ8pi8BE9VeubNT0OMJ3B5uZJ8pz73NPiqOtCog/x2/QzM1ENChPKxMDhiQuRHsqc+lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "0.0.39",
        "estree-walker": "^1.0.1",
        "picomatch": "^2.2.2"
      },
      "engines": {
        "node": ">= 8.0.0"
      },
      "peerDependencies": {
        "rollup": "^1.20.0||^2.0.0"
      }
    },
    "node_modules/@rollup/pluginutils/node_modules/@types/estree": {
      "version": "0.0.39",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-0.0.39.tgz",
      "integrity": "sha512-EYNwp3bU+98cpU4lAWYYL7Zz+2gryWH1qbdDTidVd6hkiR6weksdbMadyXKXNPEkQFhXM+hVO9ZygomHXp+AIw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/pluginutils/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/@standard-schema/spec": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@standard-schema/spec/-/spec-1.0.0.tgz",
      "integrity": "sha512-m2bOd0f2RT9k8QJx1JN85cZYyH1RqFBdlwtkSlf4tBDYLCiiZnv1fIIwacK6cqwXavOydf0NPToMQgpKq+dVlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@supabase/auth-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/auth-js/-/auth-js-2.87.1.tgz",
      "integrity": "sha512-6RDeOf5TVoaXFtEstN188ykp3pXLZaU9qoAWfx8dc50FFAAqt+kcFJ96V0IvSmcpb4mDAWcpTJ7BegmVDn/WIw==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/functions-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/functions-js/-/functions-js-2.87.1.tgz",
      "integrity": "sha512-rWmYo4gRD0XAjMhYDlz7IH67bp4TIQ1UE4VqwIQtl1gGPwtLDq6wcRnu7jLKlXx0Gtrknw/eoiHYG9//XrCTzQ==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/postgrest-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/postgrest-js/-/postgrest-js-2.87.1.tgz",
      "integrity": "sha512-Yzu5eL3iGmZW0C/8x+vEojAOou63FI9oVw8HI8YOq63+5yM8g8aGh7Y1E2vbXFb7+gHGsPqLnaC6dPhrYt7qBA==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/realtime-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/realtime-js/-/realtime-js-2.87.1.tgz",
      "integrity": "sha512-XvLtEznxmYZXA7LYuy5zbSXpSYjDLJq2wQeRh3MzON2OR4U8Kq+RtPz2E2Wi8HEzvBfsc+nNu1TG8LQ9+3DRkA==",
      "license": "MIT",
      "dependencies": {
        "@types/phoenix": "^1.6.6",
        "@types/ws": "^8.18.1",
        "tslib": "2.8.1",
        "ws": "^8.18.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/storage-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/storage-js/-/storage-js-2.87.1.tgz",
      "integrity": "sha512-0Uc8tNV4yzkNNmp1inpXru0RB4a7ECq05G2S6BDvSpMxTxJrDVJ4vVDwyhqB8ZZ+O9+8prHaQYoByQeuDnwpFQ==",
      "license": "MIT",
      "dependencies": {
        "iceberg-js": "^0.8.1",
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/supabase-js": {
      "version": "2.87.1",
      "resolved": "https://registry.npmjs.org/@supabase/supabase-js/-/supabase-js-2.87.1.tgz",
      "integrity": "sha512-tVgqZqnHZVum584KuUKSQZgcy6ZkhVd6gG8QWg2QfIXH9HmXdamauxdVsLXwaNPJxEdOyfAfwIyi5XUsiVYWtg==",
      "license": "MIT",
      "dependencies": {
        "@supabase/auth-js": "2.87.1",
        "@supabase/functions-js": "2.87.1",
        "@supabase/postgrest-js": "2.87.1",
        "@supabase/realtime-js": "2.87.1",
        "@supabase/storage-js": "2.87.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@surma/rollup-plugin-off-main-thread": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/@surma/rollup-plugin-off-main-thread/-/rollup-plugin-off-main-thread-2.2.3.tgz",
      "integrity": "sha512-lR8q/9W7hZpMWweNiAKU7NQerBnzQQLvi8qnTDU/fxItPhtZVMbPV3lbCwjhIlNBe9Bbr5V+KHshvWmVSG9cxQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "ejs": "^3.1.6",
        "json5": "^2.2.0",
        "magic-string": "^0.25.0",
        "string.prototype.matchall": "^4.0.6"
      }
    },
    "node_modules/@tanstack/query-core": {
      "version": "5.90.12",
      "resolved": "https://registry.npmjs.org/@tanstack/query-core/-/query-core-5.90.12.tgz",
      "integrity": "sha512-T1/8t5DhV/SisWjDnaiU2drl6ySvsHj1bHBCWNXd+/T+Hh1cf6JodyEYMd5sgwm+b/mETT4EV3H+zCVczCU5hg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/tannerlinsley"
      }
    },
    "node_modules/@tanstack/react-query": {
      "version": "5.90.12",
      "resolved": "https://registry.npmjs.org/@tanstack/react-query/-/react-query-5.90.12.tgz",
      "integrity": "sha512-graRZspg7EoEaw0a8faiUASCyJrqjKPdqJ9EwuDRUF9mEYJ1YPczI9H+/agJ0mOJkPCJDk0lsz5QTrLZ/jQ2rg==",
      "license": "MIT",
      "dependencies": {
        "@tanstack/query-core": "5.90.12"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/tannerlinsley"
      },
      "peerDependencies": {
        "react": "^18 || ^19"
      }
    },
    "node_modules/@testing-library/dom": {
      "version": "10.4.1",
      "resolved": "https://registry.npmjs.org/@testing-library/dom/-/dom-10.4.1.tgz",
      "integrity": "sha512-o4PXJQidqJl82ckFaXUeoAW+XysPLauYI43Abki5hABd853iMhitooc6znOnczgbTYmEP6U6/y1ZyKAIsvMKGg==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@babel/code-frame": "^7.10.4",
        "@babel/runtime": "^7.12.5",
        "@types/aria-query": "^5.0.1",
        "aria-query": "5.3.0",
        "dom-accessibility-api": "^0.5.9",
        "lz-string": "^1.5.0",
        "picocolors": "1.1.1",
        "pretty-format": "^27.0.2"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@testing-library/jest-dom": {
      "version": "6.9.1",
      "resolved": "https://registry.npmjs.org/@testing-library/jest-dom/-/jest-dom-6.9.1.tgz",
      "integrity": "sha512-zIcONa+hVtVSSep9UT3jZ5rizo2BsxgyDYU7WFD5eICBE7no3881HGeb/QkGfsJs6JTkY1aQhT7rIPC7e+0nnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@adobe/css-tools": "^4.4.0",
        "aria-query": "^5.0.0",
        "css.escape": "^1.5.1",
        "dom-accessibility-api": "^0.6.3",
        "picocolors": "^1.1.1",
        "redent": "^3.0.0"
      },
      "engines": {
        "node": ">=14",
        "npm": ">=6",
        "yarn": ">=1"
      }
    },
    "node_modules/@testing-library/jest-dom/node_modules/dom-accessibility-api": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/dom-accessibility-api/-/dom-accessibility-api-0.6.3.tgz",
      "integrity": "sha512-7ZgogeTnjuHbo+ct10G9Ffp0mif17idi0IyWNVA/wcwcm7NPOD/WEHVP3n7n3MhXqxoIYm8d6MuZohYWIZ4T3w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@testing-library/react": {
      "version": "16.3.0",
      "resolved": "https://registry.npmjs.org/@testing-library/react/-/react-16.3.0.tgz",
      "integrity": "sha512-kFSyxiEDwv1WLl2fgsq6pPBbw5aWKrsY2/noi1Id0TK0UParSF62oFQFGHXIyaG4pp2tEub/Zlel+fjjZILDsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.12.5"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "@testing-library/dom": "^10.0.0",
        "@types/react": "^18.0.0 || ^19.0.0",
        "@types/react-dom": "^18.0.0 || ^19.0.0",
        "react": "^18.0.0 || ^19.0.0",
        "react-dom": "^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@testing-library/user-event": {
      "version": "14.6.1",
      "resolved": "https://registry.npmjs.org/@testing-library/user-event/-/user-event-14.6.1.tgz",
      "integrity": "sha512-vq7fv0rnt+QTXgPxr5Hjc210p6YKq2kmdziLgnsZGgLJ9e6VAShx1pACLuRjd/AS/sr7phAR58OIIpf0LlmQNw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      },
      "peerDependencies": {
        "@testing-library/dom": ">=7.21.4"
      }
    },
    "node_modules/@tybys/wasm-util": {
      "version": "0.10.1",
      "resolved": "https://registry.npmjs.org/@tybys/wasm-util/-/wasm-util-0.10.1.tgz",
      "integrity": "sha512-9tTaPJLSiejZKx+Bmog4uSubteqTvFrVrURwkmHixBo0G4seD0zUxp98E1DzUBJxLQ3NPwXrGKDiVjwx/DpPsg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@types/aria-query": {
      "version": "5.0.4",
      "resolved": "https://registry.npmjs.org/@types/aria-query/-/aria-query-5.0.4.tgz",
      "integrity": "sha512-rfT93uj5s0PRL7EzccGMs3brplhcrghnDoV26NqKhCAS1hVo+WdNsPvE/yb6ilfr5hi2MEk6d5EWJTKdxg8jVw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/chai": {
      "version": "5.2.3",
      "resolved": "https://registry.npmjs.org/@types/chai/-/chai-5.2.3.tgz",
      "integrity": "sha512-Mw558oeA9fFbv65/y4mHtXDs9bPnFMZAL/jxdPFUpOHHIXX91mcgEHbS5Lahr+pwZFR8A7GQleRWeI6cGFC2UA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/deep-eql": "*",
        "assertion-error": "^2.0.1"
      }
    },
    "node_modules/@types/deep-eql": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/deep-eql/-/deep-eql-4.0.2.tgz",
      "integrity": "sha512-c9h9dVVMigMPc4bwTvC5dxqtqJZwQPePsWjPlpSOnojbor6pGqdk541lfA7AqFQr5pB1BRdq0juY9db81BwyFw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "22.19.2",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-22.19.2.tgz",
      "integrity": "sha512-LPM2G3Syo1GLzXLGJAKdqoU35XvrWzGJ21/7sgZTUpbkBaOasTj8tjwn6w+hCkqaa1TfJ/w67rJSwYItlJ2mYw==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/pako": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@types/pako/-/pako-2.0.4.tgz",
      "integrity": "sha512-VWDCbrLeVXJM9fihYodcLiIv0ku+AlOa/TQ1SvYOaBuyrSKgEcro95LJyIsJ4vSo6BXIxOKxiJAat04CmST9Fw==",
      "license": "MIT"
    },
    "node_modules/@types/phoenix": {
      "version": "1.6.7",
      "resolved": "https://registry.npmjs.org/@types/phoenix/-/phoenix-1.6.7.tgz",
      "integrity": "sha512-oN9ive//QSBkf19rfDv45M7eZPi0eEXylht2OLEXicu5b4KoQ1OzXIw+xDSGWxSxe1JmepRR/ZH283vsu518/Q==",
      "license": "MIT"
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/raf": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/@types/raf/-/raf-3.4.3.tgz",
      "integrity": "sha512-c4YAvMedbPZ5tEyxzQdMoOhhJ4RD3rngZIdwC2/qDN3d7JpEhB6fiBRKVY1lg5B7Wk+uPBjn5f39j1/2MY1oOw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/@types/react": {
      "version": "18.3.27",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.27.tgz",
      "integrity": "sha512-cisd7gxkzjBKU2GgdYrTdtQx1SORymWyaAFhaxQPK9bYO9ot3Y5OikQRvY0VYQtvwjeQnizCINJAenh/V7MK2w==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.7",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.7.tgz",
      "integrity": "sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "peerDependencies": {
        "@types/react": "^18.0.0"
      }
    },
    "node_modules/@types/resolve": {
      "version": "1.20.2",
      "resolved": "https://registry.npmjs.org/@types/resolve/-/resolve-1.20.2.tgz",
      "integrity": "sha512-60BCwRFOZCQhDncwQdxxeOEEkbc5dIMccYLwbxsS4TUNeVECQ/pBJ0j09mrHOl/JJvpRPGwO9SvE4nR2Nb/a4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/trusted-types": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/@types/trusted-types/-/trusted-types-2.0.7.tgz",
      "integrity": "sha512-ScaPdn1dQczgbl0QFTeTOmVHFULt394XJgOQNoyVhZ6r2vLnMLJfBPd53SB52T/3G36VI1/g2MZaX0cwDuXsfw==",
      "devOptional": true,
      "license": "MIT"
    },
    "node_modules/@types/ws": {
      "version": "8.18.1",
      "resolved": "https://registry.npmjs.org/@types/ws/-/ws-8.18.1.tgz",
      "integrity": "sha512-ThVF6DCVhA8kUGy+aazFQ4kXQ7E1Ty7A3ypFOe0IcJV8O/M511G99AW24irKrW56Wt44yG9+ij8FaqoBGkuBXg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.49.0.tgz",
      "integrity": "sha512-JXij0vzIaTtCwu6SxTh8qBc66kmf1xs7pI4UOiMDFVct6q86G0Zs7KRcEoJgY3Cav3x5Tq0MF5jwgpgLqgKG3A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.49.0",
        "@typescript-eslint/type-utils": "8.49.0",
        "@typescript-eslint/utils": "8.49.0",
        "@typescript-eslint/visitor-keys": "8.49.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.49.0",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.49.0.tgz",
      "integrity": "sha512-N9lBGA9o9aqb1hVMc9hzySbhKibHmB+N3IpoShyV6HyQYRGIhlrO5rQgttypi+yEeKsKI4idxC8Jw6gXKD4THA==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.49.0",
        "@typescript-eslint/types": "8.49.0",
        "@typescript-eslint/typescript-estree": "8.49.0",
        "@typescript-eslint/visitor-keys": "8.49.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.49.0.tgz",
      "integrity": "sha512-/wJN0/DKkmRUMXjZUXYZpD1NEQzQAAn9QWfGwo+Ai8gnzqH7tvqS7oNVdTjKqOcPyVIdZdyCMoqN66Ia789e7g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.49.0",
        "@typescript-eslint/types": "^8.49.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.49.0.tgz",
      "integrity": "sha512-npgS3zi+/30KSOkXNs0LQXtsg9ekZ8OISAOLGWA/ZOEn0ZH74Ginfl7foziV8DT+D98WfQ5Kopwqb/PZOaIJGg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.49.0",
        "@typescript-eslint/visitor-keys": "8.49.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.49.0.tgz",
      "integrity": "sha512-8prixNi1/6nawsRYxet4YOhnbW+W9FK/bQPxsGB1D3ZrDzbJ5FXw5XmzxZv82X3B+ZccuSxo/X8q9nQ+mFecWA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.49.0.tgz",
      "integrity": "sha512-KTExJfQ+svY8I10P4HdxKzWsvtVnsuCifU5MvXrRwoP2KOlNZ9ADNEWWsQTJgMxLzS5VLQKDjkCT/YzgsnqmZg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.49.0",
        "@typescript-eslint/typescript-estree": "8.49.0",
        "@typescript-eslint/utils": "8.49.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.49.0.tgz",
      "integrity": "sha512-e9k/fneezorUo6WShlQpMxXh8/8wfyc+biu6tnAqA81oWrEic0k21RHzP9uqqpyBBeBKu4T+Bsjy9/b8u7obXQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.49.0.tgz",
      "integrity": "sha512-jrLdRuAbPfPIdYNppHJ/D0wN+wwNfJ32YTAm10eJVsFmrVpXQnDWBn8niCSMlWjvml8jsce5E/O+86IQtTbJWA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.49.0",
        "@typescript-eslint/tsconfig-utils": "8.49.0",
        "@typescript-eslint/types": "8.49.0",
        "@typescript-eslint/visitor-keys": "8.49.0",
        "debug": "^4.3.4",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "tinyglobby": "^0.2.15",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.49.0.tgz",
      "integrity": "sha512-N3W7rJw7Rw+z1tRsHZbK395TWSYvufBXumYtEGzypgMUthlg0/hmCImeA8hgO2d2G4pd7ftpxxul2J8OdtdaFA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.49.0",
        "@typescript-eslint/types": "8.49.0",
        "@typescript-eslint/typescript-estree": "8.49.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.49.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.49.0.tgz",
      "integrity": "sha512-LlKaciDe3GmZFphXIc79THF/YYBugZ7FS1pO581E/edlVVNbZKDy93evqmrfQ9/Y4uN0vVhX4iuchq26mK/iiA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.49.0",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-5.1.1.tgz",
      "integrity": "sha512-WQfkSw0QbQ5aJ2CHYw23ZGkqnRwqKHD/KYsMeTkZzPT4Jcf0DcBxBtwMJxnu6E7oxw5+JC6ZAiePgh28uJ1HBA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.5",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.47",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.18.0"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/@vitest/expect": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-4.0.15.tgz",
      "integrity": "sha512-Gfyva9/GxPAWXIWjyGDli9O+waHDC0Q0jaLdFP1qPAUUfo1FEXPXUfUkp3eZA0sSq340vPycSyOlYUeM15Ft1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@standard-schema/spec": "^1.0.0",
        "@types/chai": "^5.2.2",
        "@vitest/spy": "4.0.15",
        "@vitest/utils": "4.0.15",
        "chai": "^6.2.1",
        "tinyrainbow": "^3.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/mocker": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/mocker/-/mocker-4.0.15.tgz",
      "integrity": "sha512-CZ28GLfOEIFkvCFngN8Sfx5h+Se0zN+h4B7yOsPVCcgtiO7t5jt9xQh2E1UkFep+eb9fjyMfuC5gBypwb07fvQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/spy": "4.0.15",
        "estree-walker": "^3.0.3",
        "magic-string": "^0.30.21"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      },
      "peerDependencies": {
        "msw": "^2.4.9",
        "vite": "^6.0.0 || ^7.0.0-0"
      },
      "peerDependenciesMeta": {
        "msw": {
          "optional": true
        },
        "vite": {
          "optional": true
        }
      }
    },
    "node_modules/@vitest/mocker/node_modules/estree-walker": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-3.0.3.tgz",
      "integrity": "sha512-7RUKfXgSMMkzt6ZuXmqapOurLGPPfgj6l9uRZ7lRGolvk0y2yocc35LdcxKC5PQZdn2DMqioAQ2NoWcrTKmm6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "^1.0.0"
      }
    },
    "node_modules/@vitest/mocker/node_modules/magic-string": {
      "version": "0.30.21",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
      "integrity": "sha512-vd2F4YUyEXKGcLHoq+TEyCjxueSeHnFxyyjNp80yg0XV4vUhnDer/lvvlqM/arB5bXQN5K2/3oinyCRyx8T2CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.5"
      }
    },
    "node_modules/@vitest/pretty-format": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/pretty-format/-/pretty-format-4.0.15.tgz",
      "integrity": "sha512-SWdqR8vEv83WtZcrfLNqlqeQXlQLh2iilO1Wk1gv4eiHKjEzvgHb2OVc3mIPyhZE6F+CtfYjNlDJwP5MN6Km7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tinyrainbow": "^3.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/runner": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-4.0.15.tgz",
      "integrity": "sha512-+A+yMY8dGixUhHmNdPUxOh0la6uVzun86vAbuMT3hIDxMrAOmn5ILBHm8ajrqHE0t8R9T1dGnde1A5DTnmi3qw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/utils": "4.0.15",
        "pathe": "^2.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/snapshot": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/snapshot/-/snapshot-4.0.15.tgz",
      "integrity": "sha512-A7Ob8EdFZJIBjLjeO0DZF4lqR6U7Ydi5/5LIZ0xcI+23lYlsYJAfGn8PrIWTYdZQRNnSRlzhg0zyGu37mVdy5g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/pretty-format": "4.0.15",
        "magic-string": "^0.30.21",
        "pathe": "^2.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/snapshot/node_modules/magic-string": {
      "version": "0.30.21",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
      "integrity": "sha512-vd2F4YUyEXKGcLHoq+TEyCjxueSeHnFxyyjNp80yg0XV4vUhnDer/lvvlqM/arB5bXQN5K2/3oinyCRyx8T2CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.5"
      }
    },
    "node_modules/@vitest/spy": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-4.0.15.tgz",
      "integrity": "sha512-+EIjOJmnY6mIfdXtE/bnozKEvTC4Uczg19yeZ2vtCz5Yyb0QQ31QWVQ8hswJ3Ysx/K2EqaNsVanjr//2+P3FHw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/utils": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-4.0.15.tgz",
      "integrity": "sha512-HXjPW2w5dxhTD0dLwtYHDnelK3j8sR8cWIaLxr22evTyY6q8pRCjZSmhRWVjBaOVXChQd6AwMzi9pucorXCPZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/pretty-format": "4.0.15",
        "tinyrainbow": "^3.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/agent-base": {
      "version": "7.1.4",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.4.tgz",
      "integrity": "sha512-MnA+YT8fwfJPgBx3m60MNqakm30XOkyIoH1y6huTQvC0PwZG7ki8NacLBcrPbNoo8vEZy7Jpuk7+jMO+CUovTQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-regex": {
      "version": "6.2.2",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/anymatch/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/aria-query": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/aria-query/-/aria-query-5.3.0.tgz",
      "integrity": "sha512-b0P0sZPKtyu8HkeRAfCq0IfURZK+SuwMjY1UXGBU27wpAiTwQAIlq56IbIO+ytk/JjS1fMR14ee5WBBfKi5J6A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "dequal": "^2.0.3"
      }
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/arraybuffer.prototype.slice": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
      "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.1",
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "is-array-buffer": "^3.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/assertion-error": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-2.0.1.tgz",
      "integrity": "sha512-Izi8RQcffqCeNVgFigKli1ssklIbpHnCYc6AknXGYoB6grJqyeby7jv12JUQgmTAnIDnbck1uxksT4dzN3PWBA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/async": {
      "version": "3.2.6",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.6.tgz",
      "integrity": "sha512-htCUDlxyyCLMgaM3xXg0C0LW2xqfuQ6p05pCEIsXuyQ+a1koYKTuBMzRNwmybfLgvJDMd0r1LTn4+E0Ti6C2AA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async-function": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
      "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/at-least-node": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/at-least-node/-/at-least-node-1.0.0.tgz",
      "integrity": "sha512-+q/t7Ekv1EDY2l6Gda6LLiX14rU9TV20Wa3ofeQmwPFZbOMo9DXrLbOjFaaclkXKWidIaopwAObQDqwWtGUjqg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">= 4.0.0"
      }
    },
    "node_modules/autoprefixer": {
      "version": "10.4.19",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.19.tgz",
      "integrity": "sha512-BaENR2+zBZ8xXhM4pUaKUxlVdxZ0EZhjvbopwnXmxRUfqDmwSpC2lAi/QXvx7NRdPCo1WKEcEF6mV64si1z4Ew==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.23.0",
        "caniuse-lite": "^1.0.30001599",
        "fraction.js": "^4.3.7",
        "normalize-range": "^0.1.2",
        "picocolors": "^1.0.0",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/babel-plugin-polyfill-corejs2": {
      "version": "0.4.14",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-corejs2/-/babel-plugin-polyfill-corejs2-0.4.14.tgz",
      "integrity": "sha512-Co2Y9wX854ts6U8gAAPXfn0GmAyctHuK8n0Yhfjd6t30g7yvKjspvvOo9yG+z52PZRgFErt7Ka2pYnXCjLKEpg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.7",
        "@babel/helper-define-polyfill-provider": "^0.6.5",
        "semver": "^6.3.1"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/babel-plugin-polyfill-corejs3": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-corejs3/-/babel-plugin-polyfill-corejs3-0.13.0.tgz",
      "integrity": "sha512-U+GNwMdSFgzVmfhNm8GJUX88AadB3uo9KpJqS3FaqNIPKgySuvMb+bHPsOmmuWyIcuqZj/pzt1RUIUZns4y2+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-define-polyfill-provider": "^0.6.5",
        "core-js-compat": "^3.43.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/babel-plugin-polyfill-regenerator": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-regenerator/-/babel-plugin-polyfill-regenerator-0.6.5.tgz",
      "integrity": "sha512-ISqQ2frbiNU9vIJkzg7dlPpznPZ4jOiUQ1uSmB0fEHeowtN3COYRsXr/xexn64NpU13P06jc/L5TgiJXOgrbEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-define-polyfill-provider": "^0.6.5"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/base64-arraybuffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/base64-arraybuffer/-/base64-arraybuffer-1.0.2.tgz",
      "integrity": "sha512-I3yl4r9QB5ZRY3XuJVEPfc2XhZO6YweFPI+UovAzn+8/hb3oJ6lnysaFcjVpkCPfVWFUDvoZ8kmVDP7WyRtYtQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6.0"
      }
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.31",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.31.tgz",
      "integrity": "sha512-a28v2eWrrRWPpJSzxc+mKwm0ZtVx/G8SepdQZDArnXYU/XS+IF6mp8aB/4E+hH1tyGCoDo3KlUCdlSxGDsRkAw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/bidi-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/bidi-js/-/bidi-js-1.0.3.tgz",
      "integrity": "sha512-RKshQI1R3YQ+n9YJz2QQ147P66ELpa1FQEg20Dk8oW9t2KgLbpDLLp9aGZ7y8WHSshDknG0bknqGw5/tyCs5tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "require-from-string": "^2.0.2"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.0.tgz",
      "integrity": "sha512-tbydkR/CxfMwelN0vwdP/pLkDwyAASZ+VfWm4EOwlB6SWhx1sYnWLqo8N5j0rAzPfzfRaxt0mM/4wPU/Su84RQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "baseline-browser-mapping": "^2.8.25",
        "caniuse-lite": "^1.0.30001754",
        "electron-to-chromium": "^1.5.249",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.1.4"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001757",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001757.tgz",
      "integrity": "sha512-r0nnL/I28Zi/yjk1el6ilj27tKcdjLsNqAOZr0yVjWPrSQyHgKI2INaEWw21bAQSv2LXRt1XuCS/GomNpWOxsQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/canvg": {
      "version": "3.0.11",
      "resolved": "https://registry.npmjs.org/canvg/-/canvg-3.0.11.tgz",
      "integrity": "sha512-5ON+q7jCTgMp9cjpu4Jo6XbvfYwSB2Ow3kzHKfIyJfaCAOHLbdKPQqGKgfED/R5B+3TFFfe8pegYA+b423SRyA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@babel/runtime": "^7.12.5",
        "@types/raf": "^3.4.0",
        "core-js": "^3.8.3",
        "raf": "^3.4.1",
        "regenerator-runtime": "^0.13.7",
        "rgbcolor": "^1.0.1",
        "stackblur-canvas": "^2.0.0",
        "svg-pathdata": "^6.0.3"
      },
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/chai": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/chai/-/chai-6.2.1.tgz",
      "integrity": "sha512-p4Z49OGG5W/WBCPSS/dH3jQ73kD6tiMmUM+bckNK6Jr5JHMG3k9bg/BvKR8lKmtVBKmOiuVaV2ws8s9oSbwysg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/chart.js": {
      "version": "4.5.1",
      "resolved": "https://registry.npmjs.org/chart.js/-/chart.js-4.5.1.tgz",
      "integrity": "sha512-GIjfiT9dbmHRiYi6Nl2yFCq7kkwdkp1W/lp2J99rX0yo9tgJGn3lKQATztIjb5tVtevcBtIdICNWqlq5+E8/Pw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@kurkle/color": "^0.3.0"
      },
      "engines": {
        "pnpm": ">=8"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/common-tags": {
      "version": "1.8.2",
      "resolved": "https://registry.npmjs.org/common-tags/-/common-tags-1.8.2.tgz",
      "integrity": "sha512-gk/Z852D2Wtb//0I+kRFNKKE9dIIVirjoqPoA1wJU+XePVXZfGeBpk45+A1rKO4Q43prqWBNY/MiIeRLbPWUaA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.1.1.tgz",
      "integrity": "sha512-ei8Aos7ja0weRpFzJnEA9UHJ/7XQmqglbRwnf2ATjcB9Wq874VKH9kfjjirM6UhU2/E5fFYadylyhFldcqSidQ==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/core-js": {
      "version": "3.47.0",
      "resolved": "https://registry.npmjs.org/core-js/-/core-js-3.47.0.tgz",
      "integrity": "sha512-c3Q2VVkGAUyupsjRnaNX6u8Dq2vAdzm9iuPj5FW0fRxzlxgq9Q39MDq10IvmQSpLgHQNyQzQmOo6bgGHmH3NNg==",
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/core-js"
      }
    },
    "node_modules/core-js-compat": {
      "version": "3.47.0",
      "resolved": "https://registry.npmjs.org/core-js-compat/-/core-js-compat-3.47.0.tgz",
      "integrity": "sha512-IGfuznZ/n7Kp9+nypamBhvwdwLsW6KC8IOaURw2doAK5e98AG3acVLdh0woOnEqCfUtS+Vu882JE4k/DAm3ItQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.28.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/core-js"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/crypto-random-string": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/crypto-random-string/-/crypto-random-string-2.0.0.tgz",
      "integrity": "sha512-v1plID3y9r/lPhviJ1wrXpLeyUIGAZ2SHNYTEapm7/8A9nLPoyvVp3RK/EPFqn5kEznyWgYZNsRtYYIWbuG8KA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/css-line-break": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/css-line-break/-/css-line-break-2.1.0.tgz",
      "integrity": "sha512-FHcKFCZcAha3LwfVBhCQbW2nCNbkZXn7KVUJcsT5/P8YmfsVja0FMPJr0B903j/E69HUphKiV9iQArX8SDYA4w==",
      "license": "MIT",
      "dependencies": {
        "utrie": "^1.0.2"
      }
    },
    "node_modules/css-tree": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/css-tree/-/css-tree-3.1.0.tgz",
      "integrity": "sha512-0eW44TGN5SQXU1mWSkKwFstI/22X2bG1nYzZTYMAWjylYURhse752YgbE4Cx46AC+bAvI+/dYTPRk1LqSUnu6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mdn-data": "2.12.2",
        "source-map-js": "^1.0.1"
      },
      "engines": {
        "node": "^10 || ^12.20.0 || ^14.13.0 || >=15.0.0"
      }
    },
    "node_modules/css.escape": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/css.escape/-/css.escape-1.5.1.tgz",
      "integrity": "sha512-YUifsXXuknHlUsmlgyY0PKzgPOr7/FjCePfHNt0jxm83wHZi44VDMQ7/fGNkjY3/jV1MC+1CmZbaHzugyeRtpg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/cssstyle": {
      "version": "5.3.4",
      "resolved": "https://registry.npmjs.org/cssstyle/-/cssstyle-5.3.4.tgz",
      "integrity": "sha512-KyOS/kJMEq5O9GdPnaf82noigg5X5DYn0kZPJTaAsCUaBizp6Xa1y9D4Qoqf/JazEXWuruErHgVXwjN5391ZJw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@asamuzakjp/css-color": "^4.1.0",
        "@csstools/css-syntax-patches-for-csstree": "1.0.14",
        "css-tree": "^3.1.0"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "license": "MIT",
      "peer": true
    },
    "node_modules/data-urls": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/data-urls/-/data-urls-6.0.0.tgz",
      "integrity": "sha512-BnBS08aLUM+DKamupXs3w2tJJoqU+AkaE/+6vQxi/G/DPmIZFJJp9Dkb1kM03AZx8ADehDUZgsNxju3mPXZYIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "whatwg-mimetype": "^4.0.0",
        "whatwg-url": "^15.0.0"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/data-urls/node_modules/tr46": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-6.0.0.tgz",
      "integrity": "sha512-bLVMLPtstlZ4iMQHpFHTR7GAGj2jxi8Dg0s2h2MafAE4uSWF98FC/3MomU51iQAMf8/qDUbKWf5GxuvvVcXEhw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/data-urls/node_modules/webidl-conversions": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-8.0.0.tgz",
      "integrity": "sha512-n4W4YFyz5JzOfQeA8oN7dUYpR+MBP3PIUsn2jLjWXwK5ASUzt0Jc/A5sAUZoCYFJRGF0FBKJ+1JjN43rNdsQzA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/data-urls/node_modules/whatwg-url": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-15.1.0.tgz",
      "integrity": "sha512-2ytDk0kiEj/yu90JOAp44PVPUkO9+jVhyf+SybKlRHSDlvOOZhdPIrr7xTH64l4WixO2cP+wQIcgujkGBPPz6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tr46": "^6.0.0",
        "webidl-conversions": "^8.0.0"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/data-view-buffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
      "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/data-view-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
      "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/inspect-js"
      }
    },
    "node_modules/data-view-byte-offset": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
      "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decimal.js": {
      "version": "10.6.0",
      "resolved": "https://registry.npmjs.org/decimal.js/-/decimal.js-10.6.0.tgz",
      "integrity": "sha512-YpgQiITW3JXGntzdUmyUR1V812Hn8T1YVXhCu+wO3OpS4eU9l4YdD3qjyiKdV6mvV29zapkMeD390UVEf2lkUg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/deepmerge": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/deepmerge/-/deepmerge-4.3.1.tgz",
      "integrity": "sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/dequal": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/dequal/-/dequal-2.0.3.tgz",
      "integrity": "sha512-0je+qPKHEMohvfRTCEo3CrPG6cAzAYgmzKyxRiYSSDkS6eGJdyVJm7WaYA5ECaAD9wLB2T4EEeymA5aFVcYXCA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dom-accessibility-api": {
      "version": "0.5.16",
      "resolved": "https://registry.npmjs.org/dom-accessibility-api/-/dom-accessibility-api-0.5.16.tgz",
      "integrity": "sha512-X7BJ2yElsnOJ30pZF4uIIDfBEVgF4XEBxL9Bxhy6dnrm5hkzqmsWHGTiHqRiITNhMyFLyAiWndIJP7Z1NTteDg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dompurify": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/dompurify/-/dompurify-3.3.0.tgz",
      "integrity": "sha512-r+f6MYR1gGN1eJv0TVQbhA7if/U7P87cdPl3HN5rikqaBSBxLiCb/b9O+2eG0cxz0ghyU+mU1QkbsOwERMYlWQ==",
      "license": "(MPL-2.0 OR Apache-2.0)",
      "optional": true,
      "optionalDependencies": {
        "@types/trusted-types": "^2.0.7"
      }
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
      "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/ejs": {
      "version": "3.1.10",
      "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.10.tgz",
      "integrity": "sha512-UeJmFfOrAQS8OJWPZ4qtgHyWExa088/MtK5UEyoJGFH67cDEXkZSviOiKRCZ4Xij0zxI3JECgYs3oKx+AizQBA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "jake": "^10.8.5"
      },
      "bin": {
        "ejs": "bin/cli.js"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.262",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.262.tgz",
      "integrity": "sha512-NlAsMteRHek05jRUxUR0a5jpjYq9ykk6+kO0yRaMi5moe7u0fVIOeQ3Y30A8dIiWFBNUoQGi1ljb1i5VtS9WQQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/entities": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/entities/-/entities-6.0.1.tgz",
      "integrity": "sha512-aN97NXWF6AWBTahfVOIrB/NShkzi5H7F9r1s9mD3cDj4Ko5f2qhhVoYMibXF7GlLveb/D2ioWay8lxI97Ven3g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.12"
      },
      "funding": {
        "url": "https://github.com/fb55/entities?sponsor=1"
      }
    },
    "node_modules/es-abstract": {
      "version": "1.24.1",
      "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.1.tgz",
      "integrity": "sha512-zHXBLhP+QehSSbsS9Pt23Gg964240DPd6QCf8WpkqEXxQ7fhdZzYsocOr5u7apWonsS5EjZDmTF+/slGMyasvw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.2",
        "arraybuffer.prototype.slice": "^1.0.4",
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "data-view-buffer": "^1.0.2",
        "data-view-byte-length": "^1.0.2",
        "data-view-byte-offset": "^1.0.1",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-set-tostringtag": "^2.1.0",
        "es-to-primitive": "^1.3.0",
        "function.prototype.name": "^1.1.8",
        "get-intrinsic": "^1.3.0",
        "get-proto": "^1.0.1",
        "get-symbol-description": "^1.1.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "internal-slot": "^1.1.0",
        "is-array-buffer": "^3.0.5",
        "is-callable": "^1.2.7",
        "is-data-view": "^1.0.2",
        "is-negative-zero": "^2.0.3",
        "is-regex": "^1.2.1",
        "is-set": "^2.0.3",
        "is-shared-array-buffer": "^1.0.4",
        "is-string": "^1.1.1",
        "is-typed-array": "^1.1.15",
        "is-weakref": "^1.1.1",
        "math-intrinsics": "^1.1.0",
        "object-inspect": "^1.13.4",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.7",
        "own-keys": "^1.0.1",
        "regexp.prototype.flags": "^1.5.4",
        "safe-array-concat": "^1.1.3",
        "safe-push-apply": "^1.0.0",
        "safe-regex-test": "^1.1.0",
        "set-proto": "^1.0.0",
        "stop-iteration-iterator": "^1.1.0",
        "string.prototype.trim": "^1.2.10",
        "string.prototype.trimend": "^1.0.9",
        "string.prototype.trimstart": "^1.0.8",
        "typed-array-buffer": "^1.0.3",
        "typed-array-byte-length": "^1.0.3",
        "typed-array-byte-offset": "^1.0.4",
        "typed-array-length": "^1.0.7",
        "unbox-primitive": "^1.1.0",
        "which-typed-array": "^1.1.19"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-module-lexer": {
      "version": "1.7.0",
      "resolved": "https://registry.npmjs.org/es-module-lexer/-/es-module-lexer-1.7.0.tgz",
      "integrity": "sha512-jEQoCwk8hyb2AZziIOLhDqpm5+2ww5uIE6lkO/6jcOCusfk6LhMHpXXfBLXTZ7Ydyt0j4VoUQv6uGNYbdW+kBA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-to-primitive": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
      "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7",
        "is-date-object": "^1.0.5",
        "is-symbol": "^1.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.1.tgz",
      "integrity": "sha512-BhHmn2yNOFA9H9JmmIVKJmd288g9hrVRDkdoIgRCRuSySRUHH7r/DI6aAXW9T1WwUuY3DFgrcaqB+deURBLR5g==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.1",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-7.0.1.tgz",
      "integrity": "sha512-O0d0m04evaNzEPoSW+59Mezf8Qt0InfgGIBJnpC0h3NH/WjUAR7BIKUfysC6todmtiZ/A0oUVS8Gce0WhBrHsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.24.4",
        "@babel/parser": "^7.24.4",
        "hermes-parser": "^0.25.1",
        "zod": "^3.25.0 || ^4.0.0",
        "zod-validation-error": "^3.5.0 || ^4.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estree-walker": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-1.0.1.tgz",
      "integrity": "sha512-1fMXF3YP4pZZVozF8j/ZLfvnR8NSIljt56UhbZ5PeeDmmGHpgpdwQt7ITlGvYaQukCvuBRMLEiKiYC+oeIg4cg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/expect-type": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/expect-type/-/expect-type-1.3.0.tgz",
      "integrity": "sha512-knvyeauYhqjOYvQ66MznSMs83wmHrCycNEN6Ao+2AeYEfxUIkuiVxdEa1qlGEPK+We3n0THiDciYSsCcgW/DoA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-png": {
      "version": "6.4.0",
      "resolved": "https://registry.npmjs.org/fast-png/-/fast-png-6.4.0.tgz",
      "integrity": "sha512-kAqZq1TlgBjZcLr5mcN6NP5Rv4V2f22z00c3g8vRrwkcqjerx7BEhPbOnWCPqaHUl2XWQBJQvOT/FQhdMT7X/Q==",
      "license": "MIT",
      "dependencies": {
        "@types/pako": "^2.0.3",
        "iobuffer": "^5.3.2",
        "pako": "^2.1.0"
      }
    },
    "node_modules/fast-uri": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/fast-uri/-/fast-uri-3.1.0.tgz",
      "integrity": "sha512-iPeeDKJSWf4IEOasVVrknXpaBV0IApz/gp7S2bb7Z4Lljbl2MGJRqInZiUrQwV16cpzw/D3S5j5Julj/gT52AA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/fastify"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/fastify"
        }
      ],
      "license": "BSD-3-Clause"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/fflate": {
      "version": "0.8.2",
      "resolved": "https://registry.npmjs.org/fflate/-/fflate-0.8.2.tgz",
      "integrity": "sha512-cPJU47OaAoCbg0pBvzsgpTPhmhqI5eJjh/JIu8tPj5q+T7iLvW/JAYUqmE7KOB4R1ZyEhzBaIQpQpardBF5z8A==",
      "license": "MIT"
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/filelist": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/filelist/-/filelist-1.0.4.tgz",
      "integrity": "sha512-w1cEuf3S+DrLCQL7ET6kz+gmlJdbq9J7yXCSjK/OZCPA+qEN1WyF4ZAf0YYJa4/shHJra2t/d/r8SV4Ji+x+8Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "minimatch": "^5.0.1"
      }
    },
    "node_modules/filelist/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/filelist/node_modules/minimatch": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
      "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/foreground-child": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/foreground-child/-/foreground-child-3.3.1.tgz",
      "integrity": "sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "cross-spawn": "^7.0.6",
        "signal-exit": "^4.0.1"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/fraction.js": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-4.3.7.tgz",
      "integrity": "sha512-ZsDfxO51wGAXREY55a7la9LScWpwv9RxIrYABrlvOFBlH/ShPnrtsXeuUIfXKKOVicNxQ+o8JTbJvjS4M89yew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "patreon",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/framer-motion": {
      "version": "12.23.24",
      "resolved": "https://registry.npmjs.org/framer-motion/-/framer-motion-12.23.24.tgz",
      "integrity": "sha512-HMi5HRoRCTou+3fb3h9oTLyJGBxHfW+HnNE25tAXOvVx/IvwMHK0cx7IR4a2ZU6sh3IX1Z+4ts32PcYBOqka8w==",
      "license": "MIT",
      "dependencies": {
        "motion-dom": "^12.23.23",
        "motion-utils": "^12.23.6",
        "tslib": "^2.4.0"
      },
      "peerDependencies": {
        "@emotion/is-prop-valid": "*",
        "react": "^18.0.0 || ^19.0.0",
        "react-dom": "^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/is-prop-valid": {
          "optional": true
        },
        "react": {
          "optional": true
        },
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/fs-extra": {
      "version": "9.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-9.1.0.tgz",
      "integrity": "sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "at-least-node": "^1.0.0",
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/function.prototype.name": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
      "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "functions-have-names": "^1.2.3",
        "hasown": "^2.0.2",
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generator-function": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/generator-function/-/generator-function-2.0.1.tgz",
      "integrity": "sha512-SFdFmIJi+ybC0vjlHN0ZGVGHc3lgE0DxPAT0djjVg+kjOnSqclqmj0KQ7ykTOLP6YxoqOvuAODGdcHJn+43q3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-own-enumerable-property-symbols": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/get-own-enumerable-property-symbols/-/get-own-enumerable-property-symbols-3.0.2.tgz",
      "integrity": "sha512-I0UBV/XOz1XkIJHEUDMZAbzCThU/H8DxmSfmdGcKPnVhu2VfFqr34jr9777IyaTYvxjedWhqVIilEDsCdP5G6g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-symbol-description": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
      "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/glob": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/glob/-/glob-11.1.0.tgz",
      "integrity": "sha512-vuNwKSaKiqm7g0THUBu2x7ckSs3XJLXE+2ssL7/MfTGPLLcrJQ/4Uq1CjPTtO5cCIiRxqvN6Twy1qOwhL0Xjcw==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "foreground-child": "^3.3.1",
        "jackspeak": "^4.1.1",
        "minimatch": "^10.1.1",
        "minipass": "^7.1.2",
        "package-json-from-dist": "^1.0.0",
        "path-scurry": "^2.0.0"
      },
      "bin": {
        "glob": "dist/esm/bin.mjs"
      },
      "engines": {
        "node": "20 || >=22"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/glob/node_modules/minimatch": {
      "version": "10.1.1",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-10.1.1.tgz",
      "integrity": "sha512-enIvLvRAFZYXJzkCYG5RKmPfrFArdLv+R+lbQ53BmIMLIry74bjKzX6iHAm8WYamJkhSSEabrWN5D97XnKObjQ==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "@isaacs/brace-expansion": "^5.0.0"
      },
      "engines": {
        "node": "20 || >=22"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/globals": {
      "version": "16.5.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.5.0.tgz",
      "integrity": "sha512-c/c15i26VrJ4IRt5Z89DnIzCGDn9EcebibhAOjw5ibqEHsE1wLUgkPn9RDmNcUKyU87GeaL633nyJ+pplFR2ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
      "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.2.1",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/goober": {
      "version": "2.1.18",
      "resolved": "https://registry.npmjs.org/goober/-/goober-2.1.18.tgz",
      "integrity": "sha512-2vFqsaDVIT9Gz7N6kAL++pLpp41l3PfDuusHcjnGLfR6+huZkl6ziX+zgVC3ZxpqWhzH6pyDdGrCeDhMIvwaxw==",
      "license": "MIT",
      "peerDependencies": {
        "csstype": "^3.0.10"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
      "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hermes-estree": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-estree/-/hermes-estree-0.25.1.tgz",
      "integrity": "sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/hermes-parser": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-parser/-/hermes-parser-0.25.1.tgz",
      "integrity": "sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hermes-estree": "0.25.1"
      }
    },
    "node_modules/html-encoding-sniffer": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/html-encoding-sniffer/-/html-encoding-sniffer-4.0.0.tgz",
      "integrity": "sha512-Y22oTqIU4uuPgEemfz7NDJz6OeKf12Lsu+QC+s3BVpda64lTiMYCyGwg5ki4vFxkMwQdeZDl2adZoqUgdFuTgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "whatwg-encoding": "^3.1.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/html2canvas": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/html2canvas/-/html2canvas-1.4.1.tgz",
      "integrity": "sha512-fPU6BHNpsyIhr8yyMpTLLxAbkaK8ArIBcmZIRiBLiDhjeqvXolaEmDGmELFuX9I4xDcaKKcJl+TKZLqruBbmWA==",
      "license": "MIT",
      "dependencies": {
        "css-line-break": "^2.1.0",
        "text-segmentation": "^1.0.3"
      },
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/http-proxy-agent": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-7.0.2.tgz",
      "integrity": "sha512-T1gkAiYYDWYx3V5Bmyu7HcfcvL7mUrTWiM6yOfa3PIphViJ/gFPbvidQ+veqSOHci/PxBcDabeUNCzpOODJZig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.6.tgz",
      "integrity": "sha512-vK9P5/iUfdl95AI+JVyUuIcVtd4ofvtrOr3HNtM2yxC9bnMbEdp3x01OhQNnjb8IJYi38VlTE3mBXwcfvywuSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/iceberg-js": {
      "version": "0.8.1",
      "resolved": "https://registry.npmjs.org/iceberg-js/-/iceberg-js-0.8.1.tgz",
      "integrity": "sha512-1dhVQZXhcHje7798IVM+xoo/1ZdVfzOMIc8/rgVSijRK38EDqOJoGula9N/8ZI5RD8QTxNQtK/Gozpr+qUqRRA==",
      "license": "MIT",
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/idb": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/idb/-/idb-7.1.1.tgz",
      "integrity": "sha512-gchesWBzyvGHRO9W8tzUWFDycow5gwjvFKfyV9FF32Y7F50yZMp7mP+T2mJIWFx49zicqyC4uefHM17o6xKIVQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/indent-string": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/indent-string/-/indent-string-4.0.0.tgz",
      "integrity": "sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/iobuffer": {
      "version": "5.4.0",
      "resolved": "https://registry.npmjs.org/iobuffer/-/iobuffer-5.4.0.tgz",
      "integrity": "sha512-DRebOWuqDvxunfkNJAlc3IzWIPD5xVxwUNbHr7xKB8E6aLJxIPfNX3CoMJghcFjpv6RWQsrcJbghtEwSPoJqMA==",
      "license": "MIT"
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-async-function": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
      "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "async-function": "^1.0.0",
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-data-view": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
      "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "is-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-finalizationregistry": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
      "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-generator-function": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.2.tgz",
      "integrity": "sha512-upqt1SkGkODW9tsGNG5mtXTXtECizwtS2kA161M+gJPc1xdb/Ax629af6YrTwcOeQHbewrPNlE5Dx7kzvXTizA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.4",
        "generator-function": "^2.0.0",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-module": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/is-module/-/is-module-1.0.0.tgz",
      "integrity": "sha512-51ypPSPCoTEIN9dy5Oy+h4pShgJmPCygKfyRCISBI+JoWT/2oJvK8QPxmwv7b/p239jXrm9M1mlQbyKJ5A152g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-negative-zero": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
      "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-obj": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/is-obj/-/is-obj-1.0.1.tgz",
      "integrity": "sha512-l4RyHgRqGN4Y3+9JHVrNqO+tN0rV5My76uW5/nuO4K1b6vw5G8d/cmFjP9tRfEsdhZNt0IFdZuK/c2Vr4Nb+Qg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-potential-custom-element-name": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/is-potential-custom-element-name/-/is-potential-custom-element-name-1.0.1.tgz",
      "integrity": "sha512-bCYeRA2rVibKZd+s2625gGnGF/t7DSqDs4dP7CrLA1m7jKWz6pps0LpYLJN8Q64HtmPKJ1hrN3nzPNKFEKOUiQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-regexp": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/is-regexp/-/is-regexp-1.0.0.tgz",
      "integrity": "sha512-7zjFAPO4/gwyQAAgRRmqeEeyIICSdmCqa3tsVHMdBzaXXRiqopZL4Cyghg/XulGWrtABTpbnYYzzIRffLkP4oA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-typed-array": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
      "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
      "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/jackspeak": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-4.1.1.tgz",
      "integrity": "sha512-zptv57P3GpL+O0I7VdMJNBZCu+BPHVQUk55Ft8/QCJjTVxrnJHuVuX/0Bl2A6/+2oyR/ZMEuFKwmzqqZ/U5nPQ==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "@isaacs/cliui": "^8.0.2"
      },
      "engines": {
        "node": "20 || >=22"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/jake": {
      "version": "10.9.4",
      "resolved": "https://registry.npmjs.org/jake/-/jake-10.9.4.tgz",
      "integrity": "sha512-wpHYzhxiVQL+IV05BLE2Xn34zW1S223hvjtqk0+gsPrwd/8JNLXJgZZM/iPFsYc1xyphF+6M6EvdE5E9MBGkDA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "async": "^3.2.6",
        "filelist": "^1.0.4",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "jake": "bin/cli.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsdom": {
      "version": "27.3.0",
      "resolved": "https://registry.npmjs.org/jsdom/-/jsdom-27.3.0.tgz",
      "integrity": "sha512-GtldT42B8+jefDUC4yUKAvsaOrH7PDHmZxZXNgF2xMmymjUbRYJvpAybZAKEmXDGTM0mCsz8duOa4vTm5AY2Kg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@acemir/cssom": "^0.9.28",
        "@asamuzakjp/dom-selector": "^6.7.6",
        "cssstyle": "^5.3.4",
        "data-urls": "^6.0.0",
        "decimal.js": "^10.6.0",
        "html-encoding-sniffer": "^4.0.0",
        "http-proxy-agent": "^7.0.2",
        "https-proxy-agent": "^7.0.6",
        "is-potential-custom-element-name": "^1.0.1",
        "parse5": "^8.0.0",
        "saxes": "^6.0.0",
        "symbol-tree": "^3.2.4",
        "tough-cookie": "^6.0.0",
        "w3c-xmlserializer": "^5.0.0",
        "webidl-conversions": "^8.0.0",
        "whatwg-encoding": "^3.1.1",
        "whatwg-mimetype": "^4.0.0",
        "whatwg-url": "^15.1.0",
        "ws": "^8.18.3",
        "xml-name-validator": "^5.0.0"
      },
      "engines": {
        "node": "^20.19.0 || ^22.12.0 || >=24.0.0"
      },
      "peerDependencies": {
        "canvas": "^3.0.0"
      },
      "peerDependenciesMeta": {
        "canvas": {
          "optional": true
        }
      }
    },
    "node_modules/jsdom/node_modules/tr46": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-6.0.0.tgz",
      "integrity": "sha512-bLVMLPtstlZ4iMQHpFHTR7GAGj2jxi8Dg0s2h2MafAE4uSWF98FC/3MomU51iQAMf8/qDUbKWf5GxuvvVcXEhw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/jsdom/node_modules/webidl-conversions": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-8.0.0.tgz",
      "integrity": "sha512-n4W4YFyz5JzOfQeA8oN7dUYpR+MBP3PIUsn2jLjWXwK5ASUzt0Jc/A5sAUZoCYFJRGF0FBKJ+1JjN43rNdsQzA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/jsdom/node_modules/whatwg-url": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-15.1.0.tgz",
      "integrity": "sha512-2ytDk0kiEj/yu90JOAp44PVPUkO9+jVhyf+SybKlRHSDlvOOZhdPIrr7xTH64l4WixO2cP+wQIcgujkGBPPz6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tr46": "^6.0.0",
        "webidl-conversions": "^8.0.0"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/json-schema/-/json-schema-0.4.0.tgz",
      "integrity": "sha512-es94M3nTIfsEPisRafak+HDLfHXnKBhV3vU5eqPcS3flIWqcxJWgXHXiey3YrpaNsanY5ei1VoYEbOzijuq9BA==",
      "dev": true,
      "license": "(AFL-2.1 OR BSD-3-Clause)"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsonfile": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.2.0.tgz",
      "integrity": "sha512-FGuPw30AdOIUTRMC2OMRtQV+jkVj2cfPqSeWXv1NEAJ1qZ5zb1X6z1mFhbfOB/iy3ssJCD+3KuZ8r8C3uVFlAg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/jsonpointer": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/jsonpointer/-/jsonpointer-5.0.1.tgz",
      "integrity": "sha512-p/nXbhSEcu3pZRdkW1OfJhpsVtW1gd4Wa1fnQc9YLiTfAjn0312eMKimbdIQzuZl9aa9xUGaRlP9T/CJE/ditQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/jspdf": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/jspdf/-/jspdf-3.0.4.tgz",
      "integrity": "sha512-dc6oQ8y37rRcHn316s4ngz/nOjayLF/FFxBF4V9zamQKRqXxyiH1zagkCdktdWhtoQId5K20xt1lB90XzkB+hQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.28.4",
        "fast-png": "^6.2.0",
        "fflate": "^0.8.1"
      },
      "optionalDependencies": {
        "canvg": "^3.0.11",
        "core-js": "^3.6.0",
        "dompurify": "^3.2.4",
        "html2canvas": "^1.0.0-rc.5"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/leven": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/leven/-/leven-3.1.0.tgz",
      "integrity": "sha512-qsda+H8jTaUaN/x5vzW2rzc+8Rw4TAQ/4KjB46IwK5VH+IlVeeeje/EoZRpiXvIqjFgK84QffqPztGI3VBLG1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lightningcss": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss/-/lightningcss-1.30.2.tgz",
      "integrity": "sha512-utfs7Pr5uJyyvDETitgsaqSyjCb2qNRAtuqUeWIAKztsOYdcACf2KtARYXg2pSvhkt+9NfoaNY7fxjl6nuMjIQ==",
      "dev": true,
      "license": "MPL-2.0",
      "dependencies": {
        "detect-libc": "^2.0.3"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      },
      "optionalDependencies": {
        "lightningcss-android-arm64": "1.30.2",
        "lightningcss-darwin-arm64": "1.30.2",
        "lightningcss-darwin-x64": "1.30.2",
        "lightningcss-freebsd-x64": "1.30.2",
        "lightningcss-linux-arm-gnueabihf": "1.30.2",
        "lightningcss-linux-arm64-gnu": "1.30.2",
        "lightningcss-linux-arm64-musl": "1.30.2",
        "lightningcss-linux-x64-gnu": "1.30.2",
        "lightningcss-linux-x64-musl": "1.30.2",
        "lightningcss-win32-arm64-msvc": "1.30.2",
        "lightningcss-win32-x64-msvc": "1.30.2"
      }
    },
    "node_modules/lightningcss-android-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-android-arm64/-/lightningcss-android-arm64-1.30.2.tgz",
      "integrity": "sha512-BH9sEdOCahSgmkVhBLeU7Hc9DWeZ1Eb6wNS6Da8igvUwAe0sqROHddIlvU06q3WyXVEOYDZ6ykBZQnjTbmo4+A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-arm64/-/lightningcss-darwin-arm64-1.30.2.tgz",
      "integrity": "sha512-ylTcDJBN3Hp21TdhRT5zBOIi73P6/W0qwvlFEk22fkdXchtNTOU4Qc37SkzV+EKYxLouZ6M4LG9NfZ1qkhhBWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-x64/-/lightningcss-darwin-x64-1.30.2.tgz",
      "integrity": "sha512-oBZgKchomuDYxr7ilwLcyms6BCyLn0z8J0+ZZmfpjwg9fRVZIR5/GMXd7r9RH94iDhld3UmSjBM6nXWM2TfZTQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-freebsd-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-freebsd-x64/-/lightningcss-freebsd-x64-1.30.2.tgz",
      "integrity": "sha512-c2bH6xTrf4BDpK8MoGG4Bd6zAMZDAXS569UxCAGcA7IKbHNMlhGQ89eRmvpIUGfKWNVdbhSbkQaWhEoMGmGslA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm-gnueabihf": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm-gnueabihf/-/lightningcss-linux-arm-gnueabihf-1.30.2.tgz",
      "integrity": "sha512-eVdpxh4wYcm0PofJIZVuYuLiqBIakQ9uFZmipf6LF/HRj5Bgm0eb3qL/mr1smyXIS1twwOxNWndd8z0E374hiA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-gnu/-/lightningcss-linux-arm64-gnu-1.30.2.tgz",
      "integrity": "sha512-UK65WJAbwIJbiBFXpxrbTNArtfuznvxAJw4Q2ZGlU8kPeDIWEX1dg3rn2veBVUylA2Ezg89ktszWbaQnxD/e3A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-musl/-/lightningcss-linux-arm64-musl-1.30.2.tgz",
      "integrity": "sha512-5Vh9dGeblpTxWHpOx8iauV02popZDsCYMPIgiuw97OJ5uaDsL86cnqSFs5LZkG3ghHoX5isLgWzMs+eD1YzrnA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-gnu/-/lightningcss-linux-x64-gnu-1.30.2.tgz",
      "integrity": "sha512-Cfd46gdmj1vQ+lR6VRTTadNHu6ALuw2pKR9lYq4FnhvgBc4zWY1EtZcAc6EffShbb1MFrIPfLDXD6Xprbnni4w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-musl/-/lightningcss-linux-x64-musl-1.30.2.tgz",
      "integrity": "sha512-XJaLUUFXb6/QG2lGIW6aIk6jKdtjtcffUT0NKvIqhSBY3hh9Ch+1LCeH80dR9q9LBjG3ewbDjnumefsLsP6aiA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-arm64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-arm64-msvc/-/lightningcss-win32-arm64-msvc-1.30.2.tgz",
      "integrity": "sha512-FZn+vaj7zLv//D/192WFFVA0RgHawIcHqLX9xuWiQt7P0PtdFEVaxgF9rjM/IRYHQXNnk61/H/gb2Ei+kUQ4xQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-x64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-x64-msvc/-/lightningcss-win32-x64-msvc-1.30.2.tgz",
      "integrity": "sha512-5g1yc73p+iAkid5phb4oVFMB45417DkRevRbt/El/gKXJk4jid+vPFF/AXbxn05Aky8PapwzZrdJShv5C0avjw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.debounce": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/lodash.debounce/-/lodash.debounce-4.0.8.tgz",
      "integrity": "sha512-FT1yDzDYEoYWhnSGnpE/4Kj1fLZkDFyqRb7fNt6FdYOSxlUWAtp42Eh6Wb0rGIv/m9Bgo7x4GhQbm5Ys4SG5ow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.sortby": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/lodash.sortby/-/lodash.sortby-4.7.0.tgz",
      "integrity": "sha512-HDWXG8isMntAyRF5vZ7xKuEvOhT4AhlRt/3czTSjvGUxjYCBVRQY48ViDHyfYz9VIoBkW4TMGQNapx+l3RUwdA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.555.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.555.0.tgz",
      "integrity": "sha512-D8FvHUGbxWBRQM90NZeIyhAvkFfsh3u9ekrMvJ30Z6gnpBHS6HC6ldLg7tL45hwiIz/u66eKDtdA23gwwGsAHA==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/lz-string": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/lz-string/-/lz-string-1.5.0.tgz",
      "integrity": "sha512-h5bgJWpxJNswbU7qCrV0tIKQCaS3blPDrqKWx+QxzuzL1zGUzij9XCWLrSLsJPu5t+eWA/ycetzYAO5IOMcWAQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "lz-string": "bin/bin.js"
      }
    },
    "node_modules/magic-string": {
      "version": "0.25.9",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.25.9.tgz",
      "integrity": "sha512-RmF0AsMzgt25qzqqLc1+MbHmhdx0ojF2Fvs4XnOqz2ZOBXzzkEwc/dJQZCYHAn7v1jbVOjAZfK8msRn4BxO4VQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "sourcemap-codec": "^1.4.8"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mdn-data": {
      "version": "2.12.2",
      "resolved": "https://registry.npmjs.org/mdn-data/-/mdn-data-2.12.2.tgz",
      "integrity": "sha512-IEn+pegP1aManZuckezWCO+XZQDplx1366JoVhTpMpBB1sPey/SbveZQUosKiKiGYjg1wH4pMlNgXbCiYgihQA==",
      "dev": true,
      "license": "CC0-1.0"
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/micromatch/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/min-indent": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
      "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minipass": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
      "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/motion-dom": {
      "version": "12.23.23",
      "resolved": "https://registry.npmjs.org/motion-dom/-/motion-dom-12.23.23.tgz",
      "integrity": "sha512-n5yolOs0TQQBRUFImrRfs/+6X4p3Q4n1dUEqt/H58Vx7OW6RF+foWEgmTVDhIWJIMXOuNNL0apKH2S16en9eiA==",
      "license": "MIT",
      "dependencies": {
        "motion-utils": "^12.23.6"
      }
    },
    "node_modules/motion-utils": {
      "version": "12.23.6",
      "resolved": "https://registry.npmjs.org/motion-utils/-/motion-utils-12.23.6.tgz",
      "integrity": "sha512-eAWoPgr4eFEOFfg2WjIsMoqJTW6Z8MTUCgn/GZ3VRpClWBdnbjryiA3ZSNLyxCTmCQx4RmYX6jX1iWHbenUPNQ==",
      "license": "MIT"
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/normalize-range": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/normalize-range/-/normalize-range-0.1.2.tgz",
      "integrity": "sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/obug": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/obug/-/obug-2.1.1.tgz",
      "integrity": "sha512-uTqF9MuPraAQ+IsnPf366RG4cP9RtUi7MLO1N3KEc+wb0a6yKpeL0lmk2IB1jY5KHPAlTc6T/JRdC/YqxHNwkQ==",
      "dev": true,
      "funding": [
        "https://github.com/sponsors/sxzz",
        "https://opencollective.com/debug"
      ],
      "license": "MIT"
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/own-keys": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
      "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.6",
        "object-keys": "^1.1.1",
        "safe-push-apply": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/package-json-from-dist": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/package-json-from-dist/-/package-json-from-dist-1.0.1.tgz",
      "integrity": "sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==",
      "dev": true,
      "license": "BlueOak-1.0.0"
    },
    "node_modules/pako": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/pako/-/pako-2.1.0.tgz",
      "integrity": "sha512-w+eufiZ1WuJYgPXbV/PO3NCMEc3xqylkKHzp8bxp1uW4qaSNQUkwmLLEc3kKsfz8lpV1F8Ht3U1Cm+9Srog2ug==",
      "license": "(MIT AND Zlib)"
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse5": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/parse5/-/parse5-8.0.0.tgz",
      "integrity": "sha512-9m4m5GSgXjL4AjumKzq1Fgfp3Z8rsvjRNbnkVwfu2ImRqE5D0LnY2QfDen18FSY9C573YU5XxSapdHZTZ2WolA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "entities": "^6.0.0"
      },
      "funding": {
        "url": "https://github.com/inikulin/parse5?sponsor=1"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/path-scurry": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/path-scurry/-/path-scurry-2.0.1.tgz",
      "integrity": "sha512-oWyT4gICAu+kaA7QWk/jvCHWarMKNs6pXOGWKDTr7cw4IGcUbW+PeTfbaQiLGheFRpjo6O9J0PmyMfQPjH71oA==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "lru-cache": "^11.0.0",
        "minipass": "^7.1.2"
      },
      "engines": {
        "node": "20 || >=22"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/path-scurry/node_modules/lru-cache": {
      "version": "11.2.4",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-11.2.4.tgz",
      "integrity": "sha512-B5Y16Jr9LB9dHVkh6ZevG+vAbOsNOYCX+sXvFWFu7B3Iz5mijW3zdbMyhsh8ANd2mSWBYdJgnqi+mL7/LrOPYg==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/pathe": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-2.0.3.tgz",
      "integrity": "sha512-WUjGcAqP1gQacoQe+OBJsFA7Ld4DyXuUIjZ5cc75cLHvJ7dtNsTugphxIADwspS+AraAUePCKrSVtPLFj/F88w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/performance-now": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/performance-now/-/performance-now-2.1.0.tgz",
      "integrity": "sha512-7EAHlyLHI56VEIdK57uwHdHKIaAGbnXPiw0yWbarQZOKaKpvUIgW0jWRVLiatnM+XXlSwsanIBH/hzGMJulMow==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/playwright": {
      "version": "1.57.0",
      "resolved": "https://registry.npmjs.org/playwright/-/playwright-1.57.0.tgz",
      "integrity": "sha512-ilYQj1s8sr2ppEJ2YVadYBN0Mb3mdo9J0wQ+UuDhzYqURwSoW4n1Xs5vs7ORwgDGmyEh33tRMeS8KhdkMoLXQw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "playwright-core": "1.57.0"
      },
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "fsevents": "2.3.2"
      }
    },
    "node_modules/playwright-core": {
      "version": "1.57.0",
      "resolved": "https://registry.npmjs.org/playwright-core/-/playwright-core-1.57.0.tgz",
      "integrity": "sha512-agTcKlMw/mjBWOnD6kFZttAAGHgi/Nw0CZ2o6JqWSbMlI219lAFLZZCyqByTsvVAJq5XA5H8cA6PrvBRpBWEuQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "playwright-core": "cli.js"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/playwright/node_modules/fsevents": {
      "version": "2.3.2",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz",
      "integrity": "sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postcss": {
      "version": "8.4.35",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.35.tgz",
      "integrity": "sha512-u5U8qYpBCpN13BsiEB0CbR1Hhh4Gc0zLFuedrHJKMctHCHAGrMdG0PRM/KErzAL3CU6/eckEtmHNB3x6e3c0vA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "nanoid": "^3.3.7",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-load-config": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-4.0.2.tgz",
      "integrity": "sha512-bSVhyJGL00wMVoPUzAVAnbEoWyqRxkjv64tUl427SKnPrENtq6hJwUojroMz2VB+Q1edmi4IfrAPpami5VVgMQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.0.0",
        "yaml": "^2.3.4"
      },
      "engines": {
        "node": ">= 14"
      },
      "peerDependencies": {
        "postcss": ">=8.0.9",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "postcss": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/pretty-bytes": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/pretty-bytes/-/pretty-bytes-6.1.1.tgz",
      "integrity": "sha512-mQUvGU6aUFQ+rNvTIAcZuWGRT9a6f6Yrg9bHs4ImKF+HZCEK+plBvnAZYSIQztknZF2qnzNtr6F8s0+IuptdlQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/pretty-format": {
      "version": "27.5.1",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-27.5.1.tgz",
      "integrity": "sha512-Qb1gy5OrP5+zDf2Bvnzdl3jsTf1qXVMazbvCoKhtKqVs4/YK4ozX4gKQJJVyNe+cajNPn0KoC0MC3FUmaHWEmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1",
        "ansi-styles": "^5.0.0",
        "react-is": "^17.0.1"
      },
      "engines": {
        "node": "^10.13.0 || ^12.13.0 || ^14.15.0 || >=15.0.0"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-styles": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
      "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/raf": {
      "version": "3.4.1",
      "resolved": "https://registry.npmjs.org/raf/-/raf-3.4.1.tgz",
      "integrity": "sha512-Sq4CW4QhwOHE8ucn6J34MqtZCeWFP2aQSmrlroYgqAV1PjStIhJXxYuTgUIfkEk7zTLjmIjLmU5q+fbD1NnOJA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "performance-now": "^2.1.0"
      }
    },
    "node_modules/randombytes": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/randombytes/-/randombytes-2.1.0.tgz",
      "integrity": "sha512-vYl3iOX+4CKUWuxGi9Ukhie6fsqXqS9FE2Zaic4tNFD2N2QQaXOMFbuKK4QmDHC0JO6B1Zp41J0LpT0oR68amQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "^5.1.0"
      }
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-chartjs-2": {
      "version": "5.3.1",
      "resolved": "https://registry.npmjs.org/react-chartjs-2/-/react-chartjs-2-5.3.1.tgz",
      "integrity": "sha512-h5IPXKg9EXpjoBzUfyWJvllMjG2mQ4EiuHQFhms/AjUm0XSZHhyRy2xVmLXHKrtcdrPO4mnGqRtYoD0vp95A0A==",
      "license": "MIT",
      "peerDependencies": {
        "chart.js": "^4.1.1",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-hot-toast": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/react-hot-toast/-/react-hot-toast-2.6.0.tgz",
      "integrity": "sha512-bH+2EBMZ4sdyou/DPrfgIouFpcRLCJ+HoCA32UoAYHn6T3Ur5yfcDCeSr5mwldl6pFOsiocmrXMuoCJ1vV8bWg==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.1.3",
        "goober": "^2.1.16"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "react": ">=16",
        "react-dom": ">=16"
      }
    },
    "node_modules/react-is": {
      "version": "17.0.2",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-17.0.2.tgz",
      "integrity": "sha512-w2GsyukL62IJnlaff/nRegPQR94C/XXamvMWmSHRJ4y7Ts/4ocGRmTHvOs8PSE6pB3dWOrD/nueuU5sduBsQ4w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/react-refresh": {
      "version": "0.18.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.18.0.tgz",
      "integrity": "sha512-QgT5//D3jfjJb6Gsjxv0Slpj23ip+HtOpnNgnb2S5zU3CB26G/IDPGoy4RJB42wzFE46DRsstbW6tKHoKbhAxw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-router": {
      "version": "7.10.1",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-7.10.1.tgz",
      "integrity": "sha512-gHL89dRa3kwlUYtRQ+m8NmxGI6CgqN+k4XyGjwcFoQwwCWF6xXpOCUlDovkXClS0d0XJN/5q7kc5W3kiFEd0Yw==",
      "license": "MIT",
      "dependencies": {
        "cookie": "^1.0.1",
        "set-cookie-parser": "^2.6.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/react-router-dom": {
      "version": "7.10.1",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-7.10.1.tgz",
      "integrity": "sha512-JNBANI6ChGVjA5bwsUIwJk7LHKmqB4JYnYfzFwyp2t12Izva11elds2jx7Yfoup2zssedntwU0oZ5DEmk5Sdaw==",
      "license": "MIT",
      "dependencies": {
        "react-router": "7.10.1"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      }
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/readdirp/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/redent": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/redent/-/redent-3.0.0.tgz",
      "integrity": "sha512-6tDA8g98We0zd0GvVeMT9arEOnTw9qM03L9cJXaCjrip1OO764RDBLBfrB4cwzNGDj5OA5ioymC9GkizgWJDUg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "indent-string": "^4.0.0",
        "strip-indent": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/reflect.getprototypeof": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
      "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.7",
        "get-proto": "^1.0.1",
        "which-builtin-type": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regenerate": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/regenerate/-/regenerate-1.4.2.tgz",
      "integrity": "sha512-zrceR/XhGYU/d/opr2EKO7aRHUeiBI8qjtfHqADTwZd6Szfy16la6kqD0MIUs5z5hx6AaKa+PixpPrR289+I0A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/regenerate-unicode-properties": {
      "version": "10.2.2",
      "resolved": "https://registry.npmjs.org/regenerate-unicode-properties/-/regenerate-unicode-properties-10.2.2.tgz",
      "integrity": "sha512-m03P+zhBeQd1RGnYxrGyDAPpWX/epKirLrp8e3qevZdVkKtnCrjjWczIbYc8+xd6vcTStVlqfycTx1KR4LOr0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "regenerate": "^1.4.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/regenerator-runtime": {
      "version": "0.13.11",
      "resolved": "https://registry.npmjs.org/regenerator-runtime/-/regenerator-runtime-0.13.11.tgz",
      "integrity": "sha512-kY1AZVr2Ra+t+piVaJ4gxaFaReZVH40AKNo7UCX6W+dEwBo/2oZJzqfuN1qLq1oL45o56cPaTXELwrTh8Fpggg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regexpu-core": {
      "version": "6.4.0",
      "resolved": "https://registry.npmjs.org/regexpu-core/-/regexpu-core-6.4.0.tgz",
      "integrity": "sha512-0ghuzq67LI9bLXpOX/ISfve/Mq33a4aFRzoQYhnnok1JOFpmE/A2TBGkNVenOGEeSBCjIiWcc6MVOG5HEQv0sA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "regenerate": "^1.4.2",
        "regenerate-unicode-properties": "^10.2.2",
        "regjsgen": "^0.8.0",
        "regjsparser": "^0.13.0",
        "unicode-match-property-ecmascript": "^2.0.0",
        "unicode-match-property-value-ecmascript": "^2.2.1"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/regjsgen": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/regjsgen/-/regjsgen-0.8.0.tgz",
      "integrity": "sha512-RvwtGe3d7LvWiDQXeQw8p5asZUmfU1G/l6WbUXeHta7Y2PEIvBTwH6E2EfmYUK8pxcxEdEmaomqyp0vZZ7C+3Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/regjsparser": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/regjsparser/-/regjsparser-0.13.0.tgz",
      "integrity": "sha512-NZQZdC5wOE/H3UT28fVGL+ikOZcEzfMGk/c3iN9UGxzWHMa1op7274oyiUVrAG4B2EuFhus8SvkaYnhvW92p9Q==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "jsesc": "~3.1.0"
      },
      "bin": {
        "regjsparser": "bin/parser"
      }
    },
    "node_modules/require-from-string": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/require-from-string/-/require-from-string-2.0.2.tgz",
      "integrity": "sha512-Xf0nWe6RseziFMu+Ap9biiUbmplq6S9/p+7w7YXP/JBHhrUDDUhwa+vANyubuqfZWTveU//DYVGsDG7RKL/vEw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.11",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.11.tgz",
      "integrity": "sha512-RfqAvLnMl313r7c9oclB1HhUEAezcpLjz95wFH4LVuhk9JF/r22qmVP9AMmOU4vMX7Q8pN8jwNg/CSpdFnMjTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.1",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rgbcolor": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/rgbcolor/-/rgbcolor-1.0.1.tgz",
      "integrity": "sha512-9aZLIrhRaD97sgVhtJOW6ckOEh6/GnvQtdVNfdZ6s67+3/XwLS9lBcQYzEEhYVeUowN7pRzMLsyGhK2i/xvWbw==",
      "license": "MIT OR SEE LICENSE IN FEEL-FREE.md",
      "optional": true,
      "engines": {
        "node": ">= 0.8.15"
      }
    },
    "node_modules/rolldown": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/rolldown/-/rolldown-1.0.0-beta.50.tgz",
      "integrity": "sha512-JFULvCNl/anKn99eKjOSEubi0lLmNqQDAjyEMME2T4CwezUDL0i6t1O9xZsu2OMehPnV2caNefWpGF+8TnzB6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@oxc-project/types": "=0.97.0",
        "@rolldown/pluginutils": "1.0.0-beta.50"
      },
      "bin": {
        "rolldown": "bin/cli.mjs"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "optionalDependencies": {
        "@rolldown/binding-android-arm64": "1.0.0-beta.50",
        "@rolldown/binding-darwin-arm64": "1.0.0-beta.50",
        "@rolldown/binding-darwin-x64": "1.0.0-beta.50",
        "@rolldown/binding-freebsd-x64": "1.0.0-beta.50",
        "@rolldown/binding-linux-arm-gnueabihf": "1.0.0-beta.50",
        "@rolldown/binding-linux-arm64-gnu": "1.0.0-beta.50",
        "@rolldown/binding-linux-arm64-musl": "1.0.0-beta.50",
        "@rolldown/binding-linux-x64-gnu": "1.0.0-beta.50",
        "@rolldown/binding-linux-x64-musl": "1.0.0-beta.50",
        "@rolldown/binding-openharmony-arm64": "1.0.0-beta.50",
        "@rolldown/binding-wasm32-wasi": "1.0.0-beta.50",
        "@rolldown/binding-win32-arm64-msvc": "1.0.0-beta.50",
        "@rolldown/binding-win32-ia32-msvc": "1.0.0-beta.50",
        "@rolldown/binding-win32-x64-msvc": "1.0.0-beta.50"
      }
    },
    "node_modules/rolldown/node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.50",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.50.tgz",
      "integrity": "sha512-5e76wQiQVeL1ICOZVUg4LSOVYg9jyhGCin+icYozhsUzM+fHE7kddi1bdiE0jwVqTfkjba3jUFbEkoC9WkdvyA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/rollup": {
      "version": "2.79.2",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-2.79.2.tgz",
      "integrity": "sha512-fS6iqSPZDs3dr/y7Od6y5nha8dW1YnbgtsyotCVvoFGKbERG++CVRFv1meyGDE1SNItQA8BrnCw7ScdAhRJ3XQ==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-array-concat": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
      "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "has-symbols": "^1.1.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">=0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safe-push-apply": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
      "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/saxes": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/saxes/-/saxes-6.0.0.tgz",
      "integrity": "sha512-xAg7SOnEhrm5zI3puOOKyy1OMcMlIJZYNJY7xLBwSze0UjhPLnWfj2GF2EpT0jmzaJKIWKHLsaSSajf35bcYnA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "xmlchars": "^2.2.0"
      },
      "engines": {
        "node": ">=v12.22.7"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/serialize-javascript": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/serialize-javascript/-/serialize-javascript-6.0.2.tgz",
      "integrity": "sha512-Saa1xPByTTq2gdeFZYLLo+RFE35NHZkAbqZeWNd3BpzppeVisAqpDjcp8dyf6uIvEqJRd46jemmyA4iFIeVk8g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "randombytes": "^2.1.0"
      }
    },
    "node_modules/set-cookie-parser": {
      "version": "2.7.2",
      "resolved": "https://registry.npmjs.org/set-cookie-parser/-/set-cookie-parser-2.7.2.tgz",
      "integrity": "sha512-oeM1lpU/UvhTxw+g3cIfxXHyJRc/uidd3yK1P242gzHds0udQBYzs3y8j4gCCW+ZJ7ad0yctld8RYO+bdurlvw==",
      "license": "MIT"
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-proto": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
      "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/siginfo": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/signal-exit": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-4.1.0.tgz",
      "integrity": "sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/smob": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/smob/-/smob-1.5.0.tgz",
      "integrity": "sha512-g6T+p7QO8npa+/hNx9ohv1E5pVCmWrVCUzUXJyLdMmftX6ER0oiWY/w9knEonLpnOp6b6FenKnMfR8gqwWdwig==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/source-map": {
      "version": "0.8.0-beta.0",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.8.0-beta.0.tgz",
      "integrity": "sha512-2ymg6oRBpebeZi9UUNsgQ89bhx01TcTkmNTGnNO88imTmbSgy4nfujrgVEFKWpMTEGA11EDkTt7mqObTPdigIA==",
      "deprecated": "The work that was done in this beta branch won't be included in future versions",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "whatwg-url": "^7.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-support": {
      "version": "0.5.21",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
      "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "node_modules/source-map-support/node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/sourcemap-codec": {
      "version": "1.4.8",
      "resolved": "https://registry.npmjs.org/sourcemap-codec/-/sourcemap-codec-1.4.8.tgz",
      "integrity": "sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==",
      "deprecated": "Please use @jridgewell/sourcemap-codec instead",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stackback": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stackblur-canvas": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/stackblur-canvas/-/stackblur-canvas-2.7.0.tgz",
      "integrity": "sha512-yf7OENo23AGJhBriGx0QivY5JP6Y1HbrrDI6WLt6C5auYZXlQrheoY8hD4ibekFKz1HOfE48Ww8kMWMnJD/zcQ==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=0.1.14"
      }
    },
    "node_modules/std-env": {
      "version": "3.10.0",
      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.10.0.tgz",
      "integrity": "sha512-5GS12FdOZNliM5mAOxFRg7Ir0pWz8MdpYm6AY6VPkGpbA7ZzmbzNcBJQ0GPvvyWgcY7QAhCgf9Uy89I03faLkg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/string-width-cjs": {
      "name": "string-width",
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/string-width-cjs/node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string.prototype.matchall": {
      "version": "4.0.12",
      "resolved": "https://registry.npmjs.org/string.prototype.matchall/-/string.prototype.matchall-4.0.12.tgz",
      "integrity": "sha512-6CC9uyBL+/48dYizRf7H7VAYCMCNTBeM78x/VTUe9bFEaxBepPJDa1Ow99LqI/1yF7kuy7Q3cQsYMrcjGUcskA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "regexp.prototype.flags": "^1.5.3",
        "set-function-name": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trim": {
      "version": "1.2.10",
      "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
      "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-object-atoms": "^1.0.0",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimend": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
      "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimstart": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
      "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/stringify-object": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/stringify-object/-/stringify-object-3.3.0.tgz",
      "integrity": "sha512-rHqiFh1elqCQ9WPLIC8I0Q/g/wj5J1eMkyoiD6eoQApWHP0FtlK7rqnhmabL5VUY9JQCcqwwvlOaSuutekgyrw==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "get-own-enumerable-property-symbols": "^3.0.0",
        "is-obj": "^1.0.1",
        "is-regexp": "^1.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/strip-ansi": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/strip-ansi-cjs": {
      "name": "strip-ansi",
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-comments": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/strip-comments/-/strip-comments-2.0.1.tgz",
      "integrity": "sha512-ZprKx+bBLXv067WTCALv8SSz5l2+XhpYCsVtSqlMnkAXMWDq+/ekVbl1ghqP9rUHTzv6sm/DwCOiYutU/yp1fw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/strip-indent": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-indent/-/strip-indent-3.0.0.tgz",
      "integrity": "sha512-laJTa3Jb+VQpaC6DseHhF7dXVqHTfJPCRDaEbid/drOhgitgYku/letMUqOXFoWV0zIIUbjpdH2t+tYj4bQMRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "min-indent": "^1.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/sucrase": {
      "version": "3.35.1",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.1.tgz",
      "integrity": "sha512-DhuTmvZWux4H1UOnWMB3sk0sbaCVOoQZjv8u1rDoTV0HTdGem9hkAZtl4JZy8P2z4Bg0nT+YMeOFyVr4zcG5Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "tinyglobby": "^0.2.11",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/svg-pathdata": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/svg-pathdata/-/svg-pathdata-6.0.3.tgz",
      "integrity": "sha512-qsjeeq5YjBZ5eMdFuUa4ZosMLxgr5RZ+F+Y1OrDhuOCEInRMA3x74XdBtggJcj9kOeInz0WE+LgCPDkZFlBYJw==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/sweetalert2": {
      "version": "11.26.3",
      "resolved": "https://registry.npmjs.org/sweetalert2/-/sweetalert2-11.26.3.tgz",
      "integrity": "sha512-VU0hGw/WfI9h7Mh+SCsDlWgtxDwWZ6ccqS7QcO8zEeWnwplN1GptcLstq76OluUBSLUza6ldvKd3558OhjpJ9A==",
      "license": "MIT",
      "funding": {
        "type": "individual",
        "url": "https://github.com/sponsors/limonte"
      }
    },
    "node_modules/symbol-tree": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/symbol-tree/-/symbol-tree-3.2.4.tgz",
      "integrity": "sha512-9QNk5KwDF+Bvz+PyObkmSYjI5ksVUYtjW7AU22r2NKcfLJcXp96hkDWU3+XndOsUb+AQ9QhfzfCT2O+CNWT5Tw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tailwind-merge": {
      "version": "3.4.0",
      "resolved": "https://registry.npmjs.org/tailwind-merge/-/tailwind-merge-3.4.0.tgz",
      "integrity": "sha512-uSaO4gnW+b3Y2aWoWfFpX62vn2sR3skfhbjsEnaBI81WD1wBLlHZe5sWf0AqjksNdYTbGBEd0UasQMT3SNV15g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/dcastil"
      }
    },
    "node_modules/tailwindcss": {
      "version": "3.4.17",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.17.tgz",
      "integrity": "sha512-w33E2aCvSDP0tW9RZuNXadXlkHXqFzSkQew/aIa2i/Sj8fThxwovwlXHSPXTbAHwEIhBFXAedUhP2tueAKP8Og==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.6.0",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.2",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.6",
        "lilconfig": "^3.1.3",
        "micromatch": "^4.0.8",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.1.1",
        "postcss": "^8.4.47",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.2",
        "postcss-nested": "^6.2.0",
        "postcss-selector-parser": "^6.1.2",
        "resolve": "^1.22.8",
        "sucrase": "^3.35.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tailwindcss/node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/temp-dir": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/temp-dir/-/temp-dir-2.0.0.tgz",
      "integrity": "sha512-aoBAniQmmwtcKp/7BzsH8Cxzv8OL736p7v1ihGb5e9DJ9kTwGWHrQrVB5+lfVDzfGrdRzXch+ig7LHaY1JTOrg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tempy": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/tempy/-/tempy-0.6.0.tgz",
      "integrity": "sha512-G13vtMYPT/J8A4X2SjdtBTphZlrp1gKv6hZiOjw14RCWg6GbHuQBGtjlx75xLbYV/wEc0D7G5K4rxKP/cXk8Bw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-stream": "^2.0.0",
        "temp-dir": "^2.0.0",
        "type-fest": "^0.16.0",
        "unique-string": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/terser": {
      "version": "5.44.1",
      "resolved": "https://registry.npmjs.org/terser/-/terser-5.44.1.tgz",
      "integrity": "sha512-t/R3R/n0MSwnnazuPpPNVO60LX0SKL45pyl9YlvxIdkH0Of7D5qM2EVe+yASRIlY5pZ73nclYJfNANGWPwFDZw==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@jridgewell/source-map": "^0.3.3",
        "acorn": "^8.15.0",
        "commander": "^2.20.0",
        "source-map-support": "~0.5.20"
      },
      "bin": {
        "terser": "bin/terser"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/terser/node_modules/commander": {
      "version": "2.20.3",
      "resolved": "https://registry.npmjs.org/commander/-/commander-2.20.3.tgz",
      "integrity": "sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/text-segmentation": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/text-segmentation/-/text-segmentation-1.0.3.tgz",
      "integrity": "sha512-iOiPUo/BGnZ6+54OsWxZidGCsdU8YbE4PSpdPinp7DeMtUJNJBoJ/ouUSTJjHkh1KntHaltHl/gDs2FC4i5+Nw==",
      "license": "MIT",
      "dependencies": {
        "utrie": "^1.0.2"
      }
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/tinybench": {
      "version": "2.9.0",
      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.9.0.tgz",
      "integrity": "sha512-0+DUvqWMValLmha6lr4kD8iAMK1HzV0/aKnCtWb9v9641TnP/MFb7Pc2bxoxQjTXAErryXVgUOfv2YqNllqGeg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tinyexec": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/tinyexec/-/tinyexec-1.0.2.tgz",
      "integrity": "sha512-W/KYk+NFhkmsYpuHq5JykngiOCnxeVL8v8dFnqxSD8qEEdRfXk1SDM6JzNqcERbcGYj9tMrDQBYV9cjgnunFIg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyrainbow": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/tinyrainbow/-/tinyrainbow-3.0.3.tgz",
      "integrity": "sha512-PSkbLUoxOFRzJYjjxHJt9xro7D+iilgMX/C9lawzVuYiIdcihh9DXmVibBe8lmcFrRi/VzlPjBxbN7rH24q8/Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tldts": {
      "version": "7.0.19",
      "resolved": "https://registry.npmjs.org/tldts/-/tldts-7.0.19.tgz",
      "integrity": "sha512-8PWx8tvC4jDB39BQw1m4x8y5MH1BcQ5xHeL2n7UVFulMPH/3Q0uiamahFJ3lXA0zO2SUyRXuVVbWSDmstlt9YA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tldts-core": "^7.0.19"
      },
      "bin": {
        "tldts": "bin/cli.js"
      }
    },
    "node_modules/tldts-core": {
      "version": "7.0.19",
      "resolved": "https://registry.npmjs.org/tldts-core/-/tldts-core-7.0.19.tgz",
      "integrity": "sha512-lJX2dEWx0SGH4O6p+7FPwYmJ/bu1JbcGJ8RLaG9b7liIgZ85itUVEPbMtWRVrde/0fnDPEPHW10ZsKW3kVsE9A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/tough-cookie": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/tough-cookie/-/tough-cookie-6.0.0.tgz",
      "integrity": "sha512-kXuRi1mtaKMrsLUxz3sQYvVl37B0Ns6MzfrtV5DvJceE9bPyspOqk9xxv7XbZWcfLWbFmm997vl83qUWVJA64w==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "tldts": "^7.0.5"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/tr46": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-1.0.1.tgz",
      "integrity": "sha512-dTpowEjclQ7Kgx5SdBkqRzVhERQXov8/l9Ft9dVM9fmg0W0KQSVaXX9T4i6twCPNtYiZM53lpSSUAwJbFPOHxA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-fest": {
      "version": "0.16.0",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.16.0.tgz",
      "integrity": "sha512-eaBzG6MxNzEn9kiwvtre90cXaNLkmadMWa1zQMs3XORCXNbsH/OewwbxC5ia9dCxIxnTAsSxXJaa/p5y8DlvJg==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/typed-array-buffer": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
      "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/typed-array-byte-length": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
      "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-byte-offset": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
      "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.15",
        "reflect.getprototypeof": "^1.0.9"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-length": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
      "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "for-each": "^0.3.3",
        "gopd": "^1.0.1",
        "is-typed-array": "^1.1.13",
        "possible-typed-array-names": "^1.0.0",
        "reflect.getprototypeof": "^1.0.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "peer": true,
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/unbox-primitive": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
      "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-bigints": "^1.0.2",
        "has-symbols": "^1.1.0",
        "which-boxed-primitive": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unicode-canonical-property-names-ecmascript": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/unicode-canonical-property-names-ecmascript/-/unicode-canonical-property-names-ecmascript-2.0.1.tgz",
      "integrity": "sha512-dA8WbNeb2a6oQzAQ55YlT5vQAWGV9WXOsi3SskE3bcCdM0P4SDd+24zS/OCacdRq5BkdsRj9q3Pg6YyQoxIGqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-match-property-ecmascript": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/unicode-match-property-ecmascript/-/unicode-match-property-ecmascript-2.0.0.tgz",
      "integrity": "sha512-5kaZCrbp5mmbz5ulBkDkbY0SsPOjKqVS35VpL9ulMPfSl0J0Xsm+9Evphv9CoIZFwre7aJoa94AY6seMKGVN5Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "unicode-canonical-property-names-ecmascript": "^2.0.0",
        "unicode-property-aliases-ecmascript": "^2.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-match-property-value-ecmascript": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/unicode-match-property-value-ecmascript/-/unicode-match-property-value-ecmascript-2.2.1.tgz",
      "integrity": "sha512-JQ84qTuMg4nVkx8ga4A16a1epI9H6uTXAknqxkGF/aFfRLw1xC/Bp24HNLaZhHSkWd3+84t8iXnp1J0kYcZHhg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-property-aliases-ecmascript": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/unicode-property-aliases-ecmascript/-/unicode-property-aliases-ecmascript-2.2.0.tgz",
      "integrity": "sha512-hpbDzxUY9BFwX+UeBnxv3Sh1q7HFxj48DTmXchNgRa46lO8uj3/1iEn3MiNUYTg1g9ctIqXCCERn8gYZhHC5lQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unique-string": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/unique-string/-/unique-string-2.0.0.tgz",
      "integrity": "sha512-uNaeirEPvpZWSgzwsPGtU2zVSTrn/8L5q/IexZmH0eH6SA73CmAA5U4GwORTxQAZs95TAXLNqeLoPPNO5gZfWg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "crypto-random-string": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/universalify": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.1.tgz",
      "integrity": "sha512-gptHNQghINnc/vTGIk0SOFGFNXw7JVrlRUtConJRlvaw6DuX0wO5Jeko9sWrMBhh+PsYAZ7oXAiOnf/UKogyiw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/upath": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/upath/-/upath-1.2.0.tgz",
      "integrity": "sha512-aZwGpamFO61g3OlfT7OQCHqhGnW43ieH9WZeP7QxN/G/jS4jfqUkZxoryvJgVPEcrl5NL/ggHsSmLMHuH64Lhg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4",
        "yarn": "*"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.4.tgz",
      "integrity": "sha512-q0SPT4xyU84saUX+tomz1WLkxUbuaJnR1xWt17M7fJtEJigJeWUNGUqrauFXsHnqev9y9JTRGwk13tFBuKby4A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/utrie": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/utrie/-/utrie-1.0.2.tgz",
      "integrity": "sha512-1MLa5ouZiOmQzUbjbu9VmjLzn1QLXBhwpUa7kdLUQK+KQ5KA9I1vk5U4YHe/X2Ch7PYnJfWuWT+VbuxbGwljhw==",
      "license": "MIT",
      "dependencies": {
        "base64-arraybuffer": "^1.0.2"
      }
    },
    "node_modules/vite": {
      "name": "rolldown-vite",
      "version": "7.2.5",
      "resolved": "https://registry.npmjs.org/rolldown-vite/-/rolldown-vite-7.2.5.tgz",
      "integrity": "sha512-u09tdk/huMiN8xwoiBbig197jKdCamQTtOruSalOzbqGje3jdHiV0njQlAW0YvzoahkirFePNQ4RYlfnRQpXZA==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@oxc-project/runtime": "0.97.0",
        "fdir": "^6.5.0",
        "lightningcss": "^1.30.2",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rolldown": "1.0.0-beta.50",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "esbuild": "^0.25.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "esbuild": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vite-plugin-pwa": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/vite-plugin-pwa/-/vite-plugin-pwa-1.2.0.tgz",
      "integrity": "sha512-a2xld+SJshT9Lgcv8Ji4+srFJL4k/1bVbd1x06JIkvecpQkwkvCncD1+gSzcdm3s+owWLpMJerG3aN5jupJEVw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.6",
        "pretty-bytes": "^6.1.1",
        "tinyglobby": "^0.2.10",
        "workbox-build": "^7.4.0",
        "workbox-window": "^7.4.0"
      },
      "engines": {
        "node": ">=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      },
      "peerDependencies": {
        "@vite-pwa/assets-generator": "^1.0.0",
        "vite": "^3.1.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0",
        "workbox-build": "^7.4.0",
        "workbox-window": "^7.4.0"
      },
      "peerDependenciesMeta": {
        "@vite-pwa/assets-generator": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/vitest": {
      "version": "4.0.15",
      "resolved": "https://registry.npmjs.org/vitest/-/vitest-4.0.15.tgz",
      "integrity": "sha512-n1RxDp8UJm6N0IbJLQo+yzLZ2sQCDyl1o0LeugbPWf8+8Fttp29GghsQBjYJVmWq3gBFfe9Hs1spR44vovn2wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/expect": "4.0.15",
        "@vitest/mocker": "4.0.15",
        "@vitest/pretty-format": "4.0.15",
        "@vitest/runner": "4.0.15",
        "@vitest/snapshot": "4.0.15",
        "@vitest/spy": "4.0.15",
        "@vitest/utils": "4.0.15",
        "es-module-lexer": "^1.7.0",
        "expect-type": "^1.2.2",
        "magic-string": "^0.30.21",
        "obug": "^2.1.1",
        "pathe": "^2.0.3",
        "picomatch": "^4.0.3",
        "std-env": "^3.10.0",
        "tinybench": "^2.9.0",
        "tinyexec": "^1.0.2",
        "tinyglobby": "^0.2.15",
        "tinyrainbow": "^3.0.3",
        "vite": "^6.0.0 || ^7.0.0",
        "why-is-node-running": "^2.3.0"
      },
      "bin": {
        "vitest": "vitest.mjs"
      },
      "engines": {
        "node": "^20.0.0 || ^22.0.0 || >=24.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      },
      "peerDependencies": {
        "@edge-runtime/vm": "*",
        "@opentelemetry/api": "^1.9.0",
        "@types/node": "^20.0.0 || ^22.0.0 || >=24.0.0",
        "@vitest/browser-playwright": "4.0.15",
        "@vitest/browser-preview": "4.0.15",
        "@vitest/browser-webdriverio": "4.0.15",
        "@vitest/ui": "4.0.15",
        "happy-dom": "*",
        "jsdom": "*"
      },
      "peerDependenciesMeta": {
        "@edge-runtime/vm": {
          "optional": true
        },
        "@opentelemetry/api": {
          "optional": true
        },
        "@types/node": {
          "optional": true
        },
        "@vitest/browser-playwright": {
          "optional": true
        },
        "@vitest/browser-preview": {
          "optional": true
        },
        "@vitest/browser-webdriverio": {
          "optional": true
        },
        "@vitest/ui": {
          "optional": true
        },
        "happy-dom": {
          "optional": true
        },
        "jsdom": {
          "optional": true
        }
      }
    },
    "node_modules/vitest/node_modules/magic-string": {
      "version": "0.30.21",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
      "integrity": "sha512-vd2F4YUyEXKGcLHoq+TEyCjxueSeHnFxyyjNp80yg0XV4vUhnDer/lvvlqM/arB5bXQN5K2/3oinyCRyx8T2CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.5"
      }
    },
    "node_modules/w3c-xmlserializer": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/w3c-xmlserializer/-/w3c-xmlserializer-5.0.0.tgz",
      "integrity": "sha512-o8qghlI8NZHU1lLPrpi2+Uq7abh4GGPpYANlalzWxyWteJOCsr/P+oPBA49TOLu5FTZO4d3F9MnWJfiMo4BkmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "xml-name-validator": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-4.0.2.tgz",
      "integrity": "sha512-YQ+BmxuTgd6UXZW3+ICGfyqRyHXVlD5GtQr5+qjiNW7bF0cqrzX500HVXPBOvgXb5YnzDd+h0zqyv61KUD7+Sg==",
      "dev": true,
      "license": "BSD-2-Clause"
    },
    "node_modules/whatwg-encoding": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-3.1.1.tgz",
      "integrity": "sha512-6qN4hJdMwfYBtE3YBTTHhoeuUrDBPZmbQaxWAqSALV/MeEnR5z1xd8UKud2RAkFoPkmB+hli1TZSnyi84xz1vQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "iconv-lite": "0.6.3"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/whatwg-mimetype": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-4.0.0.tgz",
      "integrity": "sha512-QaKxh0eNIi2mE9p2vEdzfagOKHCcj1pJ56EEHGQOVxp8r9/iszLUUV7v89x9O1p/T+NlTM5W7jW6+cz4Fq1YVg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/whatwg-url": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-7.1.0.tgz",
      "integrity": "sha512-WUu7Rg1DroM7oQvGWfOiAK21n74Gg+T4elXEQYkOhtyLeWiJFoOGLXPKI/9gzIie9CtwVLm8wtw6YJdKyxSjeg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "lodash.sortby": "^4.7.0",
        "tr46": "^1.0.1",
        "webidl-conversions": "^4.0.2"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
      "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "function.prototype.name": "^1.1.6",
        "has-tostringtag": "^1.0.2",
        "is-async-function": "^2.0.0",
        "is-date-object": "^1.1.0",
        "is-finalizationregistry": "^1.1.0",
        "is-generator-function": "^1.0.10",
        "is-regex": "^1.2.1",
        "is-weakref": "^1.0.2",
        "isarray": "^2.0.5",
        "which-boxed-primitive": "^1.1.0",
        "which-collection": "^1.0.2",
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/why-is-node-running": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.3.0.tgz",
      "integrity": "sha512-hUrmaWBdVDcxvYqnyh09zunKzROWjbZTiNy8dBEjkS7ehEDQibXJ7XvlmtbwuTclUiIyN+CyXQD4Vmko8fNm8w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "siginfo": "^2.0.0",
        "stackback": "0.0.2"
      },
      "bin": {
        "why-is-node-running": "cli.js"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/workbox-background-sync": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-background-sync/-/workbox-background-sync-7.4.0.tgz",
      "integrity": "sha512-8CB9OxKAgKZKyNMwfGZ1XESx89GryWTfI+V5yEj8sHjFH8MFelUwYXEyldEK6M6oKMmn807GoJFUEA1sC4XS9w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "idb": "^7.0.1",
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-broadcast-update": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-broadcast-update/-/workbox-broadcast-update-7.4.0.tgz",
      "integrity": "sha512-+eZQwoktlvo62cI0b+QBr40v5XjighxPq3Fzo9AWMiAosmpG5gxRHgTbGGhaJv/q/MFVxwFNGh/UwHZ/8K88lA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-build": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-build/-/workbox-build-7.4.0.tgz",
      "integrity": "sha512-Ntk1pWb0caOFIvwz/hfgrov/OJ45wPEhI5PbTywQcYjyZiVhT3UrwwUPl6TRYbTm4moaFYithYnl1lvZ8UjxcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@apideck/better-ajv-errors": "^0.3.1",
        "@babel/core": "^7.24.4",
        "@babel/preset-env": "^7.11.0",
        "@babel/runtime": "^7.11.2",
        "@rollup/plugin-babel": "^5.2.0",
        "@rollup/plugin-node-resolve": "^15.2.3",
        "@rollup/plugin-replace": "^2.4.1",
        "@rollup/plugin-terser": "^0.4.3",
        "@surma/rollup-plugin-off-main-thread": "^2.2.3",
        "ajv": "^8.6.0",
        "common-tags": "^1.8.0",
        "fast-json-stable-stringify": "^2.1.0",
        "fs-extra": "^9.0.1",
        "glob": "^11.0.1",
        "lodash": "^4.17.20",
        "pretty-bytes": "^5.3.0",
        "rollup": "^2.79.2",
        "source-map": "^0.8.0-beta.0",
        "stringify-object": "^3.3.0",
        "strip-comments": "^2.0.1",
        "tempy": "^0.6.0",
        "upath": "^1.2.0",
        "workbox-background-sync": "7.4.0",
        "workbox-broadcast-update": "7.4.0",
        "workbox-cacheable-response": "7.4.0",
        "workbox-core": "7.4.0",
        "workbox-expiration": "7.4.0",
        "workbox-google-analytics": "7.4.0",
        "workbox-navigation-preload": "7.4.0",
        "workbox-precaching": "7.4.0",
        "workbox-range-requests": "7.4.0",
        "workbox-recipes": "7.4.0",
        "workbox-routing": "7.4.0",
        "workbox-strategies": "7.4.0",
        "workbox-streams": "7.4.0",
        "workbox-sw": "7.4.0",
        "workbox-window": "7.4.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/workbox-build/node_modules/@apideck/better-ajv-errors": {
      "version": "0.3.6",
      "resolved": "https://registry.npmjs.org/@apideck/better-ajv-errors/-/better-ajv-errors-0.3.6.tgz",
      "integrity": "sha512-P+ZygBLZtkp0qqOAJJVX4oX/sFo5JR3eBWwwuqHHhK0GIgQOKWrAfiAaWX0aArHkRWHMuggFEgAZNxVPwPZYaA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-schema": "^0.4.0",
        "jsonpointer": "^5.0.0",
        "leven": "^3.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "ajv": ">=8"
      }
    },
    "node_modules/workbox-build/node_modules/ajv": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.17.1.tgz",
      "integrity": "sha512-B/gBuNg5SiMTrPkC+A2+cW0RszwxYmn6VYxB/inlBStS5nx6xHIt/ehKRhIMhqusl7a8LjQoZnjCs5vhwxOQ1g==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "fast-deep-equal": "^3.1.3",
        "fast-uri": "^3.0.1",
        "json-schema-traverse": "^1.0.0",
        "require-from-string": "^2.0.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/workbox-build/node_modules/json-schema-traverse": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-1.0.0.tgz",
      "integrity": "sha512-NM8/P9n3XjXhIZn1lLhkFaACTOURQXjWhV4BA/RnOv8xvgqtqpAX9IO4mRQxSx1Rlo4tqzeqb0sOlruaOy3dug==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/workbox-build/node_modules/pretty-bytes": {
      "version": "5.6.0",
      "resolved": "https://registry.npmjs.org/pretty-bytes/-/pretty-bytes-5.6.0.tgz",
      "integrity": "sha512-FFw039TmrBqFK8ma/7OL3sDz/VytdtJr044/QUJtH0wK9lb9jLq9tJyIxUwtQJHwar2BqtiA4iCWSwo9JLkzFg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/workbox-cacheable-response": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-cacheable-response/-/workbox-cacheable-response-7.4.0.tgz",
      "integrity": "sha512-0Fb8795zg/x23ISFkAc7lbWes6vbw34DGFIMw31cwuHPgDEC/5EYm6m/ZkylLX0EnEbbOyOCLjKgFS/Z5g0HeQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-core": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-core/-/workbox-core-7.4.0.tgz",
      "integrity": "sha512-6BMfd8tYEnN4baG4emG9U0hdXM4gGuDU3ectXuVHnj71vwxTFI7WOpQJC4siTOlVtGqCUtj0ZQNsrvi6kZZTAQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/workbox-expiration": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-expiration/-/workbox-expiration-7.4.0.tgz",
      "integrity": "sha512-V50p4BxYhtA80eOvulu8xVfPBgZbkxJ1Jr8UUn0rvqjGhLDqKNtfrDfjJKnLz2U8fO2xGQJTx/SKXNTzHOjnHw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "idb": "^7.0.1",
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-google-analytics": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-google-analytics/-/workbox-google-analytics-7.4.0.tgz",
      "integrity": "sha512-MVPXQslRF6YHkzGoFw1A4GIB8GrKym/A5+jYDUSL+AeJw4ytQGrozYdiZqUW1TPQHW8isBCBtyFJergUXyNoWQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-background-sync": "7.4.0",
        "workbox-core": "7.4.0",
        "workbox-routing": "7.4.0",
        "workbox-strategies": "7.4.0"
      }
    },
    "node_modules/workbox-navigation-preload": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-navigation-preload/-/workbox-navigation-preload-7.4.0.tgz",
      "integrity": "sha512-etzftSgdQfjMcfPgbfaZCfM2QuR1P+4o8uCA2s4rf3chtKTq/Om7g/qvEOcZkG6v7JZOSOxVYQiOu6PbAZgU6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-precaching": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-precaching/-/workbox-precaching-7.4.0.tgz",
      "integrity": "sha512-VQs37T6jDqf1rTxUJZXRl3yjZMf5JX/vDPhmx2CPgDDKXATzEoqyRqhYnRoxl6Kr0rqaQlp32i9rtG5zTzIlNg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0",
        "workbox-routing": "7.4.0",
        "workbox-strategies": "7.4.0"
      }
    },
    "node_modules/workbox-range-requests": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-range-requests/-/workbox-range-requests-7.4.0.tgz",
      "integrity": "sha512-3Vq854ZNuP6Y0KZOQWLaLC9FfM7ZaE+iuQl4VhADXybwzr4z/sMmnLgTeUZLq5PaDlcJBxYXQ3U91V7dwAIfvw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-recipes": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-recipes/-/workbox-recipes-7.4.0.tgz",
      "integrity": "sha512-kOkWvsAn4H8GvAkwfJTbwINdv4voFoiE9hbezgB1sb/0NLyTG4rE7l6LvS8lLk5QIRIto+DjXLuAuG3Vmt3cxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-cacheable-response": "7.4.0",
        "workbox-core": "7.4.0",
        "workbox-expiration": "7.4.0",
        "workbox-precaching": "7.4.0",
        "workbox-routing": "7.4.0",
        "workbox-strategies": "7.4.0"
      }
    },
    "node_modules/workbox-routing": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-routing/-/workbox-routing-7.4.0.tgz",
      "integrity": "sha512-C/ooj5uBWYAhAqwmU8HYQJdOjjDKBp9MzTQ+otpMmd+q0eF59K+NuXUek34wbL0RFrIXe/KKT+tUWcZcBqxbHQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-strategies": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-strategies/-/workbox-strategies-7.4.0.tgz",
      "integrity": "sha512-T4hVqIi5A4mHi92+5EppMX3cLaVywDp8nsyUgJhOZxcfSV/eQofcOA6/EMo5rnTNmNTpw0rUgjAI6LaVullPpg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/workbox-streams": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-streams/-/workbox-streams-7.4.0.tgz",
      "integrity": "sha512-QHPBQrey7hQbnTs5GrEVoWz7RhHJXnPT+12qqWM378orDMo5VMJLCkCM1cnCk+8Eq92lccx/VgRZ7WAzZWbSLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "workbox-core": "7.4.0",
        "workbox-routing": "7.4.0"
      }
    },
    "node_modules/workbox-sw": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-sw/-/workbox-sw-7.4.0.tgz",
      "integrity": "sha512-ltU+Kr3qWR6BtbdlMnCjobZKzeV1hN+S6UvDywBrwM19TTyqA03X66dzw1tEIdJvQ4lYKkBFox6IAEhoSEZ8Xw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/workbox-window": {
      "version": "7.4.0",
      "resolved": "https://registry.npmjs.org/workbox-window/-/workbox-window-7.4.0.tgz",
      "integrity": "sha512-/bIYdBLAVsNR3v7gYGaV4pQW3M3kEPx5E8vDxGvxo6khTrGtSSCS7QiFKv9ogzBgZiy0OXLP9zO28U/1nF1mfw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/trusted-types": "^2.0.2",
        "workbox-core": "7.4.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^6.1.0",
        "string-width": "^5.0.1",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs": {
      "name": "wrap-ansi",
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/wrap-ansi-cjs/node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi/node_modules/ansi-styles": {
      "version": "6.2.3",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.3.tgz",
      "integrity": "sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/ws": {
      "version": "8.18.3",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.3.tgz",
      "integrity": "sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xml-name-validator": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-5.0.0.tgz",
      "integrity": "sha512-EvGK8EJ3DhaHfbRlETOWAS5pO9MZITeauHKJyb8wyajUfQUenkIg2MvLDTZ4T/TgIcm3HU0TFBgWWboAZ30UHg==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/xmlchars": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/xmlchars/-/xmlchars-2.2.0.tgz",
      "integrity": "sha512-JZnDKK8B0RCDw84FNdDAIpZK+JuJw+s7Lz8nksI7SIuU3UXJJslUthsi+uWBUYOwPFwW7W7PRLRfUKpxjtjFCw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.1.tgz",
      "integrity": "sha512-lcYcMxX2PO9XMGvAJkJ3OsNMw+/7FKes7/hgerGUYWIoWu5j/+YQqcZr5JnPZWzOsEBgMbSbiSTn/dv/69Mkpw==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.1.13",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.13.tgz",
      "integrity": "sha512-AvvthqfqrAhNH9dnfmrfKzX5upOdjUVJYFqNSlkmGf64gRaTzlPwz99IHYnVs28qYAybvAlBV+H7pn0saFY4Ig==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zod-validation-error": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/zod-validation-error/-/zod-validation-error-4.0.2.tgz",
      "integrity": "sha512-Q6/nZLe6jxuU80qb/4uJ4t5v2VEZ44lzQjPDhYJNztRQ4wyWc6VF3D3Kb/fAuPetZQnhS3hnajCf9CsWesghLQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "zod": "^3.25.0 || ^4.0.0"
      }
    }
  }
}


==================================================
FILE: .\package.json
==================================================
{
  "name": "flexpro-v2",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:run": "vitest run",
    "test:coverage": "vitest run --coverage",
    "migrate": "node scripts/migrate-data.js"
  },
  "dependencies": {
    "@dnd-kit/core": "^6.1.0",
    "@dnd-kit/sortable": "^8.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@supabase/supabase-js": "^2.48.0",
    "@tanstack/react-query": "^5.90.12",
    "chart.js": "^4.5.1",
    "clsx": "^2.1.1",
    "framer-motion": "^12.23.24",
    "html2canvas": "^1.4.1",
    "jspdf": "^3.0.4",
    "lucide-react": "^0.555.0",
    "react": "^18.3.1",
    "react-chartjs-2": "^5.3.1",
    "react-dom": "^18.3.1",
    "react-hot-toast": "^2.6.0",
    "react-router-dom": "^7.10.1",
    "sweetalert2": "^11.26.3",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@playwright/test": "^1.57.0",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^14.6.1",
    "@types/node": "^22.9.4",
    "@types/react": "^18.3.12",
    "@types/react-dom": "^18.3.1",
    "@typescript-eslint/eslint-plugin": "^8.49.0",
    "@typescript-eslint/parser": "^8.49.0",
    "@vitejs/plugin-react": "^5.1.1",
    "autoprefixer": "^10.4.19",
    "dotenv": "^16.4.5",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "jsdom": "^27.3.0",
    "postcss": "^8.4.35",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.6.3",
    "vite": "npm:rolldown-vite@7.2.5",
    "vite-plugin-pwa": "^1.2.0",
    "vitest": "^4.0.15"
  },
  "overrides": {
    "vite": "npm:rolldown-vite@7.2.5"
  }
}


==================================================
FILE: .\postcss.config.js
==================================================
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}


==================================================
FILE: .\tailwind.config.js
==================================================
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  darkMode: 'class',
  theme: {
    extend: {
      fontFamily: { sans: ['Vazirmatn', 'sans-serif'] },
      colors: {
        navy: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          800: '#1e1b4b',
          900: '#0f172a',
          950: '#020617',
        },
        sky: { DEFAULT: '#38bdf8', 500: '#38bdf8', 600: '#0284c7' }
      },
    },
  },
  plugins: [],
}

==================================================
FILE: .\tsconfig.json
==================================================
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "skipLibCheck": true,
    "types": ["vite/client", "node"],
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src"]
}



==================================================
FILE: .\tsconfig.node.json
==================================================
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}



==================================================
FILE: .\vite.config.ts
==================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { VitePWA } from 'vite-plugin-pwa'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    react(),
    VitePWA({
      strategies: 'injectManifest',
      srcDir: 'public',
      filename: 'sw.js',
      injectRegister: 'auto',
      manifest: {
        name: 'FlexPro v2 - Fitness SaaS',
        short_name: 'FlexPro',
        description: 'Professional fitness coaching platform with AI-powered workout plans',
        theme_color: '#0f172a',
        background_color: '#0f172a',
        display: 'standalone',
        orientation: 'portrait',
        scope: '/',
        start_url: '/',
        icons: [
          {
            src: 'pwa-192x192.svg',
            sizes: '192x192',
            type: 'image/svg+xml'
          },
          {
            src: 'pwa-512x512.svg',
            sizes: '512x512',
            type: 'image/svg+xml'
          },
          {
            src: 'pwa-512x512.svg',
            sizes: '512x512',
            type: 'image/svg+xml',
            purpose: 'any maskable'
          }
        ]
      },
      workbox: {
        globPatterns: ['**/*.{js,css,html,ico,png,svg,woff2}'],
        runtimeCaching: [
          {
            urlPattern: /^https:\/\/.*\.supabase\.co\/.*/i,
            handler: 'NetworkFirst',
            options: {
              cacheName: 'supabase-api-cache',
              expiration: {
                maxEntries: 100,
                maxAgeSeconds: 60 * 60 * 24 // 24 hours
              },
              cacheKeyWillBeUsed: async ({ request }) => {
                return `${request.url}?${Date.now()}`;
              }
            }
          },
          {
            urlPattern: /\.(?:png|jpg|jpeg|svg|gif|webp)$/,
            handler: 'CacheFirst',
            options: {
              cacheName: 'images-cache',
              expiration: {
                maxEntries: 200,
                maxAgeSeconds: 60 * 60 * 24 * 30 // 30 days
              }
            }
          },
          {
            urlPattern: /\.(?:woff2|woff|ttf|eot)$/,
            handler: 'CacheFirst',
            options: {
              cacheName: 'fonts-cache',
              expiration: {
                maxEntries: 50,
                maxAgeSeconds: 60 * 60 * 24 * 365 // 1 year
              }
            }
          }
        ]
      }
    })
  ],
  build: {
    target: 'esnext',
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true,
      },
    },
    sourcemap: false,
    reportCompressedSize: false,
    rollupOptions: {
      output: {
        // Optimize chunk naming for better caching
        entryFileNames: 'js/[name].[hash].js',
        chunkFileNames: 'js/[name].[hash].js',
        assetFileNames: (assetInfo) => {
          if (!assetInfo.name) return '[name].[hash][extname]';
          const info = assetInfo.name.split('.');
          const ext = info[info.length - 1];
          if (/png|jpe?g|gif|tiff|bmp|ico/i.test(ext)) {
            return `img/[name].[hash][extname]`;
          } else if (/woff|woff2|ttf|otf|eot/i.test(ext)) {
            return `fonts/[name].[hash][extname]`;
          } else if (ext === 'css') {
            return `css/[name].[hash][extname]`;
          } else if (ext === 'svg') {
            return `svg/[name].[hash][extname]`;
          }
          return `[name].[hash][extname]`;
        },
        manualChunks: (id) => {
          // Core vendor chunk (React + routing)
          if (id.includes('react') && (id.includes('node_modules/react/') || id.includes('node_modules/react-dom/') || id.includes('node_modules/react-router-dom/'))) {
            return 'vendor-core';
          }
          
          // UI vendor chunk
          if (id.includes('framer-motion') || id.includes('react-hot-toast') || id.includes('sweetalert2') || id.includes('lucide-react')) {
            return 'vendor-ui';
          }

          // Supabase client
          if (id.includes('@supabase/supabase-js')) {
            return 'vendor-supabase';
          }

          // React Query
          if (id.includes('@tanstack/react-query')) {
            return 'vendor-query';
          }

          // Drag and drop
          if (id.includes('@dnd-kit')) {
            return 'vendor-dnd';
          }

          // Charts
          if (id.includes('chart.js') || id.includes('react-chartjs-2')) {
            return 'vendor-data';
          }
        }
      }
    },
    // Optimize chunk size thresholds
    chunkSizeWarningLimit: 600,
    commonjsOptions: {
      include: /node_modules/,
      sourceMap: false
    }
  }
})


==================================================
FILE: .\vitest.config.ts
==================================================
/// <reference types="vitest" />
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/test/setup.ts'],
    css: true,
    // Exclude e2e tests from unit tests
    exclude: ['**/e2e/**', '**/node_modules/**', '**/dist/**'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'src/test/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/coverage/**',
      ],
    },
  },
});








==================================================
FILE: .\.cursor\worktrees.json
==================================================
{
  "setup-worktree": [
    "npm install"
  ]
}


==================================================
FILE: .\public\sw.js
==================================================
// Custom Service Worker for Push Notifications
// This extends the auto-generated PWA service worker

// This will be replaced by the PWA plugin with the list of files to cache
self.__WB_MANIFEST

self.addEventListener('push', (event) => {
  if (!event.data) return;

  try {
    const data = event.data.json();

    const options = {
      body: data.body || 'You have a new notification',
      icon: '/pwa-192x192.svg',
      badge: '/pwa-192x192.svg',
      vibrate: [200, 100, 200],
      data: {
        url: data.url || '/',
        ...data
      },
      actions: data.actions || [
        {
          action: 'view',
          title: 'View'
        },
        {
          action: 'dismiss',
          title: 'Dismiss'
        }
      ],
      requireInteraction: true,
      silent: false
    };

    event.waitUntil(
      self.registration.showNotification(data.title || 'FlexPro v2', options)
    );
  } catch (error) {
    console.error('Error handling push notification:', error);
  }
});

self.addEventListener('notificationclick', (event) => {
  event.notification.close();

  const url = event.notification.data?.url || '/';

  event.waitUntil(
    clients.matchAll({ type: 'window' }).then((windowClients) => {
      // Check if there is already a window/tab open with the target URL
      for (const client of windowClients) {
        if (client.url === url && 'focus' in client) {
          return client.focus();
        }
      }

      // If not, open a new window/tab with the target URL
      if (clients.openWindow) {
        return clients.openWindow(url);
      }
    })
  );
});

self.addEventListener('notificationclose', (event) => {
  // Handle notification dismissal if needed
  console.log('Notification dismissed:', event.notification.data);
});

// Handle background sync for offline actions
self.addEventListener('sync', (event) => {
  if (event.tag === 'background-sync') {
    event.waitUntil(doBackgroundSync());
  }
});

async function doBackgroundSync() {
  try {
    // Implement background sync logic here
    // For example, retry failed API calls, sync offline data, etc.
    console.log('Background sync triggered');
  } catch (error) {
    console.error('Background sync failed:', error);
  }
}






==================================================
FILE: .\scripts\check-raw.js
==================================================
#!/usr/bin/env node
/**
 * Check tables using raw SQL
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

async function checkRaw() {
  console.log(' Checking tables with raw SQL...\n');

  try {
    // Check if tables exist
    const { data: tablesData, error: tablesError } = await supabase.rpc('exec_sql', {
      sql: "SELECT tablename FROM pg_tables WHERE schemaname = 'public' AND tablename IN ('exercises', 'foods');"
    });

    if (tablesError) {
      console.log(' Error checking tables:', tablesError.message);
    } else {
      console.log(' Tables found:', tablesData);
    }

    // Try to select from exercises directly
    const { data: exerciseData, error: exerciseError } = await supabase
      .from('exercises')
      .select('*')
      .limit(1);

    if (exerciseError) {
      console.log(' Cannot select from exercises:', exerciseError.message);
    } else {
      console.log(' Can select from exercises');
    }

  } catch (error) {
    console.log(' General error:', error.message);
  }
}

checkRaw();


==================================================
FILE: .\scripts\check-tables.js
==================================================
#!/usr/bin/env node
/**
 * Check if database tables exist
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

async function checkTables() {
  console.log(' Checking database tables...\n');

  const tables = ['exercises', 'foods'];

  for (const table of tables) {
    try {
      const { data, error } = await supabase
        .from(table)
        .select('count()', { count: 'exact', head: true });

      if (error) {
        console.log(` Table '${table}' does not exist:`, error.message);
      } else {
        console.log(` Table '${table}' exists and is accessible`);
      }
    } catch (error) {
      console.log(` Error checking table '${table}':`, error.message);
    }
  }

  console.log('\n If tables don\'t exist, run the SQL migrations in Supabase Dashboard first.');
}

checkTables();


==================================================
FILE: .\scripts\comprehensive-check.js
==================================================
#!/usr/bin/env node
/**
 * Comprehensive project check script
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

console.log('    FlexPro v2\n');
console.log('=' .repeat(50));

let issues = [];
let warnings = [];

// 1. Check package.json
console.log('  package.json...');
try {
  const packageJson = JSON.parse(fs.readFileSync(path.join(__dirname, '../package.json'), 'utf-8'));
  console.log(' package.json  ');
  console.log(`   : ${packageJson.version}`);
  console.log(`   : ${Object.keys(packageJson.scripts || {}).length} `);
} catch (error) {
  issues.push(`   package.json: ${error.message}`);
}

// 2. Check environment files
console.log('\n   ...');
const envFiles = ['.env', '.env.local'];
envFiles.forEach(file => {
  const filePath = path.join(__dirname, '..', file);
  if (fs.existsSync(filePath)) {
    console.log(` ${file}  `);
    try {
      const content = fs.readFileSync(filePath, 'utf-8');
      const lines = content.split('\n').filter(line => line.trim() && !line.startsWith('#'));
      console.log(`   ${lines.length}  `);
    } catch (error) {
      warnings.push(`  ${file}  : ${error.message}`);
    }
  } else {
    warnings.push(` ${file}  `);
  }
});

// 3. Check TypeScript config
console.log('\n   TypeScript...');
const tsFiles = ['tsconfig.json', 'tsconfig.node.json'];
tsFiles.forEach(file => {
  const filePath = path.join(__dirname, '..', file);
  if (fs.existsSync(filePath)) {
    console.log(` ${file}  `);
  } else {
    warnings.push(` ${file}  `);
  }
});

// 4. Check src directory structure
console.log('\n    src...');
const requiredDirs = [
  'components', 'context', 'hooks', 'pages', 'types', 'utils', 'lib'
];
requiredDirs.forEach(dir => {
  const dirPath = path.join(__dirname, '../src', dir);
  if (fs.existsSync(dirPath)) {
    console.log(`  ${dir}  `);
  } else {
    issues.push(`  ${dir}  `);
  }
});

// 5. Check key files
console.log('\n   ...');
const keyFiles = [
  'src/App.tsx',
  'src/main.tsx',
  'src/index.css',
  'src/context/AuthContext.tsx',
  'src/context/DataContext.tsx',
  'src/pages/CoachDashboard.tsx',
  'src/pages/ClientDashboard.tsx'
];
keyFiles.forEach(file => {
  const filePath = path.join(__dirname, '..', file);
  if (fs.existsSync(filePath)) {
    console.log(` ${file}  `);
  } else {
    issues.push(` ${file}  `);
  }
});

// 6. Check build output
console.log('\n   build...');
const distPath = path.join(__dirname, '../dist');
if (fs.existsSync(distPath)) {
  console.log('  dist  ');
  try {
    const files = fs.readdirSync(distPath);
    console.log(`   ${files.length}   `);
  } catch (error) {
    warnings.push(`   dist  : ${error.message}`);
  }
} else {
  warnings.push('  dist   - build  ');
}

// 7. Check database migrations
console.log('\n  migration  ...');
const migrationsDir = path.join(__dirname, '../supabase/migrations');
if (fs.existsSync(migrationsDir)) {
  console.log('  migrations  ');
  try {
    const files = fs.readdirSync(migrationsDir);
    console.log(`   ${files.length}  migration`);
    files.forEach(file => {
      console.log(`   - ${file}`);
    });
  } catch (error) {
    warnings.push(`  migration   : ${error.message}`);
  }
} else {
  issues.push('  supabase/migrations  ');
}

// 8. Check scripts
console.log('\n  ...');
const scriptsDir = path.join(__dirname, '../scripts');
if (fs.existsSync(scriptsDir)) {
  console.log('  scripts  ');
  try {
    const files = fs.readdirSync(scriptsDir);
    const scriptFiles = files.filter(f => f.endsWith('.js'));
    console.log(`   ${scriptFiles.length}  JavaScript`);
    scriptFiles.forEach(file => {
      console.log(`   - ${file}`);
    });
  } catch (error) {
    warnings.push(`    : ${error.message}`);
  }
} else {
  warnings.push('  scripts  ');
}

// 9. Check tests
console.log('\n  ...');
const testDirs = [
  'src/__tests__',
  'src/hooks/__tests__',
  'src/utils/__tests__'
];
let testFilesCount = 0;
testDirs.forEach(dir => {
  const dirPath = path.join(__dirname, '..', dir);
  if (fs.existsSync(dirPath)) {
    try {
      const files = fs.readdirSync(dirPath);
      const testFiles = files.filter(f => f.endsWith('.test.ts') || f.endsWith('.test.tsx'));
      testFilesCount += testFiles.length;
      if (testFiles.length > 0) {
        console.log(` ${dir}: ${testFiles.length}  `);
      }
    } catch (error) {
      // Directory exists but can't read
    }
  }
});

if (testFilesCount === 0) {
  warnings.push('    ');
} else {
  console.log(`  ${testFilesCount}  `);
}

// Summary
console.log('\n' + '='.repeat(50));
console.log('  :');

if (issues.length === 0) {
  console.log('     ');
} else {
  console.log(` ${issues.length}  :`);
  issues.forEach(issue => console.log(`   ${issue}`));
}

if (warnings.length === 0) {
  console.log('    ');
} else {
  console.log(` ${warnings.length} :`);
  warnings.forEach(warning => console.log(`   ${warning}`));
}

console.log('\n  :');
console.log('1.     migration  SQL   Supabase Dashboard  ');
console.log('2.       ');
console.log('3.      npm run dev  ');
console.log('4.   lint      ()');

console.log('\n  :          .');


==================================================
FILE: .\scripts\create-tables.js
==================================================
#!/usr/bin/env node
/**
 * Create database tables directly
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import path from 'path';
import { fileURLToPath } from 'url';
import fs from 'fs';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY, {
  db: {
    schema: 'public'
  },
  global: {
    headers: {
      'X-Client-Info': 'create-tables-script'
    }
  }
});

async function createTables() {
  console.log(' Creating database tables...\n');

  try {
    // Read migration files
    const exercisesSql = fs.readFileSync(path.join(__dirname, '../supabase/migrations/20250116_create_exercises_foods_tables.sql'), 'utf-8');
    const adminSql = fs.readFileSync(path.join(__dirname, '../supabase/migrations/20250116_add_super_admin_flag.sql'), 'utf-8');

    console.log(' Read migration files successfully');

    // Split into statements and execute
    const allSql = exercisesSql + '\n\n' + adminSql;
    const statements = allSql.split(';').filter(stmt => stmt.trim().length > 0);

    console.log(` Found ${statements.length} SQL statements to execute`);

    let successCount = 0;
    for (let i = 0; i < statements.length; i++) {
      const statement = statements[i].trim();
      if (!statement) continue;

      try {
        // Try to execute using different methods
        console.log(`Executing statement ${i + 1}/${statements.length}...`);

        // Method 1: Direct query (might not work)
        const { error } = await supabase.rpc('exec', { query: statement });

        if (error) {
          console.log(`    RPC failed, trying alternative method...`);

          // Method 2: Try with different RPC
          const { error: error2 } = await supabase.from('_supabase_migrations').insert({
            name: `migration_${i}`,
            statements: [statement]
          });

          if (error2) {
            console.log(`    Statement ${i + 1} failed:`, error2.message);
            console.log(`   SQL: ${statement.substring(0, 100)}...`);
          } else {
            successCount++;
            console.log(`    Statement ${i + 1} executed`);
          }
        } else {
          successCount++;
          console.log(`    Statement ${i + 1} executed`);
        }
      } catch (err) {
        console.log(`    Error executing statement ${i + 1}:`, err.message);
      }
    }

    console.log(`\n Results: ${successCount}/${statements.length} statements executed`);

    if (successCount > 0) {
      console.log('\n Tables created! Now try running:');
      console.log('node scripts/migrate-data-to-supabase.js');
    } else {
      console.log('\n No statements executed. Manual execution required in Supabase Dashboard.');
    }

  } catch (error) {
    console.error(' Error creating tables:', error.message);
    console.log('\n Please execute the migrations manually in Supabase SQL Editor');
  }
}

createTables();


==================================================
FILE: .\scripts\migrate-data-to-supabase.js
==================================================
#!/usr/bin/env node
/**
 * Migration Script: Import Static Exercise and Food Data to Supabase
 * This script reads data from TypeScript files and inserts them into Supabase tables
 * Usage: node scripts/migrate-data-to-supabase.js
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY');
  process.exit(1);
}

// Create client with options to bypass schema cache
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY, {
  db: {
    schema: 'public'
  },
  global: {
    headers: {
      'X-Client-Info': 'migration-script'
    }
  }
});

/**
 * Parse TypeScript file to extract export (handles both export const and export default)
 */
function parseTypeScriptExport(filePath, exportName) {
  try {
    const content = fs.readFileSync(filePath, 'utf-8');
    
    // Try export const first
    let match = content.match(new RegExp(`export\\s+const\\s+${exportName}\\s*:\\s*[^=]*=\\s*(\\{[\\s\\S]*?\\});`));
    if (match) {
      // eslint-disable-next-line no-eval
      const data = eval(`(${match[1]})`);
      return data;
    }
    
    // Try export default
    match = content.match(/export\s+default\s+({[\s\S]*?})(?:;|$)/);
    if (match) {
      // eslint-disable-next-line no-eval
      const data = eval(`(${match[1]})`);
      return data;
    }
    
    throw new Error(`Could not find export in ${filePath}`);
  } catch (error) {
    console.error(`Error parsing ${filePath}:`, error.message);
    return null;
  }
}

/**
 * Migrate resistance exercises
 */
async function migrateResistanceExercises() {
  console.log('\n Migrating Resistance Exercises...');
  
  const dataPath = path.join(__dirname, '../src/data/resistanceExercises.ts');
  const resistanceData = parseTypeScriptExport(dataPath, 'resistanceExercises');
  
  if (!resistanceData) {
    console.warn('  Skipping resistance exercises - data not found');
    return 0;
  }

  const exercises = [];
  
  Object.entries(resistanceData).forEach(([muscleGroup, subMuscles]) => {
    if (typeof subMuscles !== 'object') return;
    
    Object.entries(subMuscles).forEach(([subMuscle, exerciseNames]) => {
      if (Array.isArray(exerciseNames)) {
        exerciseNames.forEach(name => {
          exercises.push({
            name: String(name),
            muscle_group: String(muscleGroup),
            sub_muscle_group: String(subMuscle),
            type: 'resistance',
            equipment: null,
            mechanics: null,
            description: null,
          });
        });
      }
    });
  });

  if (exercises.length === 0) {
    console.warn('  No exercises found in resistance data');
    return;
  }

  // Insert in batches to avoid timeout
  const BATCH_SIZE = 100;
  let inserted = 0;

  for (let i = 0; i < exercises.length; i += BATCH_SIZE) {
    const batch = exercises.slice(i, i + BATCH_SIZE);
    
    try {
      const { error } = await supabase
        .from('exercises')
        .upsert(batch, { onConflict: 'name' });
      
      if (error) throw error;
      
      inserted += batch.length;
      console.log(` Inserted ${inserted}/${exercises.length} resistance exercises...`);
    } catch (error) {
      console.error(` Error inserting batch at ${i}:`, error.message);
    }
  }

  console.log(` Completed: ${inserted} resistance exercises migrated`);
  return inserted;
}

/**
 * Migrate corrective exercises
 */
async function migrateCorrectiveExercises() {
  console.log('\n Migrating Corrective Exercises...');
  
  const dataPath = path.join(__dirname, '../src/data/correctiveExercises.ts');
  const correctiveData = parseTypeScriptExport(dataPath, 'correctiveExercises');
  
  if (!correctiveData) {
    console.warn('  Skipping corrective exercises - data not found');
    return 0;
  }

  const exercises = [];
  
  Object.entries(correctiveData).forEach(([category, exerciseNames]) => {
    if (Array.isArray(exerciseNames)) {
      exerciseNames.forEach(name => {
        exercises.push({
          name: String(name),
          muscle_group: String(category),
          type: 'corrective',
          equipment: null,
          mechanics: null,
          description: null,
        });
      });
    }
  });

  if (exercises.length === 0) {
    console.warn('  No exercises found in corrective data');
    return 0;
  }

  const BATCH_SIZE = 100;
  let inserted = 0;

  for (let i = 0; i < exercises.length; i += BATCH_SIZE) {
    const batch = exercises.slice(i, i + BATCH_SIZE);
    
    try {
      const { error } = await supabase
        .from('exercises')
        .upsert(batch, { onConflict: 'name' });
      
      if (error) throw error;
      
      inserted += batch.length;
      console.log(` Inserted ${inserted}/${exercises.length} corrective exercises...`);
    } catch (error) {
      console.error(` Error inserting batch at ${i}:`, error.message);
    }
  }

  console.log(` Completed: ${inserted} corrective exercises migrated`);
  return inserted;
}

/**
 * Migrate food data
 */
async function migrateFoods() {
  console.log('\n Migrating Foods...');
  
  const dataPath = path.join(__dirname, '../src/data/foodData.ts');
  const foodData = parseTypeScriptExport(dataPath, 'foodData');
  
  if (!foodData || typeof foodData !== 'object') {
    console.warn('  Skipping foods - data not found or invalid format');
    return 0;
  }

  const foods = [];
  
  // Handle both array and object formats
  const entries = Array.isArray(foodData) ? foodData : Object.entries(foodData);
  
  entries.forEach(entry => {
    let category, items;
    
    if (Array.isArray(foodData)) {
      // If it's an array, assume it's already in the right format
      items = [entry];
      category = '';
    } else {
      [category, items] = entry;
      if (typeof items !== 'object') return;
    }
    
    // If items is an object of food entries
    if (!Array.isArray(items)) {
      Object.entries(items).forEach(([foodName, foodInfo]) => {
        // Map abbreviations: u=unit, p/c=calories, b=protein, c=carbs, f=fat, ch=fiber
        foods.push({
          name: foodName,
          category: category,
          unit: foodInfo.u || 'grams',
          calories: parseInt(foodInfo.p) || 0,
          protein: parseInt(foodInfo.b) || 0,
          carbs: parseInt(foodInfo.c) || 0,
          fat: parseInt(foodInfo.f) || 0,
          fiber: parseInt(foodInfo.ch) || 0,
          base_amount: 100,
        });
      });
    } else {
      // If items is an array of food names
      items.forEach(foodName => {
        foods.push({
          name: foodName,
          category: category,
          unit: 'grams',
          calories: 0,
          protein: 0,
          carbs: 0,
          fat: 0,
          fiber: 0,
          base_amount: 100,
        });
      });
    }
  });

  if (foods.length === 0) {
    console.warn('  No foods found');
    return 0;
  }

  const BATCH_SIZE = 100;
  let inserted = 0;

  for (let i = 0; i < foods.length; i += BATCH_SIZE) {
    const batch = foods.slice(i, i + BATCH_SIZE);
    
    try {
      const { error } = await supabase
        .from('foods')
        .upsert(batch, { onConflict: 'name' });
      
      if (error) throw error;
      
      inserted += batch.length;
      console.log(` Inserted ${inserted}/${foods.length} foods...`);
    } catch (error) {
      console.error(` Error inserting batch at ${i}:`, error.message);
    }
  }

  console.log(` Completed: ${inserted} foods migrated`);
  return inserted;
}

/**
 * Main migration function
 */
async function runMigration() {
  console.log(' Starting data migration to Supabase...\n');
  
  try {
    // Test Supabase connection
    console.log(' Testing Supabase connection...');
    const { data, error } = await supabase.from('exercises').select('count()', { count: 'exact', head: true });
    
    if (error) {
      console.error(' Failed to connect to Supabase:', error.message);
      process.exit(1);
    }
    
    console.log(' Supabase connection successful\n');

    // Run migrations
    const resistanceCount = await migrateResistanceExercises();
    const correctiveCount = await migrateCorrectiveExercises();
    const foodsCount = await migrateFoods();

    console.log('\n' + '='.repeat(50));
    console.log(' Migration completed successfully!');
    console.log(`   Resistance Exercises: ${resistanceCount}`);
    console.log(`   Corrective Exercises: ${correctiveCount}`);
    console.log(`   Foods: ${foodsCount}`);
    console.log(`   Total: ${resistanceCount + correctiveCount + foodsCount}`);
    console.log('='.repeat(50) + '\n');
  } catch (error) {
    console.error('\n Migration failed:', error.message);
    process.exit(1);
  }
}

// Run migration
runMigration();


==================================================
FILE: .\scripts\migrate-data.js
==================================================
#!/usr/bin/env node

/**
 * FlexPro v2 Data Migration Script
 * Migrates static data from src/data/ to Supabase
 */

const fs = require('fs');
const path = require('path');
const { createClient } = require('@supabase/supabase-js');
require('dotenv').config();

// Load environment variables
const supabaseUrl = process.env.VITE_SUPABASE_URL;
const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY;

if (!supabaseUrl || !supabaseKey) {
  console.error(' Missing Supabase environment variables');
  process.exit(1);
}

// Initialize Supabase client
const supabase = createClient(supabaseUrl, supabaseKey);

console.log(' Starting FlexPro v2 data migration...');

/**
 * Load and parse data from TypeScript files
 */
function loadStaticData() {
  try {
    // Load food data
    const foodDataPath = path.join(__dirname, '../src/data/foodData.ts');
    const foodDataContent = fs.readFileSync(foodDataPath, 'utf-8');

    // Extract the export default object
    const foodDataMatch = foodDataContent.match(/export default\s*({[\s\S]*});?/);
    if (!foodDataMatch) {
      throw new Error('Could not parse foodData.ts');
    }

    // Load exercise data
    const exerciseDataPath = path.join(__dirname, '../src/data/resistanceExercises.ts');
    const exerciseDataContent = fs.readFileSync(exerciseDataPath, 'utf-8');

    const exerciseDataMatch = exerciseDataContent.match(/export default\s*({[\s\S]*});?/);
    if (!exerciseDataMatch) {
      throw new Error('Could not parse resistanceExercises.ts');
    }

    // Note: In a real scenario, we'd use a proper TypeScript parser
    // For this demo, we'll simulate the data structure
    console.log(' Static data files loaded');

    return {
      foodData: getFoodData(),
      exerciseData: getExerciseData()
    };
  } catch (error) {
    console.error(' Error loading static data:', error.message);
    process.exit(1);
  }
}

/**
 * Get food data (simulated - in real scenario, parse the actual file)
 */
function getFoodData() {
  // This would normally parse the actual foodData.ts file
  // For demo purposes, we'll create a sample structure
  return {
    '': {
      '': { calories: 52, protein: 0.2, carbs: 14, fat: 0.2, unit: 'g', base_amount: 100 },
      '': { calories: 89, protein: 1.1, carbs: 23, fat: 0.3, unit: 'g', base_amount: 100 }
    },
    '': {
      ' ': { calories: 130, protein: 2.7, carbs: 28, fat: 0.3, unit: 'g', base_amount: 100 },
      ' ': { calories: 265, protein: 9, carbs: 49, fat: 3.2, unit: 'g', base_amount: 100 }
    }
  };
}

/**
 * Get exercise data (simulated)
 */
function getExerciseData() {
  return {
    '': {
      ' ': ['   ', '   '],
      ' ': ['', '   ']
    },
    '': {
      ' ': ['   ', '   '],
      ' ': [' ', ' ']
    }
  };
}

/**
 * Migrate food data to Supabase
 */
async function migrateFoods(foodData) {
  console.log(' Migrating foods data...');

  const foodsToInsert = [];

  for (const [category, foods] of Object.entries(foodData)) {
    for (const [name, macros] of Object.entries(foods)) {
      foodsToInsert.push({
        name,
        category,
        unit: macros.unit || 'g',
        calories: macros.calories || 0,
        protein: macros.protein || 0,
        carbs: macros.carbs || 0,
        fat: macros.fat || 0,
        base_amount: macros.base_amount || 100
      });
    }
  }

  console.log(` Inserting ${foodsToInsert.length} food items...`);

  const { error } = await supabase
    .from('foods')
    .upsert(foodsToInsert, {
      onConflict: 'name,category',
      ignoreDuplicates: false
    });

  if (error) {
    console.error(' Error migrating foods:', error);
    return false;
  }

  console.log(' Foods migration completed');
  return true;
}

/**
 * Migrate exercise data to Supabase
 */
async function migrateExercises(exerciseData) {
  console.log(' Migrating exercises data...');

  const exercisesToInsert = [];

  for (const [muscleGroup, subGroups] of Object.entries(exerciseData)) {
    for (const [subMuscle, exercises] of Object.entries(subGroups)) {
      for (const exerciseName of exercises) {
        exercisesToInsert.push({
          name: exerciseName,
          muscle_group: muscleGroup,
          sub_muscle_target: subMuscle,
          type: 'resistance',
          mechanics: subMuscle.includes('') ? 'compound' : 'isolation'
        });
      }
    }
  }

  console.log(` Inserting ${exercisesToInsert.length} exercise items...`);

  const { error } = await supabase
    .from('exercises')
    .upsert(exercisesToInsert, {
      onConflict: 'name,muscle_group,sub_muscle_target',
      ignoreDuplicates: false
    });

  if (error) {
    console.error(' Error migrating exercises:', error);
    return false;
  }

  console.log(' Exercises migration completed');
  return true;
}

/**
 * Verify migration results
 */
async function verifyMigration() {
  console.log(' Verifying migration...');

  const { data: foods, error: foodsError } = await supabase
    .from('foods')
    .select('count', { count: 'exact', head: true });

  const { data: exercises, error: exercisesError } = await supabase
    .from('exercises')
    .select('count', { count: 'exact', head: true });

  if (foodsError || exercisesError) {
    console.error(' Error verifying migration');
    return false;
  }

  console.log(` Migration results:`);
  console.log(`   - Foods: ${foods}`);
  console.log(`   - Exercises: ${exercises}`);

  return true;
}

/**
 * Main migration function
 */
async function main() {
  try {
    // Test connection
    console.log(' Testing Supabase connection...');
    const { error: connectionError } = await supabase.from('foods').select('count', { count: 'exact', head: true });
    if (connectionError && !connectionError.message.includes('relation "public.foods" does not exist')) {
      throw new Error(`Connection failed: ${connectionError.message}`);
    }
    console.log(' Supabase connection successful');

    // Load static data
    const { foodData, exerciseData } = loadStaticData();

    // Run migrations
    const foodsSuccess = await migrateFoods(foodData);
    const exercisesSuccess = await migrateExercises(exerciseData);

    if (foodsSuccess && exercisesSuccess) {
      await verifyMigration();
      console.log(' Migration completed successfully!');
    } else {
      console.error(' Migration failed');
      process.exit(1);
    }

  } catch (error) {
    console.error(' Migration error:', error.message);
    process.exit(1);
  }
}

// Run migration
main();

==================================================
FILE: .\scripts\run-migrations.js
==================================================
#!/usr/bin/env node
/**
 * Supabase Migration Instructions
 * Since Supabase CLI requires project linking, please execute these migrations manually:
 *
 * 1. Go to your Supabase Dashboard: https://supabase.com/dashboard
 * 2. Select your project
 * 3. Go to SQL Editor
 * 4. Copy and paste the contents of each migration file in order:
 *
 * Order of execution:
 * 1. supabase/migrations/20250116_create_exercises_foods_tables.sql
 * 2. supabase/migrations/20250116_add_super_admin_flag.sql
 *
 * After running migrations, execute data migration:
 * node scripts/migrate-data-to-supabase.js
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

console.log(' Supabase Migration Instructions:\n');

console.log('1. Go to your Supabase Dashboard: https://supabase.com/dashboard');
console.log('2. Select your project');
console.log('3. Go to SQL Editor');
console.log('4. Execute the following migrations in order:\n');

// List migration files
const migrationsDir = path.join(__dirname, '../supabase/migrations');
const migrationFiles = [
  '20250116_create_exercises_foods_tables.sql',
  '20250116_add_super_admin_flag.sql',
  '20250116_add_auth_functions.sql',
  '20250116_add_program_requests_table.sql',
  '20250116_add_profile_columns.sql'
];

migrationFiles.forEach((file, index) => {
  const filePath = path.join(migrationsDir, file);
  if (fs.existsSync(filePath)) {
    console.log(`${index + 1}. ${file}`);
    console.log('   Content preview:');
    const content = fs.readFileSync(filePath, 'utf-8');
    const lines = content.split('\n').slice(0, 5);
    lines.forEach(line => {
      if (line.trim()) console.log(`      ${line}`);
    });
    console.log('   ... (full content in file)\n');
  } else {
    console.log(`${index + 1}. ${file} - FILE NOT FOUND \n`);
  }
});

console.log('5. After running migrations, execute data migration:');
console.log('   node scripts/migrate-data-to-supabase.js\n');

console.log('  Important: Make sure your .env.local file contains:');
console.log('   VITE_SUPABASE_URL=your_supabase_url');
console.log('   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key\n');


==================================================
FILE: .\scripts\setup-complete.js
==================================================
#!/usr/bin/env node
/**
 * Complete database setup script
 * This script will guide you through the complete setup process
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import path from 'path';
import { fileURLToPath } from 'url';
import fs from 'fs';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials in .env.local');
  console.log('Please ensure VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY are set');
  process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

async function checkSetup() {
  console.log(' Checking complete setup...\n');

  // Check 1: Environment variables
  console.log(' Environment variables configured');

  // Check 2: Supabase connection
  try {
    const { error } = await supabase.from('profiles').select('count()', { count: 'exact', head: true });
    if (error) {
      console.log(' Supabase connection failed:', error.message);
      console.log('Full error:', JSON.stringify(error, null, 2));
      return false;
    }
    console.log(' Supabase connection working');
  } catch (error) {
    console.log(' Supabase connection failed:', error.message);
    console.log('Error type:', error.constructor.name);
    return false;
  }

  // Check 3: Tables exist
  const tablesExist = await checkTablesExist();
  if (!tablesExist) {
    console.log('\n CRITICAL: Database tables not found!');
    console.log(' SOLUTION: Execute SQL migrations manually in Supabase Dashboard');
    console.log('\n Go to: https://supabase.com/dashboard');
    console.log('1. Select your project');
    console.log('2. Go to SQL Editor');
    console.log('3. Copy and paste the following SQL:');

    // Show migration content
    const exercisesSql = fs.readFileSync(path.join(__dirname, '../supabase/migrations/20250116_create_exercises_foods_tables.sql'), 'utf-8');
    const adminSql = fs.readFileSync(path.join(__dirname, '../supabase/migrations/20250116_add_super_admin_flag.sql'), 'utf-8');

    console.log('\n' + '='.repeat(80));
    console.log('MIGRATION 1 - Exercises and Foods Tables:');
    console.log('='.repeat(80));
    console.log(exercisesSql);

    console.log('\n' + '='.repeat(80));
    console.log('MIGRATION 2 - Admin Features:');
    console.log('='.repeat(80));
    console.log(adminSql);

    console.log('\n  IMPORTANT: Execute both migrations in order!');
    console.log('After executing both, run: node scripts/setup-complete.js');

    return false;
  }

  // Check 4: Data migrated
  const dataMigrated = await checkDataMigrated();
  if (!dataMigrated) {
    console.log('\n  Data not migrated yet');
    console.log(' SOLUTION: Run data migration');
    console.log('node scripts/migrate-data-to-supabase.js');

    // Try to run migration automatically
    console.log('\n Attempting automatic data migration...');
    try {
      const { spawn } = await import('child_process');
      const migrationProcess = spawn('node', ['scripts/migrate-data-to-supabase.js'], {
        stdio: 'inherit',
        cwd: path.dirname(__dirname)
      });

      return new Promise((resolve) => {
        migrationProcess.on('close', (code) => {
          if (code === 0) {
            console.log('\n Data migration completed successfully!');
            resolve(true);
          } else {
            console.log('\n Data migration failed');
            resolve(false);
          }
        });
      });
    } catch (error) {
      console.log(' Could not run migration automatically');
      return false;
    }
  }

  // Check 5: Final verification
  console.log('\n Running final verification...');

  try {
    // Test exercises search
    const { data: exercises, error: exercisesError } = await supabase
      .from('exercises')
      .select('name, muscle_group')
      .limit(5);

    if (exercisesError) throw exercisesError;

    // Test foods search
    const { data: foods, error: foodsError } = await supabase
      .from('foods')
      .select('name, category')
      .limit(5);

    if (foodsError) throw foodsError;

    console.log(` Found ${exercises.length} exercises and ${foods.length} foods`);
    console.log(' All systems operational!');

    console.log('\n SETUP COMPLETE!');
    console.log('Your FlexPro v2 is ready to use!');
    console.log('\n To start the application:');
    console.log('npm run dev');

    return true;

  } catch (error) {
    console.log(' Final verification failed:', error.message);
    return false;
  }
}

async function checkTablesExist() {
  try {
    const { data: exercises, error: exercisesError } = await supabase
      .from('exercises')
      .select('count()', { count: 'exact', head: true });

    const { data: foods, error: foodsError } = await supabase
      .from('foods')
      .select('count()', { count: 'exact', head: true });

    return !exercisesError && !foodsError;
  } catch (error) {
    return false;
  }
}

async function checkDataMigrated() {
  try {
    const { count: exerciseCount, error: exerciseError } = await supabase
      .from('exercises')
      .select('*', { count: 'exact', head: true });

    const { count: foodCount, error: foodError } = await supabase
      .from('foods')
      .select('*', { count: 'exact', head: true });

    return !exerciseError && !foodError && (exerciseCount > 0 || foodCount > 0);
  } catch (error) {
    return false;
  }
}

// Run the setup check
checkSetup();


==================================================
FILE: .\scripts\test-tables.js
==================================================
#!/usr/bin/env node
/**
 * Test database tables functionality
 */

import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load environment variables
dotenv.config({ path: path.join(__dirname, '../.env.local') });

const SUPABASE_URL = process.env.VITE_SUPABASE_URL;
const SUPABASE_KEY = process.env.VITE_SUPABASE_ANON_KEY;

if (!SUPABASE_URL || !SUPABASE_KEY) {
  console.error(' Missing Supabase credentials');
  process.exit(1);
}

// Create client without schema cache
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY, {
  db: {
    schema: 'public'
  },
  global: {
    headers: {
      'X-Client-Info': 'test-script'
    }
  }
});

async function testTables() {
  console.log(' Testing database tables...\n');

  try {
    // Test exercises table
    console.log('Testing exercises table...');
    const { data: exerciseData, error: exerciseError } = await supabase
      .from('exercises')
      .select('name, muscle_group')
      .limit(5);

    if (exerciseError) {
      console.log(' Exercises table error:', exerciseError.message);
    } else {
      console.log(` Exercises table OK - Found ${exerciseData.length} records`);
      if (exerciseData.length > 0) {
        console.log('   Sample:', exerciseData[0]);
      }
    }

    // Test foods table
    console.log('\nTesting foods table...');
    const { data: foodData, error: foodError } = await supabase
      .from('foods')
      .select('name, category, calories')
      .limit(5);

    if (foodError) {
      console.log(' Foods table error:', foodError.message);
    } else {
      console.log(` Foods table OK - Found ${foodData.length} records`);
      if (foodData.length > 0) {
        console.log('   Sample:', foodData[0]);
      }
    }

    // Test insert capability
    console.log('\nTesting insert capability...');
    const testExercise = {
      name: 'Test Exercise - ' + Date.now(),
      muscle_group: 'chest',
      type: 'resistance'
    };

    const { error: insertError } = await supabase
      .from('exercises')
      .insert(testExercise);

    if (insertError) {
      console.log(' Insert failed:', insertError.message);
    } else {
      console.log(' Insert successful');
    }

  } catch (error) {
    console.log(' General error:', error.message);
  }
}

testTables();


==================================================
FILE: .\src\App.css
==================================================
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}


==================================================
FILE: .\src\App.tsx
==================================================
import React from 'react';
import { useAuth } from './context/AuthContext';
import { Routes, Route, Navigate } from 'react-router-dom';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import PrivateRoute from './components/PrivateRoute';
import PublicRoute from './components/PublicRoute';
import AdminRoute from './components/AdminRoute';
import Dashboard from './pages/Dashboard';
import AdminDashboard from './pages/AdminDashboard';
import ErrorBoundary from './components/ErrorBoundary';
import { Toaster } from 'react-hot-toast';

function App() {
  const { user } = useAuth();

  return (
    <ErrorBoundary>
    <div className="min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] transition-colors">
      <Toaster 
        position="top-center" 
        toastOptions={{ 
          duration: 4000,
          style: { 
            background: 'var(--glass-bg)', 
            color: 'var(--text-primary)', 
            borderRadius: '12px', 
            border: '1px solid var(--glass-border)',
            padding: '12px 16px',
            fontSize: '14px',
            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'
          },
          success: {
            iconTheme: {
              primary: '#10b981',
              secondary: '#fff',
            },
          },
          error: {
            iconTheme: {
              primary: '#ef4444',
              secondary: '#fff',
            },
          },
        }} 
      />
      <Routes>
        <Route
          path="/login"
          element={
            <PublicRoute signedIn={!!user} redirectTo="/dashboard">
              <LoginPage />
            </PublicRoute>
          }
        />
        <Route
          path="/register"
          element={
            <PublicRoute signedIn={!!user} redirectTo="/dashboard">
              <RegisterPage />
            </PublicRoute>
          }
            />
        <Route
          path="/dashboard"
          element={
            <PrivateRoute signedIn={!!user} fallback="/login">
              <Dashboard />
            </PrivateRoute>
          }
        />
        <Route
          path="/admin"
          element={
            <PrivateRoute signedIn={!!user} fallback="/login">
              <AdminRoute>
                <AdminDashboard />
              </AdminRoute>
            </PrivateRoute>
          }
        />
        <Route path="*" element={<Navigate to="/login" replace />} />
      </Routes>
    </div>
    </ErrorBoundary>
  );
}

export default App;

==================================================
FILE: .\src\index.css
==================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

/*      */
:root {
    /*    */
    --bg-primary: #f5f7fb;
    --bg-secondary: #e9eef7;
    --text-primary: #0f172a;
    --text-secondary: #5b6b82;
    --glass-bg: rgba(255, 255, 255, 0.82);
    --glass-border: rgba(15, 23, 42, 0.08);
    --glass-highlight: rgba(255, 255, 255, 0.8);
    --glass-shadow: rgba(15, 23, 42, 0.12);
    --input-bg: rgba(255, 255, 255, 0.9);
    --accent-color: #0ea5e9;        /*   */
    --accent-secondary: #8b5cf6;    /*   */
    --accent-tertiary: #22c55e;     /*   */
    --card-shine: rgba(14,165,233,0.18);
    --shadow-strong: rgba(15, 23, 42, 0.16);
    --frame-60: 16.67ms;
    /*   */
    --color-success: #22c55e;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    --color-info: #3b82f6;
}

.dark {
    /*      */
    --bg-primary: #050a17;
    --bg-secondary: #0b1220;
    --text-primary: #e2e8f0;
    --text-secondary: #94a3b8;
    --glass-bg: rgba(11, 18, 32, 0.82);
    --glass-border: rgba(148, 163, 184, 0.22);
    --glass-highlight: rgba(255, 255, 255, 0.06);
    --glass-shadow: rgba(0, 0, 0, 0.55);
    --input-bg: rgba(15, 23, 42, 0.7);
    --accent-color: #0ea5e9;        /*    */
    --accent-secondary: #6366f1;    /* -  hover */
    --accent-tertiary: #a855f7;     /*   */
    --card-shine: rgba(139,92,246,0.25);
    --shadow-strong: rgba(2, 6, 23, 0.68);
    /*   */
    --color-success: #22c55e;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    --color-info: #3b82f6;
}

body { 
    font-family: 'Vazirmatn', 'Shabnam', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    background: linear-gradient(145deg, var(--bg-primary), var(--bg-secondary));
    color: var(--text-primary);
    transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;
    overflow: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: 'kern' 1;
    text-rendering: optimizeLegibility;
    will-change: background;
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -3;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cg fill='none' fill-opacity='0.08'%3E%3Cpath d='M0 158L2 160H0v-2zm160-26h-2l2 2v-2zm0-64h-2l2 2V68zm0-64h-2l2 2V4zM0 70l2 2H0v-2zM32 0h-2l2 2V0zm64 0h-2l2 2V0zm64 128h-2l2 2v-2zM0 34l2 2H0v-2zm0 64l2 2H0v-2zM94 0h-2l2 2V0zm32 0h-2l2 2V0zM0 6l2 2H0V6zM0 134l2 2H0v-2z' fill='%23ffffff'/%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.35;
    mix-blend-mode: soft-light;
    pointer-events: none;
}

body::after {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -2;
    background: radial-gradient(circle at 55% 140%, rgba(14,165,233,0.35), transparent 60%),
                radial-gradient(circle at -5% -5%, rgba(139,92,246,0.22), transparent 55%);
    filter: blur(70px);
    opacity: 0.65;
    pointer-events: none;
}

/*    */
.bg-gradient-animated {
    position: fixed;
    inset: 0;
    z-index: -4;
    background: conic-gradient(from 45deg, rgba(59,130,246,0.1), rgba(14,116,144,0.05), rgba(99,102,241,0.12), rgba(14,116,144,0.05));
    animation: gradientShift 18s linear infinite;
    filter: saturate(140%);
}

@keyframes gradientShift {
    0% { transform: rotate(0deg) scale(1); }
    33% { transform: rotate(120deg) scale(1.02); }
    66% { transform: rotate(240deg) scale(0.98); }
    100% { transform: rotate(360deg) scale(1); }
}

/*     UX */
@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px rgba(14, 165, 233, 0.3); }
    50% { box-shadow: 0 0 30px rgba(14, 165, 233, 0.6), 0 0 40px rgba(14, 165, 233, 0.4); }
}

@keyframes bounce-in {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.05); }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes slide-up {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes fade-in-scale {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

@keyframes rotate-in {
    from { transform: rotate(-180deg) scale(0); opacity: 0; }
    to { transform: rotate(0deg) scale(1); opacity: 1; }
}

/*         */
.animate-shimmer {
    position: relative;
    overflow: hidden;
}

.animate-shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
    );
    animation: shimmer 2s infinite;
    pointer-events: none;
}

.animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
}

.animate-bounce-in {
    animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.animate-slide-up {
    animation: slide-up 0.5s ease-out;
}

.animate-fade-in-scale {
    animation: fade-in-scale 0.4s ease-out;
}

.animate-rotate-in {
    animation: rotate-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/*  loading states */
.loading-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 8px;
}

.dark .loading-skeleton {
    background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
    background-size: 200% 100%;
}

/*  focus states  accessibility */
.focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
}

/*    buttons */
.btn-enhanced {
    @apply relative overflow-hidden transition-all duration-300 ease-out;
    transform: translateZ(0); /* Force hardware acceleration */
}

.btn-enhanced::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-enhanced:active::before {
    width: 300px;
    height: 300px;
}

/*  scrollbars */
.custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.5);
    border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.7);
}

/*  performance  hardware acceleration */
.gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}

@layer components {
    /*      glow  */
    .glass-panel {
        @apply relative overflow-hidden rounded-3xl bg-[var(--glass-bg)] border border-[var(--glass-border)] backdrop-blur-2xl;
        box-shadow: 0 25px 60px var(--glass-shadow), inset 0 1px 0 var(--glass-highlight);
        transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        will-change: transform, box-shadow;
    }
    .glass-panel::before {
        content: '';
        position: absolute;
        inset: 1px;
        border-radius: inherit;
        background: linear-gradient(120deg, rgba(255,255,255,0.15), rgba(255,255,255,0));
        opacity: 0.9;
        transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        pointer-events: none;
    }
    .glass-panel::after {
        content: '';
        position: absolute;
        top: -40%;
        left: -20%;
        width: 60%;
        height: 60%;
        background: radial-gradient(circle, var(--card-shine), transparent 55%);
        opacity: 0;
        transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        pointer-events: none;
    }
    .glass-panel:hover {
        transform: translateY(-2px);
        box-shadow: 0 30px 70px var(--glass-shadow), inset 0 1px 0 var(--glass-highlight), 0 0 40px rgba(14, 165, 233, 0.15);
    }
    .glass-panel:hover::before {
        opacity: 1;
    }
    .glass-panel:hover::after {
        opacity: 0.95;
    }
    
    .glass-card {
        @apply relative rounded-2xl overflow-hidden bg-[var(--glass-bg)] border border-[var(--glass-border)] backdrop-blur-xl gpu-accelerated;
        box-shadow: 0 18px 40px var(--glass-shadow), inset 0 1px 0 rgba(255,255,255,0.25);
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        will-change: transform, box-shadow;
    }

    .glass-card::before {
        content: '';
        position: absolute;
        inset: 1px;
        border-radius: inherit;
        background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }

    .glass-card::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1), transparent 70%);
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: none;
        transform: rotate(45deg);
    }

    .glass-card:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 25px 50px var(--glass-shadow), inset 0 1px 0 rgba(255,255,255,0.3), 0 0 30px rgba(14, 165, 233, 0.1);
    }

    .glass-card:hover::before {
        opacity: 1;
    }

    .glass-card:hover::after {
        opacity: 0.6;
    }

    /*    cards */
    .card-interactive {
        @apply glass-card cursor-pointer select-none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card-interactive:hover {
        transform: translateY(-4px) scale(1.03);
        box-shadow: 0 20px 40px var(--glass-shadow), 0 0 20px rgba(14, 165, 233, 0.15);
    }

    .card-interactive:active {
        transform: translateY(-2px) scale(1.01);
        transition-duration: 0.1s;
    }

    .glass-card::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(145deg, rgba(255,255,255,0.08), transparent 60%);
        opacity: 0;
        transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        pointer-events: none;
    }
    .glass-card:hover {
        transform: translateY(-6px) scale(1.008);
        border-color: rgba(148, 197, 255, 0.8);
        box-shadow: 0 32px 60px var(--shadow-strong), inset 0 1px 0 rgba(255,255,255,0.6), 0 0 0 1px rgba(56,189,248,0.15), 0 0 50px rgba(14, 165, 233, 0.2);
    }
    .glass-card:hover::after {
        opacity: 1;
    }
    .glass-card:active {
        transform: translateY(-3px) scale(1.004);
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /*     focus glow  */
    .input-glass {
        @apply w-full px-4 py-3 rounded-2xl bg-[var(--input-bg)] border border-transparent text-[var(--text-primary)] placeholder-slate-400 outline-none;
        backdrop-filter: blur(14px);
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.4), 0 10px 25px rgba(15,23,42,0.15);
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        will-change: transform, box-shadow, border-color;
    }
    
    .input-glass:focus {
        border-color: rgba(14, 165, 233, 0.8);
        box-shadow: 0 0 40px rgba(14, 165, 233, 0.25), inset 0 1px 0 rgba(255,255,255,0.8), 0 0 0 4px rgba(14, 165, 233, 0.1);
        transform: translateY(-2px) scale(1.01);
        background: var(--input-bg);
    }
    .input-glass:hover:not(:focus) {
        border-color: rgba(148, 163, 184, 0.4);
        box-shadow: 0 0 20px rgba(14, 165, 233, 0.15), inset 0 1px 0 rgba(255,255,255,0.6);
        transform: translateY(-1px);
    }
    
    /*        */
    .input-glass option {
        @apply bg-white text-slate-900 dark:bg-slate-900 dark:text-white;
    }
    
    /*     hover  */
    .btn-glass {
        @apply relative overflow-hidden px-5 py-2.5 rounded-2xl font-semibold tracking-tight flex items-center justify-center gap-2;
        backdrop-filter: blur(20px);
        background: linear-gradient(135deg, rgba(99,102,241,0.2), rgba(14,165,233,0.15));
        border: 1px solid rgba(255,255,255,0.25);
        box-shadow: 0 15px 35px rgba(15,23,42,0.25);
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        will-change: transform, box-shadow;
    }
    .btn-glass::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(120deg, transparent, rgba(255,255,255,0.5), transparent);
        transform: translateX(-100%);
        transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .btn-glass:hover::before {
        transform: translateX(120%);
    }
    .btn-glass:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 25px 50px rgba(14, 165, 233, 0.35), 0 0 0 1px rgba(14, 165, 233, 0.25), 0 0 30px rgba(14, 165, 233, 0.2);
        border-color: rgba(255,255,255,0.5);
    }
    .btn-glass:active {
        transform: translateY(-1px) scale(0.98);
        transition: all 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /*    variants  */
    .btn-primary {
        @apply btn-glass bg-gradient-to-r from-blue-500 to-cyan-600 text-white border-blue-400/30;
        box-shadow: 0 15px 35px rgba(14, 165, 233, 0.3);
    }

    .btn-primary:hover {
        @apply from-blue-600 to-cyan-700;
        box-shadow: 0 20px 40px rgba(14, 165, 233, 0.4), 0 0 30px rgba(14, 165, 233, 0.3);
    }

    .btn-secondary {
        @apply btn-glass bg-gradient-to-r from-purple-500 to-pink-600 text-white border-purple-400/30;
        box-shadow: 0 15px 35px rgba(139, 92, 246, 0.3);
    }

    .btn-secondary:hover {
        @apply from-purple-600 to-pink-700;
        box-shadow: 0 20px 40px rgba(139, 92, 246, 0.4), 0 0 30px rgba(139, 92, 246, 0.3);
    }

    .btn-success {
        @apply btn-glass bg-gradient-to-r from-green-500 to-emerald-600 text-white border-green-400/30;
        box-shadow: 0 15px 35px rgba(34, 197, 94, 0.3);
    }

    .btn-success:hover {
        @apply from-green-600 to-emerald-700;
        box-shadow: 0 20px 40px rgba(34, 197, 94, 0.4), 0 0 30px rgba(34, 197, 94, 0.3);
    }

    .btn-warning {
        @apply btn-glass bg-gradient-to-r from-orange-500 to-yellow-600 text-white border-orange-400/30;
        box-shadow: 0 15px 35px rgba(245, 158, 11, 0.3);
    }

    .btn-warning:hover {
        @apply from-orange-600 to-yellow-700;
        box-shadow: 0 20px 40px rgba(245, 158, 11, 0.4), 0 0 30px rgba(245, 158, 11, 0.3);
    }

    .btn-danger {
        @apply btn-glass bg-gradient-to-r from-red-500 to-pink-600 text-white border-red-400/30;
        box-shadow: 0 15px 35px rgba(239, 68, 68, 0.3);
    }

    .btn-danger:hover {
        @apply from-red-600 to-pink-700;
        box-shadow: 0 20px 40px rgba(239, 68, 68, 0.4), 0 0 30px rgba(239, 68, 68, 0.3);
    }

    /*    */
    .btn-sm {
        @apply px-3 py-1.5 text-sm;
    }

    .btn-lg {
        @apply px-8 py-4 text-lg;
    }

    /*   loading */
    .btn-loading {
        @apply relative cursor-not-allowed;
    }

    .btn-loading::after {
        content: '';
        position: absolute;
        width: 16px;
        height: 16px;
        margin: auto;
        border: 2px solid transparent;
        border-top-color: currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    /*  icon-only */
    .btn-icon {
        @apply w-10 h-10 p-0 justify-center;
    }

    .btn-icon-sm {
        @apply w-8 h-8 p-0 justify-center;
    }

    .btn-icon-lg {
        @apply w-12 h-12 p-0 justify-center;
    }

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/*      */
::-webkit-scrollbar { 
    width: 10px; 
    height: 10px;
}
::-webkit-scrollbar-thumb { 
    background: linear-gradient(180deg, rgba(56,189,248,0.5), rgba(168,85,247,0.5)); 
    border-radius: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    background-clip: padding-box;
}
::-webkit-scrollbar-thumb:hover { 
    background: linear-gradient(180deg, rgba(56,189,248,0.7), rgba(168,85,247,0.7));
    background-clip: padding-box;
    box-shadow: 0 0 10px rgba(56,189,248,0.4);
}
::-webkit-scrollbar-track { 
    background: rgba(15, 23, 42, 0.1);
    border-radius: 10px;
}
.dark ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

/*     */
.animate-fade-in { 
    animation: fadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
}

@keyframes fadeIn { 
    from { 
        opacity: 0; 
        transform: translateY(8px) scale(0.99); 
    } 
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    } 
}

.animate-fade-in-up {
    animation: fadeInUp 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-scale-in {
    animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.animate-slide-in-right {
    animation: slideInRight 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(15px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.animate-bounce-subtle {
    animation: bounceSubtle 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
}

@keyframes bounceSubtle {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-6px);
    }
}

/*     */
@keyframes gentle-float {
    0%, 100% {
        transform: translateY(0px) translateX(0px) rotate(0deg);
    }
    33% {
        transform: translateY(-8px) translateX(4px) rotate(1deg);
    }
    66% {
        transform: translateY(-5px) translateX(-3px) rotate(-1deg);
    }
}

.animate-gentle-float {
    animation: gentle-float 6s ease-in-out infinite;
}

@keyframes smooth-glow {
    0%, 100% {
        opacity: 0.6;
        filter: blur(20px);
    }
    50% {
        opacity: 1;
        filter: blur(25px);
    }
}

.animate-smooth-glow {
    animation: smooth-glow 3s ease-in-out infinite;
}

@keyframes soft-pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.9;
    }
}

.animate-soft-pulse {
    animation: soft-pulse 3s ease-in-out infinite;
}

@keyframes gentle-rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.animate-gentle-rotate {
    animation: gentle-rotate 20s linear infinite;
}

@keyframes shimmer-smooth {
    0% {
        background-position: -200% center;
    }
    100% {
        background-position: 200% center;
    }
}

.animate-shimmer-smooth {
    animation: shimmer-smooth 3s ease-in-out infinite;
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.2) 50%,
        transparent 100%
    );
    background-size: 200% 100%;
}

.orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(120px);
    z-index: -1;
    opacity: 0.35;
    animation: orbFloat 25s cubic-bezier(0.4, 0, 0.6, 1) infinite alternate;
    will-change: transform;
    transition: opacity 2s ease;
}

.orb-1 { 
    top: -18%; 
    left: -8%; 
    width: 45vw; 
    height: 45vw; 
    background: radial-gradient(circle, rgba(56,189,248,0.8), transparent 65%);
}

.orb-2 { 
    bottom: -15%; 
    right: -5%; 
    width: 40vw; 
    height: 40vw; 
    background: radial-gradient(circle, rgba(168,85,247,0.7), transparent 65%);
    animation-delay: 6s;
}

.orb-3 {
    top: 35%;
    left: 60%;
    width: 30vw;
    height: 30vw;
    background: radial-gradient(circle, rgba(52,211,153,0.6), transparent 60%);
    animation-delay: 3s;
    opacity: 0.25;
}

@keyframes orbFloat {
    0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 0.35;
    }
    33% {
        transform: translate(30px, -15px) scale(1.03) rotate(3deg);
        opacity: 0.4;
    }
    66% {
        transform: translate(-20px, 25px) scale(0.97) rotate(-3deg);
        opacity: 0.3;
    }
    100% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 0.35;
    }
}

.accent-glow {
    position: fixed;
    width: 320px;
    height: 320px;
    border-radius: 50%;
    filter: blur(120px);
    opacity: 0.25;
    z-index: -1;
    pointer-events: none;
}
.accent-glow-1 {
    top: 10%;
    right: 8%;
    background: rgba(14,165,233,0.8);
}
.accent-glow-2 {
    bottom: 5%;
    left: 15%;
    background: rgba(236,72,153,0.6);
}

.floating {
    animation: floating 8s linear infinite;
    will-change: transform;
}

@keyframes floating {
    0% { 
        transform: translateY(0px) translateX(0px) rotate(0deg); 
    }
    33% { 
        transform: translateY(-8px) translateX(4px) rotate(1deg); 
    }
    66% { 
        transform: translateY(-5px) translateX(-3px) rotate(-1deg); 
    }
    100% { 
        transform: translateY(0px) translateX(0px) rotate(0deg); 
    }
}

.shine-line {
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, transparent, rgba(255,255,255,0.35), transparent);
    opacity: 0.8;
    transform: translateX(-100%);
    animation: shineMove 6s linear infinite;
}

@keyframes shineMove {
    0% { 
        transform: translateX(-150%) skewX(-20deg); 
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% { 
        transform: translateX(150%) skewX(-20deg); 
        opacity: 0;
    }
}

/*   -   */
::selection {
    background: rgba(14, 165, 233, 0.35);
    color: var(--text-primary);
    transition: background 0.2s ease;
}
::-moz-selection {
    background: rgba(14, 165, 233, 0.35);
    color: var(--text-primary);
    transition: background 0.2s ease;
}

/* Typography System */
.text-display {
    font-size: 3.5rem;
    font-weight: 800;
    line-height: 1.1;
    letter-spacing: -0.02em;
}

.text-heading-1 {
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.01em;
}

.text-heading-2 {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.25;
    letter-spacing: -0.01em;
}

.text-heading-3 {
    font-size: 1.5rem;
    font-weight: 600;
    line-height: 1.3;
}

.text-body-large {
    font-size: 1.125rem;
    font-weight: 400;
    line-height: 1.6;
}

.text-body {
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
}

.text-body-small {
    font-size: 0.875rem;
    font-weight: 400;
    line-height: 1.5;
}

.text-caption {
    font-size: 0.75rem;
    font-weight: 400;
    line-height: 1.4;
}

/* Improved Shadows */
.shadow-colored {
    box-shadow: 
        0 10px 40px rgba(14, 165, 233, 0.2),
        0 0 0 1px rgba(14, 165, 233, 0.1);
}

.shadow-colored-purple {
    box-shadow: 
        0 10px 40px rgba(139, 92, 246, 0.2),
        0 0 0 1px rgba(139, 92, 246, 0.1);
}

.shadow-layered {
    box-shadow: 
        0 1px 3px rgba(0, 0, 0, 0.12),
        0 1px 2px rgba(0, 0, 0, 0.24),
        0 4px 8px rgba(0, 0, 0, 0.12),
        0 8px 16px rgba(0, 0, 0, 0.08);
}

.shadow-layered-colored {
    box-shadow: 
        0 1px 3px rgba(14, 165, 233, 0.12),
        0 1px 2px rgba(14, 165, 233, 0.24),
        0 4px 8px rgba(14, 165, 233, 0.12),
        0 8px 16px rgba(14, 165, 233, 0.08);
}

/* Improved Animations -    */
@keyframes pulse-glow {
    0%, 100% {
        box-shadow: 0 0 20px rgba(14, 165, 233, 0.4);
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 50px rgba(14, 165, 233, 0.9);
        transform: scale(1.02);
    }
}

.animate-pulse-glow {
    animation: pulse-glow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes shimmer {
    0% {
        background-position: -200% center;
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        background-position: 200% center;
        opacity: 0;
    }
}

.animate-shimmer {
    animation: shimmer 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.4) 50%,
        transparent 100%
    );
    background-size: 200% 100%;
}

@keyframes ripple {
    0% {
        transform: scale(0) translate(-50%, -50%);
        opacity: 0.8;
    }
    50% {
        opacity: 0.4;
    }
    100% {
        transform: scale(4) translate(-50%, -50%);
        opacity: 0;
    }
}

.ripple-effect {
    position: relative;
    overflow: hidden;
}

.ripple-effect::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0));
    transform: translate(-50%, -50%);
    transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), height 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s;
}

.ripple-effect:active::after {
    width: 400px;
    height: 400px;
    animation: ripple 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Improved Badge Styles */
.badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold transition-all;
}

.badge-primary {
    @apply inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold transition-all;
    background: rgba(14, 165, 233, 0.1);
    color: var(--accent-color);
    border: 1px solid rgba(14, 165, 233, 0.2);
}

.badge-secondary {
    @apply inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold transition-all;
    background: rgba(139, 92, 246, 0.1);
    color: var(--accent-secondary);
    border: 1px solid rgba(139, 92, 246, 0.2);
}

.badge-success {
    @apply bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-500/20;
}

.badge-warning {
    @apply bg-amber-500/10 text-amber-600 dark:text-amber-400 border border-amber-500/20;
}

.badge-error {
    @apply bg-red-500/10 text-red-600 dark:text-red-400 border border-red-500/20;
}

.badge-pulse {
    animation: pulse-glow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Improved Glass Morphism */
.glass-panel-enhanced {
    @apply relative overflow-hidden rounded-3xl bg-[var(--glass-bg)] border border-[var(--glass-border)] backdrop-blur-2xl;
    box-shadow: 
        0 25px 60px var(--glass-shadow), 
        inset 0 1px 0 var(--glass-highlight),
        0 0 0 1px rgba(255, 255, 255, 0.1);
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    will-change: transform, box-shadow;
}

.glass-panel-enhanced:hover {
    backdrop-filter: blur(28px);
    transform: translateY(-3px);
    box-shadow: 
        0 35px 80px var(--glass-shadow), 
        inset 0 1px 0 var(--glass-highlight),
        0 0 0 1px rgba(255, 255, 255, 0.2),
        0 0 60px rgba(14, 165, 233, 0.15);
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Improved Button Variants */
.btn-primary {
    @apply btn-glass text-white;
    background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
    box-shadow: 0 10px 30px rgba(14, 165, 233, 0.3);
}

.btn-primary:hover {
    box-shadow: 0 20px 50px rgba(14, 165, 233, 0.5), 0 0 40px rgba(14, 165, 233, 0.3);
    transform: translateY(-4px) scale(1.03);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.btn-secondary {
    @apply btn-glass;
    background: linear-gradient(135deg, var(--accent-secondary), var(--accent-tertiary));
    color: white;
}

.btn-ghost {
    @apply btn-glass;
    background: transparent;
    border: 1px solid var(--glass-border);
}

.btn-ghost:hover {
    background: var(--glass-bg);
    border-color: var(--accent-color);
}

/* Improved Loading States */
.skeleton {
    @apply rounded;
    background: linear-gradient(
        90deg,
        var(--glass-bg) 0%,
        rgba(255, 255, 255, 0.15) 50%,
        var(--glass-bg) 100%
    );
    background-size: 200% 100%;
    animation: shimmer-smooth 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    position: relative;
    overflow: hidden;
}

.skeleton-circle {
    @apply skeleton rounded-full;
}

.skeleton-text {
    @apply skeleton h-4;
}

.skeleton-title {
    @apply skeleton h-6;
}

/* Improved Empty State */
.empty-state-enhanced {
    @apply text-center py-16 px-4;
}

.empty-state-enhanced-icon {
    @apply w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6;
    background: linear-gradient(to bottom right, rgba(14, 165, 233, 0.2), rgba(139, 92, 246, 0.1));
    box-shadow: 0 10px 40px rgba(14, 165, 233, 0.2);
    animation: float 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px) scale(1) rotate(0deg);
    }
    50% {
        transform: translateY(-12px) scale(1.02) rotate(2deg);
    }
}

/* Improved Gradient Backgrounds */
.gradient-mesh {
    background: 
        radial-gradient(at 0% 0%, rgba(14, 165, 233, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(34, 197, 94, 0.15) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(168, 85, 247, 0.15) 0px, transparent 50%);
}

.gradient-animated-bg {
    background: linear-gradient(
        135deg,
        var(--accent-color) 0%,
        var(--accent-secondary) 50%,
        var(--accent-tertiary) 100%
    );
    background-size: 200% 200%;
    animation: gradientShift 8s ease infinite;
}

/* Improved Input Focus States -   components */

/* Improved Card Hover Effects */
.glass-card-enhanced {
    @apply glass-card;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.glass-card-enhanced:hover {
    transform: translateY(-8px) scale(1.015);
    box-shadow: 
        0 40px 80px var(--shadow-strong), 
        inset 0 1px 0 rgba(255, 255, 255, 0.6), 
        0 0 0 1px rgba(14, 165, 233, 0.2),
        0 0 80px rgba(14, 165, 233, 0.15);
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Improved Table Styles */
.table-enhanced {
    @apply w-full;
}

.table-enhanced thead {
    background: linear-gradient(to right, rgba(14, 165, 233, 0.1), rgba(139, 92, 246, 0.05));
}

.table-enhanced tbody tr {
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.table-enhanced tbody tr:hover {
    background: linear-gradient(to right, rgba(14, 165, 233, 0.08), transparent);
    transform: scale(1.02) translateX(-2px);
    box-shadow: 0 4px 12px rgba(14, 165, 233, 0.1);
}

/* Improved Modal Backdrop */
.modal-backdrop-enhanced {
    @apply fixed inset-0 bg-slate-900/80 backdrop-blur-md;
    animation: fadeIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transition: backdrop-filter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Improved Tooltip Base (   ) */
.tooltip-base {
    @apply absolute z-50 px-3 py-2 text-xs font-medium text-white bg-slate-900 rounded-lg shadow-lg;
    animation: fadeIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(14, 165, 233, 0.2);
}

.tooltip-base::before {
    content: '';
    @apply absolute w-2 h-2 bg-slate-900 rotate-45;
    filter: blur(1px);
}

/*    */
@keyframes gradient-flow {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.gradient-flow {
    background: linear-gradient(
        135deg,
        var(--accent-color),
        var(--accent-secondary),
        var(--accent-tertiary),
        var(--accent-color)
    );
    background-size: 300% 300%;
    animation: gradient-flow 8s ease infinite;
}

@keyframes glow-pulse {
    0%, 100% {
        filter: drop-shadow(0 0 10px rgba(14, 165, 233, 0.5));
    }
    50% {
        filter: drop-shadow(0 0 25px rgba(14, 165, 233, 0.9));
    }
}

.animate-glow-pulse {
    animation: glow-pulse 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes smooth-scale {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

.animate-smooth-scale {
    animation: smooth-scale 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/*  transitions    */
button, a, input, select, textarea, .glass-panel, .glass-card, .btn-glass {
    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/*  scroll behavior */
html {
    scroll-behavior: smooth;
}

/*  selection -  duplicate */
}


==================================================
FILE: .\src\main.tsx
==================================================
import React, { Suspense } from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import { BrowserRouter } from 'react-router-dom';
import { pushNotificationManager } from './utils/pushNotifications';

// Lazy load main components for better performance
const ReactQueryProvider = React.lazy(() => import('./lib/queryClient').then(module => ({ default: module.ReactQueryProvider })));
const AuthProvider = React.lazy(() => import('./context/AuthContext').then(module => ({ default: module.AuthProvider })));
const AppProvider = React.lazy(() => import('./context/AppContext').then(module => ({ default: module.AppProvider })));
const App = React.lazy(() => import('./App'));

// Loading component for lazy-loaded components
const LoadingFallback = () => (
  <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800">
    <div className="text-center">
      <div className="animate-bounce-in mb-4">
        <div className="w-16 h-16 mx-auto bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center">
          <div className="w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
        </div>
      </div>
      <h2 className="text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2">
           FlexPro
      </h2>
      <p className="text-gray-500 dark:text-gray-400">
          ...
      </p>
    </div>
  </div>
);

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error(' root  ');
}

// Preload critical resources
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(() => console.log('Service Worker registered'))
      .catch(error => console.log('Service Worker registration failed:', error));
  });
}

// Add comprehensive performance monitoring
if ('PerformanceObserver' in window) {
  try {
    // Largest Contentful Paint
    new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        if (entry.entryType === 'largest-contentful-paint') {
          console.log(' LCP:', entry.startTime.toFixed(2) + 'ms');
        }
      }
    }).observe({ entryTypes: ['largest-contentful-paint'] });

    // First Input Delay
    new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        console.log(' FID:', entry.processingStart - entry.startTime, 'ms');
      }
    }).observe({ entryTypes: ['first-input'] });

    // Cumulative Layout Shift
    new PerformanceObserver((list) => {
      let clsValue = 0;
      for (const entry of list.getEntries()) {
        if (!(entry as any).hadRecentInput) {
          clsValue += (entry as any).value;
        }
      }
      console.log(' CLS:', clsValue.toFixed(4));
    }).observe({ entryTypes: ['layout-shift'] });

  } catch (e) {
    console.warn('Performance monitoring not fully supported');
  }
}

// Performance monitoring (built-in)
if ('PerformanceObserver' in window) {
  try {
    // Largest Contentful Paint
    new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        if (entry.entryType === 'largest-contentful-paint') {
          console.log(' LCP:', entry.startTime.toFixed(2) + 'ms');
        }
      }
    }).observe({ entryTypes: ['largest-contentful-paint'] });

    // First Input Delay
    new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        console.log(' FID:', entry.processingStart - entry.startTime, 'ms');
      }
    }).observe({ entryTypes: ['first-input'] });

  } catch (e) {
    console.warn('Performance monitoring not supported');
  }
}

const root = ReactDOM.createRoot(rootElement);

root.render(
  <React.StrictMode>
    <Suspense fallback={<LoadingFallback />}>
    <ReactQueryProvider>
      <BrowserRouter>
        <AuthProvider>
          <AppProvider>
            <App />
          </AppProvider>
        </AuthProvider>
      </BrowserRouter>
    </ReactQueryProvider>
    </Suspense>
  </React.StrictMode>
);

// Initialize push notifications after app is rendered
if (pushNotificationManager.isSupported()) {
  // Wait for service worker to be ready, then initialize push notifications
  navigator.serviceWorker.ready.then(() => {
    pushNotificationManager.initialize().catch(console.error);
  });
} else {
  console.log('Push notifications not supported in this browser');
}

==================================================
FILE: .\src\components\AdminRoute.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { Navigate } from 'react-router-dom';
import { supabase } from '../lib/supabaseClient';
import LoadingSpinner from './LoadingSpinner';

interface AdminRouteProps {
  children: React.ReactNode;
}

/**
 * AdminRoute Component
 * Protects admin pages by checking if user has is_super_admin flag
 */
export const AdminRoute: React.FC<AdminRouteProps> = ({ children }) => {
  const [isAdmin, setIsAdmin] = useState<boolean | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    checkAdminStatus();
  }, []);

  const checkAdminStatus = async () => {
    try {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) {
        setIsAdmin(false);
        setLoading(false);
        return;
      }

      const { data, error } = await supabase
        .from('profiles')
        .select('is_super_admin')
        .eq('id', user.id)
        .single();

      if (error || !data) {
        setIsAdmin(false);
      } else {
        setIsAdmin(data.is_super_admin === true);
      }
    } catch (error) {
      console.error('Error checking admin status:', error);
      setIsAdmin(false);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return <LoadingSpinner />;
  }

  if (!isAdmin) {
    return <Navigate to="/" replace />;
  }

  return <>{children}</>;
};

export default AdminRoute;


==================================================
FILE: .\src\components\AdvancedSkeleton.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

// Base skeleton component
interface SkeletonProps {
  width?: string | number;
  height?: string | number;
  className?: string;
  variant?: 'pulse' | 'wave' | 'shimmer' | 'bounce';
  rounded?: boolean;
}

const Skeleton: React.FC<SkeletonProps> = ({
  width = '100%',
  height = '1rem',
  className = '',
  variant = 'pulse',
  rounded = true
}) => {
  const baseClasses = `bg-gray-200 dark:bg-gray-700 ${
    rounded ? 'rounded' : ''
  } ${className}`;

  const getAnimation = () => {
    switch (variant) {
      case 'wave':
        return {
          background: [
            'linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)',
            'linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)',
            'linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)'
          ],
          backgroundSize: '200% 100%'
        };
      case 'shimmer':
        return {
          background: 'linear-gradient(90deg, #f0f0f0 0%, #e0e0e0 50%, #f0f0f0 100%)',
          backgroundSize: '200% 100%',
          x: ['-100%', '100%']
        };
      case 'bounce':
        return {
          scale: [1, 1.05, 1],
          opacity: [0.7, 1, 0.7]
        };
      default: // pulse
        return {
          opacity: [0.5, 1, 0.5]
        };
    }
  };

  return (
    <motion.div
      className={baseClasses}
      style={{
        width,
        height,
        ...(variant === 'wave' && {
          background: 'linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)',
          backgroundSize: '200% 100%'
        })
      }}
      animate={variant !== 'wave' ? getAnimation() : undefined}
      transition={{
        duration: variant === 'bounce' ? 1.5 : 2,
        repeat: Infinity,
        ease: variant === 'bounce' ? "easeInOut" : "easeInOut"
      }}
    />
  );
};

// Text skeleton
export const TextSkeleton: React.FC<{
  lines?: number;
  className?: string;
  variant?: SkeletonProps['variant'];
}> = ({ lines = 1, className = '', variant = 'pulse' }) => {
  return (
    <div className={`space-y-2 ${className}`}>
      {Array.from({ length: lines }).map((_, index) => (
        <Skeleton
          key={index}
          height={index === lines - 1 && lines > 1 ? '0.75rem' : '1rem'}
          width={index === lines - 1 ? '60%' : '100%'}
          variant={variant}
        />
      ))}
    </div>
  );
};

// Card skeleton
export const CardSkeleton: React.FC<{
  className?: string;
  variant?: SkeletonProps['variant'];
  showAvatar?: boolean;
  lines?: number;
}> = ({
  className = '',
  variant = 'pulse',
  showAvatar = true,
  lines = 3
}) => {
  return (
    <motion.div
      className={`glass-card p-6 ${className}`}
      initial={{ opacity: 0, scale: 0.9 }}
      animate={{ opacity: 1, scale: 1 }}
      transition={{ duration: 0.3 }}
    >
      {showAvatar && (
        <div className="flex items-center space-x-4 mb-4">
          <Skeleton width="3rem" height="3rem" rounded className="flex-shrink-0" variant={variant} />
          <div className="flex-1 space-y-2">
            <Skeleton height="1rem" width="60%" variant={variant} />
            <Skeleton height="0.75rem" width="40%" variant={variant} />
          </div>
        </div>
      )}
      <TextSkeleton lines={lines} variant={variant} />
    </motion.div>
  );
};

// List skeleton
export const ListSkeleton: React.FC<{
  count?: number;
  className?: string;
  variant?: SkeletonProps['variant'];
  showAvatar?: boolean;
}> = ({
  count = 5,
  className = '',
  variant = 'pulse',
  showAvatar = false
}) => {
  return (
    <div className={`space-y-4 ${className}`}>
      {Array.from({ length: count }).map((_, index) => (
        <motion.div
          key={index}
          className="flex items-center space-x-4 p-4 glass-card"
          initial={{ opacity: 0, x: -20 }}
          animate={{ opacity: 1, x: 0 }}
          transition={{ duration: 0.3, delay: index * 0.1 }}
        >
          {showAvatar && (
            <Skeleton width="2.5rem" height="2.5rem" rounded variant={variant} />
          )}
          <div className="flex-1 space-y-2">
            <Skeleton height="1rem" width="80%" variant={variant} />
            <Skeleton height="0.75rem" width="60%" variant={variant} />
          </div>
          <Skeleton width="2rem" height="2rem" rounded variant={variant} />
        </motion.div>
      ))}
    </div>
  );
};

// Table skeleton
export const TableSkeleton: React.FC<{
  rows?: number;
  columns?: number;
  className?: string;
  variant?: SkeletonProps['variant'];
}> = ({
  rows = 5,
  columns = 4,
  className = '',
  variant = 'pulse'
}) => {
  return (
    <div className={`space-y-3 ${className}`}>
      {/* Header */}
      <div className="flex space-x-4 p-4 glass-card">
        {Array.from({ length: columns }).map((_, index) => (
          <Skeleton
            key={`header-${index}`}
            height="1rem"
            width={`${100 / columns}%`}
            variant={variant}
          />
        ))}
      </div>

      {/* Rows */}
      {Array.from({ length: rows }).map((_, rowIndex) => (
        <motion.div
          key={rowIndex}
          className="flex space-x-4 p-4 glass-card"
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.3, delay: rowIndex * 0.05 }}
        >
          {Array.from({ length: columns }).map((_, colIndex) => (
            <Skeleton
              key={`cell-${rowIndex}-${colIndex}`}
              height="1rem"
              width={`${100 / columns}%`}
              variant={variant}
            />
          ))}
        </motion.div>
      ))}
    </div>
  );
};

// Dashboard skeleton
export const DashboardSkeleton: React.FC<{
  className?: string;
  variant?: SkeletonProps['variant'];
}> = ({ className = '', variant = 'pulse' }) => {
  return (
    <div className={`space-y-6 ${className}`}>
      {/* Stats cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {Array.from({ length: 4 }).map((_, index) => (
          <motion.div
            key={index}
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            transition={{ duration: 0.3, delay: index * 0.1 }}
          >
            <CardSkeleton showAvatar={false} lines={2} variant={variant} />
          </motion.div>
        ))}
      </div>

      {/* Charts area */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <CardSkeleton lines={1} variant={variant}>
          <div className="mt-4 space-y-3">
            <Skeleton height="12rem" variant={variant} />
          </div>
        </CardSkeleton>
        <CardSkeleton lines={1} variant={variant}>
          <div className="mt-4 space-y-3">
            <Skeleton height="12rem" variant={variant} />
          </div>
        </CardSkeleton>
      </div>

      {/* Table */}
      <CardSkeleton lines={1} variant={variant}>
        <div className="mt-4">
          <TableSkeleton rows={3} columns={5} variant={variant} />
        </div>
      </CardSkeleton>
    </div>
  );
};

// Profile skeleton
export const ProfileSkeleton: React.FC<{
  className?: string;
  variant?: SkeletonProps['variant'];
}> = ({ className = '', variant = 'pulse' }) => {
  return (
    <div className={`space-y-6 ${className}`}>
      <div className="flex items-center space-x-6">
        <Skeleton width="6rem" height="6rem" rounded variant={variant} />
        <div className="space-y-3 flex-1">
          <Skeleton height="2rem" width="60%" variant={variant} />
          <Skeleton height="1rem" width="40%" variant={variant} />
          <Skeleton height="1rem" width="50%" variant={variant} />
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="space-y-4">
          <Skeleton height="1.5rem" width="30%" variant={variant} />
          <Skeleton height="1rem" width="100%" variant={variant} />
          <Skeleton height="1rem" width="90%" variant={variant} />
          <Skeleton height="1rem" width="80%" variant={variant} />
        </div>
        <div className="space-y-4">
          <Skeleton height="1.5rem" width="30%" variant={variant} />
          <Skeleton height="1rem" width="100%" variant={variant} />
          <Skeleton height="1rem" width="90%" variant={variant} />
          <Skeleton height="1rem" width="80%" variant={variant} />
        </div>
      </div>
    </div>
  );
};

// Shimmer overlay for existing content
export const ShimmerOverlay: React.FC<{
  children: React.ReactNode;
  loading?: boolean;
  className?: string;
}> = ({ children, loading = true, className = '' }) => {
  return (
    <div className={`relative ${className}`}>
      {children}
      {loading && (
        <motion.div
          className="absolute inset-0 bg-white/80 dark:bg-gray-900/80 flex items-center justify-center z-10"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
        >
          <div className="space-y-4 w-full max-w-md">
            <Skeleton height="2rem" variant="shimmer" />
            <Skeleton height="1rem" width="80%" variant="shimmer" />
            <Skeleton height="1rem" width="60%" variant="shimmer" />
          </div>
        </motion.div>
      )}
    </div>
  );
};

export default Skeleton;


==================================================
FILE: .\src\components\AnimatedCounter.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { motion, useMotionValue, useTransform, animate } from 'framer-motion';

interface AnimatedCounterProps {
  value: number;
  duration?: number;
  className?: string;
  prefix?: string;
  suffix?: string;
  decimals?: number;
  fontSize?: string;
  color?: string;
}

const AnimatedCounter: React.FC<AnimatedCounterProps> = ({
  value,
  duration = 2,
  className = '',
  prefix = '',
  suffix = '',
  decimals = 0,
  fontSize = 'text-4xl',
  color = 'text-blue-600'
}) => {
  const [displayValue, setDisplayValue] = useState(0);
  const motionValue = useMotionValue(0);
  const rounded = useTransform(motionValue, (latest) =>
    Math.round(latest * Math.pow(10, decimals)) / Math.pow(10, decimals)
  );

  useEffect(() => {
    const controls = animate(motionValue, value, {
      duration,
      ease: [0.25, 0.46, 0.45, 0.94], // Custom cubic-bezier
    });

    const unsubscribe = rounded.on("change", (latest) => {
      setDisplayValue(latest);
    });

    return () => {
      controls.stop();
      unsubscribe();
    };
  }, [value, duration, motionValue, rounded]);

  return (
    <motion.span
      className={`${fontSize} ${color} font-bold ${className}`}
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5, delay: 0.1 }}
    >
      {prefix}{displayValue.toLocaleString()}{suffix}
    </motion.span>
  );
};

// Preset counter variants for common use cases
export const StatCounter: React.FC<{
  value: number;
  label: string;
  icon?: React.ReactNode;
  color?: string;
}> = ({ value, label, icon, color = 'text-blue-600' }) => (
  <motion.div
    className="glass-card p-6 text-center"
    initial={{ opacity: 0, scale: 0.9 }}
    animate={{ opacity: 1, scale: 1 }}
    transition={{ duration: 0.5 }}
    whileHover={{ scale: 1.05 }}
  >
    {icon && (
      <div className="flex justify-center mb-3">
        <motion.div
          className={`${color} text-3xl`}
          animate={{
            rotate: [0, 10, -10, 0],
            scale: [1, 1.1, 1]
          }}
          transition={{
            duration: 2,
            repeat: Infinity,
            repeatDelay: 3
          }}
        >
          {icon}
        </motion.div>
      </div>
    )}
    <AnimatedCounter
      value={value}
      className={`${color} block`}
      fontSize="text-3xl"
    />
    <p className="text-gray-600 dark:text-gray-300 mt-2 font-medium">{label}</p>
  </motion.div>
);

// Floating counter for notifications/badges
export const FloatingCounter: React.FC<{
  value: number;
  max?: number;
  size?: 'sm' | 'md' | 'lg';
  variant?: 'primary' | 'success' | 'warning' | 'error';
}> = ({ value, max = 99, size = 'md', variant = 'primary' }) => {
  const sizeClasses = {
    sm: 'text-xs px-1.5 py-0.5',
    md: 'text-sm px-2 py-1',
    lg: 'text-base px-2.5 py-1.5'
  };

  const variantClasses = {
    primary: 'bg-blue-500 text-white',
    success: 'bg-green-500 text-white',
    warning: 'bg-yellow-500 text-black',
    error: 'bg-red-500 text-white'
  };

  const displayValue = value > max ? `${max}+` : value;

  return (
    <motion.div
      className={`
        absolute -top-2 -right-2 rounded-full font-bold
        ${sizeClasses[size]} ${variantClasses[variant]}
        shadow-lg border-2 border-white dark:border-gray-800
        flex items-center justify-center min-w-[1.5rem] min-h-[1.5rem]
      `}
      initial={{ scale: 0 }}
      animate={{ scale: 1 }}
      transition={{
        type: "spring",
        stiffness: 300,
        damping: 20
      }}
      whileHover={{ scale: 1.1 }}
    >
      <AnimatedCounter value={value} duration={0.5} />
    </motion.div>
  );
};

// Progress counter with percentage
export const ProgressCounter: React.FC<{
  current: number;
  total: number;
  label?: string;
  showPercentage?: boolean;
}> = ({ current, total, label, showPercentage = true }) => {
  const percentage = Math.round((current / total) * 100);

  return (
    <div className="space-y-2">
      {label && (
        <div className="flex justify-between items-center">
          <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
            {label}
          </span>
          {showPercentage && (
            <AnimatedCounter
              value={percentage}
              suffix="%"
              className="text-sm font-bold text-blue-600"
              duration={1}
            />
          )}
        </div>
      )}
      <div className="flex items-center space-x-4">
        <div className="flex-1">
          <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
            <motion.div
              className="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full"
              initial={{ width: 0 }}
              animate={{ width: `${percentage}%` }}
              transition={{ duration: 1, ease: "easeOut" }}
            />
          </div>
        </div>
        <div className="text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[3rem] text-right">
          <AnimatedCounter value={current} duration={1} />
          <span className="mx-1">/</span>
          {total}
        </div>
      </div>
    </div>
  );
};

export default AnimatedCounter;


==================================================
FILE: .\src\components\AuthModal.tsx
==================================================
import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { toast } from 'react-hot-toast';

interface AuthModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const AuthModal: React.FC<AuthModalProps> = ({ isOpen, onClose }) => {
  const { signInWithPassword, signUpWithPassword, loading } = useAuth();
  const [mode, setMode] = useState<'signin' | 'signup'>('signin');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  if (!isOpen) return null;

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!email || !password) {
      toast.error('     ');
      return;
    }
    try {
      if (mode === 'signin') {
        await signInWithPassword(email, password);
        toast.success(' ');
      } else {
        await signUpWithPassword(email, password);
        toast.success('     ');
      }
      onClose();
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '    ';
      toast.error(errorMessage || '  /');
    }
  };

  return (
    <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <div className="glass-panel max-w-md w-full p-6 rounded-2xl">
        <div className="flex justify-between items-center mb-4">
          <h3 className="text-lg font-bold text-[var(--text-primary)]">
            {mode === 'signin' ? '' : ''}
          </h3>
          <button onClick={onClose} className="text-sm text-[var(--text-secondary)]"></button>
        </div>
        <div className="flex gap-2 mb-4">
          <button
            onClick={() => setMode('signin')}
            className={`flex-1 btn-glass ${mode === 'signin' ? 'text-white' : 'bg-white/5 text-[var(--text-secondary)]'}`}
            style={mode === 'signin' ? { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` } : {}}
          >
            
          </button>
          <button
            onClick={() => setMode('signup')}
            className={`flex-1 btn-glass ${mode === 'signup' ? 'text-white' : 'bg-white/5 text-[var(--text-secondary)]'}`}
            style={mode === 'signup' ? { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` } : {}}
          >
            
          </button>
        </div>
        <form className="space-y-3" onSubmit={handleSubmit}>
          <div>
            <label className="text-xs text-[var(--text-secondary)] block mb-1"></label>
            <input
              type="email"
              className="input-glass w-full"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
            />
          </div>
          <div>
            <label className="text-xs text-[var(--text-secondary)] block mb-1"> </label>
            <input
              type="password"
              className="input-glass w-full"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              minLength={6}
            />
          </div>
          <button
            type="submit"
            disabled={loading}
            className="w-full btn-glass text-white py-3 font-bold"
            style={{ background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
          >
            {loading ? '...' : mode === 'signin' ? '' : ''}
          </button>
        </form>
      </div>
    </div>
  );
};

export default AuthModal;



==================================================
FILE: .\src\components\Badge.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';
import { cn } from '../utils/cn';

type BadgeVariant = 'default' | 'primary' | 'secondary' | 'success' | 'warning' | 'error' | 'gradient';
type BadgeSize = 'sm' | 'md' | 'lg';

interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement> {
  variant?: BadgeVariant;
  size?: BadgeSize;
  animated?: boolean;
  dot?: boolean;
  removable?: boolean;
  onRemove?: () => void;
}

const getBadgeClasses = (variant: BadgeVariant, size: BadgeSize, animated: boolean) => {
  const baseClasses = "inline-flex items-center rounded-full text-xs font-medium transition-all duration-200";

  const variantClasses = {
    default: "bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",
    primary: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",
    secondary: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
    success: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",
    warning: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",
    error: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",
    gradient: "bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg",
  };

  const sizeClasses = {
    sm: "px-2 py-0.5 text-xs",
    md: "px-2.5 py-0.5 text-xs",
    lg: "px-3 py-1 text-sm",
  };

  return `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${animated ? 'animate-pulse' : ''}`;
};

const Badge = React.forwardRef<HTMLSpanElement, BadgeProps>(
  ({
    className,
    variant = 'default',
    size = 'md',
    animated = false,
    dot = false,
    removable = false,
    onRemove,
    children,
    ...props
  }, ref) => {
  return (
    <motion.span
      ref={ref}
      className={cn(getBadgeClasses(variant, size, animated), className)}
        initial={{ scale: 0.8, opacity: 0 }}
        animate={{ scale: 1, opacity: 1 }}
        exit={{ scale: 0.8, opacity: 0 }}
        transition={{
          type: "spring",
          stiffness: 300,
          damping: 25,
          duration: 0.3
        }}
        {...props}
      >
        {dot && (
          <span
            className={cn(
              "inline-block w-2 h-2 rounded-full mr-1.5",
              variant === 'success' && "bg-green-400",
              variant === 'warning' && "bg-yellow-400",
              variant === 'error' && "bg-red-400",
              variant === 'primary' && "bg-blue-400",
              variant === 'secondary' && "bg-purple-400",
              variant === 'gradient' && "bg-white/80",
              !['success', 'warning', 'error', 'primary', 'secondary', 'gradient'].includes(variant || 'default') && "bg-gray-400"
            )}
          />
        )}

        {children}

        {removable && (
          <button
            onClick={onRemove}
            className="ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors"
            aria-label=" "
          >
            <svg
              className="w-3 h-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        )}
      </motion.span>
    );
  }
);

Badge.displayName = "Badge";

// Preset badge components
export const StatusBadge: React.FC<{
  status: 'online' | 'offline' | 'away' | 'busy';
  children?: React.ReactNode;
}> = ({ status, children }) => {
  const statusConfig = {
    online: { variant: 'success' as const, text: '' },
    offline: { variant: 'default' as const, text: '' },
    away: { variant: 'warning' as const, text: '  ' },
    busy: { variant: 'error' as const, text: '' },
  };

  const config = statusConfig[status];

  return (
    <Badge variant={config.variant} dot>
      {children || config.text}
    </Badge>
  );
};

export const PriorityBadge: React.FC<{
  priority: 'low' | 'medium' | 'high' | 'urgent';
  children?: React.ReactNode;
}> = ({ priority, children }) => {
  const priorityConfig = {
    low: { variant: 'default' as const, text: '' },
    medium: { variant: 'warning' as const, text: '' },
    high: { variant: 'error' as const, text: '' },
    urgent: { variant: 'error' as const, animated: true, text: '' },
  };

  const config = priorityConfig[priority];

  return (
    <Badge variant={config.variant} animated={config.animated}>
      {children || config.text}
    </Badge>
  );
};

export default Badge;



==================================================
FILE: .\src\components\ClientInfoPanel.tsx
==================================================
import React, { useMemo } from 'react';
import { motion } from 'framer-motion';
import {
  User,
  Heart,
  Ruler,
  Phone,
  Mail,
  MapPin,
  Briefcase,
  GraduationCap,
  Calendar,
  Activity,
  Target,
  Droplet,
  UtensilsCrossed,
  Pill,
  AlertTriangle,
  FileText,
  Scale,
  Dumbbell,
  ChefHat,
  Plus,
  ArrowRight
} from 'lucide-react';
import type { Client, User as UserType } from '../types/index';
import LoadingSpinner from './LoadingSpinner';

interface ClientInfoPanelProps {
  client: Client | null;
  loading?: boolean;
  onNavigateToTab?: (tab: 'training' | 'nutrition' | 'supplements') => void;
}

const ClientInfoPanel: React.FC<ClientInfoPanelProps> = ({ client, loading, onNavigateToTab }) => {
  const profileData = useMemo(() => {
    if (!client?.profile_data) return null;
    return client.profile_data as UserType;
  }, [client]);

  const infoSections = useMemo(() => {
    if (!client && !profileData) return null;

    const pd = profileData || {};
    
    return {
      personal: {
        title: ' ',
        icon: <User size={20} />,
        items: [
          { label: ' ', value: client?.full_name || pd.name || '' },
          { label: '', value: client?.gender || pd.gender || '' },
          { label: '', value: client?.age || pd.age || '', suffix: '' },
          { label: '', value: client?.height || pd.height || '', suffix: '' },
          { label: '', value: client?.weight || pd.weight || '', suffix: '' },
          { label: '', value: client?.goal || pd.goal || pd.nutritionGoals || '' },
          { label: '', value: pd.level || '' },
          { label: ' ', value: pd.days || '', suffix: '  ' },
          { label: ' ', value: pd.activity || '' },
          { label: '', value: pd.phone || '', icon: <Phone size={16} /> },
          { label: '', value: pd.email || '', icon: <Mail size={16} /> },
          { label: '', value: pd.address || '', icon: <MapPin size={16} /> },
          { label: '', value: pd.job || '', icon: <Briefcase size={16} /> },
          { label: '', value: pd.education || '', icon: <GraduationCap size={16} /> },
          { label: ' ', value: pd.maritalStatus || '' },
        ]
      },
      anthropometric: {
        title: ' ',
        icon: <Ruler size={20} />,
        items: [
          { label: ' ', value: pd.targetWeight || '', suffix: '', icon: <Target size={16} /> },
          { label: '  ', value: pd.bodyFat || '', suffix: '%', icon: <Scale size={16} /> },
          { label: ' ', value: pd.measurements?.neck || '', suffix: '' },
          { label: ' ', value: pd.measurements?.chest || '', suffix: '' },
          { label: ' ', value: pd.measurements?.shoulder || '', suffix: '' },
          { label: ' ', value: pd.measurements?.arm || '', suffix: '' },
          { label: ' ', value: pd.measurements?.waist || '', suffix: '' },
          { label: ' ', value: pd.measurements?.hip || '', suffix: '' },
          { label: ' ', value: pd.measurements?.thigh || '', suffix: '' },
          { label: ' ', value: pd.measurements?.calf || '', suffix: '' },
          { label: ' ', value: pd.measurements?.wrist || '', suffix: '' },
        ]
      },
      medical: {
        title: ' ',
        icon: <Heart size={20} />,
        items: [
          { label: ' ', value: pd.sleep || '', icon: <Activity size={16} /> },
          { label: ' ', value: pd.smoke || '' },
          { label: ' ', value: pd.alcohol || '' },
          { label: ' ', value: pd.caffeine || '' },
          { label: '', value: pd.allergy || '', icon: <AlertTriangle size={16} /> },
          { label: '', value: pd.medications || '', icon: <Pill size={16} /> },
          { label: ' ', value: pd.medicalConditions?.length ? pd.medicalConditions.join(', ') : '', icon: <Heart size={16} /> },
          { label: '', value: pd.injuries?.length ? pd.injuries.join(', ') : '', icon: <AlertTriangle size={16} /> },
        ]
      },
      nutrition: {
        title: ' ',
        icon: <UtensilsCrossed size={20} />,
        items: [
          { label: ' ', value: pd.dietType || '' },
          { label: ' ', value: pd.nutritionGoals || '' },
          { label: ' ', value: pd.waterIntake || '', suffix: '  ', icon: <Droplet size={16} /> },
          { label: ' ', value: pd.mealFrequency || '', suffix: '  ' },
          { label: ' ', value: pd.foodPreferences?.length ? pd.foodPreferences.join(', ') : '' },
        ]
      },
      lifestyle: {
        title: ' ',
        icon: <Activity size={20} />,
        items: [
          { label: ' ', value: pd.exp || '', suffix: '' },
          { label: ' ', value: pd.sleep || '' },
          { label: ' ', value: pd.smoke || '' },
          { label: ' ', value: pd.alcohol || '' },
          { label: ' ', value: pd.caffeine || '' },
        ]
      }
    };
  }, [client, profileData]);

  if (loading) {
    return (
      <div className="flex items-center justify-center py-20">
        <LoadingSpinner size="lg" />
      </div>
    );
  }

  if (!client && !profileData) {
    return (
      <div className="text-center py-20 text-[var(--text-secondary)]">
        <FileText size={48} className="mx-auto mb-4 opacity-50" />
        <p className="text-lg font-semibold mb-2">  </p>
        <p className="text-sm">       .</p>
      </div>
    );
  }

  const sections = infoSections ? Object.entries(infoSections) : [];

  return (
    <div className="space-y-6">
      {/*   */}
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        className="glass-panel rounded-3xl p-6 border border-[var(--glass-border)]"
      >
        <div className="flex items-center gap-4 mb-4">
          <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white text-2xl font-bold shadow-lg">
            {client?.full_name?.charAt(0) || profileData?.name?.charAt(0) || ''}
          </div>
          <div className="flex-1">
            <h2 className="text-2xl font-bold text-[var(--text-primary)] mb-1">
              {client?.full_name || profileData?.name || ''}
            </h2>
            <div className="flex flex-wrap gap-2 mt-2">
              {client?.gender && (
                <span className="text-xs px-3 py-1 rounded-full bg-[var(--accent-color)]/10 text-[var(--accent-color)] border border-[var(--accent-color)]/20">
                  {client.gender === 'male' ? '' : ''}
                </span>
              )}
              {client?.age && (
                <span className="text-xs px-3 py-1 rounded-full bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-secondary)]">
                  {client.age} 
                </span>
              )}
              {client?.height && client?.weight && (
                <span className="text-xs px-3 py-1 rounded-full bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-secondary)]">
                  {client.height}  {client.weight} (  )
                </span>
              )}
              {client?.profile_completed && (
                <span className="text-xs px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-600 border border-emerald-500/20">
                    
                </span>
              )}
            </div>
          </div>
        </div>
        {client?.notes && (
          <div className="mt-4 p-4 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)]">
            <div className="flex items-start gap-2">
              <FileText size={16} className="text-[var(--accent-color)] mt-0.5 flex-shrink-0" />
              <div>
                <p className="text-xs font-semibold text-[var(--text-secondary)] mb-1"> :</p>
                <p className="text-sm text-[var(--text-primary)]">{client.notes}</p>
              </div>
            </div>
          </div>
        )}
      </motion.div>

      {/*   */}
      {sections.map(([key, section], index) => (
        <motion.div
          key={key}
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: index * 0.1 }}
          className="glass-panel rounded-3xl p-6 border border-[var(--glass-border)]"
        >
          <div className="flex items-center gap-3 mb-6 pb-4 border-b border-[var(--glass-border)]">
            <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--accent-color)]/20 to-[var(--accent-secondary)]/20 flex items-center justify-center text-[var(--accent-color)]">
              {section.icon}
            </div>
            <h3 className="text-xl font-bold text-[var(--text-primary)]">{section.title}</h3>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {section.items.map((item, idx) => {
              if (!item.value || item.value === '') return null;
              
              return (
                <div
                  key={idx}
                  className="p-4 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition-all duration-300"
                >
                  <div className="flex items-center gap-2 mb-2">
                    {item.icon && <span className="text-[var(--accent-color)]">{item.icon}</span>}
                    <span className="text-xs font-semibold text-[var(--text-secondary)]">{item.label}</span>
                  </div>
                  <div className="flex items-baseline gap-1">
                    <span className="text-base font-bold text-[var(--text-primary)]">{item.value}</span>
                    {item.suffix && (
                      <span className="text-xs text-[var(--text-secondary)]">{item.suffix}</span>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
          
          {section.items.every(item => !item.value || item.value === '') && (
            <div className="text-center py-8 text-[var(--text-secondary)]">
              <p className="text-sm">      .</p>
            </div>
          )}
        </motion.div>
      ))}

      {/*   */}
      {(client?.created_at || client?.updated_at) && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: sections.length * 0.1 }}
          className="glass-panel rounded-3xl p-4 border border-[var(--glass-border)]"
        >
          <div className="flex items-center gap-2 text-xs text-[var(--text-secondary)]">
            <Calendar size={14} />
            {client.created_at && (
              <span> : {new Date(client.created_at).toLocaleDateString('fa-IR')}</span>
            )}
            {client.updated_at && (
              <>
                <span></span>
                <span> : {new Date(client.updated_at).toLocaleDateString('fa-IR')}</span>
              </>
            )}
          </div>
        </motion.div>
      )}

      {/* Quick Actions for Programming */}
      {onNavigateToTab && (
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.3 }}
          className="mt-8"
        >
          <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
            <Target size={20} className="text-[var(--accent-color)]" />
              
          </h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              onClick={() => onNavigateToTab('training')}
              className="flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-600/10 border border-blue-500/30 hover:border-blue-500/50 transition-all group"
            >
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white">
                  <Dumbbell size={18} />
                </div>
                <div className="text-right">
                  <p className="font-bold text-[var(--text-primary)]"> </p>
                  <p className="text-xs text-[var(--text-secondary)]">  </p>
                </div>
              </div>
              <ArrowRight size={18} className="text-blue-500 group-hover:translate-x-1 transition-transform" />
            </motion.button>

            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              onClick={() => onNavigateToTab('nutrition')}
              className="flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 hover:border-emerald-500/50 transition-all group"
            >
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center text-white">
                  <UtensilsCrossed size={18} />
                </div>
                <div className="text-right">
                  <p className="font-bold text-[var(--text-primary)]"> </p>
                  <p className="text-xs text-[var(--text-secondary)]"> </p>
                </div>
              </div>
              <ArrowRight size={18} className="text-emerald-500 group-hover:translate-x-1 transition-transform" />
            </motion.button>

            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              onClick={() => onNavigateToTab('supplements')}
              className="flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-purple-600/10 border border-purple-500/30 hover:border-purple-500/50 transition-all group"
            >
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white">
                  <Pill size={18} />
                </div>
                <div className="text-right">
                  <p className="font-bold text-[var(--text-primary)]"></p>
                  <p className="text-xs text-[var(--text-secondary)]"> </p>
                </div>
              </div>
              <ArrowRight size={18} className="text-purple-500 group-hover:translate-x-1 transition-transform" />
            </motion.button>
          </div>

          <div className="mt-4 flex justify-center">
            <motion.button
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
              onClick={() => onNavigateToTab('training')}
              className="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[var(--accent-color)] to-[var(--accent-secondary)] text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all"
            >
              <Plus size={18} />
               
            </motion.button>
          </div>
        </motion.div>
      )}
    </div>
  );
};

export default ClientInfoPanel;



==================================================
FILE: .\src\components\DietPanel.tsx
==================================================
import React, { useState, useEffect, useMemo, memo } from 'react';
import { ShoppingBag, GripVertical, Trash2, Search, Copy, Plus, Dumbbell, Moon, UtensilsCrossed } from 'lucide-react';
import type { DietItem } from '../types/index';
import toast from 'react-hot-toast';
import Swal from 'sweetalert2';
import { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';
import { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import type { User } from '../types/index';
import { useApp } from '../context/AppContext';
import EmptyState from './EmptyState';
import { useDebounce } from '../hooks/useDebounce';
import { DragEndEvent } from '@dnd-kit/core';
import { useFoods } from '../hooks/useExercises';

interface SortableFoodRowProps {
  item: DietItem;
  idx: number;
  onDelete: (idx: number) => void;
  canEdit: boolean;
}

const SortableFoodRow: React.FC<SortableFoodRowProps> = memo(({ item, idx: _idx, onDelete, canEdit }) => {
  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: `food-${String(_idx)}` });
  
  const style = {
    transform: CSS.Transform.toString(transform),
    transition: transition || 'all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)',
    opacity: isDragging ? 0.5 : 1,
  };

  return (
    <tr ref={setNodeRef} style={style} className="hover:bg-[var(--text-primary)]/8 group transition-all duration-500">
      <td className="p-2 text-center">
        <button {...attributes} {...listeners} className="cursor-grab active:cursor-grabbing p-1 hover:bg-[var(--text-primary)]/10 rounded transition-all duration-500">
          <GripVertical size={16} className="text-[var(--text-secondary)] transition-colors duration-500" />
        </button>
      </td>
      <td className="p-4">
        <span className={`text-xs px-2 py-1 rounded-lg font-bold ${
          item.meal === '' ? 'bg-yellow-500/20 text-yellow-600' :
          item.meal === '' ? 'bg-amber-500/20 text-amber-600' :
          item.meal === '' ? 'bg-purple-500/20 text-purple-600' :
          'bg-[var(--accent-color)]/20 text-[var(--accent-color)]'
        }`}>
          {item.meal}
        </span>
      </td>
      <td className="p-4 font-bold text-[var(--text-primary)]">{item.name}</td>
      <td className="p-4 text-center text-[var(--text-secondary)]">{item.amount} {item.unit}</td>
      <td className="p-4 text-center font-bold text-emerald-500">{item.c}</td>
      <td className="p-4 text-center text-xs text-[var(--text-secondary)]">
        <span className="text-[var(--accent-color)]">{item.p}p</span> / 
        <span className="text-yellow-500"> {item.ch}c</span> / 
        <span className="text-red-500"> {item.f}f</span>
      </td>
      <td className="p-4 text-center">
        <button
          onClick={() => onDelete(_idx)}
          disabled={!canEdit}
          className={`text-red-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition p-1 hover:bg-red-500/10 rounded ${!canEdit ? 'opacity-40 !cursor-not-allowed hover:text-red-400' : ''}`}
        >
          <Trash2 size={16} />
        </button>
      </td>
    </tr>
  );
});

interface DietPanelProps {
  activeUser: User;
  onUpdateUser: (_user: User) => void;
}

const DietPanel: React.FC<DietPanelProps> = ({ activeUser, onUpdateUser }) => {
  const { hasPermission } = useApp();
  const canEdit = hasPermission('editProgram', activeUser.id);
  const [dayType, setDayType] = useState('training'); // 'training'  'rest'
  const [meal, setMeal] = useState('');
  const [category, setCategory] = useState('');
  const [foodName, setFoodName] = useState('');
  const [amount, setAmount] = useState('');
  const [unit, setUnit] = useState('-');
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearch = useDebounce(searchTerm, 300);
  const [customFood, setCustomFood] = useState({ name: '', cal: '', protein: '', carb: '', fat: '', unit: '', base: 100 });

  //     Supabase
  const { data: foodsData, isLoading: foodsLoading, error: foodsError } = useFoods();

  //        
  const foodData = useMemo(() => {
    if (!foodsData) return null;

    const grouped: Record<string, Record<string, any>> = {};

    foodsData.forEach(food => {
      if (!grouped[food.category]) {
        grouped[food.category] = {};
      }
      grouped[food.category][food.name] = {
        unit: food.unit,
        calories: food.calories,
        protein: food.protein,
        carbs: food.carbs,
        fat: food.fat,
        fiber: food.fiber,
        sugar: food.sugar,
        sodium: food.sodium
      };
    });

    return grouped;
  }, [foodsData]);

  const foodsList = useMemo(() => {
    if (!category || !foodData || !foodData[category]) return [];
    return Object.keys(foodData[category]);
  }, [category, foodData]);

  //   drag & drop
  const sensors = useSensors(
    useSensor(PointerSensor, { activationConstraint: { distance: 8 } }),
    useSensor(KeyboardSensor, { coordinateGetter: sortableKeyboardCoordinates })
  );

  useEffect(() => {
    setFoodName('');
    setUnit('-');
    setSearchTerm('');
  }, [category, foodData]);

  //   useMemo   unit
  const unitMemo = useMemo(() => {
    if (category && foodName && foodData[category] && foodData[category][foodName]) {
      return foodData[category][foodName].u;
    }
    return '-';
  }, [category, foodName, foodData]);
  
  useEffect(() => {
    setUnit(unitMemo);
  }, [unitMemo]);

  //    
  const filteredFoods = debouncedSearch 
    ? foodsList.filter(f => f.toLowerCase().includes(debouncedSearch.toLowerCase()))
    : foodsList;

  //        
  const getDietKey = () => dayType === 'training' ? 'diet' : 'dietRest';

  //  
  const handleDragEnd = (event: DragEndEvent) => {
    if (!canEdit) return;
    const { active, over } = event;
    if (!over || active.id === over.id) return;

    const oldIndex = parseInt(active.id.split('-')[1]) || 0;
    const newIndex = parseInt(over.id.split('-')[1]) || 0;
    if (isNaN(oldIndex) || isNaN(newIndex)) return;

    const dietKey = getDietKey();
    const newUser = { ...activeUser };
    if (!newUser.plans[dietKey]) newUser.plans[dietKey] = [];
    if (oldIndex < 0 || oldIndex >= newUser.plans[dietKey].length) return;
    if (newIndex < 0 || newIndex >= newUser.plans[dietKey].length) return;
    newUser.plans[dietKey] = arrayMove(newUser.plans[dietKey], oldIndex, newIndex);
    onUpdateUser(newUser);
  };

  const handleDeleteFood = (idx) => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const dietKey = getDietKey();
    const u = { ...activeUser };
    if (!u.plans[dietKey]) return;
    u.plans[dietKey].splice(idx, 1);
    onUpdateUser(u);
  };

  const handleAddFood = () => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    
    // Validation 
    if (!foodName || !foodName.trim()) {
      toast.error('    ');
      return;
    }
    
    if (!amount || !amount.trim()) {
      toast.error('    ');
      return;
    }
    
    if (!foodData || !category || !foodData[category] || !foodData[category][foodName]) {
      toast.error('          ');
      return;
    }

    const info = foodData[category][foodName];
    if (!info) {
      toast.error('   ');
      return;
    }
    
    const amountNum = parseFloat(amount);
    if (isNaN(amountNum) || amountNum <= 0) {
      toast.error('    ');
      return;
    }
    
    if (amountNum > 10000) {
      toast.error('      ( 10000)');
      return;
    }
    
    if (!info.b || info.b === 0) {
      toast.error('    (   )');
      return;
    }
    
    //        
    if (isNaN(info.c) || isNaN(info.p) || isNaN(info.ch) || isNaN(info.f)) {
      toast.error('   ');
      return;
    }
    
    const ratio = amountNum / info.b;
    if (isNaN(ratio) || !isFinite(ratio)) {
      toast.error('   ');
      return;
    }
    
    const newItem = {
      meal, 
      name: foodName.trim(), 
      amount: amountNum, 
      unit: info.u || '',
      c: Math.round(info.c * ratio), 
      p: Math.round(info.p * ratio),
      ch: Math.round(info.ch * ratio), 
      f: Math.round(info.f * ratio)
    };
    
    // Validation     
    if (newItem.c < 0 || newItem.p < 0 || newItem.ch < 0 || newItem.f < 0) {
      toast.error('   ');
      return;
    }
    
    const dietKey = getDietKey();
    const newUser = { ...activeUser };
    if (!newUser.plans[dietKey]) newUser.plans[dietKey] = [];
    newUser.plans[dietKey].push(newItem);
    onUpdateUser(newUser);
    setAmount('');
    toast.success(' ');
  };

  const handleAddCustomFood = () => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    
    // Validation 
    if (!customFood.name || !customFood.name.trim()) {
      toast.error('   ');
      return;
    }
    
    if (customFood.name.trim().length > 100) {
      toast.error('     100  ');
      return;
    }
    
    if (!customFood.cal || !customFood.cal.trim()) {
      toast.error('  ');
      return;
    }
    
    const calNum = parseInt(customFood.cal);
    if (isNaN(calNum) || calNum < 0) {
      toast.error('    ');
      return;
    }
    
    if (calNum > 10000) {
      toast.error('     ');
      return;
    }
    
    const baseNum = parseInt(String(customFood.base)) || 100;
    if (baseNum <= 0 || baseNum > 10000) {
      toast.error('    1  10000 ');
      return;
    }
    
    const proteinNum = parseInt(customFood.protein) || 0;
    const carbNum = parseInt(customFood.carb) || 0;
    const fatNum = parseInt(customFood.fat) || 0;
    
    if (proteinNum < 0 || carbNum < 0 || fatNum < 0) {
      toast.error('   ');
      return;
    }
    
    //     ( 4      9  )
    const calculatedCal = (proteinNum * 4) + (carbNum * 4) + (fatNum * 9);
    if (Math.abs(calculatedCal - calNum) > calNum * 0.2) {
      //     20%    (  )
      toast(':       ', { icon: '' });
    }
    
    const newItem = {
      meal,
      name: customFood.name.trim(),
      amount: baseNum,
      unit: customFood.unit || '',
      c: calNum,
      p: proteinNum,
      ch: carbNum,
      f: fatNum
    };
    const dietKey = getDietKey();
    const newUser = { ...activeUser };
    if (!newUser.plans[dietKey]) newUser.plans[dietKey] = [];
    newUser.plans[dietKey].push(newItem);
    onUpdateUser(newUser);
    setCustomFood({ name: '', cal: '', protein: '', carb: '', fat: '', unit: '', base: 100 });
    toast.success('   ');
  };

  const generateShoppingList = () => {
      const items = {};
    const trainingDays = Number(activeUser.days ?? 3) || 3;
    const restDays = Math.max(0, 7 - trainingDays);

    //   
      (activeUser.plans.diet || []).forEach(i => {
      const key = `${i.name} (${i.unit})`;
      items[key] = (items[key] || 0) + (i.amount * trainingDays);
    });

    //   
    (activeUser.plans.dietRest || []).forEach(i => {
      const key = `${i.name} (${i.unit})`;
      items[key] = (items[key] || 0) + (i.amount * restDays);
      });

      if (Object.keys(items).length === 0) {
        toast.error('        ');
        return;
      }

    const lines = Object.keys(items).map(k => ` ${k}: ${Math.round(items[k])}`);

      Swal.fire({
      title: '   ',
      html: `<div style="text-align:right;direction:rtl;font-size:13px;max-height:400px;overflow-y:auto">
        <p style="font-size:11px;color:#888;margin-bottom:10px;">   ${trainingDays}    ${restDays}  </p>
        ${lines.join('<br/>')}
      </div>`,
        icon: 'info',
        confirmButtonText: ' '
      });
  };

  const copyMealToOtherDay = async () => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const { value: targetMeal } = await Swal.fire({
      title: '   ',
      input: 'select',
      inputOptions: {
        '': '',
        '  ': '  ',
        '': '',
        '  ': '  ',
        '': '',
        '  ': '  '
      },
      showCancelButton: true,
      confirmButtonText: '',
      cancelButtonText: ''
    });

    if (targetMeal) {
      const dietKey = getDietKey();
      const currentItems = (activeUser.plans[dietKey] || []).filter(i => i.meal === meal);
      if (currentItems.length === 0) {
        toast.error('   ');
        return;
      }
      const newItems = currentItems.map(i => ({ ...i, meal: targetMeal }));
      const newUser = { ...activeUser };
      newUser.plans[dietKey] = [...(newUser.plans[dietKey] || []), ...newItems];
      onUpdateUser(newUser);
      toast.success(`${currentItems.length}   ${targetMeal}  `);
    }
  };

  //         
  const copyToOtherDayType = async () => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const fromKey = getDietKey();
    const toKey = dayType === 'training' ? 'dietRest' : 'diet';
    const fromLabel = dayType === 'training' ? ' ' : ' ';
    const toLabel = dayType === 'training' ? ' ' : ' ';

    const result = await Swal.fire({
      title: `  ${toLabel}`,
      text: ` ${fromLabel}  ${toLabel}  `,
      icon: 'question',
      showCancelButton: true,
      confirmButtonText: ' ',
      cancelButtonText: ''
    });

    if (result.isConfirmed) {
      const newUser = { ...activeUser };
      newUser.plans[toKey] = [...(activeUser.plans[fromKey] || [])];
      onUpdateUser(newUser);
      toast.success(`  ${toLabel}  `);
    }
  };

  //      
  const dietKey = getDietKey();
  const currentDietItems = activeUser.plans[dietKey] || [];
  
  const total = currentDietItems.reduce(
    (acc, i) => ({ c: acc.c + i.c, p: acc.p + i.p, ch: acc.ch + i.ch, f: acc.f + i.f }),
    { c: 0, p: 0, ch: 0, f: 0 }
  );

  //    (     )
  const calcNutritionTargets = () => {
    const w = parseFloat(String(activeUser.weight ?? '')) || 0;
    const h = parseFloat(String(activeUser.height ?? '')) || 0;
    const a = parseFloat(String(activeUser.age ?? '')) || 0;
    if (!w || !h || !a) return { bmr: 0, tdee: 0, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    
    const isMale = activeUser.gender !== 'female';
    const activityFactor = parseFloat(String(activeUser.activity ?? '')) || 1.55;
    const trainingDays = Number(activeUser.days ?? 3) || 3;
    const goal = activeUser.nutritionGoals || 'maintenance';
    const bodyFatInput = parseFloat(String(activeUser.bodyFat ?? '')) || 0;
    const isRestDay = dayType === 'rest';

    // BMR -     (2024)
    // Validation:    
    if (w <= 0 || h <= 0 || a <= 0 || w > 500 || h > 300 || a > 150) {
      return { bmr: 0, tdee: 0, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    }
    
    // 1. Mifflin-St Jeor (  2024)
    const mifflin = 10 * w + 6.25 * h - 5 * a + (isMale ? 5 : -161);
    
    // 2. Harris-Benedict (  1984)
    const harrisBenedict = isMale 
      ? 88.362 + (13.397 * w) + (4.799 * h) - (5.677 * a)
      : 447.593 + (9.247 * w) + (3.098 * h) - (4.330 * a);
    
    // Validation:    BMR 
    if (isNaN(mifflin) || mifflin <= 0 || isNaN(harrisBenedict) || harrisBenedict <= 0) {
      return { bmr: 0, tdee: 0, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    }
    
    // 3. Katch-McArdle (     )
    let katch = 0;
    if (bodyFatInput > 0 && bodyFatInput < 100 && !isNaN(bodyFatInput)) {
      const leanMass = w * (1 - bodyFatInput / 100);
      if (leanMass > 0 && !isNaN(leanMass)) {
        katch = 370 + (21.6 * leanMass);
        if (isNaN(katch) || katch <= 0) katch = 0;
      }
    }
    
    // 4. Cunningham ( )
    let cunningham = 0;
    if (bodyFatInput > 0 && bodyFatInput < 100 && !isNaN(bodyFatInput)) {
      const leanMass = w * (1 - bodyFatInput / 100);
      if (leanMass > 0 && !isNaN(leanMass)) {
        cunningham = 500 + (22 * leanMass);
        if (isNaN(cunningham) || cunningham <= 0) cunningham = 0;
      }
    }
    
    //  
    const bmr = (katch > 0 && cunningham > 0)
      ? Math.max(0, Math.round((mifflin * 0.25 + harrisBenedict * 0.15 + katch * 0.40 + cunningham * 0.20)))
      : (katch > 0)
      ? Math.max(0, Math.round((mifflin * 0.35 + harrisBenedict * 0.25 + katch * 0.40)))
      : Math.max(0, Math.round((mifflin * 0.60 + harrisBenedict * 0.40)));
    
    // Validation:   BMR 
    if (bmr <= 0 || isNaN(bmr)) {
      return { bmr: 0, tdee: 0, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    }

    //           
    // Validation:   activityFactor 
    let validActivityFactor = activityFactor;
    if (isNaN(activityFactor) || activityFactor < 1.2 || activityFactor > 2.5) {
      validActivityFactor = 1.55; //  
    }
    
    let baseActivityFactor = validActivityFactor;
    if (trainingDays >= 6) baseActivityFactor = Math.max(validActivityFactor, 1.725);
    else if (trainingDays >= 4) baseActivityFactor = Math.max(validActivityFactor, 1.55);
    else if (trainingDays >= 2) baseActivityFactor = Math.max(validActivityFactor, 1.375);
    else baseActivityFactor = Math.max(validActivityFactor, 1.2);
    
    // Validation:   baseActivityFactor 
    if (isNaN(baseActivityFactor) || baseActivityFactor < 1.2 || baseActivityFactor > 2.5) {
      baseActivityFactor = 1.55;
    }
    
    // TDEE  (    ) -    
    const _baseTDEE = Math.max(0, Math.round(bmr * baseActivityFactor));
    
    //  TDEE       
    let adjustedFactor = baseActivityFactor;
    if (isRestDay) {
      //        ( 20-30% )
      adjustedFactor = Math.max(1.2, baseActivityFactor * 0.75);
    } else {
      //           
      switch (goal) {
        case 'weight-loss':
          //    TDEE   ( 5-10%)
          adjustedFactor = Math.max(1.2, baseActivityFactor * 0.92);
          break;
        case 'muscle-gain':
          //   TDEE  ( 8-12%)
          adjustedFactor = Math.min(2.5, baseActivityFactor * 1.10);
          break;
        case 'weight-gain':
          //    TDEE  ( 10-15%)
          adjustedFactor = Math.min(2.5, baseActivityFactor * 1.12);
          break;
        case 'recomp':
          //   TDEE    ( 2-5%)
          adjustedFactor = Math.max(1.2, baseActivityFactor * 0.97);
          break;
        default:
          // maintenance: TDEE 
          adjustedFactor = baseActivityFactor;
      }
    }
    
    // Validation:   adjustedFactor 
    if (isNaN(adjustedFactor) || adjustedFactor < 1.2 || adjustedFactor > 2.5) {
      adjustedFactor = baseActivityFactor;
    }

    const tdee = Math.max(0, Math.round(bmr * adjustedFactor));
    
    // Validation:   TDEE 
    if (tdee <= 0 || isNaN(tdee)) {
      return { bmr, tdee: 0, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    }

    //   -     
    let targetCalories = tdee;
    switch (goal) {
      case 'weight-loss': 
        targetCalories = Math.max(bmr, tdee - (isRestDay ? 400 : 500)); 
        break;
      case 'weight-gain': 
        targetCalories = tdee + (isRestDay ? 200 : 400); 
        break;
      case 'muscle-gain': 
        targetCalories = tdee + (isRestDay ? 100 : 300); 
        break;
      case 'recomp':
        targetCalories = isRestDay ? Math.max(bmr, tdee - 200) : tdee;
        break;
      default: 
        targetCalories = tdee;
    }

    //  -   ( 2024)
    //   :      
    let protein, carbs, fat;
    
    // Validation:    
    if (targetCalories <= 0 || w <= 0) {
      return { bmr, tdee, targetCalories: 0, protein: 0, carbs: 0, fat: 0 };
    }
    
    //       
    const leanBodyMass = bodyFatInput > 0 ? w * (1 - bodyFatInput / 100) : w * 0.85;
    
    if (isRestDay) {
      //  :   (2.0-2.2g/kg)   (15-20% )   (35-40% )
      protein = Math.max(0, Math.round(Math.max(w * 2.1, leanBodyMass * 2.6)));
      fat = Math.max(0, Math.round(targetCalories * 0.37 / 9)); //    
      const remainingCalories = targetCalories - (protein * 4) - (fat * 9);
      carbs = Math.max(0, Math.round(remainingCalories / 4));
    } else {
      //   -   (2024)
      switch (goal) {
        case 'weight-loss': {
          // : 2.4-2.6g/kg ( 3.1-3.3g/kg   )   
          protein = Math.max(0, Math.round(Math.max(w * 2.5, leanBodyMass * 3.2)));
          // : 25-30%  ( 0.6g/kg)
          const minFat = Math.max(0, Math.round(w * 0.6));
          fat = Math.max(minFat, Math.round(targetCalories * 0.27 / 9));
          // :  (   )
          const remainingCaloriesWL = targetCalories - (protein * 4) - (fat * 9);
          carbs = Math.max(0, Math.round(remainingCaloriesWL / 4));
          break;
        }
        case 'muscle-gain': {
          // : 2.1-2.3g/kg ( 2.6-2.8g/kg   )
          protein = Math.max(0, Math.round(Math.max(w * 2.2, leanBodyMass * 2.7)));
          // : 25-30%  (  )
          fat = Math.max(0, Math.round(targetCalories * 0.28 / 9));
          // :  (    )
          const remainingCaloriesMG = targetCalories - (protein * 4) - (fat * 9);
          carbs = Math.max(0, Math.round(remainingCaloriesMG / 4));
          break;
        }
        case 'weight-gain': {
          // : 1.6-1.8g/kg (   )
          protein = Math.max(0, Math.round(w * 1.7));
          // : 30-35%  ( )
          fat = Math.max(0, Math.round(targetCalories * 0.32 / 9));
          // :  (   )
          const remainingCaloriesWG = targetCalories - (protein * 4) - (fat * 9);
          carbs = Math.max(0, Math.round(remainingCaloriesWG / 4));
          break;
        }
        case 'recomp': {
          // : 2.7-3.0g/kg ( 3.4-3.7g/kg   ) -    
          protein = Math.max(0, Math.round(Math.max(w * 2.8, leanBodyMass * 3.5)));
          // : 30-35%  (  )
          fat = Math.max(0, Math.round(targetCalories * 0.32 / 9));
          // :  (  )
          const remainingCaloriesRC = targetCalories - (protein * 4) - (fat * 9);
          carbs = Math.max(0, Math.round(remainingCaloriesRC / 4));
          break;
        }
        default: { // maintenance
          // : 1.9-2.0g/kg (  )
          protein = Math.max(0, Math.round(w * 1.95));
          // : 28-32%  ()
          fat = Math.max(0, Math.round(targetCalories * 0.30 / 9));
          // : 
          const remainingCaloriesDef = targetCalories - (protein * 4) - (fat * 9);
          carbs = Math.max(0, Math.round(remainingCaloriesDef / 4));
        }
      }
    }
    
    // Validation :       
    const calculatedCalories = (protein * 4) + (carbs * 4) + (fat * 9);
    if (Math.abs(calculatedCalories - targetCalories) > targetCalories * 0.1) {
      //     10%     
      const adjustment = targetCalories / calculatedCalories;
      protein = Math.max(0, Math.round(protein * adjustment));
      carbs = Math.max(0, Math.round(carbs * adjustment));
      fat = Math.max(0, Math.round(fat * adjustment));
    }

    return { bmr, tdee, targetCalories, protein, carbs, fat };
  };

  const { bmr, tdee, targetCalories, protein: targetP, carbs: targetC, fat: targetF } = calcNutritionTargets();

  const dietItems = currentDietItems;

  return (
    <div className="space-y-6 animate-fade-in">
      {/*    */}
      <div className="glass-panel p-4 rounded-2xl">
        <div className="flex items-center justify-between flex-wrap gap-4">
          <div className="flex gap-2">
            <button
              onClick={() => setDayType('training')}
              className={`flex items-center gap-2 px-5 py-3 rounded-xl font-bold transition-all ${
                dayType === 'training' 
                  ? 'bg-gradient-to-r from-emerald-600 to-green-500 text-white shadow-lg shadow-emerald-500/30' 
                  : 'bg-[var(--glass-bg)] text-[var(--text-secondary)] hover:bg-emerald-500/10'
              }`}
            >
              <Dumbbell size={18} />
               
              {(activeUser.plans.diet || []).length > 0 && (
                <span className="text-xs bg-white/20 px-2 py-0.5 rounded-full">{(activeUser.plans.diet || []).length}</span>
              )}
            </button>
            <button
              onClick={() => setDayType('rest')}
              className={`flex items-center gap-2 px-5 py-3 rounded-xl font-bold transition-all ${
                dayType === 'rest' 
                  ? 'bg-gradient-to-r from-purple-600 to-indigo-500 text-white shadow-lg shadow-purple-500/30' 
                  : 'bg-[var(--glass-bg)] text-[var(--text-secondary)] hover:bg-purple-500/10'
              }`}
            >
              <Moon size={18} />
               
              {(activeUser.plans.dietRest || []).length > 0 && (
                <span className="text-xs bg-white/20 px-2 py-0.5 rounded-full">{(activeUser.plans.dietRest || []).length}</span>
              )}
            </button>
          </div>
          <button
            onClick={copyToOtherDayType}
            className="btn-glass bg-[var(--accent-color)]/10 text-[var(--accent-color)] text-xs border border-[var(--accent-color)]/20"
          >
            <Copy size={14} />
              {dayType === 'training' ? ' ' : ' '}
          </button>
        </div>
        <p className="text-xs text-[var(--text-secondary)] mt-3">
          {dayType === 'training' 
            ? '  :        ' 
            : '  :      '}
        </p>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/*    */}
        <div className={`glass-panel p-6 rounded-3xl relative overflow-hidden text-white ${
          dayType === 'training' 
            ? 'bg-gradient-to-br from-emerald-900 via-slate-900 to-slate-900 border-emerald-500/20' 
            : 'bg-gradient-to-br from-purple-900 via-slate-900 to-slate-900 border-purple-500/20'
        }`}>
          <div className="relative z-10">
            <div className="flex justify-between items-start mb-4">
                    <div>
                <div className={`text-xs uppercase font-bold mb-1 ${dayType === 'training' ? 'text-emerald-300' : 'text-purple-300'}`}>
                     ({dayType === 'training' ? ' ' : ' '})
                </div>
                <div className="text-4xl font-black text-white">{targetCalories}</div>
                <div className="text-[10px] text-slate-400 mt-1">
                  BMR: {bmr} | TDEE: {tdee}
                </div>
              </div>
              <div className="text-left">
                <div className="text-xs text-indigo-300 uppercase font-bold mb-1"></div>
                <div className={`text-3xl font-bold ${total.c > targetCalories ? 'text-red-400' : 'text-emerald-400'}`}>{total.c}</div>
                <div className="text-xs text-slate-400 mt-1">
                  {total.c > targetCalories ? `+${total.c - targetCalories} ` : `${targetCalories - total.c} `}
                </div>
              </div>
            </div>
            
            {/*    */}
            <div className="mb-4">
              <div className="h-3 bg-slate-700 rounded-full overflow-hidden">
                <div 
                  className={`h-full rounded-full transition-all ${
                    total.c > targetCalories 
                      ? 'bg-red-500' 
                      : dayType === 'training' ? 'bg-emerald-500' : 'bg-purple-500'
                  }`}
                  style={{ width: `${Math.min((total.c / targetCalories) * 100, 100)}%` }}
                />
              </div>
              <div className="text-[10px] text-slate-400 mt-1 text-center">
                {targetCalories > 0 ? Math.round((total.c / targetCalories) * 100) : 0}%  
              </div>
            </div>

            {/*     */}
            <div className="space-y-3">
              <div className="bg-white/10 rounded-xl p-3">
                <div className="flex justify-between items-center mb-1">
                  <span className="text-xs text-[var(--accent-color)]/80"></span>
                  <span className="text-sm font-bold text-[var(--accent-color)]">{total.p}g / {targetP || 0}g</span>
                </div>
                <div className="h-2 bg-slate-700 rounded-full overflow-hidden">
                  <div className="h-full bg-[var(--accent-color)] rounded-full transition-all" style={{ width: `${targetP > 0 ? Math.min((total.p / targetP) * 100, 100) : 0}%` }} />
                </div>
              </div>
              <div className="bg-white/10 rounded-xl p-3">
                <div className="flex justify-between items-center mb-1">
                  <span className="text-xs text-yellow-300"></span>
                  <span className="text-sm font-bold text-yellow-400">{total.ch}g / {targetC || 0}g</span>
                </div>
                <div className="h-2 bg-slate-700 rounded-full overflow-hidden">
                  <div className="h-full bg-yellow-500 rounded-full transition-all" style={{ width: `${targetC > 0 ? Math.min((total.ch / targetC) * 100, 100) : 0}%` }} />
                    </div>
                    </div>
              <div className="bg-white/10 rounded-xl p-3">
                <div className="flex justify-between items-center mb-1">
                  <span className="text-xs text-red-300"></span>
                  <span className="text-sm font-bold text-red-400">{total.f}g / {targetF || 0}g</span>
                </div>
                <div className="h-2 bg-slate-700 rounded-full overflow-hidden">
                  <div className="h-full bg-red-500 rounded-full transition-all" style={{ width: `${targetF > 0 ? Math.min((total.f / targetF) * 100, 100) : 0}%` }} />
                </div>
              </div>
                </div>
            </div>
        </div>

        {/*   */}
        <div className="lg:col-span-2 glass-panel p-6 rounded-3xl">
             <div className="flex justify-between items-center border-b border-[var(--glass-border)] pb-4 mb-4">
                 <h3 className="font-bold text-lg text-[var(--text-primary)]"> </h3>
            <div className="flex gap-2">
              <button onClick={copyMealToOtherDay} className="btn-glass bg-purple-500/10 text-purple-600 dark:text-purple-400 text-xs border border-purple-500/20">
                <Copy size={14} />  
              </button>
              <button onClick={generateShoppingList} className="btn-glass bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 text-xs border border-emerald-500/20">
                <ShoppingBag size={14} />  
              </button>
            </div>
             </div>

          {/*     */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-3 mb-4">
            <select className="input-glass font-bold" value={meal} onChange={e => setMeal(e.target.value)}>
                    <option></option>
                    <option>  </option>
                    <option></option>
                    <option>  </option>
                    <option></option>
                    <option>  </option>
                </select>
            <select className="input-glass" value={category} onChange={e => setCategory(e.target.value)}>
              <option value="">...</option>
              {foodData ? Object.keys(foodData).map(c => <option key={c} value={c}>{c}</option>) : <option disabled>  ...</option>}
            </select>
            <div className="md:col-span-2">
              {foodsList.length > 15 && (
                <div className="relative mb-2">
                  <input
                    type="text"
                    className="input-glass pl-8 text-sm"
                    placeholder=" ..."
                    value={searchTerm}
                    onChange={e => setSearchTerm(e.target.value)}
                  />
                  <Search size={14} className="absolute left-3 top-3.5 text-slate-400" />
                </div>
              )}
              <select className="input-glass font-bold" value={foodName} onChange={e => setFoodName(e.target.value)}>
                <option value="">...</option>
                {filteredFoods.map(f => <option key={f} value={f}>{f}</option>)}
              </select>
            </div>
          </div>
          <div className="flex gap-3 mb-6">
            <div className="flex-1 relative">
              <input type="number" className="input-glass text-center font-bold" placeholder="" value={amount} onChange={e => setAmount(e.target.value)} />
              <span className="absolute left-3 top-3 text-xs text-slate-400">{unit}</span>
            </div>
            <button
              onClick={handleAddFood}
              disabled={!canEdit}
              className={`btn-glass text-white px-4 sm:px-6 ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
              style={!canEdit ? {} : { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
            >
              <Plus size={16} /> 
            </button>
          </div>

          {/*    */}
          <div className="border-t border-[var(--glass-border)] pt-4">
            <div className="text-xs text-[var(--text-secondary)] mb-3 font-bold">   </div>
            <div className="grid grid-cols-2 md:grid-cols-6 gap-2">
              <input className="input-glass text-sm" placeholder=" " value={customFood.name} onChange={e => setCustomFood({ ...customFood, name: e.target.value })} />
              <input className="input-glass text-sm text-center" type="number" placeholder="" value={customFood.cal} onChange={e => setCustomFood({ ...customFood, cal: e.target.value })} />
              <input className="input-glass text-sm text-center" type="number" placeholder="" value={customFood.protein} onChange={e => setCustomFood({ ...customFood, protein: e.target.value })} />
              <input className="input-glass text-sm text-center" type="number" placeholder="" value={customFood.carb} onChange={e => setCustomFood({ ...customFood, carb: e.target.value })} />
              <input className="input-glass text-sm text-center" type="number" placeholder="" value={customFood.fat} onChange={e => setCustomFood({ ...customFood, fat: e.target.value })} />
              <button
                onClick={handleAddCustomFood}
                disabled={!canEdit}
                className={`btn-glass text-white text-sm ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
                style={!canEdit ? {} : { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
              >
                
              </button>
             </div>
             </div>
        </div>
      </div>

      {/*   */}
      <div className="glass-panel rounded-3xl overflow-hidden">
        <div className={`px-4 py-3 border-b border-[var(--glass-border)] flex justify-between items-center ${
          dayType === 'training' ? 'bg-emerald-500/10' : 'bg-purple-500/10'
        }`}>
          <span className="text-sm font-bold text-[var(--text-primary)] flex items-center gap-2">
            {dayType === 'training' ? <Dumbbell size={16} className="text-emerald-500" /> : <Moon size={16} className="text-purple-500" />}
              {dayType === 'training' ? ' ' : ' '}
          </span>
          <span className="text-xs text-[var(--text-secondary)]">{dietItems.length} </span>
        </div>

        <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>
        {dietItems.length > 0 ? (
          <div className="overflow-x-auto -mx-2 sm:-mx-4 md:mx-0 px-2 sm:px-4 md:px-0">
            <table className="w-full text-right text-xs sm:text-sm min-w-[600px] sm:min-w-[700px]">
            <thead className="bg-[var(--text-primary)]/5 text-[var(--text-secondary)] text-xs border-b border-[var(--glass-border)]">
              <tr>
                <th className="p-2 w-10"></th>
                <th className="p-4 w-28"></th>
                <th className="p-4"></th>
                <th className="p-4 text-center w-24"></th>
                <th className="p-4 text-center w-20"></th>
                <th className="p-4 text-center w-32"></th>
                <th className="p-4 w-10"></th>
              </tr>
            </thead>
            <tbody className="divide-y divide-[var(--glass-border)]">
              <SortableContext items={dietItems.map((_, idx) => `food-${idx}`)} strategy={verticalListSortingStrategy}>
                {dietItems.map((item, idx) => (
                  <SortableFoodRow key={`food-${idx}`} item={item} idx={idx} onDelete={handleDeleteFood} canEdit={canEdit} />
                ))}
              </SortableContext>
            </tbody>
            </table>
          </div>
        ) : (
          <EmptyState
            icon={<UtensilsCrossed size={32} className="text-[var(--accent-color)]" />}
            title="   "
            description={`   ${dayType === 'training' ? ' ' : ' '}   .       .`}
          />
        )}
        </DndContext>
      </div>
    </div>
  );
};

export default DietPanel;


==================================================
FILE: .\src\components\EmptyState.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

interface EmptyStateProps {
  icon: React.ReactNode;
  title: string;
  description: string;
  action?: React.ReactNode;
  className?: string;
}

const EmptyState: React.FC<EmptyStateProps> = ({ icon, title, description, action, className = '' }) => {
  return (
    <motion.div 
      className={`empty-state-enhanced ${className}`}
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.4, ease: [0.16, 1, 0.3, 1] }}
    >
      <motion.div 
        className="empty-state-enhanced-icon"
        animate={{ 
          y: [0, -12, 0],
          scale: [1, 1.02, 1],
        }}
        transition={{ 
          duration: 4,
          repeat: Infinity,
          ease: [0.4, 0, 0.6, 1]
        }}
      >
        {icon}
      </motion.div>
      <h3 className="text-heading-3 text-[var(--text-primary)] mb-3 font-bold">{title}</h3>
      <p className="text-body-small text-[var(--text-secondary)] mb-6 max-w-md mx-auto leading-relaxed">{description}</p>
      {action && (
        <motion.div 
          className="mt-6"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ delay: 0.2 }}
        >
          {action}
        </motion.div>
      )}
    </motion.div>
  );
};

export default EmptyState;




==================================================
FILE: .\src\components\EnhancedCard.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

interface EnhancedCardProps {
  children: React.ReactNode;
  className?: string;
  variant?: 'default' | 'glow' | 'tilt' | 'morph' | 'border' | 'shadow';
  onClick?: () => void;
  disabled?: boolean;
}

// Default card with subtle hover effects
export const HoverCard: React.FC<EnhancedCardProps> = ({
  children,
  className = '',
  variant = 'default',
  onClick,
  disabled = false
}) => {
  const getVariantStyles = () => {
    switch (variant) {
      case 'glow':
        return {
          hover: {
            boxShadow: '0 20px 40px rgba(59, 130, 246, 0.3), 0 0 30px rgba(59, 130, 246, 0.2)',
            borderColor: 'rgba(59, 130, 246, 0.4)'
          }
        };
      case 'tilt':
        return {
          hover: { rotateY: 5, rotateX: 5 }
        };
      case 'morph':
        return {
          hover: {
            borderRadius: '2rem',
            scale: 1.05
          }
        };
      case 'border':
        return {
          hover: {
            borderColor: 'rgba(59, 130, 246, 0.6)',
            borderWidth: '2px'
          }
        };
      case 'shadow':
        return {
          hover: {
            boxShadow: '0 25px 50px rgba(0, 0, 0, 0.25), 0 0 40px rgba(59, 130, 246, 0.1)'
          }
        };
      default:
        return {
          hover: {
            y: -8,
            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)'
          }
        };
    }
  };

  const variantStyles = getVariantStyles();

  return (
    <motion.div
      className={`glass-card cursor-pointer select-none ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      whileHover={!disabled ? variantStyles.hover : {}}
      whileTap={!disabled ? { scale: 0.98 } : {}}
      transition={{
        type: "spring",
        stiffness: 300,
        damping: 20
      }}
      onClick={!disabled ? onClick : undefined}
    >
      {children}
    </motion.div>
  );
};

// Card with magnetic hover effect
export const MagneticCard: React.FC<EnhancedCardProps> = ({
  children,
  className = '',
  onClick,
  disabled = false
}) => {
  return (
    <motion.div
      className={`glass-card cursor-pointer select-none ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      whileHover={{
        scale: 1.02,
        rotateY: 2,
        rotateX: 2,
        boxShadow: '0 25px 50px rgba(59, 130, 246, 0.2)'
      }}
      whileTap={{ scale: 0.98 }}
      transition={{
        type: "spring",
        stiffness: 400,
        damping: 25
      }}
      onClick={!disabled ? onClick : undefined}
      style={{
        transformStyle: "preserve-3d",
        perspective: "1000px"
      }}
    >
      <motion.div
        style={{
          transformStyle: "preserve-3d"
        }}
        whileHover={{
          rotateY: -2,
          rotateX: -2
        }}
        transition={{
          type: "spring",
          stiffness: 400,
          damping: 25
        }}
      >
        {children}
      </motion.div>
    </motion.div>
  );
};

// Card with reveal animation
export const RevealCard: React.FC<EnhancedCardProps & {
  frontContent: React.ReactNode;
  backContent: React.ReactNode;
}> = ({
  frontContent,
  backContent,
  className = '',
  onClick,
  disabled = false
}) => {
  const [isFlipped, setIsFlipped] = React.useState(false);

  const handleClick = () => {
    if (!disabled) {
      setIsFlipped(!isFlipped);
      onClick?.();
    }
  };

  return (
    <motion.div
      className={`relative cursor-pointer select-none ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      style={{
        perspective: "1000px",
        minHeight: "200px"
      }}
      onClick={handleClick}
    >
      <motion.div
        className="absolute inset-0 w-full h-full"
        initial={false}
        animate={{ rotateY: isFlipped ? 180 : 0 }}
        transition={{
          duration: 0.6,
          ease: [0.25, 0.46, 0.45, 0.94]
        }}
        style={{
          transformStyle: "preserve-3d",
          backfaceVisibility: "hidden"
        }}
      >
        <div className="glass-card p-6 h-full flex items-center justify-center">
          {frontContent}
        </div>
      </motion.div>

      <motion.div
        className="absolute inset-0 w-full h-full"
        initial={false}
        animate={{ rotateY: isFlipped ? 0 : -180 }}
        transition={{
          duration: 0.6,
          ease: [0.25, 0.46, 0.45, 0.94]
        }}
        style={{
          transformStyle: "preserve-3d",
          backfaceVisibility: "hidden"
        }}
      >
        <div className="glass-card p-6 h-full flex items-center justify-center bg-gradient-to-br from-purple-500/20 to-blue-500/20">
          {backContent}
        </div>
      </motion.div>
    </motion.div>
  );
};

// Card with ripple effect on click
export const RippleCard: React.FC<EnhancedCardProps> = ({
  children,
  className = '',
  onClick,
  disabled = false
}) => {
  const [ripples, setRipples] = React.useState<Array<{ id: number; x: number; y: number }>>([]);

  const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {
    if (disabled) return;

    const rect = event.currentTarget.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;

    const newRipple = {
      id: Date.now(),
      x,
      y
    };

    setRipples(prev => [...prev, newRipple]);

    // Remove ripple after animation
    setTimeout(() => {
      setRipples(prev => prev.filter(ripple => ripple.id !== newRipple.id));
    }, 600);

    onClick?.();
  };

  return (
    <motion.div
      className={`glass-card cursor-pointer select-none relative overflow-hidden ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      whileHover={{
        scale: 1.02,
        boxShadow: '0 20px 40px rgba(59, 130, 246, 0.2)'
      }}
      whileTap={{ scale: 0.98 }}
      transition={{
        type: "spring",
        stiffness: 300,
        damping: 20
      }}
      onClick={handleClick}
    >
      {children}

      {/* Ripple effects */}
      {ripples.map(ripple => (
        <motion.div
          key={ripple.id}
          className="absolute rounded-full bg-white/30 pointer-events-none"
          style={{
            left: ripple.x - 10,
            top: ripple.y - 10,
            width: 20,
            height: 20
          }}
          initial={{ scale: 0, opacity: 1 }}
          animate={{
            scale: 20,
            opacity: 0
          }}
          transition={{
            duration: 0.6,
            ease: "easeOut"
          }}
        />
      ))}
    </motion.div>
  );
};

// Card with morphing background
export const MorphingCard: React.FC<EnhancedCardProps> = ({
  children,
  className = '',
  onClick,
  disabled = false
}) => {
  return (
    <motion.div
      className={`relative cursor-pointer select-none overflow-hidden ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      whileHover={{
        scale: 1.02
      }}
      whileTap={{ scale: 0.98 }}
      transition={{
        type: "spring",
        stiffness: 300,
        damping: 20
      }}
      onClick={!disabled ? onClick : undefined}
    >
      {/* Animated background */}
      <motion.div
        className="absolute inset-0 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20"
        initial={{ opacity: 0 }}
        whileHover={{
          opacity: 1,
          background: [
            "linear-gradient(45deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2))",
            "linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2), rgba(59, 130, 246, 0.2))",
            "linear-gradient(225deg, rgba(236, 72, 153, 0.2), rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2))",
            "linear-gradient(315deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2))"
          ]
        }}
        transition={{
          duration: 3,
          repeat: Infinity,
          repeatType: "reverse"
        }}
      />

      {/* Content */}
      <div className="relative z-10 glass-card">
        {children}
      </div>
    </motion.div>
  );
};

// Floating card with continuous animation
export const FloatingCard: React.FC<EnhancedCardProps> = ({
  children,
  className = '',
  onClick,
  disabled = false
}) => {
  return (
    <motion.div
      className={`glass-card cursor-pointer select-none ${className} ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
      animate={{
        y: [0, -10, 0],
        rotate: [0, 1, 0, -1, 0]
      }}
      transition={{
        duration: 6,
        repeat: Infinity,
        ease: "easeInOut"
      }}
      whileHover={{
        scale: 1.05,
        y: -5,
        boxShadow: '0 25px 50px rgba(59, 130, 246, 0.3)',
        animate: {
          rotate: [0, 2, 0, -2, 0],
          y: [-5, -15, -5]
        },
        transition: {
          duration: 2,
          repeat: Infinity,
          ease: "easeInOut"
        }
      }}
      whileTap={{ scale: 0.95 }}
      onClick={!disabled ? onClick : undefined}
    >
      {children}
    </motion.div>
  );
};

export default HoverCard;


==================================================
FILE: .\src\components\ErrorBoundary.tsx
==================================================
import React, { Component, ErrorInfo, ReactNode } from 'react';
import { AlertTriangle, RefreshCw } from 'lucide-react';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false,
    error: null
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Uncaught error:', error, errorInfo);
  }

  private handleRetry = () => {
    this.setState({ hasError: false, error: null });
  };

  public render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback;
      }

      return (
        <div className="min-h-[400px] flex items-center justify-center p-8">
          <div className="text-center glass-panel rounded-3xl p-8 max-w-md">
            <div className="w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4">
              <AlertTriangle className="w-8 h-8 text-red-500" />
            </div>
            <h2 className="text-xl font-bold text-[var(--text-primary)] mb-2">
                
            </h2>
            <p className="text-sm text-[var(--text-secondary)] mb-4">
                      .
            </p>
            {this.state.error && (
              <p className="text-xs text-red-500 bg-red-500/10 p-3 rounded-lg mb-4 font-mono text-left dir-ltr">
                {this.state.error.message}
              </p>
            )}
            <button
              onClick={this.handleRetry}
              className="btn-glass bg-[var(--accent-color)] text-white px-6 py-2.5 flex items-center gap-2 mx-auto"
            >
              <RefreshCw size={16} />
               
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;



==================================================
FILE: .\src\components\ErrorMessage.tsx
==================================================
import React from 'react';
import { AlertCircle } from 'lucide-react';

interface ErrorMessageProps {
  message: string;
  className?: string;
}

const ErrorMessage: React.FC<ErrorMessageProps> = ({ message, className = '' }) => {
  return (
    <div className={`flex items-center gap-2 text-xs text-red-500 mt-1 ${className}`} role="alert">
      <AlertCircle size={14} className="shrink-0" />
      <span>{message}</span>
    </div>
  );
};

export default ErrorMessage;


























==================================================
FILE: .\src\components\FloatingActionButton.tsx
==================================================
import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Plus, X, ChevronUp } from 'lucide-react';

interface FloatingActionButtonProps {
  onClick?: () => void;
  icon?: React.ReactNode;
  position?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';
  size?: 'sm' | 'md' | 'lg';
  variant?: 'primary' | 'secondary' | 'success' | 'warning' | 'error';
  disabled?: boolean;
  tooltip?: string;
  animate?: boolean;
}

// Single FAB
export const FloatingActionButton: React.FC<FloatingActionButtonProps> = ({
  onClick,
  icon = <Plus className="w-5 h-5" />,
  position = 'bottom-right',
  size = 'md',
  variant = 'primary',
  disabled = false,
  tooltip,
  animate = true
}) => {
  const [isHovered, setIsHovered] = useState(false);

  const positionClasses = {
    'bottom-right': 'bottom-6 right-6',
    'bottom-left': 'bottom-6 left-6',
    'top-right': 'top-6 right-6',
    'top-left': 'top-6 left-6'
  };

  const sizeClasses = {
    sm: 'w-12 h-12',
    md: 'w-14 h-14',
    lg: 'w-16 h-16'
  };

  const variantClasses = {
    primary: 'bg-blue-500 hover:bg-blue-600 text-white shadow-blue-500/30',
    secondary: 'bg-purple-500 hover:bg-purple-600 text-white shadow-purple-500/30',
    success: 'bg-green-500 hover:bg-green-600 text-white shadow-green-500/30',
    warning: 'bg-yellow-500 hover:bg-yellow-600 text-white shadow-yellow-500/30',
    error: 'bg-red-500 hover:bg-red-600 text-white shadow-red-500/30'
  };

  return (
    <>
      <motion.button
        className={`
          fixed ${positionClasses[position]} ${sizeClasses[size]}
          rounded-full flex items-center justify-center
          ${variantClasses[variant]}
          shadow-lg hover:shadow-xl transition-all duration-300
          focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-blue-500/50
          ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
          z-40
        `}
        onClick={!disabled ? onClick : undefined}
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
        disabled={disabled}
        whileHover={animate && !disabled ? {
          scale: 1.1,
          boxShadow: `0 20px 40px ${variant === 'primary' ? 'rgba(59, 130, 246, 0.4)' :
                                 variant === 'secondary' ? 'rgba(139, 92, 246, 0.4)' :
                                 variant === 'success' ? 'rgba(34, 197, 94, 0.4)' :
                                 variant === 'warning' ? 'rgba(245, 158, 11, 0.4)' :
                                 'rgba(239, 68, 68, 0.4)'}`
        } : {}}
        whileTap={animate && !disabled ? { scale: 0.95 } : {}}
        animate={animate ? {
          rotate: isHovered ? 180 : 0
        } : {}}
        transition={{
          type: "spring",
          stiffness: 300,
          damping: 20
        }}
      >
        <motion.div
          animate={animate ? { rotate: isHovered ? 45 : 0 } : {}}
          transition={{ duration: 0.2 }}
        >
          {icon}
        </motion.div>
      </motion.button>

      {/* Tooltip */}
      <AnimatePresence>
        {tooltip && isHovered && (
          <motion.div
            className="fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none"
            style={{
              [position.includes('right') ? 'right' : 'left']: '5rem',
              [position.includes('bottom') ? 'bottom' : 'top']: position.includes('md') ? '1rem' : '1.5rem'
            }}
            initial={{ opacity: 0, scale: 0.8, x: 10 }}
            animate={{ opacity: 1, scale: 1, x: 0 }}
            exit={{ opacity: 0, scale: 0.8, x: 10 }}
            transition={{ duration: 0.2 }}
          >
            {tooltip}
            <div className="absolute w-2 h-2 bg-gray-900 rotate-45"
                 style={{
                   [position.includes('right') ? 'right' : 'left']: '-4px',
                   top: '50%',
                   transform: 'translateY(-50%)'
                 }}
            />
          </motion.div>
        )}
      </AnimatePresence>
    </>
  );
};

// Multi-action FAB with expandable menu
interface FabAction {
  icon: React.ReactNode;
  label: string;
  onClick: () => void;
  color?: string;
}

interface ExpandableFabProps extends Omit<FloatingActionButtonProps, 'onClick' | 'icon'> {
  actions: FabAction[];
  mainIcon?: React.ReactNode;
}

export const ExpandableFab: React.FC<ExpandableFabProps> = ({
  actions,
  mainIcon,
  position = 'bottom-right',
  size = 'md',
  variant = 'primary',
  disabled = false,
  tooltip,
  animate = true
}) => {
  const [isOpen, setIsOpen] = useState(false);

  const positionClasses = {
    'bottom-right': 'bottom-6 right-6',
    'bottom-left': 'bottom-6 left-6',
    'top-right': 'top-6 right-6',
    'top-left': 'top-6 left-6'
  };

  const toggleMenu = () => {
    if (!disabled) {
      setIsOpen(!isOpen);
    }
  };

  return (
    <>
      {/* Action buttons */}
      <AnimatePresence>
        {isOpen && (
          <motion.div
            className={`fixed ${positionClasses[position]} z-30`}
            initial="closed"
            animate="open"
            exit="closed"
          >
            {actions.map((action, index) => (
              <motion.button
                key={index}
                className={`
                  absolute w-12 h-12 rounded-full flex items-center justify-center
                  ${action.color || 'bg-white text-gray-700'} shadow-lg
                  hover:shadow-xl transition-all duration-300
                  focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-blue-500/50
                `}
                onClick={() => {
                  action.onClick();
                  setIsOpen(false);
                }}
                variants={{
                  closed: {
                    scale: 0,
                    y: 0,
                    opacity: 0
                  },
                  open: {
                    scale: 1,
                    y: -(index + 1) * 60,
                    opacity: 1
                  }
                }}
                transition={{
                  type: "spring",
                  stiffness: 300,
                  damping: 25,
                  delay: index * 0.1
                }}
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.95 }}
              >
                {action.icon}
              </motion.button>
            ))}
          </motion.div>
        )}
      </AnimatePresence>

      {/* Main FAB */}
      <FloatingActionButton
        onClick={toggleMenu}
        icon={
          <motion.div
            animate={{ rotate: isOpen ? 45 : 0 }}
            transition={{ duration: 0.2 }}
          >
            {mainIcon || (isOpen ? <X className="w-5 h-5" /> : <Plus className="w-5 h-5" />)}
          </motion.div>
        }
        position={position}
        size={size}
        variant={variant}
        disabled={disabled}
        tooltip={tooltip}
        animate={animate}
      />
    </>
  );
};

// Scroll to top FAB
interface ScrollFabProps extends Omit<FloatingActionButtonProps, 'onClick' | 'icon'> {
  threshold?: number;
  smooth?: boolean;
}

export const ScrollToTopFab: React.FC<ScrollFabProps> = ({
  threshold = 200,
  smooth = true,
  ...props
}) => {
  const [isVisible, setIsVisible] = React.useState(false);

  React.useEffect(() => {
    const handleScroll = () => {
      setIsVisible(window.scrollY > threshold);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, [threshold]);

  const scrollToTop = () => {
    if (smooth) {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    } else {
      window.scrollTo(0, 0);
    }
  };

  if (!isVisible) return null;

  return (
    <FloatingActionButton
      onClick={scrollToTop}
      icon={<ChevronUp className="w-5 h-5" />}
      tooltip="  "
      {...props}
    />
  );
};

// Pulse FAB for notifications
export const PulseFab: React.FC<FloatingActionButtonProps> = ({
  children,
  ...props
}) => {
  return (
    <motion.div
      animate={{
        boxShadow: [
          '0 0 0 0 rgba(59, 130, 246, 0.7)',
          '0 0 0 10px rgba(59, 130, 246, 0)',
          '0 0 0 0 rgba(59, 130, 246, 0)'
        ]
      }}
      transition={{
        duration: 2,
        repeat: Infinity,
        ease: "easeInOut"
      }}
    >
      <FloatingActionButton {...props} />
    </motion.div>
  );
};

export default FloatingActionButton;


==================================================
FILE: .\src\components\Header.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { Sun, Moon, LogOut } from 'lucide-react';
import { motion } from 'framer-motion';
import type { User, UserId, Role } from '../types/index';

interface HeaderProps {
  toggleTheme: () => void;
  isDark: boolean;
  currentRole: Role;
  currentAccountId: UserId | null;
  setCurrentAccountId: React.Dispatch<React.SetStateAction<UserId | null>>;
  setActiveUserId: React.Dispatch<React.SetStateAction<UserId | null>>;
  users: User[];
  activeUser: User | null;
  onLogout: () => void;
}

const Header: React.FC<HeaderProps> = ({
  toggleTheme,
  isDark,
  currentRole,
  currentAccountId,
  setCurrentAccountId,
  setActiveUserId,
  users,
  activeUser,
  onLogout
}) => {
  const [currentDate] = useState(() => new Date().toLocaleDateString('fa-IR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }));

  //        
  useEffect(() => {
    if (currentRole === 'coach') {
      setCurrentAccountId(null);
      setActiveUserId(null);
      return;
    }
    if (currentRole === 'client') {
      const fallbackId = users[0]?.id ?? null;
      const nextId = currentAccountId ?? fallbackId;
      if (nextId != null) {
        setCurrentAccountId(nextId);
        setActiveUserId(nextId);
      }
    }
  }, [currentRole, currentAccountId, setCurrentAccountId, setActiveUserId, users]);

  //  /   setCurrentRole / setCurrentAccountId    Props    .

  return (
    <motion.header 
      className="h-20 glass-panel border-b border-white/10 flex items-center justify-between px-6 md:px-10 z-40 shrink-0 !bg-opacity-80 !rounded-none !border-x-0 !border-t-0"
      initial={{ opacity: 0, y: -12 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.6, ease: [0.25, 0.46, 0.45, 0.94] }}
    >
      <div className="flex items-center gap-4">
        <div className="relative group cursor-pointer">
          <div className="absolute inset-0 bg-[var(--accent-color)] rounded-full blur opacity-40 group-hover:opacity-70 transition-opacity duration-500 ease-out"></div>
          <img 
            src="https://placehold.co/100x100/38bdf8/white?text=VO2" 
            alt="Logo" 
            className="h-11 w-11 rounded-full object-cover relative z-10 border-2 border-white/20" 
          />
        </div>
        <div className="flex flex-col">
          <h1 className="text-2xl md:text-3xl font-black tracking-tight drop-shadow-sm">
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-sky-400 via-blue-300 to-purple-400">VO</span>
            <span className="text-emerald-400"></span>
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-sky-400 via-blue-300 to-purple-400">MAX</span>
          </h1>
          <div className="flex items-center gap-2 text-[10px] uppercase tracking-[0.35em] text-[var(--text-secondary)]">
            <span>V12 ULTRA</span>
            <span className="w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_12px_rgba(52,211,153,0.8)]"></span>
          </div>
        </div>
      </div>

      <div className="flex items-center gap-5">
        <div className="hidden md:flex items-center gap-2 text-xs font-bold text-[var(--text-primary)] bg-[var(--glass-bg)]/80 px-3 py-2 rounded-2xl border border-[var(--glass-border)] shadow-inner shadow-white/10">
          <span className="w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_10px_rgba(74,222,128,0.8)]"></span>
          <span>: {currentRole === 'coach' ? '' : ''}</span>
          <button
            onClick={onLogout}
            className="ml-2 flex items-center gap-1 text-[var(--text-secondary)] hover:text-red-400 transition"
            aria-label="  "
          >
            <LogOut size={14} />
            <span></span>
          </button>
        </div>
        <span className="hidden lg:flex items-center gap-2 text-xs font-bold text-[var(--text-secondary)] bg-[var(--glass-bg)]/80 px-4 py-2 rounded-2xl border border-[var(--glass-border)] shadow-inner shadow-white/10">
          <span className="w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_10px_rgba(74,222,128,0.8)]"></span>
          {currentDate}
        </span>
        
        <button onClick={toggleTheme} className="btn-glass bg-[var(--glass-bg)]/80 hover:bg-white/10 text-[var(--text-primary)] !p-2 rounded-full border border-[var(--glass-border)]">
            {isDark ? <Sun size={20} className="text-yellow-400"/> : <Moon size={20} className="text-slate-600"/>}
        </button>

        {/*         */}

        {activeUser && (
          <motion.div 
            className="flex items-center gap-3 bg-gradient-to-r from-[var(--accent-color)] via-[var(--accent-secondary)] to-indigo-600 text-white px-5 py-2 rounded-2xl shadow-lg shadow-[var(--accent-color)]/30 border border-white/10 animate-fade-in"
            whileHover={{ 
              y: -4,
              scale: 1.02,
              boxShadow: "0 20px 50px rgba(14, 165, 233, 0.4)"
            }}
            transition={{ 
              type: 'spring', 
              stiffness: 300, 
              damping: 20,
              duration: 0.5
            }}
          >
            <div className="flex flex-col items-end leading-none">
              <span className="text-[9px] opacity-80 font-bold uppercase tracking-wider mb-0.5"> </span>
              <span className="font-bold text-sm">{activeUser.name}</span>
            </div>
          </motion.div>
        )}
      </div>
    </motion.header>
  );
};

export default Header;

==================================================
FILE: .\src\components\index.ts
==================================================
// React Bits inspired components for enhanced UI/UX

// Animated Counter
export { default as AnimatedCounter, StatCounter, FloatingCounter, ProgressCounter } from './AnimatedCounter';

// Enhanced Card Effects
export {
  default as EnhancedCard,
  HoverCard,
  MagneticCard,
  RevealCard,
  RippleCard,
  MorphingCard,
  FloatingCard
} from './EnhancedCard';

// Floating Action Button
export {
  default as FloatingActionButton,
  ExpandableFab,
  ScrollToTopFab,
  PulseFab
} from './FloatingActionButton';

// Advanced Skeletons
export {
  default as AdvancedSkeleton,
  TextSkeleton,
  CardSkeleton,
  ListSkeleton,
  TableSkeleton,
  DashboardSkeleton,
  ProfileSkeleton,
  ShimmerOverlay
} from './AdvancedSkeleton';

// Text Animations
export {
  default as TextAnimation,
  Typewriter,
  FadeInText,
  LetterAnimation,
  WaveText,
  GlitchText,
  RainbowText,
  GradientText,
  ScrambleText,
  MorphingText
} from './TextAnimation';

// Existing components
export { default as LoadingSpinner } from './LoadingSpinner';
export { default as SkeletonLoader } from './SkeletonLoader';
export { default as Modal } from './Modal';
export { default as Notification } from './Notification';
export { default as Progress } from './Progress';
export { default as Badge } from './Badge';
export { default as Tooltip } from './Tooltip';

// Layout components
export { default as EmptyState } from './EmptyState';

// UI Components
export { default as SpotlightCard, SpotlightCard as SpotlightCardComponent } from './ui/SpotlightCard';


==================================================
FILE: .\src\components\LoadingSpinner.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'md', className = '' }) => {
  const sizeClasses = {
    sm: 'w-4 h-4 border-2',
    md: 'w-8 h-8 border-4',
    lg: 'w-12 h-12 border-4'
  };

  return (
    <div className={`relative ${className}`} role="status" aria-label="  ...">
      <motion.div
        className={`${sizeClasses[size]} border-[var(--accent-color)] border-t-transparent rounded-full`}
        animate={{ 
          rotate: 360,
          scale: [1, 1.05, 1]
        }}
        transition={{ 
          rotate: { duration: 1.2, repeat: Infinity, ease: "linear" },
          scale: { duration: 2, repeat: Infinity, ease: [0.4, 0, 0.6, 1] }
        }}
        style={{
          boxShadow: `0 0 25px rgba(14, 165, 233, 0.4), 0 0 50px rgba(14, 165, 233, 0.2)`
        }}
      />
      <motion.div
        className={`${sizeClasses[size]} border-[var(--accent-secondary)] border-t-transparent rounded-full absolute inset-0`}
        animate={{ 
          rotate: -360,
          scale: [1, 0.95, 1]
        }}
        transition={{ 
          rotate: { duration: 1.8, repeat: Infinity, ease: "linear" },
          scale: { duration: 2.5, repeat: Infinity, ease: [0.4, 0, 0.6, 1] }
        }}
        style={{
          opacity: 0.6,
          boxShadow: `0 0 20px rgba(139, 92, 246, 0.4), 0 0 40px rgba(139, 92, 246, 0.2)`
        }}
      />
      <span className="sr-only">  ...</span>
    </div>
  );
};

export default LoadingSpinner;




==================================================
FILE: .\src\components\Modal.tsx
==================================================
import React, { useEffect, useRef } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { X } from 'lucide-react';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
  closeOnBackdropClick?: boolean;
  closeOnEscape?: boolean;
  showCloseButton?: boolean;
  className?: string;
}

const Modal: React.FC<ModalProps> = ({
  isOpen,
  onClose,
  title,
  children,
  size = 'md',
  closeOnBackdropClick = true,
  closeOnEscape = true,
  showCloseButton = true,
  className = ''
}) => {
  const modalRef = useRef<HTMLDivElement>(null);
  const previousFocusRef = useRef<HTMLElement | null>(null);

  const sizeClasses = {
    sm: 'max-w-md',
    md: 'max-w-lg',
    lg: 'max-w-2xl',
    xl: 'max-w-4xl',
    full: 'max-w-7xl'
  };

  // Handle escape key
  useEffect(() => {
    const handleEscape = (event: KeyboardEvent) => {
      if (closeOnEscape && event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      return () => document.removeEventListener('keydown', handleEscape);
    }
  }, [isOpen, onClose, closeOnEscape]);

  // Focus management
  useEffect(() => {
    if (isOpen) {
      previousFocusRef.current = document.activeElement as HTMLElement;
      modalRef.current?.focus();

      // Prevent body scroll
      document.body.style.overflow = 'hidden';
    } else {
      if (previousFocusRef.current) {
        previousFocusRef.current.focus();
      }
      document.body.style.overflow = 'unset';
    }

    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);

  // Handle backdrop click
  const handleBackdropClick = (event: React.MouseEvent) => {
    if (closeOnBackdropClick && event.target === event.currentTarget) {
      onClose();
    }
  };

  const modalVariants = {
    hidden: {
      opacity: 0,
      scale: 0.95,
      y: 20
    },
    visible: {
      opacity: 1,
      scale: 1,
      y: 0,
      transition: {
        type: "spring",
        stiffness: 300,
        damping: 30,
        duration: 0.3
      }
    },
    exit: {
      opacity: 0,
      scale: 0.95,
      y: 10,
      transition: {
        duration: 0.2
      }
    }
  };

  const backdropVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: { duration: 0.2 }
    },
    exit: {
      opacity: 0,
      transition: { duration: 0.2 }
    }
  };

  return (
    <AnimatePresence mode="wait">
      {isOpen && (
        <>
          {/* Backdrop */}
          <motion.div
            className="fixed inset-0 z-40 bg-black/50 backdrop-blur-sm"
            variants={backdropVariants}
            initial="hidden"
            animate="visible"
            exit="exit"
            onClick={handleBackdropClick}
            aria-hidden="true"
          />

          {/* Modal */}
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <motion.div
              ref={modalRef}
              className={`
                w-full ${sizeClasses[size]} max-h-[90vh] overflow-hidden
                glass-panel shadow-2xl animate-fade-in-scale
                ${className}
              `}
              variants={modalVariants}
              initial="hidden"
              animate="visible"
              exit="exit"
              role="dialog"
              aria-modal="true"
              aria-labelledby={title ? "modal-title" : undefined}
              tabIndex={-1}
            >
              {/* Header */}
              {(title || showCloseButton) && (
                <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
                  {title && (
                    <h2
                      id="modal-title"
                      className="text-xl font-semibold text-gray-900 dark:text-gray-100"
                    >
                      {title}
                    </h2>
                  )}

                  {showCloseButton && (
                    <button
                      onClick={onClose}
                      className="p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors focus-ring"
                      aria-label=" "
                    >
                      <X className="w-5 h-5" />
                    </button>
                  )}
                </div>
              )}

              {/* Content */}
              <div className="flex-1 overflow-y-auto custom-scrollbar p-6">
                {children}
              </div>
            </motion.div>
          </div>
        </>
      )}
    </AnimatePresence>
  );
};

// Confirmation Modal
interface ConfirmModalProps extends Omit<ModalProps, 'children'> {
  message: string;
  confirmText?: string;
  cancelText?: string;
  onConfirm: () => void;
  confirmButtonVariant?: 'primary' | 'danger' | 'success';
}

export const ConfirmModal: React.FC<ConfirmModalProps> = ({
  message,
  confirmText = '',
  cancelText = '',
  onConfirm,
  confirmButtonVariant = 'primary',
  ...modalProps
}) => {
  const getConfirmButtonClasses = () => {
    const baseClasses = 'px-4 py-2 rounded-lg font-medium transition-all duration-200 focus-ring';

    switch (confirmButtonVariant) {
      case 'danger':
        return `${baseClasses} bg-red-600 hover:bg-red-700 text-white`;
      case 'success':
        return `${baseClasses} bg-green-600 hover:bg-green-700 text-white`;
      default:
        return `${baseClasses} bg-blue-600 hover:bg-blue-700 text-white`;
    }
  };

  return (
    <Modal {...modalProps} size="sm">
      <div className="text-center">
        <div className="mb-6">
          <p className="text-gray-700 dark:text-gray-300">{message}</p>
        </div>

        <div className="flex gap-3 justify-center">
          <button
            onClick={modalProps.onClose}
            className="px-4 py-2 rounded-lg font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors focus-ring"
          >
            {cancelText}
          </button>

          <button
            onClick={() => {
              onConfirm();
              modalProps.onClose();
            }}
            className={getConfirmButtonClasses()}
          >
            {confirmText}
          </button>
        </div>
      </div>
    </Modal>
  );
};

export default Modal;



==================================================
FILE: .\src\components\Notification.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { CheckCircle, XCircle, AlertCircle, Info, X } from 'lucide-react';

export type NotificationType = 'success' | 'error' | 'warning' | 'info';

interface NotificationProps {
  id: string;
  type: NotificationType;
  title: string;
  message?: string;
  duration?: number;
  onClose: (id: string) => void;
  action?: {
    label: string;
    onClick: () => void;
  };
}

const Notification: React.FC<NotificationProps> = ({
  id,
  type,
  title,
  message,
  duration = 5000,
  onClose,
  action
}) => {
  const [isVisible, setIsVisible] = useState(true);
  const [progress, setProgress] = useState(100);

  useEffect(() => {
    if (duration > 0) {
      const interval = setInterval(() => {
        setProgress(prev => {
          if (prev <= 0) {
            setIsVisible(false);
            setTimeout(() => onClose(id), 300);
            return 0;
          }
          return prev - (100 / (duration / 100));
        });
      }, 100);

      return () => clearInterval(interval);
    }
  }, [duration, id, onClose]);

  const getTypeStyles = () => {
    switch (type) {
      case 'success':
        return {
          bg: 'bg-green-50 dark:bg-green-900/20',
          border: 'border-green-200 dark:border-green-800',
          icon: <CheckCircle className="w-6 h-6 text-green-600 dark:text-green-400" />,
          progress: 'bg-green-500'
        };
      case 'error':
        return {
          bg: 'bg-red-50 dark:bg-red-900/20',
          border: 'border-red-200 dark:border-red-800',
          icon: <XCircle className="w-6 h-6 text-red-600 dark:text-red-400" />,
          progress: 'bg-red-500'
        };
      case 'warning':
        return {
          bg: 'bg-yellow-50 dark:bg-yellow-900/20',
          border: 'border-yellow-200 dark:border-yellow-800',
          icon: <AlertCircle className="w-6 h-6 text-yellow-600 dark:text-yellow-400" />,
          progress: 'bg-yellow-500'
        };
      case 'info':
      default:
        return {
          bg: 'bg-blue-50 dark:bg-blue-900/20',
          border: 'border-blue-200 dark:border-blue-800',
          icon: <Info className="w-6 h-6 text-blue-600 dark:text-blue-400" />,
          progress: 'bg-blue-500'
        };
    }
  };

  const styles = getTypeStyles();

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.div
          initial={{ opacity: 0, y: -50, scale: 0.95 }}
          animate={{ opacity: 1, y: 0, scale: 1 }}
          exit={{ opacity: 0, y: -20, scale: 0.95 }}
          transition={{
            type: "spring",
            stiffness: 300,
            damping: 30
          }}
          className={`
            relative max-w-md w-full ${styles.bg} border ${styles.border}
            rounded-2xl shadow-lg backdrop-blur-xl overflow-hidden
            animate-fade-in-scale
          `}
          role="alert"
          aria-live="assertive"
        >
          {/* Progress bar */}
          {duration > 0 && (
            <motion.div
              className={`absolute top-0 left-0 h-1 ${styles.progress}`}
              initial={{ width: '100%' }}
              animate={{ width: `${progress}%` }}
              transition={{ duration: 0.1 }}
            />
          )}

          <div className="p-4">
            <div className="flex items-start gap-3">
              <div className="flex-shrink-0 mt-0.5">
                {styles.icon}
              </div>

              <div className="flex-1 min-w-0">
                <h4 className="text-sm font-semibold text-gray-900 dark:text-gray-100">
                  {title}
                </h4>

                {message && (
                  <p className="mt-1 text-sm text-gray-600 dark:text-gray-300">
                    {message}
                  </p>
                )}

                {action && (
                  <button
                    onClick={action.onClick}
                    className="mt-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"
                  >
                    {action.label}
                  </button>
                )}
              </div>

              <button
                onClick={() => {
                  setIsVisible(false);
                  setTimeout(() => onClose(id), 300);
                }}
                className="flex-shrink-0 w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors rounded-full hover:bg-gray-100 dark:hover:bg-gray-800"
                aria-label=" "
              >
                <X className="w-4 h-4" />
              </button>
            </div>
          </div>
        </motion.div>
      )}
    </AnimatePresence>
  );
};

// Notification Manager Hook
export const useNotifications = () => {
  const [notifications, setNotifications] = useState<NotificationProps[]>([]);

  const addNotification = (
    type: NotificationType,
    title: string,
    message?: string,
    duration?: number,
    action?: { label: string; onClick: () => void }
  ) => {
    const id = Date.now().toString();
    const notification: NotificationProps = {
      id,
      type,
      title,
      message,
      duration,
      onClose: (notificationId) => {
        setNotifications(prev => prev.filter(n => n.id !== notificationId));
      },
      action
    };

    setNotifications(prev => [...prev, notification]);

    // Auto remove after duration
    if (duration !== 0) {
      setTimeout(() => {
        setNotifications(prev => prev.filter(n => n.id !== id));
      }, duration || 5000);
    }

    return id;
  };

  const removeNotification = (id: string) => {
    setNotifications(prev => prev.filter(n => n.id !== id));
  };

  const clearAll = () => {
    setNotifications([]);
  };

  return {
    notifications,
    addNotification,
    removeNotification,
    clearAll,
    success: (title: string, message?: string, duration?: number, action?: { label: string; onClick: () => void }) =>
      addNotification('success', title, message, duration, action),
    error: (title: string, message?: string, duration?: number, action?: { label: string; onClick: () => void }) =>
      addNotification('error', title, message, duration, action),
    warning: (title: string, message?: string, duration?: number, action?: { label: string; onClick: () => void }) =>
      addNotification('warning', title, message, duration, action),
    info: (title: string, message?: string, duration?: number, action?: { label: string; onClick: () => void }) =>
      addNotification('info', title, message, duration, action)
  };
};

// Notification Container Component
export const NotificationContainer: React.FC<{ notifications: NotificationProps[] }> = ({ notifications }) => {
  return (
    <div className="fixed top-4 right-4 z-[100] space-y-3 max-w-sm w-full pointer-events-none">
      <AnimatePresence mode="popLayout">
        {notifications.map((notification) => (
          <div key={notification.id} className="pointer-events-auto">
            <Notification {...notification} />
          </div>
        ))}
      </AnimatePresence>
    </div>
  );
};

export default Notification;



==================================================
FILE: .\src\components\PrintModal.tsx
==================================================
import React, { useEffect, useRef } from 'react';
import DOMPurify from 'dompurify';
import type { PrintData } from '../types';

//  escape    XSS
const escapeHtml = (text: unknown): string => {
  if (text == null || text === undefined) return '';
  const str = String(text);
  const map: Record<string, string> = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;',
    '/': '&#x2F;',
    '`': '&#x60;',
    '=': '&#x3D;'
  };
  return str.replace(/[&<>"'`=/]/g, (m) => map[m]);
};

const allowedTags = new Set([
  'div', 'p', 'span', 'strong', 'em', 'b', 'i', 'u', 'ul', 'ol', 'li',
  'table', 'thead', 'tbody', 'tr', 'th', 'td', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
  'br', 'hr', 'section', 'article', 'header', 'footer', 'main', 'nav'
]);

const allowedAttrs = new Set([
  'class', 'id', 'title', 'dir', 'lang', 'aria-label', 'role', 'colspan', 'rowspan', 'data-label', 'style'
]);

const unsafeProtocols = ['javascript:', 'data:', 'vbscript:'];

const sanitizeHTML = (html: string): string => {
  if (!html || typeof html !== 'string') return '';

  // Use DOMPurify for comprehensive sanitization
  return DOMPurify.sanitize(html, {
    ALLOWED_TAGS: ['div', 'p', 'span', 'strong', 'em', 'b', 'i', 'u', 'ul', 'ol', 'li',
                   'table', 'thead', 'tbody', 'tr', 'th', 'td', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
                   'br', 'hr', 'section', 'article', 'header', 'footer', 'main', 'nav'],
    ALLOWED_ATTR: ['class', 'id', 'title', 'dir', 'lang', 'aria-label', 'role', 'colspan', 'rowspan', 'data-label', 'style'],
    ALLOW_DATA_ATTR: false,
    FORBID_TAGS: ['script', 'style', 'iframe', 'object', 'embed', 'form', 'input', 'button'],
    FORBID_ATTR: ['onclick', 'onload', 'onerror', 'onmouseover', 'onmouseout', 'onkeydown', 'onkeyup']
  });
};

// Legacy sanitization function (kept for compatibility but not used)
const legacySanitizeHTML = (html: string): string => {
  if (!html || typeof html !== 'string') return '';
  const doc = new DOMParser().parseFromString(html, 'text/html');
  const stack: Element[] = Array.from(doc.body.children);

  while (stack.length) {
    const el = stack.pop() as Element;
    const tag = el.tagName.toLowerCase();

    if (!allowedTags.has(tag)) {
      while (el.firstChild) {
        el.parentNode?.insertBefore(el.firstChild, el);
      }
      el.remove();
      continue;
    }

    Array.from(el.attributes).forEach((attr) => {
      const name = attr.name.toLowerCase();
      const value = attr.value || '';

      if (!allowedAttrs.has(name)) {
        el.removeAttribute(attr.name);
        return;
      }

      if (name === 'style' && /expression|url\s*\(/i.test(value)) {
        el.removeAttribute(attr.name);
        return;
      }

      if ((name === 'href' || name === 'src') && unsafeProtocols.some((p) => value.trim().toLowerCase().startsWith(p))) {
        el.removeAttribute(attr.name);
      }
    });

    stack.push(...Array.from(el.children));
  }

  return doc.body.innerHTML;
};

interface PrintModalProps {
  data: PrintData | null;
  onClose: () => void;
  onDownload: () => void;
  onPrint?: () => void;
}

const PrintModal: React.FC<PrintModalProps> = ({ data, onClose, onDownload, onPrint }) => {
  const contentRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    //       
    if (contentRef.current) {
      contentRef.current.scrollTop = 0;
    }
  }, [data]);

  if (!data) return null;

  const handleBrowserPrint = () => {
    const printContent = document.getElementById('print-content-area');
    if (!printContent) return;
    
    // Sanitize content   
    const sanitizedContent = sanitizeHTML(printContent.innerHTML);
    
    const printWindow = window.open('', '_blank');
    if (!printWindow) return;
    
    //   textContent   
    const title = escapeHtml(`FlexPro - ${data.title || ''}`);
    printWindow.document.write(`
      <!DOCTYPE html>
      <html dir="rtl" lang="fa">
      <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'none';">
        <title>${title}</title>
        <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700;900&display=swap" rel="stylesheet">
        <style>
          * { box-sizing: border-box; margin: 0; padding: 0; }
          body { font-family: 'Vazirmatn', sans-serif; direction: rtl; }
          @media print {
            body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            table { page-break-inside: auto; }
            tr { page-break-inside: avoid; page-break-after: auto; }
            thead { display: table-header-group; }
            .page-break { page-break-before: always; }
          }
        </style>
      </head>
      <body>
        ${sanitizedContent}
      </body>
      </html>
    `);
    printWindow.document.close();
    printWindow.focus();
    setTimeout(() => {
      printWindow.print();
      printWindow.close();
    }, 500);
  };

  return (
    <div className="fixed inset-0 z-[100] bg-[var(--bg-primary)]/95 backdrop-blur-md flex flex-col animate-fade-in">
      {/*  */}
      <div className="h-16 glass-panel border-b border-[var(--glass-border)] flex justify-between items-center px-6 shrink-0 rounded-none">
        <h3 className="text-[var(--text-primary)] font-bold flex items-center gap-2 text-lg">
          <span></span> : {data.title}
        </h3>
        <div className="flex gap-3">
          <button 
            onClick={onDownload} 
            className="btn-glass bg-[var(--accent-tertiary)] hover:bg-[var(--accent-tertiary)]/90 text-white text-sm border border-[var(--accent-tertiary)]/30 shadow-lg"
            aria-label=" PDF"
            type="button"
          >
              PDF
          </button>
          <button 
            onClick={onPrint || handleBrowserPrint}
            className="btn-glass bg-[var(--accent-color)] hover:bg-[var(--accent-color)]/90 text-white text-sm border border-[var(--accent-color)]/30 shadow-lg"
            aria-label=" "
            type="button"
          >
              
          </button>
          <button 
            onClick={onClose} 
            className="btn-glass bg-[var(--text-primary)]/10 hover:bg-[var(--text-primary)]/20 text-[var(--text-primary)] text-sm"
            aria-label=""
            type="button"
          >
             
          </button>
        </div>
      </div>

      {/*   */}
      <div 
        ref={contentRef}
        className="flex-1 overflow-y-auto p-8 flex justify-center bg-[var(--bg-secondary)]/50"
      >
        <div 
          id="print-content-area"
          className="bg-white text-black shadow-2xl mx-auto print-content"
          style={{ 
            width: '210mm', 
            minHeight: '297mm',
            padding: '0',
            boxSizing: 'border-box',
          }}
          dangerouslySetInnerHTML={{ __html: sanitizeHTML(data.html) }}
        />
      </div>

      {/*    */}
      <div className="h-12 glass-panel border-t border-[var(--glass-border)] flex items-center justify-center px-6 text-xs text-[var(--text-secondary)] rounded-none">
        <span>       PDF  </span>
      </div>
    </div>
  );
};

export default PrintModal;


==================================================
FILE: .\src\components\PrivateRoute.tsx
==================================================
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';

interface PrivateRouteProps {
  signedIn: boolean;
  fallback: string;
  children?: React.ReactNode;
}

const PrivateRoute: React.FC<PrivateRouteProps> = ({ signedIn, fallback, children }) => {
  if (!signedIn) return <Navigate to={fallback} replace />;
  return children ? <>{children}</> : <Outlet />;
};

export default PrivateRoute;



==================================================
FILE: .\src\components\ProfilePanel.tsx
==================================================
import React, { useState, useMemo } from 'react';
import { Line } from 'react-chartjs-2';
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  Tooltip,
  Legend,
} from 'chart.js';
import { Plus } from 'lucide-react';
import { toast } from 'react-hot-toast';
import type { User } from '../types/index';
import { useApp } from '../context/AppContext';

ChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Tooltip, Legend);

interface ProfilePanelProps {
  activeUser: User;
  onUpdateUser: (user: User) => void;
}

const ProfilePanel: React.FC<ProfilePanelProps> = ({ activeUser, onUpdateUser }) => {
  const { hasPermission } = useApp();
  const canLog = hasPermission('logProgress', activeUser.id);
  const [progressForm, setProgressForm] = useState({
    date: new Date().toISOString().slice(0, 10),
    weight: '',
    bf: '',
    note: '',
  });

  const handleAddProgress = () => {
    if (!canLog) {
      toast.error('  ');
      return;
    }
    if (!progressForm.date || !progressForm.weight) {
      toast.error('    ');
      return;
    }
    const u = { ...activeUser };
    if (!u.plans.prog) u.plans.prog = [];
    u.plans.prog.push({ ...progressForm });
    onUpdateUser(u);
    setProgressForm(prev => ({ ...prev, weight: '', bf: '', note: '' }));
    toast.success('   ');
  };

  //   useMemo   performance
  const sortedProg = useMemo(() => {
    const progList = activeUser.plans.prog || [];
    return [...progList].sort((a, b) => (a.date || '').localeCompare(b.date || ''));
  }, [activeUser.plans.prog]);
  
  const chartData = useMemo(() => ({
    labels: sortedProg.map(p => p.date),
    datasets: [
      {
        label: ' (kg)',
        data: sortedProg.map(p => Number(p.weight) || null),
        borderColor: '#38bdf8',
        backgroundColor: 'rgba(56,189,248,0.25)',
        tension: 0.3,
      },
    ],
  }), [sortedProg]);

  const chartOptions = useMemo(() => ({
    plugins: {
      legend: { display: false },
    },
    scales: {
      x: { grid: { display: false } },
      y: { grid: { color: 'rgba(148,163,184,0.2)' } },
    },
  }), []);

  return (
    <div className="space-y-6 animate-fade-in">
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="glass-panel p-6 rounded-3xl">
          <h3 className="font-bold text-lg text-[var(--text-primary)] mb-4"> </h3>
          <div className="space-y-2 text-sm text-[var(--text-secondary)]">
            <div><span className="font-bold text-[var(--text-primary)]">:</span> {activeUser.name}</div>
            <div><span className="font-bold text-[var(--text-primary)]">:</span> {activeUser.age || '-'}</div>
            <div><span className="font-bold text-[var(--text-primary)]">:</span> {activeUser.height || '-'} cm</div>
            <div><span className="font-bold text-[var(--text-primary)]"> :</span> {activeUser.weight || '-'} kg</div>
            <div><span className="font-bold text-[var(--text-primary)]">:</span> {activeUser.job || '-'}</div>
          </div>
        </div>

        <div className="lg:col-span-2 glass-panel p-6 rounded-3xl">
          <h3 className="font-bold text-lg text-[var(--text-primary)] mb-4">  </h3>
          {sortedProg.length === 0 ? (
            <div className="text-sm text-[var(--text-secondary)] opacity-60">
                  .
            </div>
          ) : (
            <div className="h-64">
              <Line data={chartData} options={chartOptions} />
            </div>
          )}
        </div>
      </div>

      <div className="glass-panel p-6 rounded-3xl">
        <div className="flex flex-col md:flex-row gap-4 md:items-end">
          <div className="space-y-1">
            <label htmlFor="progress-date" className="text-xs text-slate-500 block font-semibold"> *</label>
            <input
              id="progress-date"
              type="date"
              className="input-glass"
              value={progressForm.date}
              onChange={e => setProgressForm({ ...progressForm, date: e.target.value })}
              aria-required="true"
              aria-label="  "
            />
          </div>
          <div className="space-y-1">
            <label htmlFor="progress-weight" className="text-xs text-slate-500 block font-semibold"> (kg) *</label>
            <input
              id="progress-weight"
              type="number"
              className="input-glass"
              value={progressForm.weight}
              onChange={e => setProgressForm({ ...progressForm, weight: e.target.value })}
              aria-required="true"
              aria-label="  "
              min="0"
              step="0.1"
            />
          </div>
          <div className="space-y-1">
            <label htmlFor="progress-bf" className="text-xs text-slate-500 block font-semibold">   ()</label>
            <input
              id="progress-bf"
              type="number"
              className="input-glass"
              value={progressForm.bf}
              onChange={e => setProgressForm({ ...progressForm, bf: e.target.value })}
              aria-label="  "
              min="0"
              max="100"
              step="0.1"
            />
          </div>
          <div className="flex-1 space-y-1">
            <label htmlFor="progress-note" className="text-xs text-slate-500 block font-semibold"> </label>
            <input
              id="progress-note"
              type="text"
              className="input-glass"
              value={progressForm.note}
              onChange={e => setProgressForm({ ...progressForm, note: e.target.value })}
              placeholder=":     ..."
              aria-label=" "
              autoComplete="off"
            />
          </div>
          <button
            onClick={handleAddProgress}
            disabled={!canLog}
            className={`btn-glass bg-[var(--accent-color)] hover:bg-[var(--accent-color)]/90 text-white px-6 py-3 font-bold flex items-center gap-2 ${!canLog ? 'opacity-50 cursor-not-allowed' : ''}`}
          >
            <Plus size={18} />  
          </button>
        </div>
      </div>

      <div className="glass-panel rounded-3xl overflow-hidden">
        <table className="w-full text-right text-sm">
          <thead className="bg-[var(--text-primary)]/5 text-[var(--text-secondary)] text-xs border-b border-[var(--glass-border)]">
            <tr>
              <th className="p-3"></th>
              <th className="p-3 text-center"></th>
              <th className="p-3 text-center">% </th>
              <th className="p-3"></th>
            </tr>
          </thead>
          <tbody className="divide-y divide-[var(--glass-border)]">
            {sortedProg.map((p, idx) => (
              <tr key={idx} className="hover:bg-[var(--text-primary)]/5">
                <td className="p-3">{p.date}</td>
                <td className="p-3 text-center">{p.weight}</td>
                <td className="p-3 text-center">{p.bf || '-'}</td>
                <td className="p-3 text-[var(--text-secondary)] text-xs">{p.note || '-'}</td>
              </tr>
            ))}
            {sortedProg.length === 0 && (
              <tr>
                <td colSpan={4} className="p-6 text-center text-[var(--text-secondary)] opacity-60">
                           .
                </td>
              </tr>
            )}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default ProfilePanel;




==================================================
FILE: .\src\components\Progress.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

interface ProgressProps {
  value: number; // 0-100
  max?: number;
  size?: 'sm' | 'md' | 'lg';
  variant?: 'default' | 'success' | 'warning' | 'error' | 'gradient';
  showValue?: boolean;
  animated?: boolean;
  className?: string;
  label?: string;
}

const Progress: React.FC<ProgressProps> = ({
  value,
  max = 100,
  size = 'md',
  variant = 'default',
  showValue = false,
  animated = true,
  className = '',
  label
}) => {
  const percentage = Math.min(Math.max((value / max) * 100, 0), 100);

  const sizeClasses = {
    sm: 'h-2',
    md: 'h-3',
    lg: 'h-4'
  };

  const getVariantClasses = () => {
    switch (variant) {
      case 'success':
        return 'bg-green-500';
      case 'warning':
        return 'bg-yellow-500';
      case 'error':
        return 'bg-red-500';
      case 'gradient':
        return 'bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500';
      default:
        return 'bg-blue-500';
    }
  };

  const getTrackClasses = () => {
    const baseClasses = `${sizeClasses[size]} rounded-full overflow-hidden`;
    const trackClasses = 'bg-gray-200 dark:bg-gray-700';

    return `${baseClasses} ${trackClasses}`;
  };

  return (
    <div className={`w-full ${className}`}>
      {(label || showValue) && (
        <div className="flex justify-between items-center mb-2">
          {label && (
            <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
              {label}
            </span>
          )}
          {showValue && (
            <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
              {Math.round(percentage)}%
            </span>
          )}
        </div>
      )}

      <div className={getTrackClasses()}>
        <motion.div
          className={`h-full ${getVariantClasses()} rounded-full transition-all duration-300 ease-out`}
          initial={{ width: 0 }}
          animate={{ width: `${percentage}%` }}
          transition={{
            duration: animated ? 0.8 : 0,
            ease: [0.4, 0, 0.2, 1]
          }}
          style={{
            boxShadow: variant === 'gradient'
              ? '0 0 10px rgba(139, 92, 246, 0.5), 0 0 20px rgba(139, 92, 246, 0.3)'
              : undefined
          }}
        />

        {/* Animated shimmer effect */}
        {animated && percentage > 0 && (
          <motion.div
            className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent"
            animate={{
              x: ['0%', '100%']
            }}
            transition={{
              duration: 1.5,
              repeat: Infinity,
              repeatDelay: 2,
              ease: "easeInOut"
            }}
            style={{
              width: `${percentage}%`,
              height: '100%'
            }}
          />
        )}
      </div>
    </div>
  );
};

// Circular Progress Component
interface CircularProgressProps {
  value: number;
  max?: number;
  size?: number;
  strokeWidth?: number;
  variant?: 'default' | 'success' | 'warning' | 'error';
  showValue?: boolean;
  animated?: boolean;
  className?: string;
  children?: React.ReactNode;
}

export const CircularProgress: React.FC<CircularProgressProps> = ({
  value,
  max = 100,
  size = 80,
  strokeWidth = 8,
  variant = 'default',
  showValue = false,
  animated = true,
  className = '',
  children
}) => {
  const percentage = Math.min(Math.max((value / max) * 100, 0), 100);
  const radius = (size - strokeWidth) / 2;
  const circumference = radius * 2 * Math.PI;
  const strokeDasharray = circumference;
  const strokeDashoffset = circumference - (percentage / 100) * circumference;

  const getStrokeColor = () => {
    switch (variant) {
      case 'success':
        return '#10b981';
      case 'warning':
        return '#f59e0b';
      case 'error':
        return '#ef4444';
      default:
        return '#3b82f6';
    }
  };

  return (
    <div className={`relative inline-flex items-center justify-center ${className}`}>
      <svg
        width={size}
        height={size}
        className="transform -rotate-90"
      >
        {/* Background circle */}
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          stroke="currentColor"
          strokeWidth={strokeWidth}
          fill="transparent"
          className="text-gray-200 dark:text-gray-700"
        />

        {/* Progress circle */}
        <motion.circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          stroke={getStrokeColor()}
          strokeWidth={strokeWidth}
          fill="transparent"
          strokeLinecap="round"
          strokeDasharray={strokeDasharray}
          initial={{ strokeDashoffset: circumference }}
          animate={{ strokeDashoffset }}
          transition={{
            duration: animated ? 1.5 : 0,
            ease: [0.4, 0, 0.2, 1]
          }}
          style={{
            filter: `drop-shadow(0 0 6px ${getStrokeColor()}40)`
          }}
        />
      </svg>

      {/* Center content */}
      <div className="absolute inset-0 flex items-center justify-center">
        {children || (
          showValue && (
            <span className="text-sm font-semibold text-gray-900 dark:text-gray-100">
              {Math.round(percentage)}%
            </span>
          )
        )}
      </div>
    </div>
  );
};

export default Progress;



==================================================
FILE: .\src\components\ProtectedRoute.tsx
==================================================
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';

interface ProtectedRouteProps {
  signedIn: boolean;
  fallback: string;
  children?: React.ReactNode;
}

const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ signedIn, fallback, children }) => {
  if (!signedIn) return <Navigate to={fallback} replace />;
  return children ? <>{children}</> : <Outlet />;
};

export default ProtectedRoute;



==================================================
FILE: .\src\components\PublicRoute.tsx
==================================================
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';

interface PublicRouteProps {
  signedIn: boolean;
  redirectTo: string;
  children?: React.ReactNode;
}

const PublicRoute: React.FC<PublicRouteProps> = ({ signedIn, redirectTo, children }) => {
  if (signedIn) return <Navigate to={redirectTo} replace />;
  return children ? <>{children}</> : <Outlet />;
};

export default PublicRoute;



==================================================
FILE: .\src\components\SavePlanModal.tsx
==================================================
import React, { useState } from 'react';
import { useSaveTemplate } from '../hooks/useTemplates';
import { supabase } from '../lib/supabaseClient';
import SuccessMessage from './SuccessMessage';
import ErrorMessage from './ErrorMessage';

interface SavePlanModalProps {
  isOpen: boolean;
  onClose: () => void;
  fullWeekData: Record<string, any>;
}

/**
 * SavePlanModal Component
 * Modal for saving entire week's workout plan as a template
 */
const SavePlanModal: React.FC<SavePlanModalProps> = ({ isOpen, onClose, fullWeekData }) => {
  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [successMessage, setSuccessMessage] = useState('');
  const [errorMessage, setErrorMessage] = useState('');
  const saveTemplateMutation = useSaveTemplate();

  const handleSave = async () => {
    if (!name.trim()) {
      setErrorMessage('     ');
      return;
    }

    try {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) {
        setErrorMessage('  ');
        return;
      }

      await saveTemplateMutation.mutateAsync({
        name: name.trim(),
        description: description.trim(),
        full_week_data: fullWeekData,
        created_by: user.id,
      });

      setSuccessMessage('    ');
      setTimeout(() => {
        setName('');
        setDescription('');
        setSuccessMessage('');
        onClose();
      }, 2000);
    } catch (error) {
      setErrorMessage(error instanceof Error ? error.message : ' ');
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
        <h2 className="text-xl font-bold text-gray-900 mb-4">  </h2>

        {successMessage && <SuccessMessage message={successMessage} />}
        {errorMessage && <ErrorMessage message={errorMessage} />}

        <div className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1"> </label>
            <input
              type="text"
              value={name}
              onChange={(e) => setName(e.target.value)}
              placeholder=":     "
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1"></label>
            <textarea
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              placeholder="  ..."
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              rows={3}
            />
          </div>

          <div className="flex gap-3">
            <button
              onClick={handleSave}
              disabled={saveTemplateMutation.isPending}
              className="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 font-semibold"
            >
              {saveTemplateMutation.isPending ? ' ...' : ''}
            </button>
            <button
              onClick={onClose}
              className="flex-1 bg-gray-300 text-gray-900 py-2 rounded-lg hover:bg-gray-400 font-semibold"
            >
              
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default SavePlanModal;


==================================================
FILE: .\src\components\Sidebar.tsx
==================================================
import React from 'react';
import type { TabKey } from '../types/index';

interface SidebarProps {
  currentTab: TabKey;
  setTab: (tab: TabKey) => void;
  onBackup: () => void;
  onRestore: (event: React.ChangeEvent<HTMLInputElement>) => void;
  onReset: () => void;
  canAdminData: boolean;
}

const Sidebar: React.FC<SidebarProps> = ({ currentTab, setTab, onBackup, onRestore, onReset, canAdminData }) => {
  
  const renderButton = (id, label, icon) => (
    <button 
      onClick={() => setTab(id)} 
      className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden ${
        currentTab === id 
        ? 'text-white shadow-lg scale-[1.02]' 
        : 'text-[var(--text-secondary)] hover:bg-[var(--text-primary)]/8 hover:text-[var(--text-primary)] hover:scale-[1.01]'
      }`}
      style={currentTab === id ? { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))`, boxShadow: `0 10px 30px var(--accent-color)/40` } : {}}
    >
      <span className="text-xl relative z-10 transition-transform duration-200 group-hover:scale-110">{icon}</span>
      <span className="font-medium text-sm relative z-10">{label}</span>
      {currentTab === id && (
        <div className="absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white/40 rounded-l-full"></div>
      )}
    </button>
  );

  return (
    <aside className="w-72 glass-panel !rounded-none !border-y-0 !border-r-0 flex flex-col h-full z-30">
      <div className="p-5 space-y-6 overflow-y-auto flex-1 custom-scrollbar">
        <nav className="space-y-2">
          
          <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 mt-2 mb-2"></div>
          {renderButton('users', ' ', '')}

          <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 mt-6 mb-2"> </div>
          {renderButton('training', ' ', '')}
          {renderButton('nutrition', ' ', '')}
          {renderButton('supplements', '  ', '')}

          <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-4 mt-6 mb-2"></div>
          {renderButton('progress', '   ', '')}
        
        </nav>
      </div>

      <div className="p-5 border-t border-[var(--glass-border)] bg-[var(--glass-bg)]">
        <div className="grid grid-cols-2 gap-3 mb-4">
          <button
            onClick={onBackup}
            disabled={!canAdminData}
            className={`bg-[var(--accent-color)]/10 hover:bg-[var(--accent-color)]/20 text-[var(--accent-color)] border border-[var(--accent-color)]/20 py-2.5 rounded-xl text-xs transition flex justify-center items-center gap-2 font-bold ${!canAdminData ? 'opacity-50 cursor-not-allowed' : ''}`}
          >
            <span></span> 
          </button>
          <label className={`bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 border border-emerald-500/20 py-2.5 rounded-xl text-xs transition flex justify-center items-center gap-2 cursor-pointer font-bold ${!canAdminData ? 'opacity-50 cursor-not-allowed' : ''}`}>
            <span></span> 
            <input type="file" className="hidden" accept=".json" onChange={onRestore} disabled={!canAdminData} />
          </label>
        </div>
        <button
          onClick={onReset}
          disabled={!canAdminData}
          className={`w-full text-[10px] text-red-500/70 hover:text-red-500 transition py-2 hover:bg-red-500/10 rounded-lg ${!canAdminData ? 'opacity-50 cursor-not-allowed' : ''}`}
        >
             
        </button>
      </div>
    </aside>
  );
};

export default Sidebar;

==================================================
FILE: .\src\components\SkeletonLoader.tsx
==================================================
import React from 'react';
import { motion } from 'framer-motion';

interface SkeletonLoaderProps {
  variant?: 'text' | 'circle' | 'rectangle' | 'card';
  width?: string | number;
  height?: string | number;
  className?: string;
  animate?: boolean;
}

const SkeletonLoader: React.FC<SkeletonLoaderProps> = ({
  variant = 'rectangle',
  width,
  height,
  className = '',
  animate = true
}) => {
  const baseClasses = 'bg-gray-200 dark:bg-gray-700 rounded overflow-hidden';
  const animationClasses = animate ? 'loading-skeleton' : '';

  const getVariantClasses = () => {
    switch (variant) {
      case 'text':
        return 'h-4 rounded';
      case 'circle':
        return 'rounded-full';
      case 'card':
        return 'rounded-2xl p-4 space-y-3';
      default:
        return 'rounded-lg';
    }
  };

  const style = {
    width: typeof width === 'number' ? `${width}px` : width,
    height: typeof height === 'number' ? `${height}px` : height,
  };

  if (variant === 'card') {
    return (
      <div className={`${baseClasses} ${animationClasses} ${className}`} style={style}>
        <motion.div
          className="flex items-center space-x-4"
          initial={{ opacity: 0.5 }}
          animate={{ opacity: [0.5, 1, 0.5] }}
          transition={{ duration: 1.5, repeat: Infinity, ease: "easeInOut" }}
        >
          <div className="w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full"></div>
          <div className="space-y-2 flex-1">
            <div className="h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"></div>
            <div className="h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"></div>
          </div>
        </motion.div>
        <div className="space-y-2">
          <div className="h-3 bg-gray-300 dark:bg-gray-600 rounded"></div>
          <div className="h-3 bg-gray-300 dark:bg-gray-600 rounded w-5/6"></div>
          <div className="h-3 bg-gray-300 dark:bg-gray-600 rounded w-4/6"></div>
        </div>
      </div>
    );
  }

  return (
    <motion.div
      className={`${baseClasses} ${getVariantClasses()} ${animationClasses} ${className}`}
      style={style}
      initial={{ opacity: 0.5 }}
      animate={animate ? { opacity: [0.5, 1, 0.5] } : {}}
      transition={animate ? { duration: 1.5, repeat: Infinity, ease: "easeInOut" } : {}}
      role="presentation"
      aria-hidden="true"
    />
  );
};

// Compound component for common skeleton patterns
export const Skeleton = {
  Text: (props: Omit<SkeletonLoaderProps, 'variant'>) => (
    <SkeletonLoader {...props} variant="text" />
  ),
  Circle: (props: Omit<SkeletonLoaderProps, 'variant'>) => (
    <SkeletonLoader {...props} variant="circle" />
  ),
  Rectangle: (props: Omit<SkeletonLoaderProps, 'variant'>) => (
    <SkeletonLoader {...props} variant="rectangle" />
  ),
  Card: (props: Omit<SkeletonLoaderProps, 'variant'>) => (
    <SkeletonLoader {...props} variant="card" />
  ),
};

export default SkeletonLoader;

==================================================
FILE: .\src\components\SuccessMessage.tsx
==================================================
import React from 'react';
import { CheckCircle } from 'lucide-react';

interface SuccessMessageProps {
  message: string;
  className?: string;
}

const SuccessMessage: React.FC<SuccessMessageProps> = ({ message, className = '' }) => {
  return (
    <div className={`flex items-center gap-2 text-xs text-emerald-500 mt-1 ${className}`} role="status">
      <CheckCircle size={14} className="shrink-0" />
      <span>{message}</span>
    </div>
  );
};

export default SuccessMessage;


























==================================================
FILE: .\src\components\SupabaseDebug.tsx
==================================================
import React, { useState, useEffect } from 'react';
import { supabase, isSupabaseEnabled, checkSupabaseHealth } from '../lib/supabaseClient';
import { testSupabaseConnection, type TestResult } from '../utils/supabaseTest';
import { motion } from 'framer-motion';
import { Database, Wifi, WifiOff, CheckCircle, XCircle, AlertTriangle, RefreshCw } from 'lucide-react';

interface SupabaseDebugProps {
  isOpen: boolean;
  onClose: () => void;
}

const SupabaseDebug: React.FC<SupabaseDebugProps> = ({ isOpen, onClose }) => {
  const [connectionStatus, setConnectionStatus] = useState<boolean | null>(null);
  const [testResults, setTestResults] = useState<TestResult[]>([]);
  const [isTesting, setIsTesting] = useState(false);
  const [lastTestTime, setLastTestTime] = useState<Date | null>(null);

  useEffect(() => {
    if (isOpen) {
      checkConnection();
    }
  }, [isOpen]);

  const checkConnection = async () => {
    try {
      const status = await checkSupabaseHealth();
      setConnectionStatus(status);
    } catch {
      setConnectionStatus(false);
    }
  };

  const runTests = async () => {
    setIsTesting(true);
    try {
      const results = await testSupabaseConnection();
      setTestResults(results);
      setLastTestTime(new Date());
    } catch (error) {
      console.error('Test failed:', error);
    } finally {
      setIsTesting(false);
    }
  };

  const getStatusIcon = (status: TestResult['status']) => {
    switch (status) {
      case 'success':
        return <CheckCircle size={16} className="text-green-500" />;
      case 'warning':
        return <AlertTriangle size={16} className="text-yellow-500" />;
      case 'error':
        return <XCircle size={16} className="text-red-500" />;
    }
  };

  const getStatusColor = (status: TestResult['status']) => {
    switch (status) {
      case 'success':
        return 'text-green-600 bg-green-50 border-green-200';
      case 'warning':
        return 'text-yellow-600 bg-yellow-50 border-yellow-200';
      case 'error':
        return 'text-red-600 bg-red-50 border-red-200';
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden"
      >
        {/* Header */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
          <div className="flex items-center gap-3">
            <Database size={24} className="text-blue-500" />
            <div>
              <h2 className="text-xl font-bold text-gray-900 dark:text-white">
                Supabase Connection Debug
              </h2>
              <p className="text-sm text-gray-600 dark:text-gray-400">
                    Supabase
              </p>
            </div>
          </div>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition"
          >
            <XCircle size={20} />
          </button>
        </div>

        {/* Content */}
        <div className="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
          {/* Connection Status */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold mb-4 flex items-center gap-2">
              <Wifi size={20} />
               
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="p-4 rounded-lg border bg-gray-50 dark:bg-gray-700">
                <div className="flex items-center gap-2 mb-2">
                  {isSupabaseEnabled ? (
                    <CheckCircle size={16} className="text-green-500" />
                  ) : (
                    <XCircle size={16} className="text-red-500" />
                  )}
                  <span className="font-medium">Supabase Enabled</span>
                </div>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  {isSupabaseEnabled ? ' Supabase  ' : '   '}
                </p>
              </div>

              <div className="p-4 rounded-lg border bg-gray-50 dark:bg-gray-700">
                <div className="flex items-center gap-2 mb-2">
                  {connectionStatus === null ? (
                    <RefreshCw size={16} className="animate-spin text-blue-500" />
                  ) : connectionStatus ? (
                    <Wifi size={16} className="text-green-500" />
                  ) : (
                    <WifiOff size={16} className="text-red-500" />
                  )}
                  <span className="font-medium">Database Connection</span>
                </div>
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  {connectionStatus === null ? '  ...' :
                   connectionStatus ? '   ' : '   '}
                </p>
              </div>
            </div>
          </div>

          {/* Environment Variables */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold mb-4"> </h3>
            <div className="space-y-2">
              <div className="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                <span className="font-mono text-sm">VITE_SUPABASE_URL</span>
                <span className={`text-sm ${import.meta.env.VITE_SUPABASE_URL ? 'text-green-600' : 'text-red-600'}`}>
                  {import.meta.env.VITE_SUPABASE_URL ? '  ' : '  '}
                </span>
              </div>
              <div className="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                <span className="font-mono text-sm">VITE_SUPABASE_ANON_KEY</span>
                <span className={`text-sm ${import.meta.env.VITE_SUPABASE_ANON_KEY ? 'text-green-600' : 'text-red-600'}`}>
                  {import.meta.env.VITE_SUPABASE_ANON_KEY ? '  ' : '  '}
                </span>
              </div>
            </div>
          </div>

          {/* Test Results */}
          {testResults.length > 0 && (
            <div className="mb-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold"> </h3>
                {lastTestTime && (
                  <span className="text-sm text-gray-500">
                     : {lastTestTime.toLocaleTimeString('fa-IR')}
                  </span>
                )}
              </div>
              <div className="space-y-2">
                {testResults.map((result, index) => (
                  <motion.div
                    key={index}
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ delay: index * 0.1 }}
                    className={`p-3 rounded-lg border ${getStatusColor(result.status)}`}
                  >
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-2">
                        {getStatusIcon(result.status)}
                        <span className="font-medium">{result.name}</span>
                      </div>
                      {result.duration && (
                        <span className="text-xs opacity-75">
                          {result.duration}ms
                        </span>
                      )}
                    </div>
                    <p className="text-sm mt-1 opacity-90">{result.message}</p>
                  </motion.div>
                ))}
              </div>
            </div>
          )}

          {/* Auth Status */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold mb-4">  </h3>
            <div className="p-4 rounded-lg border bg-gray-50 dark:bg-gray-700">
              {supabase?.auth.getUser ? (
                <div className="text-sm">
                  <div className="flex items-center gap-2 mb-2">
                    <span className="font-medium">:</span>
                    <span className="text-green-600">Supabase Auth </span>
                  </div>
                  <p className="text-gray-600 dark:text-gray-400">
                       Supabase   
                  </p>
                </div>
              ) : (
                <div className="text-sm">
                  <div className="flex items-center gap-2 mb-2">
                    <span className="font-medium">:</span>
                    <span className="text-red-600">Supabase Auth </span>
                  </div>
                  <p className="text-gray-600 dark:text-gray-400">
                       Supabase  
                  </p>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700">
          <button
            onClick={checkConnection}
            className="flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition"
          >
            <RefreshCw size={16} />
             
          </button>

          <div className="flex items-center gap-3">
            <button
              onClick={runTests}
              disabled={isTesting}
              className="flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition"
            >
              {isTesting ? (
                <RefreshCw size={16} className="animate-spin" />
              ) : (
                <Database size={16} />
              )}
              {isTesting ? '  ...' : ' '}
            </button>

            <button
              onClick={onClose}
              className="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition"
            >
              
            </button>
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export default SupabaseDebug;


==================================================
FILE: .\src\components\SupplementsPanel.tsx
==================================================
import React, { useState, useMemo } from 'react';
import toast from 'react-hot-toast';
import Swal from 'sweetalert2';
import { useApp } from '../context/AppContext';
import type { User } from '../types/index';

interface SupplementsPanelProps {
  activeUser: User;
  onUpdateUser: (user: User) => void;
}

const SupplementsPanel: React.FC<SupplementsPanelProps> = ({ activeUser, onUpdateUser }) => {
  const { theme, hasPermission } = useApp();
  const canEdit = hasPermission('editProgram', activeUser.id);
  const [formData, setFormData] = useState({ name: '', dose: '', time: '', note: '' });

  //   (    Supabase  )
  const supplementsData = useMemo(() => [
    // 
    "  (Whey Protein)",
    "   (Whey Isolate)",
    "   (Whey Concentrate)",
    "   (Whey Hydrolysate)",
    "  (Casein Protein)",
    "   (Micellar Casein)",
    "   (Egg Protein)",
    "  (Beef Protein)",
    "  (Soy Protein)",
    "  (Pea Protein)",
    "  (Rice Protein)",
    "  (Hemp Protein)",
    "   (Plant Blend)",
    " (Mass Gainer)",
    "  (Low-Sugar Mass Gainer)",
    "  (High-Carb Mass Gainer)",

    // 
    "  (Creatine Monohydrate)",
    "   (Creatine Ethyl Ester)",
    "  (Creatine HCl)",
    "   (Buffered Creatine)",
    "  (Micronized Creatine)",
    "  (Liquid Creatine)",

    //  
    "BCAA (  )",
    "BCAA 2:1:1",
    "BCAA 4:1:1",
    "BCAA 8:1:1",
    "EAA (  )",
    " (Glutamine)",
    "  (Glutamine Peptide)",
    " (L-Arginine)",
    " (Citrulline)",
    "  (Citrulline Malate)",
    " (Taurine)",
    " (Glycine)",
    " (Alanine)",
    "  (Beta-Alanine)",
    "HMB (  )",
    " (Leucine)",
    " (Isoleucine)",
    " (Valine)",

    //    
    "/   (Pre-Workout)",
    "    (Stim-Free Pre-Workout)",
    "  (Post-Workout)",
    " (Intra-Workout)",

    // 
    " (Fat Burner)",
    "  (Natural Fat Burner)",
    "   (Caffeine-Free Fat Burner)",
    "L- (L-Carnitine)",
    "L-  (L-Carnitine L-Tartrate)",
    "CLA (  )",
    " (Caffeine)",
    "   (Anhydrous Caffeine)",
    "  (Green Tea Extract)",
    "  (Green Coffee)",
    " (Piperine)",
    " (Choline)",

    //   
    " (Glucosamine)",
    " (Chondroitin)",
    "MSM (  )",
    " (Collagen)",
    "  (Hydrolyzed Collagen)",
    "  (Chicken Collagen)",
    "  (Fish Collagen)",
    " (Curcumin)",
    "  (Bromelain)",
    " (Papain)",

    //    
    " A",
    " B ",
    " B1 ()",
    " B2 ()",
    " B3 ()",
    " B5 ( )",
    " B6 ()",
    " B7 ()",
    " B9 ( )",
    " B12 ()",
    " C ( )",
    " D",
    " D3 ()",
    " E ()",
    " K",
    " K2 ()",
    " (Calcium)",
    " (Magnesium)",
    " (Zinc)",
    " (Iron)",
    " (Iodine)",
    " (Selenium)",
    " (Copper)",
    " (Manganese)",
    " (Chromium)",
    " (Molybdenum)",

    //   
    "ZMA (   B6)",
    "DHEA",
    "  (Testosterone Booster)",
    "PCT (Post Cycle Therapy)",
    "  (Sleep Aid)",
    " (Melatonin)",
    " (Valerian Root)",
    "5-HTP",
    "L- (L-Tryptophan)",
    " (GABA)",
    " (Ashwagandha)",
    "  (Rhodiola Rosea)",
    " (Ginseng)",
    " (Maca)",
    "DMAE",

    //    
    " ",
    " Q10 (CoQ10)",
    "   (ALA)",
    "NAC (N-Acetyl Cysteine)",
    " (Glutathione)",
    " C  ",
    " (Echinacea)",
    "  (Zinc Lozenges)",
    " (Propolis)",
    "  (Manuka Honey)",

    //  
    " (Probiotic)",
    " (Fiber)",
    "  (Soluble Fiber)",
    "  (Insoluble Fiber)",
    "  (Digestive Enzyme)",
    " (Beta-Carotene)",
    " (Lycopene)",
    " (Lutein)",
    " (Zeaxanthin)",
    " (Astaxanthin)",
    "  (Raspberry Ketone)",
    "  (Garcinia Cambogia)",
    "  (Green Tea)",
    "  (Black Tea)",
    "  (White Tea)",
    "  (Oolong Tea)",
    "  (Rooibos Tea)"
  ], []);

  const handleAdd = () => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    if (!formData.name) {
      toast.error('    ');
      return;
    }
    const newUser = { ...activeUser };
    if (!newUser.plans.supps) newUser.plans.supps = [];
    newUser.plans.supps.push({ ...formData });
    onUpdateUser(newUser);
    setFormData({ name: '', dose: '', time: '', note: '' });
  };

  const handleDelete = (index) => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const newUser = { ...activeUser };
    newUser.plans.supps.splice(index, 1);
    onUpdateUser(newUser);
  };

  return (
    <div className="space-y-6 animate-fade-in-up">
      {/*   */}
      <div className="glass-panel p-6 rounded-3xl">
        <h3 className="font-bold text-lg text-[var(--text-primary)] border-b border-[var(--glass-border)] pb-4 mb-6 flex items-center gap-2">
            <span className="w-2 h-6 bg-purple-500 rounded-full"></span>
               
        </h3>
        
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
                <label htmlFor="supplement-name" className="text-xs text-slate-400 mb-1 block font-semibold">  *</label>
                <div className="flex gap-2">
                    <select 
                        id="supplement-name"
                        className="input-glass font-bold flex-1" 
                        value={formData.name} 
                        onChange={e => setFormData({...formData, name: e.target.value})}
                        aria-required="true"
                        aria-label="  "
                    >
                        <option value=""> ...</option>
                        {supplementsData.map(s => <option key={s} value={s}>{s}</option>)}
                    </select>
                    <button
                      onClick={async () => {
                        const { value: custom } = await Swal.fire({
                          title: '  ',
                          input: 'text',
                          inputPlaceholder: '    ...',
                          showCancelButton: true,
                          confirmButtonText: '',
                          cancelButtonText: '',
                          background: theme === 'dark' ? '#1e293b' : '#fff',
                          color: theme === 'dark' ? '#fff' : '#000',
                          inputValidator: (value) => {
                            if (!value) {
                              return '   ';
                            }
                          }
                        });
                        if (custom) setFormData({ ...formData, name: custom });
                      }}
                      className="btn-glass bg-white/10 hover:bg-white/20 text-white px-3"
                      title="  "
                      aria-label="  "
                      type="button"
                    >
                      +
                    </button>
                </div>
            </div>
            <div>
                <label htmlFor="supplement-time" className="text-xs text-slate-400 mb-1 block font-semibold"> </label>
                <select 
                    id="supplement-time"
                    className="input-glass" 
                    value={formData.time} 
                    onChange={e => setFormData({...formData, time: e.target.value})}
                    aria-label="   "
                >
                    <option value="">...</option>
                    <option></option><option> </option><option> </option>
                    <option> </option><option> </option><option> </option>
                </select>
            </div>
            <div>
                <label htmlFor="supplement-dose" className="text-xs text-slate-400 mb-1 block font-semibold"> </label>
                <input 
                    id="supplement-dose"
                    type="text"
                    className="input-glass" 
                    placeholder=":   /  "
                    value={formData.dose}
                    onChange={e => setFormData({...formData, dose: e.target.value})}
                    aria-label="  "
                    autoComplete="off"
                />
            </div>
        </div>
        <div>
            <label htmlFor="supplement-note" className="text-xs text-slate-400 mb-1 block font-semibold"> </label>
            <input 
                id="supplement-note"
                type="text"
                className="input-glass mb-4 w-full" 
                placeholder="  (  ...)"
                value={formData.note}
                onChange={e => setFormData({...formData, note: e.target.value})}
                aria-label="  "
                autoComplete="off"
            />
        </div>
        <button
          onClick={handleAdd}
          disabled={!canEdit}
          className={`w-full btn-glass bg-purple-600 hover:bg-purple-500 text-white shadow-lg shadow-purple-500/20 font-bold py-3 ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
          aria-label="   "
          aria-disabled={!canEdit}
          type="button"
        >
            +   
        </button>
      </div>

      {/*   */}
      <div className="glass-panel rounded-3xl overflow-hidden min-h-[300px]">
        <table className="w-full text-right text-sm">
            <thead className="bg-[var(--text-primary)]/5 text-[var(--text-secondary)] text-xs uppercase font-semibold">
                <tr>
                    <th className="p-5"> </th>
                    <th className="p-5"></th>
                    <th className="p-5"></th>
                    <th className="p-5"></th>
                    <th className="p-5 w-10"></th>
                </tr>
            </thead>
            <tbody className="divide-y divide-[var(--glass-border)]">
                {activeUser.plans.supps && activeUser.plans.supps.map((item, idx) => (
                    <tr key={idx} className="hover:bg-[var(--text-primary)]/5 transition-colors">
                        <td className="p-5 font-bold text-[var(--text-primary)]">{item.name}</td>
                        <td className="p-5 text-[var(--text-secondary)]">{item.dose}</td>
                        <td className="p-5 text-purple-400 dark:text-purple-300">{item.time}</td>
                        <td className="p-5 text-xs text-[var(--text-secondary)]">{item.note}</td>
                        <td className="p-5 text-center">
                            <button
                              onClick={() => handleDelete(idx)}
                              disabled={!canEdit}
                              className={`text-red-400 hover:text-red-500 transition ${!canEdit ? 'opacity-40 cursor-not-allowed' : ''}`}
                            >
                              
                            </button>
                        </td>
                    </tr>
                ))}
                {(!activeUser.plans.supps || activeUser.plans.supps.length === 0) && (
                    <tr><td colSpan={5} className="p-10 text-center text-[var(--text-secondary)] opacity-60">    .</td></tr>
                )}
            </tbody>
        </table>
      </div>
    </div>
  );
};

export default SupplementsPanel;

==================================================
FILE: .\src\components\TemplateLoader.tsx
==================================================
import React, { useState } from 'react';
import { useTemplates, useLoadTemplate, useDeleteTemplate } from '../hooks/useTemplates';
import LoadingSpinner from './LoadingSpinner';
import ErrorMessage from './ErrorMessage';
import SuccessMessage from './SuccessMessage';

interface TemplateLoaderProps {
  isOpen: boolean;
  onClose: () => void;
  clientId: string;
  onTemplateLoaded: () => void;
}

/**
 * TemplateLoader Component
 * Modal for browsing and loading full-week workout templates
 */
const TemplateLoader: React.FC<TemplateLoaderProps> = ({
  isOpen,
  onClose,
  clientId,
  onTemplateLoaded,
}) => {
  const [selectedTemplateId, setSelectedTemplateId] = useState<string | null>(null);
  const [showConfirmation, setShowConfirmation] = useState(false);
  const [successMessage, setSuccessMessage] = useState('');
  const [errorMessage, setErrorMessage] = useState('');

  const { data: templates, isLoading } = useTemplates();
  const loadTemplateMutation = useLoadTemplate();
  const deleteTemplateMutation = useDeleteTemplate();

  const selectedTemplate = templates?.find(t => t.id === selectedTemplateId);

  const handleLoadTemplate = () => {
    if (!selectedTemplate) return;

    setShowConfirmation(true);
  };

  const confirmLoadTemplate = async () => {
    if (!selectedTemplate) return;

    try {
      await loadTemplateMutation.mutateAsync({
        clientId,
        templateId: selectedTemplate.id,
        fullWeekData: selectedTemplate.full_week_data,
      });

      setSuccessMessage('    ');
      setTimeout(() => {
        setShowConfirmation(false);
        setSelectedTemplateId(null);
        setSuccessMessage('');
        onTemplateLoaded();
        onClose();
      }, 2000);
    } catch (error) {
      setErrorMessage(error instanceof Error ? error.message : '   ');
    }
  };

  const handleDeleteTemplate = async (templateId: string) => {
    if (!confirm('      ')) return;

    try {
      await deleteTemplateMutation.mutateAsync(templateId);
      if (selectedTemplateId === templateId) {
        setSelectedTemplateId(null);
      }
    } catch (error) {
      setErrorMessage(error instanceof Error ? error.message : '   ');
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-hidden flex flex-col">
        {/* Header */}
        <div className="border-b p-4">
          <h2 className="text-xl font-bold text-gray-900"> </h2>
        </div>

        {/* Messages */}
        <div className="px-4 pt-4">
          {successMessage && <SuccessMessage message={successMessage} />}
          {errorMessage && <ErrorMessage message={errorMessage} />}
        </div>

        {/* Content */}
        <div className="flex-1 overflow-y-auto p-4">
          {isLoading ? (
            <LoadingSpinner />
          ) : templates && templates.length > 0 ? (
            <div className="space-y-3">
              {templates.map((template) => (
                <button
                  key={template.id}
                  onClick={() => setSelectedTemplateId(template.id)}
                  className={`w-full text-right p-4 rounded-lg border-2 transition ${
                    selectedTemplateId === template.id
                      ? 'border-blue-500 bg-blue-50'
                      : 'border-gray-200 hover:border-gray-300'
                  }`}
                >
                  <div className="font-semibold text-gray-900">{template.name}</div>
                  {template.description && (
                    <div className="text-sm text-gray-600 mt-1">{template.description}</div>
                  )}
                  <div className="text-xs text-gray-500 mt-2">
                    : {new Date(template.created_at).toLocaleDateString('fa-IR')}
                  </div>
                </button>
              ))}
            </div>
          ) : (
            <div className="text-center py-8 text-gray-500">
                  
            </div>
          )}
        </div>

        {/* Footer */}
        <div className="border-t p-4 flex gap-3">
          <button
            onClick={handleLoadTemplate}
            disabled={!selectedTemplate || loadTemplateMutation.isPending}
            className="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 font-semibold"
          >
            {loadTemplateMutation.isPending ? ' ...' : ''}
          </button>
          {selectedTemplate && (
            <button
              onClick={() => handleDeleteTemplate(selectedTemplate.id)}
              disabled={deleteTemplateMutation.isPending}
              className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50"
            >
              
            </button>
          )}
          <button
            onClick={onClose}
            className="flex-1 bg-gray-300 text-gray-900 py-2 rounded-lg hover:bg-gray-400 font-semibold"
          >
            
          </button>
        </div>

        {/* Confirmation Dialog */}
        {showConfirmation && selectedTemplate && (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
              <h3 className="text-lg font-bold text-gray-900 mb-4">  </h3>
              <p className="text-gray-600 mb-2">
                   "{selectedTemplate.name}"   
              </p>
              <p className="text-red-600 text-sm mb-4">
                         
              </p>
              <div className="flex gap-3">
                <button
                  onClick={confirmLoadTemplate}
                  disabled={loadTemplateMutation.isPending}
                  className="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"
                >
                  {loadTemplateMutation.isPending ? ' ...' : ''}
                </button>
                <button
                  onClick={() => setShowConfirmation(false)}
                  className="flex-1 bg-gray-300 text-gray-900 py-2 rounded-lg hover:bg-gray-400"
                >
                  
                </button>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default TemplateLoader;


==================================================
FILE: .\src\components\TextAnimation.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { motion, useAnimation } from 'framer-motion';

// Typewriter effect
interface TypewriterProps {
  text: string;
  speed?: number;
  delay?: number;
  className?: string;
  cursor?: boolean;
  onComplete?: () => void;
}

export const Typewriter: React.FC<TypewriterProps> = ({
  text,
  speed = 50,
  delay = 0,
  className = '',
  cursor = true,
  onComplete
}) => {
  const [displayText, setDisplayText] = useState('');
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    const timer = setTimeout(() => {
      if (currentIndex < text.length) {
        setDisplayText(text.slice(0, currentIndex + 1));
        setCurrentIndex(currentIndex + 1);
      } else {
        onComplete?.();
      }
    }, currentIndex === 0 ? delay : speed);

    return () => clearTimeout(timer);
  }, [currentIndex, text, speed, delay, onComplete]);

  return (
    <span className={`${className} font-mono`}>
      {displayText}
      {cursor && currentIndex < text.length && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ duration: 0.8, repeat: Infinity }}
          className="text-blue-500"
        >
          |
        </motion.span>
      )}
    </span>
  );
};

// Fade in text with stagger
interface FadeInTextProps {
  text: string;
  className?: string;
  delay?: number;
  duration?: number;
  stagger?: number;
}

export const FadeInText: React.FC<FadeInTextProps> = ({
  text,
  className = '',
  delay = 0,
  duration = 0.5,
  stagger = 0.1
}) => {
  const words = text.split(' ');

  return (
    <div className={className}>
      {words.map((word, index) => (
        <motion.span
          key={index}
          className="inline-block mr-1"
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{
            duration,
            delay: delay + (index * stagger)
          }}
        >
          {word}
        </motion.span>
      ))}
    </div>
  );
};

// Letter by letter animation
interface LetterAnimationProps {
  text: string;
  className?: string;
  delay?: number;
  stagger?: number;
  variant?: 'bounce' | 'slide' | 'scale' | 'rotate';
}

export const LetterAnimation: React.FC<LetterAnimationProps> = ({
  text,
  className = '',
  delay = 0,
  stagger = 0.1,
  variant = 'bounce'
}) => {
  const letters = text.split('');

  const getVariant = (index: number) => {
    const baseDelay = delay + (index * stagger);

    switch (variant) {
      case 'bounce':
        return {
          initial: { opacity: 0, y: 50 },
          animate: { opacity: 1, y: 0 },
          transition: {
            type: "spring",
            stiffness: 300,
            damping: 20,
            delay: baseDelay
          }
        };
      case 'slide':
        return {
          initial: { opacity: 0, x: -50 },
          animate: { opacity: 1, x: 0 },
          transition: { duration: 0.5, delay: baseDelay }
        };
      case 'scale':
        return {
          initial: { opacity: 0, scale: 0 },
          animate: { opacity: 1, scale: 1 },
          transition: {
            type: "spring",
            stiffness: 400,
            damping: 25,
            delay: baseDelay
          }
        };
      case 'rotate':
        return {
          initial: { opacity: 0, rotate: -180 },
          animate: { opacity: 1, rotate: 0 },
          transition: {
            type: "spring",
            stiffness: 300,
            damping: 20,
            delay: baseDelay
          }
        };
      default:
        return {};
    }
  };

  return (
    <span className={className}>
      {letters.map((letter, index) => (
        <motion.span
          key={index}
          className="inline-block"
          {...getVariant(index)}
        >
          {letter === ' ' ? '\u00A0' : letter}
        </motion.span>
      ))}
    </span>
  );
};

// Wave text animation
export const WaveText: React.FC<{
  text: string;
  className?: string;
  speed?: number;
}> = ({ text, className = '', speed = 1 }) => {
  return (
    <span className={className}>
      {text.split('').map((char, index) => (
        <motion.span
          key={index}
          className="inline-block"
          animate={{
            y: [0, -10, 0],
            transition: {
              duration: 1 / speed,
              repeat: Infinity,
              delay: index * 0.1,
              ease: "easeInOut"
            }
          }}
        >
          {char === ' ' ? '\u00A0' : char}
        </motion.span>
      ))}
    </span>
  );
};

// Glitch text effect
export const GlitchText: React.FC<{
  text: string;
  className?: string;
  intensity?: 'low' | 'medium' | 'high';
}> = ({ text, className = '', intensity = 'medium' }) => {
  const getIntensity = () => {
    switch (intensity) {
      case 'low':
        return { duration: 4, repeatDelay: 8 };
      case 'medium':
        return { duration: 3, repeatDelay: 6 };
      case 'high':
        return { duration: 2, repeatDelay: 4 };
      default:
        return { duration: 3, repeatDelay: 6 };
    }
  };

  const { duration, repeatDelay } = getIntensity();

  return (
    <motion.span
      className={`${className} relative inline-block`}
      animate={{
        x: [0, -2, 2, -1, 1, 0],
        skewX: [0, -5, 5, -3, 3, 0],
      }}
      transition={{
        duration,
        repeat: Infinity,
        ease: "easeInOut",
        repeatDelay
      }}
    >
      {text}
      <motion.span
        className="absolute inset-0 text-red-500 opacity-20"
        animate={{
          x: [0, 2, -2, 1, -1, 0],
          skewX: [0, 5, -5, 3, -3, 0],
        }}
        transition={{
          duration,
          repeat: Infinity,
          ease: "easeInOut",
          repeatDelay
        }}
      >
        {text}
      </motion.span>
      <motion.span
        className="absolute inset-0 text-blue-500 opacity-20"
        animate={{
          x: [0, -1, 1, -2, 2, 0],
          skewX: [0, -3, 3, -5, 5, 0],
        }}
        transition={{
          duration,
          repeat: Infinity,
          ease: "easeInOut",
          repeatDelay
        }}
      >
        {text}
      </motion.span>
    </motion.span>
  );
};

// Rainbow text effect
export const RainbowText: React.FC<{
  text: string;
  className?: string;
  speed?: number;
}> = ({ text, className = '', speed = 1 }) => {
  const colors = [
    'text-red-500',
    'text-orange-500',
    'text-yellow-500',
    'text-green-500',
    'text-blue-500',
    'text-indigo-500',
    'text-purple-500'
  ];

  return (
    <span className={className}>
      {text.split('').map((char, index) => (
        <motion.span
          key={index}
          className={`inline-block ${colors[index % colors.length]}`}
          animate={{
            filter: [
              'hue-rotate(0deg)',
              'hue-rotate(360deg)',
              'hue-rotate(0deg)'
            ]
          }}
          transition={{
            duration: 3 / speed,
            repeat: Infinity,
            delay: index * 0.1,
            ease: "easeInOut"
          }}
        >
          {char === ' ' ? '\u00A0' : char}
        </motion.span>
      ))}
    </span>
  );
};

// Gradient text animation
export const GradientText: React.FC<{
  text: string;
  className?: string;
  colors?: string[];
  speed?: number;
}> = ({
  text,
  className = '',
  colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7'],
  speed = 1
}) => {
  const controls = useAnimation();

  useEffect(() => {
    controls.start({
      backgroundPosition: ['0% 50%', '100% 50%', '0% 50%'],
      transition: {
        duration: 5 / speed,
        repeat: Infinity,
        ease: "easeInOut"
      }
    });
  }, [controls, speed]);

  return (
    <motion.span
      className={`${className} bg-gradient-to-r bg-clip-text text-transparent`}
      style={{
        backgroundImage: `linear-gradient(90deg, ${colors.join(', ')})`,
        backgroundSize: '200% 200%'
      }}
      animate={controls}
    >
      {text}
    </motion.span>
  );
};

// Scramble text effect
interface ScrambleTextProps {
  text: string;
  className?: string;
  duration?: number;
  characters?: string;
}

export const ScrambleText: React.FC<ScrambleTextProps> = ({
  text,
  className = '',
  duration = 2,
  characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()'
}) => {
  const [displayText, setDisplayText] = useState(text);
  const [isAnimating, setIsAnimating] = useState(false);

  const scramble = () => {
    setIsAnimating(true);
    const originalText = text;
    let iterations = 0;
    const maxIterations = duration * 10;

    const interval = setInterval(() => {
      setDisplayText(originalText
        .split('')
        .map((char, index) => {
          if (index < iterations) return originalText[index];
          return characters[Math.floor(Math.random() * characters.length)];
        })
        .join('')
      );

      iterations += 1 / maxIterations;

      if (iterations >= 1) {
        clearInterval(interval);
        setDisplayText(originalText);
        setIsAnimating(false);
      }
    }, duration * 100);
  };

  useEffect(() => {
    scramble();
  }, [text]);

  return (
    <motion.span
      className={`${className} font-mono`}
      animate={isAnimating ? { opacity: [1, 0.8, 1] } : {}}
      transition={{ duration: 0.1, repeat: isAnimating ? Infinity : 0 }}
    >
      {displayText}
    </motion.span>
  );
};

// Morphing text effect
interface MorphingTextProps {
  texts: string[];
  className?: string;
  duration?: number;
}

export const MorphingText: React.FC<MorphingTextProps> = ({
  texts,
  className = '',
  duration = 3
}) => {
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentIndex((prev) => (prev + 1) % texts.length);
    }, duration * 1000);

    return () => clearInterval(interval);
  }, [texts.length, duration]);

  return (
    <motion.span
      key={currentIndex}
      className={className}
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -20 }}
      transition={{ duration: 0.5 }}
    >
      {texts[currentIndex]}
    </motion.span>
  );
};

export default Typewriter;


==================================================
FILE: .\src\components\Tooltip.tsx
==================================================
import React, { useState, useRef, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';

interface TooltipProps {
  content: string;
  children: React.ReactNode;
  position?: 'top' | 'bottom' | 'left' | 'right' | 'auto';
  delay?: number;
  className?: string;
  disabled?: boolean;
  maxWidth?: number;
}

const Tooltip: React.FC<TooltipProps> = ({
  content,
  children,
  position = 'auto',
  delay = 300,
  className = '',
  disabled = false,
  maxWidth = 200
}) => {
  const [isVisible, setIsVisible] = useState(false);
  const [actualPosition, setActualPosition] = useState<'top' | 'bottom' | 'left' | 'right'>('top');
  const tooltipRef = useRef<HTMLDivElement>(null);
  const triggerRef = useRef<HTMLDivElement>(null);
  const timeoutRef = useRef<NodeJS.Timeout>();

  const calculatePosition = () => {
    if (position !== 'auto' || !tooltipRef.current || !triggerRef.current) {
      setActualPosition(position === 'auto' ? 'top' : position);
      return;
    }

    const tooltipRect = tooltipRef.current.getBoundingClientRect();
    const triggerRect = triggerRef.current.getBoundingClientRect();
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;

    const spaceTop = triggerRect.top;
    const spaceBottom = viewportHeight - triggerRect.bottom;
    const spaceLeft = triggerRect.left;
    const spaceRight = viewportWidth - triggerRect.right;

    // Determine best position based on available space
    if (spaceTop >= tooltipRect.height + 10) {
      setActualPosition('top');
    } else if (spaceBottom >= tooltipRect.height + 10) {
      setActualPosition('bottom');
    } else if (spaceLeft >= tooltipRect.width + 10) {
      setActualPosition('left');
    } else if (spaceRight >= tooltipRect.width + 10) {
      setActualPosition('right');
    } else {
      setActualPosition('top'); // fallback
    }
  };

  const handleMouseEnter = () => {
    if (disabled) return;

    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }

    timeoutRef.current = setTimeout(() => {
      setIsVisible(true);
    }, delay);
  };

  const handleMouseLeave = () => {
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    setIsVisible(false);
  };

  const handleFocus = () => {
    if (disabled) return;
    setIsVisible(true);
  };

  const handleBlur = () => {
    setIsVisible(false);
  };

  useEffect(() => {
    if (isVisible && position === 'auto') {
      // Small delay to ensure tooltip is rendered
      setTimeout(calculatePosition, 0);
    }
  }, [isVisible, position]);

  // Cleanup timeout on unmount
  useEffect(() => {
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);

  const getTooltipVariants = () => {
    const baseVariants = {
      hidden: { opacity: 0, scale: 0.95 },
      visible: {
        opacity: 1,
        scale: 1,
        transition: {
          type: "spring",
          stiffness: 400,
          damping: 25,
          duration: 0.2
        }
      },
      exit: {
        opacity: 0,
        scale: 0.95,
        transition: { duration: 0.15 }
      }
    };

    switch (actualPosition) {
      case 'top':
        return {
          ...baseVariants,
          hidden: { ...baseVariants.hidden, y: 5 },
          visible: { ...baseVariants.visible, y: 0 },
          exit: { ...baseVariants.exit, y: 5 }
        };
      case 'bottom':
        return {
          ...baseVariants,
          hidden: { ...baseVariants.hidden, y: -5 },
          visible: { ...baseVariants.visible, y: 0 },
          exit: { ...baseVariants.exit, y: -5 }
        };
      case 'left':
        return {
          ...baseVariants,
          hidden: { ...baseVariants.hidden, x: 5 },
          visible: { ...baseVariants.visible, x: 0 },
          exit: { ...baseVariants.exit, x: 5 }
        };
      case 'right':
        return {
          ...baseVariants,
          hidden: { ...baseVariants.hidden, x: -5 },
          visible: { ...baseVariants.visible, x: 0 },
          exit: { ...baseVariants.exit, x: -5 }
        };
      default:
        return baseVariants;
    }
  };

  const getArrowClasses = () => {
    const baseClasses = "absolute w-2 h-2 bg-gray-900 dark:bg-gray-700 rotate-45";

    switch (actualPosition) {
      case 'top':
        return `${baseClasses} -bottom-1 left-1/2 transform -translate-x-1/2`;
      case 'bottom':
        return `${baseClasses} -top-1 left-1/2 transform -translate-x-1/2`;
      case 'left':
        return `${baseClasses} -right-1 top-1/2 transform -translate-y-1/2`;
      case 'right':
        return `${baseClasses} -left-1 top-1/2 transform -translate-y-1/2`;
      default:
        return baseClasses;
    }
  };

  return (
    <div className="relative inline-block">
      <div
        ref={triggerRef}
        onMouseEnter={handleMouseEnter}
        onMouseLeave={handleMouseLeave}
        onFocus={handleFocus}
        onBlur={handleBlur}
        className="inline-block"
      >
        {children}
      </div>

      <AnimatePresence>
        {isVisible && (
          <motion.div
            ref={tooltipRef}
            className={`
              fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 dark:bg-gray-700
              rounded-lg shadow-lg backdrop-blur-sm border border-gray-700 dark:border-gray-600
              pointer-events-none whitespace-nowrap max-w-xs break-words
              ${className}
            `}
            style={{
              maxWidth: `${maxWidth}px`,
              zIndex: 9999
            }}
            variants={getTooltipVariants()}
            initial="hidden"
            animate="visible"
            exit="exit"
            role="tooltip"
          >
            {content}

            {/* Arrow */}
            <div className={getArrowClasses()} />
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

export default Tooltip;



==================================================
FILE: .\src\components\TrainingPanel.tsx
==================================================
import React, { useState, useEffect, useMemo, useCallback } from 'react';
import { useApp } from '../context/AppContext';
import { Save, AlertTriangle, Plus, Search, Dumbbell, Download } from 'lucide-react';
import toast from 'react-hot-toast';
import { motion, AnimatePresence } from 'framer-motion';
import { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';
import { arrayMove, SortableContext, verticalListSortingStrategy, sortableKeyboardCoordinates } from '@dnd-kit/sortable';
import type { User, WorkoutItem, WorkoutMode } from '../types/index';
import EmptyState from './EmptyState';
import { riskyExercises } from '../data/resistanceExercises';
import { useDebounce } from '../hooks/useDebounce';
import SavePlanModal from './SavePlanModal';
import TemplateLoader from './TemplateLoader';
import ExerciseRow from './TrainingPanel/ExerciseRow';
import MobileExerciseCard from './TrainingPanel/MobileExerciseCard';
import { useExercises } from '../hooks/useExercises';
import { CardSkeleton, TextSkeleton } from '../components';

interface TrainingPanelProps {
  activeUser: User;
  onUpdateUser: (_user: User) => void;
}

const TrainingPanel: React.FC<TrainingPanelProps> = ({ activeUser, onUpdateUser }) => {
  const { hasPermission } = useApp();
  const canEdit = hasPermission('editProgram', activeUser.id);
  const [day, setDay] = useState(1);
  const [mode, setMode] = useState('resist'); 
  const [searchTerm, setSearchTerm] = useState('');
  const [showSaveModal, setShowSaveModal] = useState(false);
  const [showLoadModal, setShowLoadModal] = useState(false);
  const debouncedSearch = useDebounce(searchTerm, 300);
  
  const initialFormState = {
    system: 'normal', muscle: '', subMuscle: '', ex1: '', ex2: '', name3: '', name4: '', sets: '3', reps: '10', 
    rest: '60', restUnit: 's', note: '',
    cCategory: '', cType: '', cTime: '', cInt: '', cIntensity: '', corrEx: '', corrType: '',
    dropCount: '', restPauseTime: '', tempo: '', holdTime: '',
    warmupType: '', cooldownType: ''
  };

  const [formData, setFormData] = useState(initialFormState);

  const [subMuscles, setSubMuscles] = useState<string[]>([]);
  const [exercises, setExercises] = useState<string[]>([]);
  const [corrExercisesList, setCorrExercisesList] = useState<string[]>([]);

  //     Supabase
  const { data: exercisesData, isLoading: exercisesLoading, error: exercisesError } = useExercises();

  //        
  const resistanceExercises = useMemo(() => {
    if (!exercisesData) return null;

    const resistance = exercisesData.filter((ex: any) => ex.type === 'resistance');
    const grouped: Record<string, Record<string, string[]>> = {};

    resistance.forEach((ex: any) => {
      if (!grouped[ex.muscle_group]) {
        grouped[ex.muscle_group] = {};
      }
      if (!grouped[ex.muscle_group][ex.sub_muscle_group || 'other']) {
        grouped[ex.muscle_group][ex.sub_muscle_group || 'other'] = [];
      }
      grouped[ex.muscle_group][ex.sub_muscle_group || 'other'].push(ex.name);
    });

    return grouped;
  }, [exercisesData]);

  const correctiveExercises = useMemo(() => {
    if (!exercisesData) return null;

    const corrective = exercisesData.filter((ex: any) => ex.type === 'corrective');
    const grouped: Record<string, string[]> = {};

    corrective.forEach((ex: any) => {
      if (!grouped[ex.muscle_group]) {
        grouped[ex.muscle_group] = [];
      }
      grouped[ex.muscle_group].push(ex.name);
    });

    return grouped;
  }, [exercisesData]);

  const cardioExercises = useMemo(() => {
    if (!exercisesData) return null;

    const cardio = exercisesData.filter((ex: any) => ex.type === 'cardio');
    const grouped: Record<string, Record<string, string[]>> = {};

    cardio.forEach((ex: any) => {
      // Group cardio exercises by equipment or category
      const category = ex.equipment || 'general';
      if (!grouped[category]) {
        grouped[category] = {};
      }
      if (!grouped[category][ex.muscle_group]) {
        grouped[category][ex.muscle_group] = [];
      }
      grouped[category][ex.muscle_group].push(ex.name);
    });

    return grouped;
  }, [exercisesData]);

  const warmupExercises = useMemo(() => {
    if (!exercisesData) return null;
    return exercisesData.filter((ex: any) => ex.type === 'warmup').map((ex: any) => ex.name);
  }, [exercisesData]);

  const cooldownExercises = useMemo(() => {
    if (!exercisesData) return null;
    return exercisesData.filter((ex: any) => ex.type === 'cooldown').map((ex: any) => ex.name);
  }, [exercisesData]);

  const dataLoaded = !exercisesLoading;
  const [warning, setWarning] = useState<string | null>(exercisesError ? '    ' : null);

  //   drag & drop
  const sensors = useSensors(
    useSensor(PointerSensor, { activationConstraint: { distance: 8 } }),
    useSensor(KeyboardSensor, { coordinateGetter: sortableKeyboardCoordinates })
  );

  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.muscle && resistanceExercises && resistanceExercises[formData.muscle]) {
        setSubMuscles(Object.keys(resistanceExercises[formData.muscle]));
      } else setSubMuscles([]);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.muscle, resistanceExercises]);

  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.subMuscle && formData.muscle && resistanceExercises && resistanceExercises[formData.muscle]) {
        setExercises(resistanceExercises[formData.muscle][formData.subMuscle] || []);
      } else setExercises([]);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.subMuscle, formData.muscle, resistanceExercises]);

  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.corrType && correctiveExercises) setCorrExercisesList(correctiveExercises[formData.corrType] || []);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.corrType, correctiveExercises]);

  useEffect(() => {
    const timer = setTimeout(() => {
      if (mode === 'resist' && formData.ex1 && activeUser.injuries?.length && riskyExercises) {
        let conflict = null;
        activeUser.injuries.forEach(injury => {
          if (riskyExercises[injury]?.includes(formData.ex1)) conflict = `:   "${injury}"`;
        });
        setWarning(conflict);
      } else setWarning(null);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.ex1, activeUser.injuries, mode, riskyExercises]);

  useEffect(() => {
    const timer = setTimeout(() => {
      setFormData(prev => ({
        system: 'normal', muscle: '', subMuscle: '', ex1: '', ex2: '', name3: '', name4: '', sets: '3', reps: '10', 
        rest: prev.rest, restUnit: prev.restUnit, note: '',
        cCategory: '', cType: '', cTime: '', cInt: '', cIntensity: '', corrEx: '', corrType: '',
        dropCount: '', restPauseTime: '', tempo: '', holdTime: '',
        warmupType: '', cooldownType: ''
      }));
      setSubMuscles([]);
      setExercises([]);
      setCorrExercisesList([]);
      setSearchTerm('');
    }, 0);
    return () => clearTimeout(timer);
  }, [mode]);

  //     -   useMemo  debounce  
  const filteredExercises = useMemo(() => {
    if (!debouncedSearch) return exercises;
    const lowerSearch = debouncedSearch.toLowerCase();
    return exercises.filter(ex => ex.toLowerCase().includes(lowerSearch));
  }, [exercises, debouncedSearch]);

  //   -   useCallback  
  const handleDragEnd = useCallback((event: DragEndEvent) => {
    if (!canEdit) return;
    const { active, over } = event;
    if (!over || active.id === over.id) return;

    const oldIndex = parseInt(String(active.id).split('-')[1]) || 0;
    const newIndex = parseInt(String(over.id).split('-')[1]) || 0;
    if (isNaN(oldIndex) || isNaN(newIndex)) return;

    const newUser = { ...activeUser };
    if (!newUser.plans.workouts[day]) newUser.plans.workouts[day] = [];
    if (oldIndex < 0 || oldIndex >= newUser.plans.workouts[day].length) return;
    if (newIndex < 0 || newIndex >= newUser.plans.workouts[day].length) return;
    newUser.plans.workouts[day] = arrayMove(newUser.plans.workouts[day], oldIndex, newIndex);
    onUpdateUser(newUser);
  }, [canEdit, activeUser, day, onUpdateUser]);

  const handleDeleteExercise = useCallback((idx: number) => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const u = { ...activeUser };
    if (!u.plans?.workouts?.[day]) return;
    u.plans.workouts[day] = u.plans.workouts[day].filter((_, i) => i !== idx);
    onUpdateUser(u);
  }, [canEdit, activeUser, day, onUpdateUser]);

  const handleAddExercise = (): void => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }
    const newUser = { ...activeUser };
    if (!newUser.plans.workouts[day]) newUser.plans.workouts[day] = [];
    
    let item: WorkoutItem = {
      mode: mode as WorkoutMode,
      note: formData.note,
      rest: formData.rest,
      restUnit: (formData.restUnit as WorkoutItem['restUnit']) || 's',
      name: ''
    };
    
    if (mode === 'resist') {
      if (!formData.ex1) {
        toast.error('    ');
        return;
      }
      if (!formData.sets || !formData.reps) {
        toast.error('    ');
        return;
      }
      
      // Validation   
      if (formData.system === 'superset' && !formData.ex2) {
        toast.error('     ');
        return;
      }
      if (formData.system === 'triset' && (!formData.ex2 || !formData.name3)) {
        toast.error('       ');
        return;
      }
      if (formData.system === 'giantset' && (!formData.ex2 || !formData.name3)) {
        toast.error('   3   ');
        return;
      }
      if (formData.system === 'dropset' && !formData.dropCount) {
        toast.error('     ');
        return;
      }
      if (formData.system === 'restpause' && !formData.restPauseTime) {
        toast.error(' -      ');
        return;
      }
      if (formData.system === 'tempo' && !formData.tempo) {
        toast.error('      (: 3-1-2-0)');
        return;
      }
      if (formData.system === 'isometric' && !formData.holdTime) {
        toast.error('     ');
        return;
      }
      
      item = { 
        ...item, 
        type: formData.system as WorkoutItem['type'], 
        name: formData.ex1, 
        name2: formData.ex2 || '', 
        name3: formData.name3 || '', 
        name4: formData.name4 || '',
        sets: formData.sets, 
        reps: formData.reps,
        dropCount: formData.dropCount || '',
        restPauseTime: formData.restPauseTime || '',
        tempo: formData.tempo || '',
        holdTime: formData.holdTime || ''
      };
      
      // Reset form after successful add
      setFormData(initialFormState);
    } else if (mode === 'cardio') {
      if (!formData.cType || !formData.cTime) {
        toast.error('      ');
        return;
      }
      item = { ...item, type: 'normal', name: formData.cType, duration: formData.cTime, intensity: formData.cInt || formData.cIntensity || '' };
    } else if (mode === 'corrective') {
      if (!formData.corrEx) {
        toast.error('   ');
        return;
      }
      item = { ...item, type: 'nasm-corrective', name: formData.corrEx, sets: formData.sets, reps: formData.reps };
    } else if (mode === 'warmup') {
      if (!formData.warmupType) {
        toast.error('     ');
        return;
      }
      item = { ...item, type: undefined, name: formData.warmupType, duration: formData.cTime || '5', sets: formData.sets, reps: formData.reps };
    } else if (mode === 'cooldown') {
      if (!formData.cooldownType) {
        toast.error('     ');
        return;
      }
      item = { ...item, type: undefined, name: formData.cooldownType, duration: formData.cTime || '5', sets: formData.sets, reps: formData.reps };
    }

    if (!item.name) {
      toast.error('  ');
      return;
    }

    newUser.plans.workouts[day].push(item);
    onUpdateUser(newUser);
    setFormData(initialFormState);
    toast.success(' ');
  };

  const workoutItems = activeUser.plans?.workouts?.[day] || [];

  // Show enhanced loading state until data is loaded
  if (!dataLoaded) {
    return (
      <div className="space-y-6 animate-fade-in">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <CardSkeleton variant="shimmer" lines={4} />
          <CardSkeleton variant="wave" lines={3} />
        </div>

        <div className="space-y-4">
          <TextSkeleton lines={1} className="h-8" variant="pulse" />
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {Array.from({ length: 6 }).map((_, index) => (
              <CardSkeleton key={index} variant="bounce" lines={2} />
            ))}
          </div>
        </div>

        <CardSkeleton variant="shimmer" lines={1} className="h-32" />
      </div>
    );
  }

  return (
    <div className="space-y-6 animate-fade-in">
      {/*   -     */}
      <div className="glass-panel p-4 rounded-3xl border border-[var(--glass-border)] shadow-lg backdrop-blur-xl">
        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
          {/*   */}
          <div className="flex gap-2 overflow-x-auto pb-2 md:pb-0 flex-1">
            {[1, 2, 3, 4, 5, 6, 7].map(d => (
              <button 
                key={d} 
                onClick={() => setDay(d)} 
                className={`px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all duration-300 ${
                  day === d 
                    ? 'text-white shadow-lg scale-105' 
                    : 'bg-[var(--glass-bg)] text-[var(--text-secondary)] hover:bg-[var(--text-primary)]/10 hover:text-[var(--accent-color)] border border-[var(--glass-border)]'
                }`}
                style={day === d ? { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))`, boxShadow: `0 10px 30px var(--accent-color)/30` } : {}}
                aria-label={` ${d}`}
                type="button"
              >
                <span className="flex items-center gap-2">
                  <span> {d}</span>
                  {activeUser.plans?.workouts?.[d]?.length > 0 && (
                    <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold ${
                      day === d ? 'bg-white/30 text-white' : 'bg-[var(--accent-color)]/20 text-[var(--accent-color)]'
                    }`}>
                      {activeUser.plans.workouts[d].length}
                    </span>
                  )}
                </span>
              </button>
            ))}
          </div>
          
          {/*   */}
          <div className="flex gap-2 shrink-0">
            <button
              onClick={() => setShowSaveModal(true)}
              disabled={!canEdit}
              className={`btn-glass bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-500/30 text-xs px-4 py-2 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-emerald-500/20 ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
              aria-label="  "
              type="button"
            >
              <Save size={14} className="inline ml-1"/>  
            </button>
            <button
              onClick={() => setShowLoadModal(true)}
              disabled={!canEdit}
              className={`btn-glass bg-purple-500/10 text-purple-600 dark:text-purple-400 border border-purple-500/30 text-xs px-4 py-2 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/20 ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
              aria-label="   "
              type="button"
            >
              <Download size={14} className="inline ml-1"/>  
            </button>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
        {/*    -   */}
        <div className="lg:col-span-4 space-y-6">
          <div className="glass-panel p-6 rounded-3xl sticky top-6 border border-[var(--glass-border)] shadow-xl backdrop-blur-xl">
            <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
              <span className="w-1.5 h-6 bg-gradient-to-b from-[var(--accent-color)] to-[var(--accent-secondary)] rounded-full animate-pulse-glow"></span>
                
            </h3>
            
            <div className="flex flex-wrap gap-2 mb-5 bg-[var(--input-bg)] p-1.5 rounded-2xl border border-[var(--glass-border)]" role="tablist" aria-label="  ">
              {['warmup', 'resist', 'cardio', 'corrective', 'cooldown'].map(m => (
                <button 
                  key={m} 
                  onClick={() => setMode(m)} 
                  className={`flex-1 text-[11px] font-bold py-2.5 rounded-xl transition-all duration-300 ${
                    mode === m 
                      ? 'text-white shadow-lg scale-105' 
                      : 'text-[var(--text-secondary)] hover:text-[var(--accent-color)] hover:bg-[var(--text-primary)]/5'
                  }`}
                  style={mode === m ? { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))`, boxShadow: `0 10px 30px var(--accent-color)/30` } : {}}
                  role="tab"
                  aria-selected={mode === m}
                  aria-controls={`${m}-panel`}
                  aria-label={` : ${m === 'warmup' ? ' ' : m === 'resist' ? '' : m === 'cardio' ? '' : m === 'corrective' ? '' : ' '}`}
                  type="button"
                >
                  {m === 'warmup' ? ' ' : m === 'resist' ? ' ' : m === 'cardio' ? ' ' : m === 'corrective' ? ' ' : ' '}
                </button>
              ))}
            </div>

            <div className="space-y-3">
              {/*   */}
              {mode === 'warmup' && (
                <>
                  <select className="input-glass font-bold" value={formData.warmupType} onChange={e => setFormData({ ...formData, warmupType: e.target.value })}>
                    <option value="">   ...</option>
                    {warmupExercises ? warmupExercises.map((ex: string) => <option key={ex} value={ex}>{ex}</option>) : <option disabled>  ...</option>}
                  </select>
                  <input className="input-glass" type="number" placeholder="  ()" value={formData.cTime} onChange={e => setFormData({ ...formData, cTime: e.target.value })} />
                  <div className="text-[10px] text-[var(--text-secondary)] bg-amber-500/10 border border-amber-500/20 rounded-lg p-2">
                        5-15            .
                  </div>
                </>
              )}

              {/*   */}
              {mode === 'cooldown' && (
                <>
                  <select className="input-glass font-bold" value={formData.cooldownType} onChange={e => setFormData({ ...formData, cooldownType: e.target.value })}>
                    <option value="">   ...</option>
                    {cooldownExercises ? cooldownExercises.map((ex: string) => <option key={ex} value={ex}>{ex}</option>) : <option disabled>  ...</option>}
                  </select>
                  <input className="input-glass" type="number" placeholder="  ()" value={formData.cTime} onChange={e => setFormData({ ...formData, cTime: e.target.value })} />
                  <div className="text-[10px] text-[var(--text-secondary)] bg-[var(--accent-color)]/10 border border-[var(--accent-color)]/20 rounded-lg p-2">
                        5-10            .
                  </div>
                </>
              )}

              {/*  */}
              {mode === 'resist' && (
                <>
                  <select className="input-glass" value={formData.system} onChange={e => setFormData({ ...formData, system: e.target.value })}>
                    <option value="normal">  (Straight Set)</option>
                    <option value="superset"> (  )</option>
                    <option value="triset"> ( )</option>
                    <option value="giantset"> (+ )</option>
                    <option value="dropset"> (Drop Set)</option>
                    <option value="pyramid"> (Pyramid)</option>
                    <option value="restpause">- (Rest-Pause)</option>
                    <option value="german-volume">  (10x10)</option>
                    <option value="fst7">FST-7</option>
                    <option value="5x5">5x5 (Stronglifts)</option>
                    <option value="cluster"> </option>
                    <option value="myorep"> (Myo-Reps)</option>
                    <option value="tempo"> (Tempo)</option>
                    <option value="isometric"></option>
                    <option value="negatives"></option>
                    <option value="21s">21s</option>
                  </select>
                  
                  <div className="grid grid-cols-2 gap-2">
                    <select className="input-glass text-xs" value={formData.muscle} onChange={e => setFormData({ ...formData, muscle: e.target.value, subMuscle: '' })}>
                      <option value="">...</option>
                      {resistanceExercises ? Object.keys(resistanceExercises).map(m => <option key={m} value={m}>{m}</option>) : null}
                    </select>
                    <select className="input-glass text-xs" value={formData.subMuscle} onChange={e => setFormData({ ...formData, subMuscle: e.target.value })}>
                      <option value="">...</option>
                      {subMuscles.map(s => <option key={s} value={s}>{s}</option>)}
                    </select>
                  </div>

                  {/*   */}
                  {exercises.length > 10 && (
                    <div className="relative">
                      <input
                        type="text"
                        className="input-glass pl-8 text-sm"
                        placeholder=" ..."
                        value={searchTerm}
                        onChange={e => setSearchTerm(e.target.value)}
                      />
                      <Search size={14} className="absolute left-3 top-3.5 text-slate-400" />
                    </div>
                  )}

                  <select className="input-glass font-bold text-[var(--accent-color)]" value={formData.ex1} onChange={e => setFormData({ ...formData, ex1: e.target.value })}>
                    <option value=""> ...</option>
                    {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                  </select>

                  {/*  -   2  */}
                  {formData.system === 'superset' && (
                    <select className="input-glass border-r-4 border-r-yellow-400 font-bold text-yellow-600 dark:text-yellow-400" value={formData.ex2} onChange={e => setFormData({ ...formData, ex2: e.target.value })}>
                      <option value="">+    ()</option>
                      {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                    </select>
                  )}

                  {/*  -   3  */}
                  {formData.system === 'triset' && (
                    <>
                      <select className="input-glass border-r-4 border-r-yellow-400 font-bold text-yellow-600 dark:text-yellow-400" value={formData.ex2} onChange={e => setFormData({ ...formData, ex2: e.target.value })}>
                        <option value="">+    ()</option>
                        {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                      </select>
                      <select className="input-glass border-r-4 border-r-purple-400 font-bold text-purple-600 dark:text-purple-400" value={formData.name3} onChange={e => setFormData({ ...formData, name3: e.target.value })}>
                        <option value="">+    ()</option>
                        {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                      </select>
                    </>
                  )}

                  {/*  -   4+  */}
                  {formData.system === 'giantset' && (
                    <>
                      <select className="input-glass border-r-4 border-r-yellow-400 font-bold text-yellow-600 dark:text-yellow-400" value={formData.ex2} onChange={e => setFormData({ ...formData, ex2: e.target.value })}>
                        <option value="">+    ()</option>
                        {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                      </select>
                      <select className="input-glass border-r-4 border-r-purple-400 font-bold text-purple-600 dark:text-purple-400" value={formData.name3} onChange={e => setFormData({ ...formData, name3: e.target.value })}>
                        <option value="">+    ()</option>
                        {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                      </select>
                      <select className="input-glass border-r-4 border-r-red-400 font-bold text-red-600 dark:text-red-400" value={formData.name4} onChange={e => setFormData({ ...formData, name4: e.target.value })}>
                        <option value="">+    ()</option>
                        {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                      </select>
                    </>
                  )}

                  {/*  -     */}
                  {formData.system === 'dropset' && (
                    <div className="bg-yellow-500/10 border border-yellow-500/30 p-3 rounded-lg">
                      <label className="text-xs text-yellow-600 dark:text-yellow-400 font-bold block mb-1">  (Drop Count)</label>
                      <input className="input-glass text-center font-bold" type="number" placeholder=": 2  3" value={formData.dropCount} onChange={e => setFormData({ ...formData, dropCount: e.target.value })} />
                      <p className="text-[10px] text-yellow-600/70 mt-1">: 2  =   2 </p>
                    </div>
                  )}

                  {/* - -       */}
                  {formData.system === 'restpause' && (
                    <div className="bg-purple-500/10 border border-purple-500/30 p-3 rounded-lg">
                      <label className="text-xs text-purple-600 dark:text-purple-400 font-bold block mb-1">    ()</label>
                      <input className="input-glass text-center font-bold" type="number" placeholder=": 15-20" value={formData.restPauseTime} onChange={e => setFormData({ ...formData, restPauseTime: e.target.value })} />
                      <p className="text-[10px] text-purple-600/70 mt-1">    </p>
                    </div>
                  )}

                  {/*  -     */}
                  {formData.system === 'tempo' && (
                    <div className="bg-[var(--accent-color)]/10 border border-[var(--accent-color)]/30 p-3 rounded-lg">
                      <label className="text-xs text-[var(--accent-color)] font-bold block mb-1">  (: 3-1-2-0)</label>
                      <input className="input-glass text-center font-mono font-bold" placeholder="3-1-2-0" value={formData.tempo} onChange={e => setFormData({ ...formData, tempo: e.target.value })} />
                      <p className="text-[10px] text-[var(--accent-color)]/70 mt-1">: --- ()</p>
                    </div>
                  )}

                  {/*  -     */}
                  {formData.system === 'isometric' && (
                    <div className="bg-green-500/10 border border-green-500/30 p-3 rounded-lg">
                      <label className="text-xs text-green-600 dark:text-green-400 font-bold block mb-1">  ()</label>
                      <input className="input-glass text-center font-bold" type="number" placeholder=": 30-60" value={formData.holdTime} onChange={e => setFormData({ ...formData, holdTime: e.target.value })} />
                      <p className="text-[10px] text-green-600/70 mt-1">    </p>
                    </div>
                  )}

                  {/*  -    */}
                  {formData.system === 'pyramid' && (
                    <div className="bg-indigo-500/10 border border-indigo-500/30 p-3 rounded-lg">
                      <p className="text-xs text-indigo-600 dark:text-indigo-400 font-bold mb-1"> </p>
                      <p className="text-[10px] text-indigo-600/70">/       </p>
                    </div>
                  )}

                  {/*   - 10x10 */}
                  {formData.system === 'german-volume' && (
                    <div className="bg-red-500/10 border border-red-500/30 p-3 rounded-lg">
                      <p className="text-xs text-red-600 dark:text-red-400 font-bold mb-1">  (10x10)</p>
                      <p className="text-[10px] text-red-600/70">10   10   60% 1RM</p>
                    </div>
                  )}

                  {/* FST-7 */}
                  {formData.system === 'fst7' && (
                    <div className="bg-pink-500/10 border border-pink-500/30 p-3 rounded-lg">
                      <p className="text-xs text-pink-600 dark:text-pink-400 font-bold mb-1">FST-7 (Fascia Stretch Training)</p>
                      <p className="text-[10px] text-pink-600/70">7    30-45 </p>
                    </div>
                  )}

                  {/* 5x5 */}
                  {formData.system === '5x5' && (
                    <div className="bg-blue-500/10 border border-blue-500/30 p-3 rounded-lg">
                      <p className="text-xs text-blue-600 dark:text-blue-400 font-bold mb-1">5x5 (Stronglifts)</p>
                      <p className="text-[10px] text-blue-600/70">5   5  -     </p>
                    </div>
                  )}

                  {/*  */}
                  {formData.system === 'cluster' && (
                    <div className="bg-amber-500/10 border border-amber-500/30 p-3 rounded-lg">
                      <p className="text-xs text-amber-600 dark:text-amber-400 font-bold mb-1"> </p>
                      <p className="text-[10px] text-amber-600/70">        </p>
                    </div>
                  )}

                  {/*  */}
                  {formData.system === 'myorep' && (
                    <div className="bg-indigo-500/10 border border-indigo-500/30 p-3 rounded-lg">
                      <p className="text-xs text-indigo-600 dark:text-indigo-400 font-bold mb-1"> (Myo-Reps)</p>
                      <p className="text-[10px] text-indigo-600/70">  +      5-10 </p>
                    </div>
                  )}

                  {/*  */}
                  {formData.system === 'negatives' && (
                    <div className="bg-violet-500/10 border border-violet-500/30 p-3 rounded-lg">
                      <p className="text-xs text-violet-600 dark:text-violet-400 font-bold mb-1"> (Eccentric)</p>
                      <p className="text-[10px] text-violet-600/70">     ( )</p>
                    </div>
                  )}

                  {/* 21s */}
                  {formData.system === '21s' && (
                    <div className="bg-rose-500/10 border border-rose-500/30 p-3 rounded-lg">
                      <p className="text-xs text-rose-600 dark:text-rose-400 font-bold mb-1">21s</p>
                      <p className="text-[10px] text-rose-600/70">7    + 7    + 7  </p>
                    </div>
                  )}

                  {warning && (
                    <div className="bg-red-500/10 border border-red-500/30 p-2 rounded-lg flex items-center gap-2 text-red-500 text-xs animate-pulse">
                      <AlertTriangle size={14} /> {warning}
                    </div>
                  )}

                  <div className="grid grid-cols-3 gap-2">
                    <input className="input-glass text-center px-1" placeholder="" value={formData.sets} onChange={e => setFormData({ ...formData, sets: e.target.value })} />
                    <input className="input-glass text-center px-1 col-span-2" placeholder="" value={formData.reps} onChange={e => setFormData({ ...formData, reps: e.target.value })} />
                  </div>
                </>
              )}

              {/*  */}
              {mode === 'cardio' && (
                <>
                  <select className="input-glass" value={formData.cCategory} onChange={e => setFormData({ ...formData, cCategory: e.target.value, cType: '' })}>
                    <option value=""> ...</option>
                    {cardioExercises ? Object.keys(cardioExercises).map(cat => <option key={cat} value={cat}>{cat}</option>) : <option disabled>  ...</option>}
                  </select>
                  {formData.cCategory && (
                    <select className="input-glass font-bold" value={formData.cType} onChange={e => setFormData({ ...formData, cType: e.target.value })}>
                      <option value=""> ...</option>
                      {cardioExercises && (cardioExercises[formData.cCategory] as any)?.map((ex: any) => <option key={ex} value={ex}>{ex}</option>)}
                    </select>
                  )}
                  <input className="input-glass" placeholder=" ()" type="number" value={formData.cTime} onChange={e => setFormData({ ...formData, cTime: e.target.value })} />
                  <select className="input-glass" value={formData.cIntensity} onChange={e => setFormData({ ...formData, cIntensity: e.target.value })}>
                    <option value=""> ...</option>
                    <option value="low"> (50-60%)</option>
                    <option value="moderate"> (60-70%)</option>
                    <option value="high"> (70-85%)</option>
                    <option value="very-high">  (85%+)</option>
                  </select>
                </>
              )}

              {/*  */}
              {mode === 'corrective' && (
                <>
                  <select className="input-glass" value={formData.corrType} onChange={e => setFormData({ ...formData, corrType: e.target.value })}>
                    <option value=""> ...</option>
                    {correctiveExercises ? Object.keys(correctiveExercises).map(k => <option key={k} value={k}>{k}</option>) : <option disabled>  ...</option>}
                  </select>
                  <select className="input-glass" value={formData.corrEx} onChange={e => setFormData({ ...formData, corrEx: e.target.value })}>
                    <option value="">...</option>
                    {corrExercisesList.map(e => <option key={e} value={e}>{e}</option>)}
                  </select>
                  <input className="input-glass" placeholder="/" value={formData.reps} onChange={e => setFormData({ ...formData, reps: e.target.value })} />
                </>
              )}

              {/*   */}
              {(mode === 'resist' || mode === 'corrective') && (
                <div className="flex gap-2">
                  <input className="input-glass flex-1 text-center" placeholder="" type="number" value={formData.rest} onChange={e => setFormData({ ...formData, rest: e.target.value })} />
                  <select className="input-glass w-24 text-center" value={formData.restUnit} onChange={e => setFormData({ ...formData, restUnit: e.target.value })}>
                    <option value="s"></option>
                    <option value="m"></option>
                  </select>
                </div>
              )}

              <input className="input-glass" placeholder=" " value={formData.note} onChange={e => setFormData({ ...formData, note: e.target.value })} />
            </div>
            
            <button
              onClick={handleAddExercise}
              disabled={!canEdit}
              className={`w-full btn-glass text-white mt-6 py-3.5 font-bold text-sm transition-all duration-300 hover:scale-[1.02] ${!canEdit ? 'opacity-50 cursor-not-allowed' : ''}`}
              style={!canEdit ? {} : { background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
              aria-label="   "
              aria-disabled={!canEdit}
              type="button"
            >
              <Plus size={18} className="inline ml-2"/>   
            </button>
          </div>
        </div>

        {/*    -   */}
        <div className="lg:col-span-8 glass-panel rounded-3xl p-0 overflow-hidden min-h-[500px] border border-[var(--glass-border)] shadow-xl backdrop-blur-xl">
          <div className="bg-gradient-to-r from-[var(--accent-color)]/10 via-[var(--accent-secondary)]/5 to-transparent px-6 py-4 border-b border-[var(--glass-border)] flex justify-between items-center backdrop-blur-sm transition-all duration-500">
            <div className="flex items-center gap-3">
              <span className="w-1.5 h-6 bg-gradient-to-b from-[var(--accent-color)] to-[var(--accent-secondary)] rounded-full animate-pulse-glow"></span>
              <span className="text-base font-bold text-[var(--text-primary)]">  {day}</span>
            </div>
            <div className="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[var(--accent-color)]/10 border border-[var(--accent-color)]/20">
              <span className="text-xs font-semibold text-[var(--accent-color)]">{workoutItems.length}</span>
              <span className="text-xs text-[var(--text-secondary)]"></span>
            </div>
          </div>
          
          <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>
            {workoutItems.length > 0 ? (
              <>
                {/* Desktop View - Table */}
                <div className="hidden md:block overflow-x-auto px-6 py-4">
                  <table className="w-full text-right text-xs sm:text-sm">
                    <thead className="bg-[var(--text-primary)]/3 text-[var(--text-secondary)] text-xs border-b border-[var(--glass-border)] sticky top-0 backdrop-blur-sm">
                      <tr>
                        <th className="p-3 w-12 text-center"></th>
                        <th className="p-4 font-bold"> </th>
                        <th className="p-4 w-20 text-center font-bold"></th>
                        <th className="p-4 w-24 text-center font-bold"></th>
                        <th className="p-4 w-28 text-center font-bold"></th>
                        <th className="p-4 w-12 text-center"></th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-[var(--glass-border)]">
                      <SortableContext items={workoutItems.map((_, idx) => `${day}-${idx}`)} strategy={verticalListSortingStrategy}>
                        {workoutItems.map((item, idx) => (
                          <motion.tr
                            key={`${day}-${idx}`}
                            initial={{ opacity: 0, y: 10 }}
                            animate={{ opacity: 1, y: 0 }}
                            exit={{ opacity: 0, y: -10 }}
                            transition={{ delay: idx * 0.05 }}
                          >
                            <ExerciseRow
                              item={item}
                              idx={idx}
                              day={day}
                              onDelete={handleDeleteExercise}
                              canEdit={canEdit}
                            />
                          </motion.tr>
                        ))}
                      </SortableContext>
                    </tbody>
                  </table>
                </div>

                {/* Mobile View - Card Stack */}
                <div className="md:hidden p-4 sm:p-6 overflow-y-auto max-h-[600px]">
                  <SortableContext items={workoutItems.map((_, idx) => `${day}-${idx}`)} strategy={verticalListSortingStrategy}>
                    <AnimatePresence>
                      {workoutItems.map((item, idx) => (
                        <MobileExerciseCard
                          key={`${day}-${idx}`}
                          item={item}
                          idx={idx}
                          day={day}
                          onDelete={handleDeleteExercise}
                          canEdit={canEdit}
                        />
                      ))}
                    </AnimatePresence>
                  </SortableContext>
                </div>
              </>
            ) : (
              <div className="p-8 sm:p-12">
                <EmptyState
                  icon={<Dumbbell size={32} className="text-[var(--accent-color)]" />}
                  title="   "
                  description="       .         ."
                />
              </div>
            )}
          </DndContext>
        </div>
      </div>

      {/* Save Plan Modal */}
      <SavePlanModal 
        isOpen={showSaveModal} 
        onClose={() => setShowSaveModal(false)} 
        fullWeekData={activeUser.plans?.workouts || {}}
      />

      {/* Load Template Modal */}
      <TemplateLoader 
        isOpen={showLoadModal} 
        onClose={() => setShowLoadModal(false)} 
        clientId={String(activeUser.id)}
        onTemplateLoaded={() => {
          // Refresh user data after loading template
          onUpdateUser(activeUser);
        }}
      />
    </div>
  );
};

export default TrainingPanel;


==================================================
FILE: .\src\components\UserList.tsx
==================================================
import React, { useState, useMemo, useCallback } from 'react';
import { Search, UserPlus, Edit, Trash2, Printer, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';
import type { User, UserId } from '../types/index';
import { useApp } from '../context/AppContext';
import { useDebounce } from '../hooks/useDebounce';

const escapeHtml = (text: unknown): string => {
    if (text == null || text === undefined) return '';
    const str = String(text);
    const map: Record<string, string> = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
    };
    return str.replace(/[&<>"']/g, (m) => map[m]);
};

interface UserListProps {
  users: User[];
  onSelectUser?: (id: UserId) => void;
  onAddUser?: () => void;
  onEditUser?: (id: UserId) => void;
  onDeleteUser?: (id: UserId) => void;
  onPrintUser?: (id: UserId) => void;
}

const ITEMS_PER_PAGE = 10;

const UserListComponent: React.FC<UserListProps> = ({ users, onSelectUser, onAddUser, onEditUser, onDeleteUser, onPrintUser }) => {
  const { hasPermission } = useApp();
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const debouncedSearch = useDebounce(searchTerm, 300);

  const filteredUsers = useMemo(() => 
    users.filter(u => 
      u.name.toLowerCase().includes(debouncedSearch.toLowerCase()) || 
      (u.phone && u.phone.includes(debouncedSearch))
    ), [users, debouncedSearch]
  );

  // Pagination
  const totalPages = Math.ceil(filteredUsers.length / ITEMS_PER_PAGE);
  const paginatedUsers = useMemo(() => {
    const start = (currentPage - 1) * ITEMS_PER_PAGE;
    return filteredUsers.slice(start, start + ITEMS_PER_PAGE);
  }, [filteredUsers, currentPage]);

  // Reset page when search changes
  React.useEffect(() => {
    setCurrentPage(1);
  }, [debouncedSearch]);

  const getFinancialStatus = useCallback((user: User) => {
      if (!user.financial?.startDate) return { text: '', color: 'text-slate-400 bg-slate-500/10', icon: <AlertTriangle size={16}/> };
      
      try {
        const start = new Date(user.financial.startDate);
        if (isNaN(start.getTime())) return { text: '', color: 'text-slate-400 bg-slate-500/10', icon: <AlertTriangle size={16}/> };
        
        const duration = Number(user.financial.duration ?? 1) || 1;
        const end = new Date(start);
        end.setMonth(end.getMonth() + duration);
        
        const now = new Date();
        const daysLeft = Math.ceil((end.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));

        if (isNaN(daysLeft)) return { text: '', color: 'text-slate-400 bg-slate-500/10', icon: <AlertTriangle size={16}/> };
        if (daysLeft < 0) return { text: ' ', color: 'text-red-500 bg-red-500/10', icon: <XCircle size={16}/> };
        if (daysLeft <= 5) return { text: `${daysLeft}  `, color: 'text-yellow-500 bg-yellow-500/10', icon: <AlertTriangle size={16}/> };
        return { text: '', color: 'text-emerald-500 bg-emerald-500/10', icon: <CheckCircle size={16}/> };
      } catch {
        return { text: '', color: 'text-slate-400 bg-slate-500/10', icon: <AlertTriangle size={16}/> };
      }
  }, []);

  return (
    <div className="space-y-6 animate-fade-in">
      {/*    */}
      <div className="flex flex-col md:flex-row justify-between items-center glass-panel p-5 rounded-2xl gap-4 sticky top-0 z-20">
        <div>
          <h2 className="text-2xl font-black text-[var(--text-primary)]">  ({filteredUsers.length})</h2>
        </div>
        <div className="flex gap-3 w-full md:w-auto">
          <div className="relative flex-1 md:w-64">
            <input 
              type="text" 
              placeholder="..." 
              className="input-glass pl-10 py-2.5"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
            <Search className="absolute left-3 top-3 text-slate-400 w-4 h-4" />
          </div>
          {hasPermission('manageUsers') && (
            <button onClick={() => onAddUser && onAddUser()} className="btn-glass bg-[var(--accent-color)] hover:bg-[var(--accent-color)]/90 text-white text-sm py-2.5">
            <UserPlus size={18} /> 
          </button>
          )}
        </div>
      </div>

      {/*   () */}
      <div className="flex flex-col gap-4">
          {paginatedUsers.map((u, index) => {
            const status = getFinancialStatus(u);
            const uniqueKey = u.id ? `user-${u.id}` : `user-index-${index}`;
            return (
            <div key={uniqueKey} className="glass-card flex flex-col md:flex-row items-center justify-between p-4 gap-4 group hover:border-[var(--accent-color)]/50 animate-fade-in" style={{ animationDelay: `${index * 0.03}s` }}>
              
              {/*   */}
              <div className="flex items-center gap-4 w-full md:w-auto">
                  <div className="w-12 h-12 rounded-full bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-[var(--accent-color)]/30 transition-all duration-500 group-hover:scale-110 group-hover:shadow-xl group-hover:shadow-[var(--accent-color)]/40">
                      {u.name.charAt(0)}
                  </div>
                  <div>
                      <h3 className="font-bold text-lg text-[var(--text-primary)]">{u.name}</h3>
                      <div className="flex items-center gap-3 text-xs text-[var(--text-secondary)] mt-1">
                          <span className="flex items-center gap-1 bg-[var(--glass-border)] px-2 py-0.5 rounded">{u.age || '-'} </span>
                          <span className="flex items-center gap-1 bg-[var(--glass-border)] px-2 py-0.5 rounded">{u.weight || '-'} kg</span>
                          <span className={`flex items-center gap-1 px-2 py-0.5 rounded font-bold ${status.color}`}>
                              {status.icon} {status.text}
                          </span>
                      </div>
                  </div>
              </div>

              {/*   */}
              <div className="flex items-center gap-2 w-full md:w-auto justify-end" style={{ position: 'relative', zIndex: 50 }}>
                {hasPermission('viewProgram', u.id) && (
                <button 
                    type="button"
                    onClick={() => onSelectUser && onSelectUser(u.id)} 
                    className="btn-glass bg-[var(--accent-color)]/10 hover:bg-[var(--accent-color)] hover:text-white text-[var(--accent-color)] border border-[var(--accent-color)]/20 text-sm flex-1 md:flex-none cursor-pointer"
                    style={{ pointerEvents: 'auto' }}
                    aria-label={`  ${escapeHtml(u.name || '')}`}
                >
                   
                </button>
                )}
                {hasPermission('manageUsers', u.id) && (
                <button 
                  type="button"
                  onClick={() => onEditUser && onEditUser(u.id)} 
                  className="p-2 rounded-lg bg-[var(--text-primary)]/5 hover:bg-[var(--text-primary)]/10 text-[var(--text-secondary)] transition cursor-pointer" 
                  title=""
                  aria-label={`  ${escapeHtml(u.name || '')}`}
                  style={{ pointerEvents: 'auto' }}
                >
                  <Edit size={18} aria-hidden="true"/>
                </button>
                )}
                {hasPermission('printProgram', u.id) && (
                <button 
                  type="button"
                  onClick={() => onPrintUser && onPrintUser(u.id)} 
                  className="p-2 rounded-lg bg-[var(--text-primary)]/5 hover:bg-[var(--text-primary)]/10 text-[var(--text-secondary)] transition cursor-pointer" 
                  title=""
                  aria-label={`  ${escapeHtml(u.name || '')}`}
                  style={{ pointerEvents: 'auto' }}
                >
                  <Printer size={18} aria-hidden="true"/>
                </button>
                )}
                {hasPermission('manageUsers', u.id) && (
                <button 
                  type="button"
                  onClick={() => onDeleteUser && onDeleteUser(u.id)} 
                  className="p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition cursor-pointer" 
                  title=""
                  aria-label={` ${escapeHtml(u.name || '')}`}
                  style={{ pointerEvents: 'auto' }}
                >
                  <Trash2 size={18} aria-hidden="true"/>
                </button>
                )}
              </div>
            </div>
          )})}
          
          {filteredUsers.length === 0 && (
              <div className="text-center py-10 opacity-50">  .</div>
          )}
      </div>

      {/* Pagination */}
      {totalPages > 1 && (
        <div className="flex items-center justify-center gap-2 mt-6">
          <button
            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
            disabled={currentPage === 1}
            className="px-3 py-1.5 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:border-[var(--accent-color)]/50 transition"
          >
            
          </button>
          
          <div className="flex items-center gap-1">
            {Array.from({ length: totalPages }, (_, i) => i + 1)
              .filter(page => {
                if (totalPages <= 7) return true;
                if (page === 1 || page === totalPages) return true;
                if (Math.abs(page - currentPage) <= 1) return true;
                return false;
              })
              .map((page, idx, arr) => (
                <React.Fragment key={page}>
                  {idx > 0 && arr[idx - 1] !== page - 1 && (
                    <span className="px-2 text-[var(--text-secondary)]">...</span>
                  )}
                  <button
                    onClick={() => setCurrentPage(page)}
                    className={`w-8 h-8 rounded-lg text-sm font-semibold transition ${
                      currentPage === page
                        ? 'bg-[var(--accent-color)] text-white'
                        : 'bg-[var(--glass-bg)] border border-[var(--glass-border)] hover:border-[var(--accent-color)]/50'
                    }`}
                  >
                    {page}
                  </button>
                </React.Fragment>
              ))}
          </div>
          
          <button
            onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
            disabled={currentPage === totalPages}
            className="px-3 py-1.5 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:border-[var(--accent-color)]/50 transition"
          >
            
          </button>
          
          <span className="text-xs text-[var(--text-secondary)] mr-4">
             {currentPage}  {totalPages} ({filteredUsers.length} )
          </span>
        </div>
      )}
    </div>
  );
};

const UserList = React.memo(UserListComponent);
UserList.displayName = 'UserList';

export default UserList;

==================================================
FILE: .\src\components\UserModal.tsx
==================================================
import React, { Suspense } from 'react';
import { X, Save, User as UserIcon, Activity, Heart, DollarSign } from 'lucide-react';
import { useUserForm } from '../hooks/useUserForm';
import { IdentityTab } from './tabs/IdentityTab';
import { AnthropometryTab } from './tabs/AnthropometryTab';
import { MedicalTab } from './tabs/MedicalTab';
import { FinancialTab } from './tabs/FinancialTab';
import type { User, UserInput } from '../types/index';

interface UserModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSave: (userData: UserInput) => void;
  initialData?: User | null;
}

const UserModal: React.FC<UserModalProps> = ({ isOpen, onClose, onSave, initialData }) => {
  const form = useUserForm(initialData);

  if (!isOpen) return null;

  const tabs = [
    { id: 'identity', label: ' ', icon: <UserIcon size={16} /> },
    { id: 'anthropometry', label: '', icon: <Activity size={16} /> },
    { id: 'medical', label: ' ', icon: <Heart size={16} /> },
    { id: 'financial', label: ' ', icon: <DollarSign size={16} /> }
  ];

  const renderTabContent = () => {
    switch (form.activeTab) {
      case 'identity':
        return <IdentityTab form={form} />;
      case 'anthropometry':
        return <AnthropometryTab form={form} />;
      case 'medical':
        return <MedicalTab form={form} />;
      case 'financial':
        return <FinancialTab form={form} />;
      default:
        return <IdentityTab form={form} />;
    }
  };

  return (
    <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
      <div className="glass-card rounded-2xl border border-[var(--glass-border)] w-full max-w-4xl max-h-[90vh] overflow-hidden">
        {/* Header */}
        <div className="flex items-center justify-between p-6 border-b border-[var(--glass-border)]">
          <h2 className="text-xl font-bold text-[var(--text-primary)]">
            {initialData ? ' ' : '  '}
          </h2>
          <button
            onClick={onClose}
            className="p-2 rounded-xl hover:bg-[var(--glass-bg)] transition-colors"
          >
            <X size={24} />
          </button>
        </div>

        {/* Tabs */}
        <div className="flex border-b border-[var(--glass-border)] overflow-x-auto">
          {tabs.map(tab => (
            <button
              key={tab.id}
              onClick={() => form.setActiveTab(tab.id)}
              className={`flex items-center gap-2 px-6 py-4 font-semibold transition-colors whitespace-nowrap ${
                form.activeTab === tab.id
                  ? 'text-[var(--accent-color)] border-b-2 border-[var(--accent-color)]'
                  : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)]'
              }`}
            >
              {tab.icon}
              {tab.label}
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="p-6 max-h-[60vh] overflow-y-auto">
          <Suspense fallback={<div className="text-center py-8">  ...</div>}>
            {renderTabContent()}
          </Suspense>
        </div>

        {/* Footer */}
        <div className="flex items-center justify-between p-6 border-t border-[var(--glass-border)]">
          <div className="text-sm text-[var(--text-secondary)]">
            {Object.keys(form.errors).length > 0 && (
              <span className="text-red-500">
                     
              </span>
            )}
          </div>

          <div className="flex gap-3">
            <button
              onClick={onClose}
              className="px-4 py-2 rounded-xl font-semibold text-[var(--text-secondary)] hover:bg-[var(--glass-bg)] transition-colors"
            >
              
            </button>
            <button
              onClick={() => form.handleSubmit(onSave)}
              disabled={form.isSubmitting}
              className="flex items-center gap-2 px-6 py-2 rounded-xl font-semibold text-white bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all"
            >
              <Save size={16} />
              {form.isSubmitting ? '  ...' : ''}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default UserModal;

==================================================
FILE: .\src\components\backgrounds\index.ts
==================================================
export { default as LightRays } from './LightRays';

==================================================
FILE: .\src\components\backgrounds\LightRays.css
==================================================
/* LightRays Background Component Styles */

.light-rays-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -1;
}

.light-rays-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* Individual rays with different angles and styles */
.light-ray {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  animation: lightRayPulse var(--duration, 8s) ease-in-out infinite;
  transform-origin: center;
  pointer-events: none;
}

.ray-1 {
  background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.08) 50%, transparent 70%);
  filter: blur(1px);
}

.ray-2 {
  background: linear-gradient(135deg, transparent 25%, rgba(255, 255, 255, 0.06) 50%, transparent 75%);
  filter: blur(0.8px);
}

.ray-3 {
  background: linear-gradient(225deg, transparent 35%, rgba(255, 255, 255, 0.07) 50%, transparent 65%);
  filter: blur(1.2px);
}

.ray-4 {
  background: linear-gradient(315deg, transparent 20%, rgba(255, 255, 255, 0.05) 50%, transparent 80%);
  filter: blur(0.9px);
}

.ray-5 {
  background: linear-gradient(90deg, transparent 40%, rgba(255, 255, 255, 0.06) 50%, transparent 60%);
  filter: blur(1.1px);
}

.ray-6 {
  background: linear-gradient(180deg, transparent 15%, rgba(255, 255, 255, 0.07) 50%, transparent 85%);
  filter: blur(0.7px);
}

.ray-7 {
  background: linear-gradient(270deg, transparent 45%, rgba(255, 255, 255, 0.05) 50%, transparent 55%);
  filter: blur(1.3px);
}

.ray-8 {
  background: linear-gradient(0deg, transparent 10%, rgba(255, 255, 255, 0.08) 50%, transparent 90%);
  filter: blur(0.6px);
}

@keyframes lightRayPulse {
  0%, 100% {
    opacity: 0;
    transform: scale(0.5) rotate(0deg);
  }
  25% {
    opacity: 0.3;
    transform: scale(0.8) rotate(2deg);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.2) rotate(0deg);
  }
  75% {
    opacity: 0.4;
    transform: scale(0.9) rotate(-2deg);
  }
}

/* Dark theme adjustments */
@media (prefers-color-scheme: dark) {
  .ray-1 { background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.12) 50%, transparent 70%); }
  .ray-2 { background: linear-gradient(135deg, transparent 25%, rgba(255, 255, 255, 0.10) 50%, transparent 75%); }
  .ray-3 { background: linear-gradient(225deg, transparent 35%, rgba(255, 255, 255, 0.11) 50%, transparent 65%); }
  .ray-4 { background: linear-gradient(315deg, transparent 20%, rgba(255, 255, 255, 0.09) 50%, transparent 80%); }
  .ray-5 { background: linear-gradient(90deg, transparent 40%, rgba(255, 255, 255, 0.10) 50%, transparent 60%); }
  .ray-6 { background: linear-gradient(180deg, transparent 15%, rgba(255, 255, 255, 0.11) 50%, transparent 85%); }
  .ray-7 { background: linear-gradient(270deg, transparent 45%, rgba(255, 255, 255, 0.09) 50%, transparent 55%); }
  .ray-8 { background: linear-gradient(0deg, transparent 10%, rgba(255, 255, 255, 0.12) 50%, transparent 90%); }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .light-ray {
    animation: none;
    opacity: 0.1;
  }
}

==================================================
FILE: .\src\components\backgrounds\LightRays.tsx
==================================================
import React from 'react';
import { useUI } from '../../context/UIContext';
import './LightRays.css';

interface LightRaysProps {
  children?: React.ReactNode;
  className?: string;
}

const LightRays: React.FC<LightRaysProps> = ({ children, className = '' }) => {
  const { theme } = useUI();
  const isDark = theme === 'dark';

  return (
    <div className={`light-rays-container ${className}`}>
      {/* Multiple static ray elements with CSS animations */}
      <div className="light-ray ray-1" style={{ animationDelay: '0s', animationDuration: '8s' }}></div>
      <div className="light-ray ray-2" style={{ animationDelay: '2s', animationDuration: '10s' }}></div>
      <div className="light-ray ray-3" style={{ animationDelay: '4s', animationDuration: '7s' }}></div>
      <div className="light-ray ray-4" style={{ animationDelay: '1s', animationDuration: '9s' }}></div>
      <div className="light-ray ray-5" style={{ animationDelay: '3s', animationDuration: '11s' }}></div>
      <div className="light-ray ray-6" style={{ animationDelay: '5s', animationDuration: '6s' }}></div>
      <div className="light-ray ray-7" style={{ animationDelay: '0.5s', animationDuration: '12s' }}></div>
      <div className="light-ray ray-8" style={{ animationDelay: '2.5s', animationDuration: '8.5s' }}></div>

      {/* Subtle background overlay */}
      <div
        className="light-rays-overlay"
        style={{
          background: isDark
            ? 'radial-gradient(ellipse at center, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 50%, transparent 100%)'
            : 'radial-gradient(ellipse at center, rgba(0, 0, 0, 0.02) 0%, rgba(0, 0, 0, 0.005) 50%, transparent 100%)'
        }}
      ></div>

      {children}
    </div>
  );
};

export default LightRays;

==================================================
FILE: .\src\components\chat\ChatWindow.tsx
==================================================
import React, { useState, useRef, useEffect } from 'react';
import { X, Send, MoreVertical, Check, CheckCheck } from 'lucide-react';
import { ChatWindowProps } from '../../types/interactive';
import { useChat } from '../../hooks/useChat';
import { useAuth } from '../../context/AuthContext';
import { formatDistanceToNow } from 'date-fns';
import { faIR } from 'date-fns/locale';

const ChatWindow: React.FC<ChatWindowProps> = ({
  otherUser,
  isOpen,
  onClose,
  className = ''
}) => {
  const { user } = useAuth();
  const {
    messages,
    isLoading,
    error,
    sendMessage,
    markAsRead,
    loadMore,
    hasMore,
    isTyping,
    setTyping
  } = useChat(otherUser.id);

  const [newMessage, setNewMessage] = useState('');
  const [isTypingLocal, setIsTypingLocal] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);

  // Auto-scroll to bottom when new messages arrive
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // Focus input when chat opens
  useEffect(() => {
    if (isOpen) {
      inputRef.current?.focus();
    }
  }, [isOpen]);

  // Mark messages as read when viewing
  useEffect(() => {
    if (isOpen && messages.some(msg => !msg.is_read && msg.sender_id === otherUser.id)) {
      markAsRead();
    }
  }, [isOpen, messages, otherUser.id, markAsRead]);

  const handleSendMessage = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!newMessage.trim()) return;

    await sendMessage(newMessage);
    setNewMessage('');
    setIsTypingLocal(false);
    setTyping(false);
  };

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setNewMessage(e.target.value);

    // Handle typing indicator
    if (!isTypingLocal && e.target.value.trim()) {
      setIsTypingLocal(true);
      setTyping(true);

      // Clear typing after 2 seconds of no input
      setTimeout(() => {
        setIsTypingLocal(false);
        setTyping(false);
      }, 2000);
    }
  };

  const formatMessageTime = (timestamp: string) => {
    try {
      return formatDistanceToNow(new Date(timestamp), {
        addSuffix: true,
        locale: faIR
      });
    } catch {
      return '';
    }
  };

  if (!isOpen) return null;

  return (
    <div className={`fixed bottom-4 right-4 w-96 h-[32rem] bg-[var(--bg-primary)] border border-[var(--glass-border)] rounded-2xl shadow-2xl z-50 flex flex-col ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between p-4 border-b border-[var(--glass-border)]">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 rounded-full bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold">
            {otherUser.name.charAt(0)}
          </div>
          <div>
            <h3 className="font-semibold text-[var(--text-primary)]">{otherUser.name}</h3>
            <p className="text-xs text-[var(--text-secondary)]">
              {isTyping ? '  ...' : ''}
            </p>
          </div>
        </div>
        <div className="flex items-center gap-2">
          <button className="p-2 rounded-lg hover:bg-[var(--glass-bg)] transition">
            <MoreVertical size={16} />
          </button>
          <button
            onClick={onClose}
            className="p-2 rounded-lg hover:bg-[var(--glass-bg)] transition"
          >
            <X size={16} />
          </button>
        </div>
      </div>

      {/* Messages Area */}
      <div className="flex-1 overflow-y-auto p-4 space-y-3">
        {hasMore && (
          <button
            onClick={loadMore}
            disabled={isLoading}
            className="w-full py-2 text-sm text-[var(--accent-color)] hover:underline disabled:opacity-50"
          >
            {isLoading ? '  ...' : '  '}
          </button>
        )}

        {messages.map((message) => {
          const isMe = message.sender_id === user?.id;
          const isOptimistic = 'status' in message;

          return (
            <div
              key={message.id}
              className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}
            >
              <div
                className={`max-w-[70%] p-3 rounded-2xl ${
                  isMe
                    ? 'bg-[var(--accent-color)] text-white rounded-br-md'
                    : 'bg-[var(--glass-bg)] text-[var(--text-primary)] rounded-bl-md border border-[var(--glass-border)]'
                } ${isOptimistic ? 'opacity-70' : ''}`}
              >
                <p className="text-sm leading-relaxed">{message.content}</p>
                <div className={`flex items-center justify-end gap-1 mt-1 text-xs ${
                  isMe ? 'text-white/70' : 'text-[var(--text-secondary)]'
                }`}>
                  <span>{formatMessageTime(message.created_at)}</span>
                  {isMe && (
                    <span>
                      {'status' in message ? (
                        message.status === 'sending' ? '' :
                        <Check size={12} />
                      ) : message.is_read ? (
                        <CheckCheck size={12} />
                      ) : (
                        <Check size={12} />
                      )}
                    </span>
                  )}
                </div>
              </div>
            </div>
          );
        })}

        {isTyping && !messages.some(msg => msg.sender_id === otherUser.id) && (
          <div className="flex justify-start">
            <div className="bg-[var(--glass-bg)] p-3 rounded-2xl rounded-bl-md border border-[var(--glass-border)]">
              <div className="flex gap-1">
                <div className="w-2 h-2 bg-[var(--text-secondary)] rounded-full animate-bounce"></div>
                <div className="w-2 h-2 bg-[var(--text-secondary)] rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                <div className="w-2 h-2 bg-[var(--text-secondary)] rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
              </div>
            </div>
          </div>
        )}

        <div ref={messagesEndRef} />
      </div>

      {/* Error Message */}
      {error && (
        <div className="px-4 py-2 text-sm text-red-400 bg-red-400/10 border-t border-red-400/20">
          {error}
        </div>
      )}

      {/* Input Area */}
      <form onSubmit={handleSendMessage} className="p-4 border-t border-[var(--glass-border)]">
        <div className="flex gap-2">
          <input
            ref={inputRef}
            type="text"
            value={newMessage}
            onChange={handleInputChange}
            placeholder="    ..."
            className="flex-1 px-4 py-2 bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-xl text-[var(--text-primary)] placeholder-[var(--text-secondary)] focus:outline-none focus:border-[var(--accent-color)] transition"
            disabled={isLoading}
          />
          <button
            type="submit"
            disabled={!newMessage.trim() || isLoading}
            className="px-4 py-2 bg-[var(--accent-color)] text-white rounded-xl hover:bg-[var(--accent-secondary)] disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center gap-2"
          >
            <Send size={16} />
          </button>
        </div>
      </form>
    </div>
  );
};

export default ChatWindow;

==================================================
FILE: .\src\components\gallery\GalleryPanel.tsx
==================================================
import React, { useState, useCallback } from 'react';
import { Upload, X, Calendar, TrendingUp, Camera, Image as ImageIcon } from 'lucide-react';
import { GalleryPanelProps, ProgressPhoto } from '../../types/interactive';
import { useProgressPhotos } from '../../hooks/useProgressPhotos';
import { sanitizeFileName } from '../../utils/sanitization';

const GalleryPanel: React.FC<GalleryPanelProps> = ({
  userId,
  isCoach = false,
  className = ''
}) => {
  const {
    photos,
    uploadPhoto,
    deletePhoto,
    getPhotosByDateRange,
    getComparisons,
    isLoading,
    error
  } = useProgressPhotos(userId);

  const [selectedPhotos, setSelectedPhotos] = useState<ProgressPhoto[]>([]);
  const [isDragOver, setIsDragOver] = useState(false);
  const [uploadModalOpen, setUploadModalOpen] = useState(false);
  const [comparisonMode, setComparisonMode] = useState(false);

  // Handle file upload
  const handleFileUpload = useCallback(async (files: FileList) => {
    for (let i = 0; i < files.length; i++) {
      const file = files[i];

      // Validate file type
      if (!file.type.startsWith('image/')) {
        alert('    ');
        continue;
      }

      // Validate file size (max 10MB)
      if (file.size > 10 * 1024 * 1024) {
        alert('       ');
        continue;
      }

      // Sanitize filename
      const sanitizedName = sanitizeFileName(file.name);

      try {
        const metadata: Partial<ProgressPhoto> = {
          photo_date: new Date().toISOString().split('T')[0],
          pose_type: 'front',
          weight: undefined,
          height: undefined,
          notes: ''
        };

        await uploadPhoto(file, metadata);
      } catch (error) {
        console.error('Error uploading photo:', error);
        alert('   ');
      }
    }

    setUploadModalOpen(false);
  }, [uploadPhoto]);

  // Handle drag and drop
  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragOver(true);
  }, []);

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragOver(false);
  }, []);

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    setIsDragOver(false);

    const files = e.dataTransfer.files;
    if (files.length > 0) {
      handleFileUpload(files);
    }
  }, [handleFileUpload]);

  // Group photos by month
  const groupedPhotos = React.useMemo(() => {
    const groups: Record<string, ProgressPhoto[]> = {};

    photos.forEach(photo => {
      const date = new Date(photo.photo_date);
      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;

      if (!groups[monthKey]) {
        groups[monthKey] = [];
      }
      groups[monthKey].push(photo);
    });

    return groups;
  }, [photos]);

  // Get comparisons
  const comparisons = React.useMemo(() => getComparisons(), [getComparisons]);

  return (
    <div className={`space-y-6 ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h2 className="text-2xl font-bold text-[var(--text-primary)]"> </h2>
          <p className="text-[var(--text-secondary)]">        </p>
        </div>

        <div className="flex items-center gap-2">
          <button
            onClick={() => setComparisonMode(!comparisonMode)}
            className={`px-4 py-2 rounded-lg font-medium transition ${
              comparisonMode
                ? 'bg-[var(--accent-color)] text-white'
                : 'bg-[var(--glass-bg)] text-[var(--text-secondary)] hover:bg-[var(--glass-border)]'
            }`}
          >
            <TrendingUp size={16} className="inline mr-2" />
            
          </button>

          <button
            onClick={() => setUploadModalOpen(true)}
            className="px-4 py-2 bg-[var(--accent-color)] text-white rounded-lg hover:bg-[var(--accent-secondary)] transition flex items-center gap-2"
          >
            <Upload size={16} />
             
          </button>
        </div>
      </div>

      {/* Error Message */}
      {error && (
        <div className="p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400">
          {error}
        </div>
      )}

      {/* Upload Modal */}
      {uploadModalOpen && (
        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
          <div className="bg-[var(--bg-primary)] border border-[var(--glass-border)] rounded-2xl p-6 max-w-md w-full">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold text-[var(--text-primary)]">  </h3>
              <button
                onClick={() => setUploadModalOpen(false)}
                className="p-2 rounded-lg hover:bg-[var(--glass-bg)]"
              >
                <X size={20} />
              </button>
            </div>

            <div
              onDragOver={handleDragOver}
              onDragLeave={handleDragLeave}
              onDrop={handleDrop}
              className={`border-2 border-dashed rounded-lg p-8 text-center transition ${
                isDragOver
                  ? 'border-[var(--accent-color)] bg-[var(--accent-color)]/10'
                  : 'border-[var(--glass-border)] hover:border-[var(--accent-color)]/50'
              }`}
            >
              <Camera size={48} className="mx-auto mb-4 text-[var(--text-secondary)]" />
              <p className="text-[var(--text-primary)] mb-2">      </p>
              <p className="text-sm text-[var(--text-secondary)] mb-4">     </p>

              <input
                type="file"
                multiple
                accept="image/*"
                onChange={(e) => e.target.files && handleFileUpload(e.target.files)}
                className="hidden"
                id="photo-upload"
              />
              <label
                htmlFor="photo-upload"
                className="inline-block px-4 py-2 bg-[var(--accent-color)] text-white rounded-lg hover:bg-[var(--accent-secondary)] cursor-pointer transition"
              >
                 
              </label>
            </div>
          </div>
        </div>
      )}

      {/* Comparison View */}
      {comparisonMode && comparisons.length > 0 && (
        <div className="space-y-4">
          <h3 className="text-lg font-semibold text-[var(--text-primary)]"> </h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {comparisons.slice(0, 4).map((comparison, index) => (
              <div key={index} className="glass-card p-4 rounded-lg">
                <div className="flex justify-between items-center mb-2">
                  <span className="text-sm text-[var(--text-secondary)]">
                    {comparison.dateDifference}  
                  </span>
                  {comparison.weightChange && (
                    <span className={`text-sm font-medium ${
                      comparison.weightChange > 0 ? 'text-red-500' : 'text-green-500'
                    }`}>
                      {comparison.weightChange > 0 ? '+' : ''}{comparison.weightChange}kg
                    </span>
                  )}
                </div>
                <div className="grid grid-cols-2 gap-2">
                  <div>
                    <img
                      src={comparison.before.photo_url}
                      alt="Before"
                      className="w-full h-32 object-cover rounded-lg"
                    />
                    <p className="text-xs text-center mt-1 text-[var(--text-secondary)]"></p>
                  </div>
                  <div>
                    <img
                      src={comparison.after.photo_url}
                      alt="After"
                      className="w-full h-32 object-cover rounded-lg"
                    />
                    <p className="text-xs text-center mt-1 text-[var(--text-secondary)]"></p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Photo Gallery */}
      {!comparisonMode && (
        <div className="space-y-6">
          {Object.keys(groupedPhotos).length === 0 ? (
            <div className="text-center py-12">
              <ImageIcon size={48} className="mx-auto mb-4 text-[var(--text-secondary)] opacity-50" />
              <h3 className="text-lg font-medium text-[var(--text-primary)] mb-2">  </h3>
              <p className="text-[var(--text-secondary)] mb-4">      </p>
              <button
                onClick={() => setUploadModalOpen(true)}
                className="px-6 py-2 bg-[var(--accent-color)] text-white rounded-lg hover:bg-[var(--accent-secondary)] transition"
              >
                 
              </button>
            </div>
          ) : (
            Object.entries(groupedPhotos)
              .sort(([a], [b]) => b.localeCompare(a))
              .map(([month, monthPhotos]) => (
                <div key={month}>
                  <div className="flex items-center gap-2 mb-4">
                    <Calendar size={16} className="text-[var(--text-secondary)]" />
                    <h3 className="text-lg font-semibold text-[var(--text-primary)]">
                      {new Date(month + '-01').toLocaleDateString('fa-IR', {
                        year: 'numeric',
                        month: 'long'
                      })}
                    </h3>
                    <span className="text-sm text-[var(--text-secondary)] bg-[var(--glass-bg)] px-2 py-1 rounded">
                      {monthPhotos.length} 
                    </span>
                  </div>

                  <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    {monthPhotos.map((photo) => (
                      <div key={photo.id} className="relative group">
                        <img
                          src={photo.photo_url}
                          alt={`Progress photo ${photo.photo_date}`}
                          className="w-full aspect-square object-cover rounded-lg border border-[var(--glass-border)]"
                        />

                        <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                          <div className="text-white text-center">
                            <p className="text-sm font-medium">
                              {new Date(photo.photo_date).toLocaleDateString('fa-IR')}
                            </p>
                            {photo.weight && (
                              <p className="text-xs">{photo.weight}kg</p>
                            )}
                            {photo.pose_type && (
                              <p className="text-xs capitalize">{photo.pose_type}</p>
                            )}
                          </div>
                        </div>

                        {isCoach && (
                          <button
                            onClick={() => deletePhoto(photo.id)}
                            className="absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              ))
          )}
        </div>
      )}
    </div>
  );
};

export default GalleryPanel;

==================================================
FILE: .\src\components\print\PrintClientReport.tsx
==================================================
import React from 'react';
import type { User } from '../../types';

interface PrintClientReportProps {
  user: User;
  onPrint: () => void;
}

const PrintClientReport: React.FC<PrintClientReportProps> = ({ user, onPrint }) => {
  return (
    <div className="space-y-6">
      <div className="text-center mb-8">
        <h2 className="text-2xl font-bold text-[var(--text-primary)] mb-2">
             
        </h2>
        <p className="text-[var(--text-secondary)]">
               {user.name}
        </p>
      </div>

      {/*   */}
      <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
          <span></span>  
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div className="space-y-3">
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">{user.name}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">
                {user.gender === 'male' ? '' : user.gender === 'female' ? '' : ''}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">{user.age} </span>
            </div>
          </div>

          <div className="space-y-3">
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">{user.height} </span>
            </div>
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">{user.weight} </span>
            </div>
            <div className="flex justify-between">
              <span className="text-[var(--text-secondary)]">:</span>
              <span className="font-semibold text-[var(--text-primary)]">{user.level || ''}</span>
            </div>
          </div>
        </div>

        {user.notes && (
          <div className="mt-4">
            <span className="text-[var(--text-secondary)] block mb-2">:</span>
            <p className="bg-[var(--bg-secondary)] p-3 rounded-lg text-[var(--text-primary)]">
              {user.notes}
            </p>
          </div>
        )}
      </div>

      {/*   */}
      <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
          <span></span>  
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="text-center p-4 bg-blue-500/10 rounded-xl border border-blue-500/20">
            <div className="text-2xl font-bold text-blue-600 mb-2">
              {user.plans?.workouts ? Object.keys(user.plans.workouts).length : 0}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"> </div>
          </div>

          <div className="text-center p-4 bg-green-500/10 rounded-xl border border-green-500/20">
            <div className="text-2xl font-bold text-green-600 mb-2">
              {user.plans?.diet ? user.plans.diet.length : 0}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"> </div>
          </div>

          <div className="text-center p-4 bg-purple-500/10 rounded-xl border border-purple-500/20">
            <div className="text-2xl font-bold text-purple-600 mb-2">
              {user.plans?.supps ? user.plans.supps.length : 0}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"> </div>
          </div>
        </div>
      </div>

      {/*   */}
      {user.nutritionGoals && (
        <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
          <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
            <span></span>  
          </h3>

          <div className="space-y-3">
            {user.nutritionGoals.calories && (
              <div className="flex justify-between">
                <span className="text-[var(--text-secondary)]"> :</span>
                <span className="font-semibold text-[var(--text-primary)]">{user.nutritionGoals.calories} kcal</span>
              </div>
            )}
            {user.nutritionGoals.protein && (
              <div className="flex justify-between">
                <span className="text-[var(--text-secondary)]">:</span>
                <span className="font-semibold text-[var(--text-primary)]">{user.nutritionGoals.protein}g</span>
              </div>
            )}
            {user.nutritionGoals.carbs && (
              <div className="flex justify-between">
                <span className="text-[var(--text-secondary)]">:</span>
                <span className="font-semibold text-[var(--text-primary)]">{user.nutritionGoals.carbs}g</span>
              </div>
            )}
            {user.nutritionGoals.fat && (
              <div className="flex justify-between">
                <span className="text-[var(--text-secondary)]">:</span>
                <span className="font-semibold text-[var(--text-primary)]">{user.nutritionGoals.fat}g</span>
              </div>
            )}
          </div>
        </div>
      )}

      {/*   */}
      <div className="text-center pt-6">
        <button
          onClick={onPrint}
          className="px-8 py-4 bg-gradient-to-r from-[var(--accent-color)] to-[var(--accent-secondary)] text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300"
        >
             
        </button>
      </div>
    </div>
  );
};

export default PrintClientReport;


==================================================
FILE: .\src\components\print\PrintPanel.tsx
==================================================
import React, { useState } from 'react';
import type { User } from '../../types';
import PrintPrograms from './PrintPrograms';
import PrintClientReport from './PrintClientReport';
import PrintProgress from './PrintProgress';

interface PrintPanelProps {
  user: User;
  onGeneratePrint: (type: string, data: any) => void;
}

type PrintTab = 'programs' | 'report' | 'progress';

const PrintPanel: React.FC<PrintPanelProps> = ({ user, onGeneratePrint }) => {
  const [activeTab, setActiveTab] = useState<PrintTab>('programs');

  const handlePrint = (type: string, data?: any) => {
    onGeneratePrint(type, { user, ...data });
  };

  const tabs = [
    {
      id: 'programs' as PrintTab,
      label: '',
      icon: '',
      description: '     '
    },
    {
      id: 'report' as PrintTab,
      label: ' ',
      icon: '',
      description: '   '
    },
    {
      id: 'progress' as PrintTab,
      label: '',
      icon: '',
      description: '    '
    }
  ];

  return (
    <div className="space-y-6">
      {/*  */}
      <div className="flex flex-wrap gap-2 p-1 bg-[var(--bg-secondary)] rounded-2xl border border-[var(--glass-border)]">
        {tabs.map((tab) => (
          <button
            key={tab.id}
            onClick={() => setActiveTab(tab.id)}
            className={`flex-1 min-w-0 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 ${
              activeTab === tab.id
                ? 'bg-[var(--accent-color)] text-white shadow-lg transform scale-105'
                : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-primary)]'
            }`}
          >
            <div className="flex flex-col items-center gap-1">
              <span className="text-lg">{tab.icon}</span>
              <span className="text-xs">{tab.label}</span>
            </div>
          </button>
        ))}
      </div>

      {/*    */}
      <div className="text-center py-4">
        <div className="inline-flex items-center gap-3 px-6 py-3 bg-[var(--bg-secondary)] rounded-2xl border border-[var(--glass-border)]">
          <span className="text-2xl">{tabs.find(t => t.id === activeTab)?.icon}</span>
          <div className="text-right">
            <div className="font-semibold text-[var(--text-primary)]">
              {tabs.find(t => t.id === activeTab)?.label}
            </div>
            <div className="text-xs text-[var(--text-secondary)]">
              {tabs.find(t => t.id === activeTab)?.description}
            </div>
          </div>
        </div>
      </div>

      {/*   */}
      <div className="min-h-[400px]">
        {activeTab === 'programs' && (
          <PrintPrograms
            user={user}
            onPrint={(type) => handlePrint('program', { programType: type, user })}
          />
        )}

        {activeTab === 'report' && (
          <PrintClientReport
            user={user}
            onPrint={() => handlePrint('client-report', user)}
          />
        )}

        {activeTab === 'progress' && (
          <PrintProgress
            user={user}
            onPrint={() => handlePrint('progress', user)}
          />
        )}
      </div>
    </div>
  );
};

export default PrintPanel;


==================================================
FILE: .\src\components\print\PrintPrograms.tsx
==================================================
import React from 'react';
import type { User } from '../../types';

interface PrintProgramsProps {
  user: User;
  onPrint: (type: 'workout' | 'diet' | 'supplements' | 'all') => void;
}

const PrintPrograms: React.FC<PrintProgramsProps> = ({ user, onPrint }) => {
  const hasWorkoutProgram = user.plans?.workouts && Object.keys(user.plans.workouts).length > 0;
  const hasDietProgram = user.plans?.diet && user.plans.diet.length > 0;
  const hasSupplementProgram = user.plans?.supps && user.plans.supps.length > 0;

  return (
    <div className="space-y-6">
      <div className="text-center mb-8">
        <h2 className="text-2xl font-bold text-[var(--text-primary)] mb-2">
              
        </h2>
        <p className="text-[var(--text-secondary)]">
               {user.name}   
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {/*   */}
        <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition-all duration-300">
          <div className="flex items-center gap-4 mb-4">
            <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-white shadow-lg">
              
            </div>
            <div>
              <h3 className="text-lg font-bold text-[var(--text-primary)]"> </h3>
              <p className="text-sm text-[var(--text-secondary)]">
                {hasWorkoutProgram ? `${Object.keys(user.plans.workouts).length} ` : '  '}
              </p>
            </div>
          </div>

          <div className="space-y-3">
            <button
              onClick={() => onPrint('workout')}
              disabled={!hasWorkoutProgram}
              className={`w-full py-3 px-4 rounded-xl font-semibold text-sm transition-all duration-300 ${
                hasWorkoutProgram
                  ? 'bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5'
                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
            >
              {hasWorkoutProgram ? '   ' : '  '}
            </button>
          </div>
        </div>

        {/*   */}
        <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition-all duration-300">
          <div className="flex items-center gap-4 mb-4">
            <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white shadow-lg">
              
            </div>
            <div>
              <h3 className="text-lg font-bold text-[var(--text-primary)]"> </h3>
              <p className="text-sm text-[var(--text-secondary)]">
                {hasDietProgram ? `${user.plans.diet.length}  ` : '  '}
              </p>
            </div>
          </div>

          <div className="space-y-3">
            <button
              onClick={() => onPrint('diet')}
              disabled={!hasDietProgram}
              className={`w-full py-3 px-4 rounded-xl font-semibold text-sm transition-all duration-300 ${
                hasDietProgram
                  ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5'
                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
            >
              {hasDietProgram ? '   ' : '  '}
            </button>
          </div>
        </div>

        {/*   */}
        <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition-all duration-300">
          <div className="flex items-center gap-4 mb-4">
            <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-white shadow-lg">
              
            </div>
            <div>
              <h3 className="text-lg font-bold text-[var(--text-primary)]"> </h3>
              <p className="text-sm text-[var(--text-secondary)]">
                {hasSupplementProgram ? `${user.plans.supps.length} ` : '  '}
              </p>
            </div>
          </div>

          <div className="space-y-3">
            <button
              onClick={() => onPrint('supplements')}
              disabled={!hasSupplementProgram}
              className={`w-full py-3 px-4 rounded-xl font-semibold text-sm transition-all duration-300 ${
                hasSupplementProgram
                  ? 'bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5'
                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
            >
              {hasSupplementProgram ? '   ' : '  '}
            </button>
          </div>
        </div>
      </div>

      {/*    */}
      {(hasWorkoutProgram || hasDietProgram || hasSupplementProgram) && (
        <div className="mt-8 p-6 glass-card rounded-2xl border border-[var(--glass-border)]">
          <div className="text-center">
            <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4">
                 
            </h3>
            <p className="text-[var(--text-secondary)] mb-6">
                {user.name}      
            </p>
            <button
              onClick={() => onPrint('all')}
              className="px-8 py-4 bg-gradient-to-r from-[var(--accent-color)] to-[var(--accent-secondary)] text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300"
            >
                 
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default PrintPrograms;


==================================================
FILE: .\src\components\print\PrintProgress.tsx
==================================================
import React from 'react';
import type { User } from '../../types';

interface PrintProgressProps {
  user: User;
  onPrint: () => void;
}

const PrintProgress: React.FC<PrintProgressProps> = ({ user, onPrint }) => {
  //  BMI
  const calculateBMI = () => {
    if (!user.height || !user.weight) return null;
    const heightInMeters = user.height / 100;
    return (user.weight / (heightInMeters * heightInMeters)).toFixed(1);
  };

  //  BMI
  const getBMICategory = (bmi: number) => {
    if (bmi < 18.5) return { category: '', color: 'text-blue-600', bgColor: 'bg-blue-500/10' };
    if (bmi < 25) return { category: '', color: 'text-green-600', bgColor: 'bg-green-500/10' };
    if (bmi < 30) return { category: ' ', color: 'text-yellow-600', bgColor: 'bg-yellow-500/10' };
    if (bmi < 35) return { category: '  ', color: 'text-orange-600', bgColor: 'bg-orange-500/10' };
    if (bmi < 40) return { category: '  ', color: 'text-red-600', bgColor: 'bg-red-500/10' };
    return { category: '  ', color: 'text-red-800', bgColor: 'bg-red-800/10' };
  };

  const bmi = calculateBMI();
  const bmiInfo = bmi ? getBMICategory(parseFloat(bmi)) : null;

  return (
    <div className="space-y-6">
      <div className="text-center mb-8">
        <h2 className="text-2xl font-bold text-[var(--text-primary)] mb-2">
              
        </h2>
        <p className="text-[var(--text-secondary)]">
               {user.name}
        </p>
      </div>

      {/*   */}
      <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
          <span></span>  
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {/* BMI */}
          <div className="text-center p-4 rounded-xl border border-[var(--glass-border)]">
            <div className="text-3xl font-bold text-[var(--accent-color)] mb-2">
              {bmi || 'N/A'}
            </div>
            <div className="text-sm text-[var(--text-secondary)] mb-1">   (BMI)</div>
            {bmiInfo && (
              <div className={`text-xs px-2 py-1 rounded-full ${bmiInfo.bgColor} ${bmiInfo.color}`}>
                {bmiInfo.category}
              </div>
            )}
          </div>

          {/*  */}
          <div className="text-center p-4 rounded-xl border border-[var(--glass-border)]">
            <div className="text-3xl font-bold text-blue-600 mb-2">
              {user.height || 'N/A'}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"> (cm)</div>
            <div className="text-xs text-[var(--text-secondary)] mt-1"></div>
          </div>

          {/*  */}
          <div className="text-center p-4 rounded-xl border border-[var(--glass-border)]">
            <div className="text-3xl font-bold text-green-600 mb-2">
              {user.weight || 'N/A'}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"> (kg)</div>
            <div className="text-xs text-[var(--text-secondary)] mt-1"></div>
          </div>

          {/*  */}
          <div className="text-center p-4 rounded-xl border border-[var(--glass-border)]">
            <div className="text-3xl font-bold text-purple-600 mb-2">
              {user.age || 'N/A'}
            </div>
            <div className="text-sm text-[var(--text-secondary)]"></div>
            <div className="text-xs text-[var(--text-secondary)] mt-1"></div>
          </div>
        </div>
      </div>

      {/*   */}
      <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
          <span></span>   
        </h3>

        <div className="space-y-4">
          {bmi && (
            <div className="p-4 rounded-xl bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-800">
              <h4 className="font-semibold text-blue-800 dark:text-blue-200 mb-2"> BMI</h4>
              <p className="text-sm text-blue-700 dark:text-blue-300">
                    {bmi}     {bmiInfo?.category}  .
                {parseFloat(bmi) < 18.5 && '          .'}
                {parseFloat(bmi) >= 18.5 && parseFloat(bmi) < 25 && '       .'}
                {parseFloat(bmi) >= 25 && parseFloat(bmi) < 30 && '         .'}
                {parseFloat(bmi) >= 30 && '         .'}
              </p>
            </div>
          )}

          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div className="p-4 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800">
              <h4 className="font-semibold text-green-800 dark:text-green-200 mb-2"> </h4>
              <p className="text-sm text-green-700 dark:text-green-300">
                {user.plans?.diet && user.plans.diet.length > 0
                  ? ` ${user.plans.diet.length}     .`
                  : '      .'}
              </p>
            </div>

            <div className="p-4 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800">
              <h4 className="font-semibold text-purple-800 dark:text-purple-200 mb-2"> </h4>
              <p className="text-sm text-purple-700 dark:text-purple-300">
                {user.plans?.workouts && Object.keys(user.plans.workouts).length > 0
                  ? ` ${Object.keys(user.plans.workouts).length}   .`
                  : '      .'}
              </p>
            </div>
          </div>
        </div>
      </div>

      {/*    */}
      <div className="glass-card p-6 rounded-2xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
          <span></span>   
        </h3>

        <div className="space-y-3">
          <div className="flex items-start gap-3">
            <span className="text-green-600 mt-1"></span>
            <div>
              <div className="font-semibold text-[var(--text-primary)]"> </div>
              <div className="text-sm text-[var(--text-secondary)]">
                {user.nutritionGoals?.calories
                  ? `  ${user.nutritionGoals.calories}  `
                  : '   '}
              </div>
            </div>
          </div>

          <div className="flex items-start gap-3">
            <span className="text-blue-600 mt-1"></span>
            <div>
              <div className="font-semibold text-[var(--text-primary)]"> </div>
              <div className="text-sm text-[var(--text-secondary)]">
                 -       
              </div>
            </div>
          </div>

          <div className="flex items-start gap-3">
            <span className="text-purple-600 mt-1"></span>
            <div>
              <div className="font-semibold text-[var(--text-primary)]"> </div>
              <div className="text-sm text-[var(--text-secondary)]">
                    BMI   
              </div>
            </div>
          </div>
        </div>
      </div>

      {/*   */}
      <div className="text-center pt-6">
        <button
          onClick={onPrint}
          className="px-8 py-4 bg-gradient-to-r from-[var(--accent-color)] to-[var(--accent-secondary)] text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300"
        >
             
        </button>
      </div>
    </div>
  );
};

export default PrintProgress;


==================================================
FILE: .\src\components\tabs\AnthropometryTab.tsx
==================================================
import React from 'react';
import { Ruler, Scale, Calculator, TrendingUp, Target } from 'lucide-react';
import type { UseUserFormReturn } from '../../hooks/useUserForm';

interface AnthropometryTabProps {
  form: UseUserFormReturn;
}

export const AnthropometryTab: React.FC<AnthropometryTabProps> = ({ form }) => {
  const { formData, errors, calculations, updateField, updateNestedField } = form;

  return (
    <div className="space-y-6">
      {/* Basic Measurements */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             () *
          </label>
            <input
              type="number"
              value={formData.age || ''}
              onChange={(e) => updateField('age', e.target.value)}
              className={`input-glass ${errors.age ? 'border-red-500' : ''}`}
              placeholder="25"
              min="10"
              max="120"
            />
          {errors.age && <p className="text-red-500 text-xs mt-1">{errors.age}</p>}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             (cm) *
          </label>
          <div className="relative">
            <Ruler className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-secondary)]" />
            <input
              type="number"
              value={formData.height || ''}
              onChange={(e) => updateField('height', e.target.value)}
              className={`input-glass pr-8 ${errors.height ? 'border-red-500' : ''}`}
              placeholder="175"
              min="100"
              max="250"
              step="0.1"
            />
          </div>
          {errors.height && <p className="text-red-500 text-xs mt-1">{errors.height}</p>}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             (kg) *
          </label>
          <div className="relative">
            <Scale className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-secondary)]" />
            <input
              type="number"
              value={formData.weight || ''}
              onChange={(e) => updateField('weight', e.target.value)}
              className={`input-glass pr-8 ${errors.weight ? 'border-red-500' : ''}`}
              placeholder="75"
              min="30"
              max="300"
              step="0.1"
            />
          </div>
          {errors.weight && <p className="text-red-500 text-xs mt-1">{errors.weight}</p>}
        </div>
      </div>

      {/* Body Measurements */}
      <div className="glass-card p-4 rounded-xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold mb-4 text-[var(--text-primary)]"> </h3>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                (cm)
            </label>
            <input
              type="number"
              value={formData.measurements?.waist || ''}
              onChange={(e) => updateNestedField('measurements', 'waist', e.target.value)}
              className="input-glass"
              placeholder="85"
              min="50"
              max="150"
              step="0.1"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                (cm)
            </label>
            <input
              type="number"
              value={formData.measurements?.hip || ''}
              onChange={(e) => updateNestedField('measurements', 'hip', e.target.value)}
              className="input-glass"
              placeholder="95"
              min="60"
              max="150"
              step="0.1"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                (cm)
            </label>
            <input
              type="number"
              value={formData.measurements?.neck || ''}
              onChange={(e) => updateNestedField('measurements', 'neck', e.target.value)}
              className="input-glass"
              placeholder="38"
              min="30"
              max="50"
              step="0.1"
            />
          </div>
        </div>
      </div>

      {/* Activity & Goals */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
              
          </label>
          <select
            value={formData.activity || '1.55'}
            onChange={(e) => updateField('activity', e.target.value)}
            className="input-glass"
          >
            <option value="1.2"> ( )</option>
            <option value="1.375">  ( )</option>
            <option value="1.55"> ( - )</option>
            <option value="1.725"> ( - )</option>
            <option value="1.9">  ( )</option>
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.nutritionGoals || 'maintenance'}
            onChange={(e) => updateField('nutritionGoals', e.target.value)}
            className="input-glass"
          >
            <option value="maintenance"> </option>
            <option value="weight-loss"> </option>
            <option value="weight-gain"> </option>
            <option value="muscle-gain"> </option>
            <option value="recomp"> </option>
          </select>
        </div>
      </div>

      {/* Body Fat Input */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             ( -    )
        </label>
        <div className="relative">
          <Calculator className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-secondary)]" />
          <input
            type="number"
            value={formData.bodyFat || ''}
            onChange={(e) => updateField('bodyFat', e.target.value)}
            className="input-glass pr-8"
            placeholder="."
            min="3"
            max="50"
            step="0.1"
          />
        </div>
        <p className="text-xs text-[var(--text-secondary)] mt-1">
                 
        </p>
      </div>

      {/* Training Days */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
        </label>
        <select
          value={formData.days || '3'}
          onChange={(e) => updateField('days', e.target.value)}
          className="input-glass"
        >
          <option value="1"> </option>
          <option value="2"> </option>
          <option value="3"> </option>
          <option value="4"> </option>
          <option value="5"> </option>
          <option value="6"> </option>
          <option value="7"> </option>
        </select>
      </div>

      {/* Calculations Display */}
      {calculations.bmr > 0 && (
        <div className="glass-card p-6 rounded-xl border border-[var(--glass-border)]">
          <h3 className="text-lg font-bold mb-4 text-[var(--text-primary)] flex items-center gap-2">
            <Calculator className="w-5 h-5" />
               
          </h3>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {/* BMI */}
            <div className="text-center">
              <div className={`text-2xl font-black ${calculations.bmiColor}`}>
                {calculations.bmi || 'N/A'}
              </div>
              <div className="text-sm text-[var(--text-secondary)]">BMI</div>
              <div className={`text-xs font-semibold ${calculations.bmiColor}`}>
                {calculations.bmiCategory}
              </div>
            </div>

            {/* BMR */}
            <div className="text-center">
              <div className="text-2xl font-black text-blue-500">
                {calculations.bmr.toLocaleString()}
              </div>
              <div className="text-sm text-[var(--text-secondary)]">  (BMR)</div>
            </div>

            {/* TDEE */}
            <div className="text-center">
              <div className="text-2xl font-black text-green-500">
                {calculations.tdee.toLocaleString()}
              </div>
              <div className="text-sm text-[var(--text-secondary)]">  (TDEE)</div>
            </div>

            {/* Target Calories */}
            <div className="text-center">
              <div className="text-2xl font-black text-purple-500">
                {calculations.targetCalories.toLocaleString()}
              </div>
              <div className="text-sm text-[var(--text-secondary)]"> </div>
              {calculations.calorieAdjustment !== 0 && (
                <div className={`text-xs font-semibold ${calculations.calorieAdjustment > 0 ? 'text-green-500' : 'text-red-500'}`}>
                  {calculations.calorieAdjustment > 0 ? '+' : ''}{calculations.calorieAdjustment} cal
                </div>
              )}
            </div>

            {/* Body Fat */}
            <div className="text-center">
              <div className="text-2xl font-black text-orange-500">
                {calculations.bodyFatPercent || 'N/A'}
              </div>
              <div className="text-sm text-[var(--text-secondary)]">%  </div>
            </div>

            {/* Ideal Weight */}
            <div className="text-center">
              <div className="text-2xl font-black text-indigo-500">
                {calculations.idealWeightMin}-{calculations.idealWeightMax}
              </div>
              <div className="text-sm text-[var(--text-secondary)]">  (kg)</div>
            </div>
          </div>

          {/* Macronutrients */}
          <div className="mt-6 pt-4 border-t border-[var(--glass-border)]">
            <h4 className="text-md font-bold mb-3 text-[var(--text-primary)] flex items-center gap-2">
              <Target className="w-4 h-4" />
               macronutrients ()
            </h4>
            <div className="grid grid-cols-3 gap-4">
              <div className="text-center">
                <div className="text-xl font-bold text-red-500">{calculations.protein}</div>
                <div className="text-xs text-[var(--text-secondary)]"></div>
              </div>
              <div className="text-center">
                <div className="text-xl font-bold text-yellow-500">{calculations.fat}</div>
                <div className="text-xs text-[var(--text-secondary)]"></div>
              </div>
              <div className="text-center">
                <div className="text-xl font-bold text-blue-500">{calculations.carbs}</div>
                <div className="text-xs text-[var(--text-secondary)]"></div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};




==================================================
FILE: .\src\components\tabs\FinancialTab.tsx
==================================================
import React from 'react';
import { DollarSign, Calendar, Clock, FileText, TrendingUp } from 'lucide-react';
import type { UseUserFormReturn } from '../../hooks/useUserForm';

interface FinancialTabProps {
  form: UseUserFormReturn;
}

export const FinancialTab: React.FC<FinancialTabProps> = ({ form }) => {
  const { formData, errors, updateField, updateNestedField } = form;

  const calculateTotalAmount = () => {
    const { amount = 0, duration = 1 } = formData.financial || {};
    return amount * duration;
  };

  const formatCurrency = (amount: number | string) => {
    const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;
    return new Intl.NumberFormat('fa-IR').format(numAmount || 0);
  };

  return (
    <div className="space-y-6">
      {/* Financial Information */}
      <div className="glass-card p-6 rounded-xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold mb-4 text-[var(--text-primary)] flex items-center gap-2">
          <DollarSign className="w-5 h-5 text-green-500" />
             
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                 ()
            </label>
            <div className="relative">
              <DollarSign className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-secondary)]" />
              <input
                type="number"
                value={formData.financial?.amount || ''}
                onChange={(e) => updateNestedField('financial', 'amount', e.target.value)}
                className={`input-glass pr-8 ${errors.financial ? 'border-red-500' : ''}`}
                placeholder=","
                min="0"
                step="10000"
              />
            </div>
            {errors.financial && <p className="text-red-500 text-xs mt-1">{errors.financial}</p>}
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                ()
            </label>
            <div className="relative">
              <Calendar className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-secondary)]" />
              <select
                value={formData.financial?.duration || 1}
                onChange={(e) => updateNestedField('financial', 'duration', parseInt(e.target.value) || 1)}
                className="input-glass pr-8"
              >
                <option value="1"> </option>
                <option value="2"> </option>
                <option value="3"> </option>
                <option value="6"> </option>
                <option value="12"> </option>
              </select>
            </div>
          </div>
        </div>

        {/* Total Amount Display */}
        {(formData.financial?.amount || 0) > 0 && (
          <div className="mt-6 p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20">
            <div className="flex items-center justify-between">
              <div>
                <div className="text-sm text-[var(--text-secondary)]">  </div>
                <div className="text-2xl font-black text-green-600 dark:text-green-400">
                  {formatCurrency(calculateTotalAmount())} 
                </div>
              </div>
              <TrendingUp className="w-8 h-8 text-green-500" />
            </div>
          </div>
        )}
      </div>

      {/* Contract Start Date */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)] flex items-center gap-2">
          <Calendar className="w-4 h-4" />
            
        </label>
        <input
          type="date"
          value={formData.financial?.startDate || ''}
          onChange={(e) => updateNestedField('financial', 'startDate', e.target.value)}
          className="input-glass"
        />
      </div>

      {/* Experience & Fitness Level */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.exp || ''}
            onChange={(e) => updateField('exp', e.target.value)}
            className="input-glass"
          >
            <option value=""> </option>
            <option value="beginner"> (   )</option>
            <option value="intermediate"> (    )</option>
            <option value="advanced"> (   )</option>
            <option value="expert"> (   )</option>
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
               
          </label>
          <select
            value={formData.level || 'beginner'}
            onChange={(e) => updateField('level', e.target.value)}
            className="input-glass"
          >
            <option value="beginner"></option>
            <option value="intermediate"></option>
            <option value="advanced"></option>
          </select>
        </div>
      </div>

      {/* Job & Activity */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
            
          </label>
          <input
            type="text"
            value={formData.job || ''}
            onChange={(e) => updateField('job', e.target.value)}
            className="input-glass"
            placeholder=" "
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
              
          </label>
          <select
            value={formData.activity || '1.2'}
            onChange={(e) => updateField('activity', e.target.value)}
            className="input-glass"
          >
            <option value="1.2"> ()</option>
            <option value="1.375"> ( )</option>
            <option value="1.55"> ( )</option>
            <option value="1.725">  ( )</option>
            <option value="1.9"> ( )</option>
          </select>
        </div>
      </div>

      {/* Contract Summary */}
      <div className="glass-card p-4 rounded-xl border border-[var(--glass-border)]">
        <h4 className="text-md font-bold mb-3 text-[var(--text-primary)] flex items-center gap-2">
          <FileText className="w-4 h-4" />
           
        </h4>

        <div className="space-y-2 text-sm">
          <div className="flex justify-between">
            <span className="text-[var(--text-secondary)]">  :</span>
            <span className="font-semibold">{formatCurrency(formData.financial?.amount || 0)} </span>
          </div>

          <div className="flex justify-between">
            <span className="text-[var(--text-secondary)]"> :</span>
            <span className="font-semibold">{formData.financial?.duration || 1} </span>
          </div>

          <div className="flex justify-between">
            <span className="text-[var(--text-secondary)]"> :</span>
            <span className="font-semibold">
              {formData.financial?.startDate
                ? new Date(formData.financial.startDate).toLocaleDateString('fa-IR')
                : ' '
              }
            </span>
          </div>

          <div className="flex justify-between border-t border-[var(--glass-border)] pt-2 mt-2">
            <span className="text-[var(--text-primary)] font-bold"> :</span>
            <span className="font-bold text-green-600 dark:text-green-400">
              {formatCurrency(calculateTotalAmount())} 
            </span>
          </div>
        </div>
      </div>

      {/* Payment Schedule */}
      {(formData.financial?.amount || 0) > 0 && (formData.financial?.duration || 1) > 1 && (
        <div className="glass-card p-4 rounded-xl border border-[var(--glass-border)]">
          <h4 className="text-md font-bold mb-3 text-[var(--text-primary)] flex items-center gap-2">
            <Clock className="w-4 h-4" />
             
          </h4>

          <div className="space-y-2">
            {Array.from({ length: formData.financial?.duration || 1 }, (_, index) => {
              const monthNumber = index + 1;
              const paymentDate = formData.financial?.startDate
                ? (() => {
                    const date = new Date(formData.financial!.startDate!);
                    date.setMonth(date.getMonth() + index);
                    return date;
                  })()
                : null;

              return (
                <div key={monthNumber} className="flex justify-between items-center p-2 rounded-lg bg-[var(--glass-bg)]">
                  <div className="flex items-center gap-2">
                    <div className="w-6 h-6 rounded-full bg-[var(--accent-color)] text-white text-xs flex items-center justify-center font-bold">
                      {monthNumber}
                    </div>
                    <span className="text-sm">
                       {monthNumber}
                      {paymentDate && (
                        <span className="text-[var(--text-secondary)] mr-2">
                          ({paymentDate.toLocaleDateString('fa-IR', { month: 'long', year: 'numeric' })})
                        </span>
                      )}
                    </span>
                  </div>
                  <span className="font-semibold text-green-600 dark:text-green-400">
                    {formatCurrency(formData.financial?.amount || 0)} 
                  </span>
                </div>
              );
            })}
          </div>
        </div>
      )}
    </div>
  );
};




==================================================
FILE: .\src\components\tabs\IdentityTab.tsx
==================================================
import React from 'react';
import { User, Phone, Mail, MapPin, GraduationCap, Heart } from 'lucide-react';
import type { UseUserFormReturn } from '../../hooks/useUserForm';

interface IdentityTabProps {
  form: UseUserFormReturn;
}

export const IdentityTab: React.FC<IdentityTabProps> = ({ form }) => {
  const { formData, errors, updateField } = form;

  return (
    <div className="space-y-6">
      {/* Basic Information */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
                *
          </label>
          <div className="relative">
            <User className="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-secondary)]" />
            <input
              type="text"
              value={formData.name || ''}
              onChange={(e) => updateField('name', e.target.value)}
              className={`input-glass pr-10 ${errors.name ? 'border-red-500' : ''}`}
              placeholder="    "
            />
          </div>
          {errors.name && <p className="text-red-500 text-xs mt-1">{errors.name}</p>}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
              *
          </label>
          <div className="relative">
            <Phone className="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-secondary)]" />
            <input
              type="tel"
              value={formData.phone || ''}
              onChange={(e) => updateField('phone', e.target.value)}
              className={`input-glass pr-10 ${errors.phone ? 'border-red-500' : ''}`}
              placeholder=""
            />
          </div>
          {errors.phone && <p className="text-red-500 text-xs mt-1">{errors.phone}</p>}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
            
          </label>
          <div className="relative">
            <Mail className="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-secondary)]" />
            <input
              type="email"
              value={formData.email || ''}
              onChange={(e) => updateField('email', e.target.value)}
              className={`input-glass pr-10 ${errors.email ? 'border-red-500' : ''}`}
              placeholder="email@example.com"
            />
          </div>
          {errors.email && <p className="text-red-500 text-xs mt-1">{errors.email}</p>}
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
            
          </label>
          <select
            value={formData.gender || 'male'}
            onChange={(e) => updateField('gender', e.target.value)}
            className="input-glass"
          >
            <option value="male"></option>
            <option value="female"></option>
          </select>
        </div>
      </div>

      {/* Additional Information */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
            
          </label>
          <div className="relative">
            <GraduationCap className="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-secondary)]" />
            <select
              value={formData.education || ''}
              onChange={(e) => updateField('education', e.target.value)}
              className="input-glass pr-10"
            >
              <option value=""> </option>
              <option value="elementary"></option>
              <option value="middle"></option>
              <option value="high"></option>
              <option value="associate"></option>
              <option value="bachelor"></option>
              <option value="master"> </option>
              <option value="phd"></option>
            </select>
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <div className="relative">
            <Heart className="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--text-secondary)]" />
            <select
              value={formData.maritalStatus || 'single'}
              onChange={(e) => updateField('maritalStatus', e.target.value)}
              className="input-glass pr-10"
            >
              <option value="single"></option>
              <option value="married"></option>
              <option value="divorced"></option>
              <option value="widowed"></option>
            </select>
          </div>
        </div>
      </div>

      {/* Address */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
          
        </label>
        <div className="relative">
          <MapPin className="absolute right-3 top-3 w-5 h-5 text-[var(--text-secondary)]" />
          <textarea
            value={formData.address || ''}
            onChange={(e) => updateField('address', e.target.value)}
            className="input-glass pr-10 min-h-[80px] resize-none"
            placeholder="    "
            rows={3}
          />
        </div>
      </div>
    </div>
  );
};




==================================================
FILE: .\src\components\tabs\MedicalTab.tsx
==================================================
import React from 'react';
import { Heart, Pill, AlertTriangle, Stethoscope, Shield } from 'lucide-react';
import type { UseUserFormReturn } from '../../hooks/useUserForm';

interface MedicalTabProps {
  form: UseUserFormReturn;
}

const INJURIES_LIST = [
  ' ', ' ', ' ', ' ', '',
  ' ', '', '', '', ' ',
  ' ', '  ', '  ', ' ',
  ' ', '  ', '', '',
  ' ', ' ', '', '',
  ' ', ' ', ' '
];

const CONDITIONS_LIST = [
  '  1', '  2', '', ' ', ' ',
  ' ', ' ', ' ', '', '',
  ' ', ' ', '', '', ' ',
  ' ', ' ', ' ', ' ',
  ' ', '  ', ' ', ' ',
  '', '', '', '', '', '',
  ' ', '  ', ''
];

export const MedicalTab: React.FC<MedicalTabProps> = ({ form }) => {
  const { formData, updateField } = form;

  const toggleInjury = (injury: string) => {
    const currentInjuries = formData.injuries || [];
    if (currentInjuries.includes(injury)) {
      updateField('injuries', currentInjuries.filter(i => i !== injury));
    } else {
      updateField('injuries', [...currentInjuries, injury]);
    }
  };

  const toggleCondition = (condition: string) => {
    const currentConditions = formData.medicalConditions || [];
    if (currentConditions.includes(condition)) {
      updateField('medicalConditions', currentConditions.filter(c => c !== condition));
    } else {
      updateField('medicalConditions', [...currentConditions, condition]);
    }
  };

  return (
    <div className="space-y-6">
      {/* Injuries Section */}
      <div className="glass-card p-4 rounded-xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold mb-4 text-[var(--text-primary)] flex items-center gap-2">
          <AlertTriangle className="w-5 h-5 text-orange-500" />
             
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
          {INJURIES_LIST.map(injury => (
            <label
              key={injury}
              className={`flex items-center gap-2 cursor-pointer p-3 rounded-lg border transition-all ${
                formData.injuries?.includes(injury)
                  ? 'bg-red-500/10 border-red-500/30 text-red-700 dark:text-red-400'
                  : 'bg-[var(--glass-bg)] border-[var(--glass-border)] hover:border-red-500/30'
              }`}
            >
              <input
                type="checkbox"
                checked={formData.injuries?.includes(injury) || false}
                onChange={() => toggleInjury(injury)}
                className="w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500"
              />
              <span className="text-sm font-medium">{injury}</span>
            </label>
          ))}
        </div>
      </div>

      {/* Medical Conditions Section */}
      <div className="glass-card p-4 rounded-xl border border-[var(--glass-border)]">
        <h3 className="text-lg font-bold mb-4 text-[var(--text-primary)] flex items-center gap-2">
          <Heart className="w-5 h-5 text-red-500" />
           
        </h3>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
          {CONDITIONS_LIST.map(condition => (
            <label
              key={condition}
              className={`flex items-center gap-2 cursor-pointer p-3 rounded-lg border transition-all ${
                formData.medicalConditions?.includes(condition)
                  ? 'bg-blue-500/10 border-blue-500/30 text-blue-700 dark:text-blue-400'
                  : 'bg-[var(--glass-bg)] border-[var(--glass-border)] hover:border-blue-500/30'
              }`}
            >
              <input
                type="checkbox"
                checked={formData.medicalConditions?.includes(condition) || false}
                onChange={() => toggleCondition(condition)}
                className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"
              />
              <span className="text-sm font-medium">{condition}</span>
            </label>
          ))}
        </div>
      </div>

      {/* Medications */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)] flex items-center gap-2">
          <Pill className="w-4 h-4" />
           
        </label>
        <textarea
          value={formData.medications || ''}
          onChange={(e) => updateField('medications', e.target.value)}
          className="input-glass min-h-[100px] resize-none"
          placeholder="        ..."
          rows={4}
        />
      </div>

      {/* Lifestyle Factors */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.sleep || 'fair'}
            onChange={(e) => updateField('sleep', e.target.value)}
            className="input-glass"
          >
            <option value="excellent"> (+ )</option>
            <option value="good"> (- )</option>
            <option value="fair"> (- )</option>
            <option value="poor"> (   )</option>
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.smoke || 'no'}
            onChange={(e) => updateField('smoke', e.target.value)}
            className="input-glass"
          >
            <option value="no"></option>
            <option value="occasional"></option>
            <option value="regular"></option>
            <option value="heavy"></option>
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.alcohol || 'no'}
            onChange={(e) => updateField('alcohol', e.target.value)}
            className="input-glass"
          >
            <option value="no"></option>
            <option value="occasional"></option>
            <option value="regular"></option>
            <option value="heavy"></option>
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)]">
             
          </label>
          <select
            value={formData.caffeine || 'no'}
            onChange={(e) => updateField('caffeine', e.target.value)}
            className="input-glass"
          >
            <option value="no"></option>
            <option value="low"> (- )</option>
            <option value="moderate"> (- )</option>
            <option value="high"> (+ )</option>
          </select>
        </div>
      </div>

      {/* Allergies */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)] flex items-center gap-2">
          <Shield className="w-4 h-4 text-yellow-500" />
            
        </label>
        <textarea
          value={formData.allergy || ''}
          onChange={(e) => updateField('allergy', e.target.value)}
          className="input-glass min-h-[80px] resize-none"
          placeholder="         ..."
          rows={3}
        />
      </div>

      {/* Additional Notes */}
      <div>
        <label className="block text-sm font-semibold mb-2 text-[var(--text-primary)] flex items-center gap-2">
          <Stethoscope className="w-4 h-4" />
            
        </label>
        <textarea
          value={formData.notes || ''}
          onChange={(e) => updateField('notes', e.target.value)}
          className="input-glass min-h-[100px] resize-none"
          placeholder="    ..."
          rows={4}
        />
      </div>
    </div>
  );
};




==================================================
FILE: .\src\components\TrainingPanel\AddExerciseForm.tsx
==================================================
import React, { useState, useEffect, useMemo, useCallback, memo } from 'react';
import { Search, AlertTriangle } from 'lucide-react';
import toast from 'react-hot-toast';
import type { WorkoutItem, WorkoutSystemType, WorkoutMode } from '../../types/index';
import { useDebounce } from '../../hooks/useDebounce';

interface AddExerciseFormProps {
  mode: WorkoutMode;
  canEdit: boolean;
  resistanceExercises?: Record<string, Record<string, string[]>>;
  correctiveExercises?: Record<string, string[]>;
  cardioExercises?: string[];
  warmupCooldown?: Record<string, string[]>;
  onAddExercise: (exercise: WorkoutItem) => void;
  warning: string | null;
}

interface FormData {
  system: WorkoutSystemType;
  muscle: string;
  subMuscle: string;
  ex1: string;
  ex2: string;
  name3: string;
  name4: string;
  sets: string;
  reps: string;
  rest: string;
  restUnit: 's' | 'm';
  note: string;
  cCategory: string;
  cType: string;
  cTime: string;
  cInt: string;
  cIntensity: string;
  corrEx: string;
  corrType: string;
  dropCount: string;
  restPauseTime: string;
  tempo: string;
  holdTime: string;
  warmupType: string;
  cooldownType: string;
  duration?: string;
}

const AddExerciseForm: React.FC<AddExerciseFormProps> = memo(({
  mode,
  canEdit,
  resistanceExercises,
  correctiveExercises,
  cardioExercises,
  warmupCooldown,
  onAddExercise,
  warning
}) => {
  const [formData, setFormData] = useState<FormData>({
    system: 'normal',
    muscle: '',
    subMuscle: '',
    ex1: '',
    ex2: '',
    name3: '',
    name4: '',
    sets: '3',
    reps: '10',
    rest: '90',
    restUnit: 's',
    note: '',
    cCategory: '',
    cType: '',
    cTime: '20',
    cInt: '100',
    cIntensity: 'moderate',
    corrEx: '',
    corrType: '',
    dropCount: '',
    restPauseTime: '',
    tempo: '',
    holdTime: '',
    warmupType: '',
    cooldownType: '',
    duration: ''
  });

  const [subMuscles, setSubMuscles] = useState<string[]>([]);
  const [exercises, setExercises] = useState<string[]>([]);
  const [corrExercisesList, setCorrExercisesList] = useState<string[]>([]);
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearch = useDebounce(searchTerm, 300);

  // Update sub-muscles when muscle changes
  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.muscle && resistanceExercises && resistanceExercises[formData.muscle]) {
        setSubMuscles(Object.keys(resistanceExercises[formData.muscle]));
      } else setSubMuscles([]);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.muscle, resistanceExercises]);

  // Update exercises when sub-muscle changes
  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.subMuscle && formData.muscle && resistanceExercises && resistanceExercises[formData.muscle]) {
        setExercises(resistanceExercises[formData.muscle][formData.subMuscle] || []);
      } else setExercises([]);
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.subMuscle, formData.muscle, resistanceExercises]);

  // Update corrective exercises when type changes
  useEffect(() => {
    const timer = setTimeout(() => {
      if (formData.corrType && correctiveExercises) {
        setCorrExercisesList(correctiveExercises[formData.corrType] || []);
      }
    }, 0);
    return () => clearTimeout(timer);
  }, [formData.corrType, correctiveExercises]);

  // Reset form when mode changes
  useEffect(() => {
    const timer = setTimeout(() => {
      setFormData(prev => ({
        system: 'normal', muscle: '', subMuscle: '', ex1: '', ex2: '', name3: '', name4: '', sets: '3', reps: '10', 
        rest: prev.rest, restUnit: prev.restUnit, note: '',
        cCategory: '', cType: '', cTime: '', cInt: '', cIntensity: '', corrEx: '', corrType: '',
        dropCount: '', restPauseTime: '', tempo: '', holdTime: '',
        warmupType: '', cooldownType: ''
      }));
      setSubMuscles([]);
      setExercises([]);
      setCorrExercisesList([]);
      setSearchTerm('');
    }, 0);
    return () => clearTimeout(timer);
  }, [mode]);

  // Filter exercises based on search
  const filteredExercises = useMemo(() => {
    if (!debouncedSearch) return exercises;
    const lowerSearch = debouncedSearch.toLowerCase();
    return exercises.filter(ex => ex.toLowerCase().includes(lowerSearch));
  }, [exercises, debouncedSearch]);

  const handleAddExercise = useCallback(() => {
    if (!canEdit) {
      toast.error('   ');
      return;
    }

    let exercise: WorkoutItem;

    if (mode === 'resist') {
      if (!formData.ex1) {
        toast.error('    ');
        return;
      }
      if (formData.system === 'superset' && !formData.ex2) {
        toast.error('   2   ');
        return;
      }
      if ((formData.system === 'triset' || formData.system === 'giantset') && (!formData.ex2 || !formData.name3)) {
        toast.error(` ${formData.system === 'triset' ? '' : ''}  3   `);
        return;
      }

      exercise = {
        type: formData.system,
        mode: 'resist',
        name: formData.ex1,
        name2: formData.ex2 || undefined,
        name3: formData.name3 || undefined,
        name4: formData.name4 || undefined,
        sets: formData.sets,
        reps: formData.reps,
        rest: formData.rest,
        restUnit: formData.restUnit,
        intensity: formData.system === 'pyramid' ? formData.cIntensity : undefined,
        dropCount: formData.dropCount || undefined,
        restPauseTime: formData.restPauseTime || undefined,
        tempo: formData.tempo || undefined,
        holdTime: formData.holdTime || undefined,
        note: formData.note || undefined,
      };
    } else if (mode === 'cardio') {
      if (!formData.cCategory) {
        toast.error('   ');
        return;
      }
      exercise = {
        type: 'cardio',
        mode: 'cardio',
        name: formData.cCategory,
        duration: formData.cTime,
        intensity: formData.cIntensity,
        note: formData.note || undefined,
      };
    } else if (mode === 'corrective') {
      if (!formData.corrEx) {
        toast.error('    ');
        return;
      }
      exercise = {
        type: 'corrective',
        name: formData.corrEx,
        sets: formData.sets,
        reps: formData.reps,
        rest: formData.rest,
        restUnit: formData.restUnit,
        note: formData.note || undefined,
      };
    } else if (mode === 'warmup') {
      if (!formData.warmupType) {
        toast.error('    ');
        return;
      }
      exercise = {
        type: 'warmup',
        name: formData.warmupType,
        duration: formData.cTime,
        note: formData.note || undefined,
      };
    } else if (mode === 'cooldown') {
      if (!formData.cooldownType) {
        toast.error('    ');
        return;
      }
      exercise = {
        type: 'cooldown',
        name: formData.cooldownType,
        duration: formData.cTime,
        note: formData.note || undefined,
      };
    } else {
      toast.error('  ');
      return;
    }

    onAddExercise(exercise);
    toast.success('  ');
  }, [canEdit, mode, formData, onAddExercise]);

  if (!canEdit) {
    return (
      <div className="p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl text-center text-yellow-600 dark:text-yellow-400 text-sm">
             
      </div>
    );
  }

  return (
    <div className="space-y-4 p-6 bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-2xl">
      {warning && (
        <div className="flex gap-2 p-3 bg-red-500/10 border border-red-500/30 rounded-lg">
          <AlertTriangle size={18} className="text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5" />
          <p className="text-sm text-red-600 dark:text-red-400">{warning}</p>
        </div>
      )}

      {/* Mode-specific form content */}
      {mode === 'resist' && (
        <div className="space-y-3">
          <select className="input-glass w-full" value={formData.system} onChange={e => setFormData({ ...formData, system: e.target.value as WorkoutSystemType })}>
            <option value="normal"> </option>
            <option value="superset"></option>
            <option value="triset"></option>
            <option value="giantset"></option>
            <option value="dropset"></option>
            <option value="restpause">-</option>
            <option value="pyramid"></option>
            <option value="tempo"></option>
            <option value="isometric"></option>
          </select>

          <div className="grid grid-cols-2 gap-2">
            <select className="input-glass text-xs" value={formData.muscle} onChange={e => setFormData({ ...formData, muscle: e.target.value, subMuscle: '' })}>
              <option value="">...</option>
              {resistanceExercises ? Object.keys(resistanceExercises).map(m => <option key={m} value={m}>{m}</option>) : null}
            </select>
            <select className="input-glass text-xs" value={formData.subMuscle} onChange={e => setFormData({ ...formData, subMuscle: e.target.value })}>
              <option value="">...</option>
              {subMuscles.map(s => <option key={s} value={s}>{s}</option>)}
            </select>
          </div>

          {exercises.length > 10 && (
            <div className="relative">
              <input
                type="text"
                className="input-glass pl-8 w-full text-sm"
                placeholder=" ..."
                value={searchTerm}
                onChange={e => setSearchTerm(e.target.value)}
              />
              <Search size={14} className="absolute left-3 top-3.5 text-slate-400" />
            </div>
          )}

          <select className="input-glass w-full font-bold text-[var(--accent-color)]" value={formData.ex1} onChange={e => setFormData({ ...formData, ex1: e.target.value })}>
            <option value=""> ...</option>
            {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
          </select>

          {formData.system === 'superset' && (
            <select className="input-glass w-full border-r-4 border-r-yellow-400 font-bold text-yellow-600 dark:text-yellow-400" value={formData.ex2} onChange={e => setFormData({ ...formData, ex2: e.target.value })}>
              <option value="">+    ()</option>
              {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
            </select>
          )}

          {(formData.system === 'triset' || formData.system === 'giantset') && (
            <>
              <select className="input-glass w-full border-r-4 border-r-yellow-400 font-bold text-yellow-600 dark:text-yellow-400" value={formData.ex2} onChange={e => setFormData({ ...formData, ex2: e.target.value })}>
                <option value="">+    ()</option>
                {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
              </select>
              <select className="input-glass w-full border-r-4 border-r-purple-400 font-bold text-purple-600 dark:text-purple-400" value={formData.name3} onChange={e => setFormData({ ...formData, name3: e.target.value })}>
                <option value="">+    ()</option>
                {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
              </select>
              {formData.system === 'giantset' && (
                <select className="input-glass w-full border-r-4 border-r-red-400 font-bold text-red-600 dark:text-red-400" value={formData.name4} onChange={e => setFormData({ ...formData, name4: e.target.value })}>
                  <option value="">+    ()</option>
                  {filteredExercises.map(e => <option key={e} value={e}>{e}</option>)}
                </select>
              )}
            </>
          )}

          {formData.system === 'dropset' && (
            <div className="bg-yellow-500/10 border border-yellow-500/30 p-3 rounded-lg">
              <label className="text-xs text-yellow-600 dark:text-yellow-400 font-bold block mb-1"> </label>
              <input className="input-glass text-center w-full font-bold" type="number" placeholder="2  3" value={formData.dropCount} onChange={e => setFormData({ ...formData, dropCount: e.target.value })} />
            </div>
          )}

          {formData.system === 'restpause' && (
            <div className="bg-purple-500/10 border border-purple-500/30 p-3 rounded-lg">
              <label className="text-xs text-purple-600 dark:text-purple-400 font-bold block mb-1">  ()</label>
              <input className="input-glass text-center w-full font-bold" type="number" placeholder="15-20" value={formData.restPauseTime} onChange={e => setFormData({ ...formData, restPauseTime: e.target.value })} />
            </div>
          )}

          {formData.system === 'tempo' && (
            <div className="bg-[var(--accent-color)]/10 border border-[var(--accent-color)]/30 p-3 rounded-lg">
              <label className="text-xs text-[var(--accent-color)] font-bold block mb-1"></label>
              <input className="input-glass text-center w-full font-mono font-bold" placeholder="3-1-2-0" value={formData.tempo} onChange={e => setFormData({ ...formData, tempo: e.target.value })} />
            </div>
          )}

          {formData.system === 'isometric' && (
            <div className="bg-green-500/10 border border-green-500/30 p-3 rounded-lg">
              <label className="text-xs text-green-600 dark:text-green-400 font-bold block mb-1">  ()</label>
              <input className="input-glass text-center w-full font-bold" type="number" placeholder="30-60" value={formData.holdTime} onChange={e => setFormData({ ...formData, holdTime: e.target.value })} />
            </div>
          )}

          <div className="grid grid-cols-3 gap-2">
            <div>
              <label className="text-xs text-[var(--text-secondary)] mb-1 block"></label>
              <input className="input-glass text-center w-full" type="number" value={formData.sets} onChange={e => setFormData({ ...formData, sets: e.target.value })} />
            </div>
            <div>
              <label className="text-xs text-[var(--text-secondary)] mb-1 block"></label>
              <input className="input-glass text-center w-full" type="number" value={formData.reps} onChange={e => setFormData({ ...formData, reps: e.target.value })} />
            </div>
            <div>
              <label className="text-xs text-[var(--text-secondary)] mb-1 block"></label>
              <div className="flex gap-1">
                <input className="input-glass text-center flex-1" type="number" value={formData.rest} onChange={e => setFormData({ ...formData, rest: e.target.value })} />
                <select className="input-glass w-12" value={formData.restUnit} onChange={e => setFormData({ ...formData, restUnit: e.target.value as 's' | 'm' })}>
                  <option value="s"></option>
                  <option value="m"></option>
                </select>
              </div>
            </div>
          </div>

          <input className="input-glass w-full text-sm" type="text" placeholder="..." value={formData.note} onChange={e => setFormData({ ...formData, note: e.target.value })} />
        </div>
      )}

      {/* Other modes... (cardio, corrective, warmup, cooldown) */}
      {mode === 'cardio' && cardioExercises && (
        <div className="space-y-3">
          <select className="input-glass w-full" value={formData.cCategory} onChange={e => setFormData({ ...formData, cCategory: e.target.value })}>
            <option value=""> ...</option>
            {cardioExercises.map(c => <option key={c} value={c}>{c}</option>)}
          </select>
          <div className="grid grid-cols-2 gap-2">
            <div>
              <label className="text-xs text-[var(--text-secondary)] mb-1 block"> ()</label>
              <input className="input-glass w-full text-center" type="number" value={formData.cTime} onChange={e => setFormData({ ...formData, cTime: e.target.value })} />
            </div>
            <div>
              <label className="text-xs text-[var(--text-secondary)] mb-1 block"></label>
              <select className="input-glass w-full" value={formData.cIntensity} onChange={e => setFormData({ ...formData, cIntensity: e.target.value })}>
                <option value="low"></option>
                <option value="moderate"></option>
                <option value="high"></option>
              </select>
            </div>
          </div>
        </div>
      )}

      <button
        onClick={handleAddExercise}
        className="btn-glass bg-[var(--accent-color)] text-white w-full py-2.5 rounded-xl font-bold transition-all hover:shadow-lg"
        type="button"
      >
          
      </button>
    </div>
  );
});

AddExerciseForm.displayName = 'AddExerciseForm';
export default AddExerciseForm;


==================================================
FILE: .\src\components\TrainingPanel\ExerciseCard.tsx
==================================================
import React from 'react';

const ExerciseCard = () => {
  return (
    <div>
      {/* Content for ExerciseCard component */}
    </div>
  );
};

export default ExerciseCard;


==================================================
FILE: .\src\components\TrainingPanel\ExerciseRow.tsx
==================================================
import React, { memo } from 'react';
import { GripVertical, Trash2 } from 'lucide-react';
import { useSortable } from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import type { WorkoutItem } from '../../types/index';

interface ExerciseRowProps {
  item: WorkoutItem;
  idx: number;
  day: number;
  onDelete: (idx: number) => void;
  canEdit: boolean;
}

const ExerciseRow: React.FC<ExerciseRowProps> = memo(({ item, idx: _idx, day, onDelete, canEdit }) => {
  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: `${day}-${_idx}` });
  
  const style = {
    transform: CSS.Transform.toString(transform),
    transition: transition || 'all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)',
    opacity: isDragging ? 0.5 : 1,
    zIndex: isDragging ? 1000 : 1,
  };

  const getTypeLabel = (type?: string) => {
    return type === 'cardio' ? ' ' : 
           type === 'corrective' ? ' ' : 
           type === 'warmup' ? ' ' :
           type === 'cooldown' ? ' ' :
           ' ';
  };

  const getTypeStyles = (type?: string) => {
    return type === 'cardio' ? 'bg-green-500/20 text-green-600 dark:text-green-400 border-green-500/30' :
           type === 'corrective' ? 'bg-purple-500/20 text-purple-600 dark:text-purple-400 border-purple-500/30' :
           type === 'warmup' ? 'bg-amber-500/20 text-amber-600 dark:text-amber-400 border-amber-500/30' :
           type === 'cooldown' ? 'bg-[var(--accent-color)]/20 text-[var(--accent-color)] border-[var(--accent-color)]/30' :
           'bg-[var(--accent-color)]/20 text-[var(--accent-color)] border-[var(--accent-color)]/30';
  };

  return (
    <tr ref={setNodeRef} style={style} className="hover:bg-gradient-to-r hover:from-[var(--accent-color)]/8 hover:to-transparent group border-b border-[var(--glass-border)]/50 transition-all duration-500">
      {/* Drag Handle */}
      <td className="p-3 text-center">
        <button 
          {...attributes} 
          {...listeners} 
          className="cursor-grab active:cursor-grabbing p-2 hover:bg-[var(--accent-color)]/10 rounded-lg transition-all duration-500 group-hover:scale-110"
          aria-label={` ${item.name || ''}`}
          type="button"
          disabled={!canEdit}
        >
          <GripVertical size={18} className="text-[var(--text-secondary)] group-hover:text-[var(--accent-color)] transition-colors" aria-hidden="true" />
        </button>
      </td>

      {/* Exercise Details */}
      <td className="p-4 align-top">
        {/* Type Badge */}
        <div className="flex items-center gap-2 flex-wrap mb-2">
          <span className={`text-[10px] px-2.5 py-1 rounded-lg font-bold border ${getTypeStyles(item.type)}`}>
            {getTypeLabel(item.type)}
          </span>
        </div>

        {/* Exercise Names */}
        <div className="font-bold text-[var(--text-primary)] text-sm mt-1.5 mb-1">{item.name}</div>
        {item.name2 && (
          <div className="text-xs text-yellow-600 dark:text-yellow-400 mt-1 font-semibold bg-yellow-500/10 px-2 py-0.5 rounded inline-block border border-yellow-500/20">
            + {item.name2}
          </div>
        )}
        {item.name3 && (
          <div className="text-xs text-purple-600 dark:text-purple-400 mt-1 font-semibold bg-purple-500/10 px-2 py-0.5 rounded inline-block border border-purple-500/20 mr-1">
            + {item.name3}
          </div>
        )}
        {item.name4 && (
          <div className="text-xs text-red-600 dark:text-red-400 mt-1 font-semibold bg-red-500/10 px-2 py-0.5 rounded inline-block border border-red-500/20 mr-1">
            + {item.name4}
          </div>
        )}

        {/* Special Type Info */}
        {item.type === 'dropset' && item.dropCount && (
          <div className="text-[10px] text-yellow-600 dark:text-yellow-400 mt-1 bg-yellow-500/10 px-2 py-0.5 rounded inline-block">
            {item.dropCount} 
          </div>
        )}
        {item.type === 'restpause' && item.restPauseTime && (
          <div className="text-[10px] text-purple-600 dark:text-purple-400 mt-1 bg-purple-500/10 px-2 py-0.5 rounded inline-block">
            -: {item.restPauseTime}
          </div>
        )}
        {item.type === 'tempo' && item.tempo && (
          <div className="text-[10px] text-[var(--accent-color)] mt-1 bg-[var(--accent-color)]/10 px-2 py-0.5 rounded inline-block font-mono">
            : {item.tempo}
          </div>
        )}
        {item.type === 'isometric' && item.holdTime && (
          <div className="text-[10px] text-green-600 dark:text-green-400 mt-1 bg-green-500/10 px-2 py-0.5 rounded inline-block">
            : {item.holdTime}
          </div>
        )}
        {item.note && <div className="text-[10px] text-[var(--text-secondary)] mt-1 bg-[var(--text-primary)]/5 p-1 rounded inline-block">{item.note}</div>}
      </td>

      {/* Sets */}
      <td className="p-4 text-center">
        <div className="inline-flex items-center justify-center w-10 h-10 rounded-lg bg-[var(--accent-color)]/10 border border-[var(--accent-color)]/20 font-bold text-[var(--accent-color)]">
          {item.sets || '-'}
        </div>
      </td>

      {/* Reps/Duration */}
      <td className="p-4 text-center">
        <div className="inline-flex items-center justify-center min-w-[60px] h-10 rounded-lg bg-[var(--accent-secondary)]/10 border border-[var(--accent-secondary)]/20 font-bold text-[var(--accent-secondary)]">
          {item.mode === 'cardio' ? `${item.duration} min` : item.reps || '-'}
        </div>
      </td>

      {/* Rest */}
      <td className="p-4 text-center">
        {item.rest ? (
          <div className="inline-flex items-center justify-center px-3 py-1.5 rounded-lg bg-[var(--text-primary)]/5 border border-[var(--glass-border)] text-xs text-[var(--text-secondary)] font-semibold">
            {item.rest} {item.restUnit === 'm' ? '' : ''}
          </div>
        ) : (
          <span className="text-[var(--text-secondary)] opacity-50">-</span>
        )}
      </td>

      {/* Delete Button */}
      <td className="p-4 text-center">
        <button
          onClick={() => onDelete(_idx)}
          disabled={!canEdit}
          className={`inline-flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-300 ${
            canEdit
              ? 'hover:bg-red-500/20 hover:text-red-600 dark:hover:text-red-400 text-[var(--text-secondary)] hover:border-red-500/30 border border-transparent'
              : 'opacity-50 cursor-not-allowed'
          }`}
          aria-label=""
          type="button"
        >
          <Trash2 size={18} />
        </button>
      </td>
    </tr>
  );
});

ExerciseRow.displayName = 'ExerciseRow';
export default ExerciseRow;


==================================================
FILE: .\src\components\TrainingPanel\index.ts
==================================================
/**
 * TrainingPanel Sub-components
 * Refactored to break down the monolithic TrainingPanel component
 */

export { default as WorkoutDayTabs } from './WorkoutDayTabs';
export { default as ExerciseRow } from './ExerciseRow';
export { default as AddExerciseForm } from './AddExerciseForm';

// Import types
export type { ReactNode } from 'react';


==================================================
FILE: .\src\components\TrainingPanel\MobileExerciseCard.tsx
==================================================
import React from 'react';
import { useSortable } from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { motion } from 'framer-motion';
import { GripVertical, Trash2 } from 'lucide-react';
import { SpotlightCard } from '../ui/SpotlightCard';
import type { WorkoutItem } from '../../types/index';

interface MobileExerciseCardProps {
  item: WorkoutItem;
  idx: number;
  day: number;
  onDelete: (idx: number) => void;
  canEdit: boolean;
}

export const MobileExerciseCard: React.FC<MobileExerciseCardProps> = ({
  item,
  idx,
  day,
  onDelete,
  canEdit,
}) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id: `${day}-${idx}` });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
    opacity: isDragging ? 0.5 : 1,
  };

  const formatSets = (sets: string | number) => {
    const num = typeof sets === 'string' ? parseInt(sets) : sets;
    return num ? `${num} ` : '-';
  };

  const formatReps = (reps: string | number) => {
    const num = typeof reps === 'string' ? parseInt(reps) : reps;
    return num ? `${num} ` : '-';
  };

  const formatRest = (rest: string | number, unit: string = 's') => {
    const num = typeof rest === 'string' ? parseInt(rest) : rest;
    return num ? `${num}${unit === 'm' ? 'd' : unit}` : '-';
  };

  return (
    <motion.div
      ref={setNodeRef}
      style={style}
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -10 }}
      className="mb-4"
    >
      <SpotlightCard
        className="p-4"
        spotlightColor="rgba(59, 130, 246, 0.15)"
        interactive={false}
      >
        <div className="flex items-start justify-between gap-3">
          {/* Drag Handle */}
          {canEdit && (
            <div
              {...attributes}
              {...listeners}
              className="flex-shrink-0 mt-1 cursor-grab active:cursor-grabbing text-[var(--text-secondary)] hover:text-[var(--accent-color)] transition-colors"
            >
              <GripVertical size={18} />
            </div>
          )}

          {/* Exercise Info */}
          <div className="flex-1 min-w-0">
            {/* Exercise Name */}
            <h3 className="font-bold text-sm text-[var(--text-primary)] mb-3 truncate">
              {item.name || ' '}
            </h3>

            {/* Badges for Sets, Reps, Rest */}
            <div className="flex flex-wrap gap-2">
              {item.sets && (
                <span className="inline-flex items-center px-2 py-1 rounded-lg bg-blue-500/20 text-blue-600 dark:text-blue-400 text-xs font-semibold border border-blue-500/30">
                  {formatSets(item.sets)}
                </span>
              )}
              {item.reps && (
                <span className="inline-flex items-center px-2 py-1 rounded-lg bg-green-500/20 text-green-600 dark:text-green-400 text-xs font-semibold border border-green-500/30">
                  {formatReps(item.reps)}
                </span>
              )}
              {item.rest && (
                <span className="inline-flex items-center px-2 py-1 rounded-lg bg-purple-500/20 text-purple-600 dark:text-purple-400 text-xs font-semibold border border-purple-500/30">
                  {formatRest(item.rest, item.restUnit)}
                </span>
              )}
            </div>

            {/* Additional Info */}
            {item.note && (
              <p className="mt-2 text-xs text-[var(--text-secondary)] line-clamp-2">
                 {item.note}
              </p>
            )}

            {/* Exercise Type Badge */}
            {item.type && item.type !== 'normal' && (
              <p className="mt-2 text-xs text-[var(--accent-color)] font-semibold">
                {item.type === 'nasm-corrective' ? ' ' : ` ${item.type}`}
              </p>
            )}
          </div>

          {/* Delete Button */}
          {canEdit && (
            <motion.button
              whileHover={{ scale: 1.1 }}
              whileTap={{ scale: 0.95 }}
              onClick={() => onDelete(idx)}
              className="flex-shrink-0 p-2 rounded-lg bg-red-500/10 text-red-600 dark:text-red-400 hover:bg-red-500/20 transition-colors"
              type="button"
            >
              <Trash2 size={16} />
            </motion.button>
          )}
        </div>
      </SpotlightCard>
    </motion.div>
  );
};

export default MobileExerciseCard;


==================================================
FILE: .\src\components\TrainingPanel\WorkoutDayTabs.tsx
==================================================
import React from 'react';

const WorkoutDayTabs = () => {
  return (
    <div>
      {/* Content for WorkoutDayTabs component */}
    </div>
  );
};

export default WorkoutDayTabs;


==================================================
FILE: .\src\components\ui\SpotlightCard.tsx
==================================================
import React, { useRef, useState, ReactNode } from 'react';
import { motion } from 'framer-motion';
import clsx from 'clsx';

interface SpotlightCardProps {
  children: ReactNode;
  className?: string;
  spotlightColor?: string;
  glassEffect?: boolean;
  interactive?: boolean;
  onClick?: () => void;
}

/**
 * SpotlightCard: A glassmorphism card with a cursor-tracking radial gradient spotlight effect
 * Uses framer-motion for smooth animations and Tailwind for styling
 */
export const SpotlightCard: React.FC<SpotlightCardProps> = ({
  children,
  className = '',
  spotlightColor = 'rgba(59, 130, 246, 0.1)', // Blue by default
  glassEffect = true,
  interactive = true,
  onClick,
}) => {
  const cardRef = useRef<HTMLDivElement>(null);
  const [spotlightPos, setSpotlightPos] = useState({ x: 0, y: 0 });
  const [isHovering, setIsHovering] = useState(false);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!interactive || !cardRef.current) return;

    const rect = cardRef.current.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    setSpotlightPos({ x, y });
  };

  const handleMouseEnter = () => {
    if (interactive) setIsHovering(true);
  };

  const handleMouseLeave = () => {
    if (interactive) setIsHovering(false);
  };

  return (
    <motion.div
      ref={cardRef}
      onMouseMove={handleMouseMove}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      onClick={onClick}
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.3 }}
      className={clsx(
        'relative overflow-hidden rounded-2xl transition-all duration-300',
        glassEffect && 'bg-white/5 border border-white/10 backdrop-blur-xl',
        interactive && 'cursor-pointer hover:border-white/20',
        onClick && 'hover:shadow-lg hover:shadow-blue-500/10',
        className
      )}
    >
      {/* Spotlight Effect */}
      {isHovering && interactive && (
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          transition={{ duration: 0.2 }}
          className="pointer-events-none absolute inset-0"
          style={{
            background: `radial-gradient(circle 400px at ${spotlightPos.x}px ${spotlightPos.y}px, ${spotlightColor}, transparent 80%)`,
          }}
        />
      )}

      {/* Static Subtle Gradient Background */}
      <div className="pointer-events-none absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-transparent opacity-40" />

      {/* Border Glow on Hover */}
      {isHovering && interactive && (
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          className="pointer-events-none absolute inset-0 rounded-2xl border border-white/20"
        />
      )}

      {/* Content */}
      <div className="relative z-10">{children}</div>
    </motion.div>
  );
};

export default SpotlightCard;


==================================================
FILE: .\src\components\workout\ActiveWorkoutMode.tsx
==================================================
import React, { useState, useCallback } from 'react';
import { Check, Clock, Target, Zap } from 'lucide-react';
import { ActiveWorkoutModeProps, ActiveWorkoutSet, WorkoutLog, WorkoutSession } from '../../types/interactive';
import { useWorkoutLog } from '../../hooks/useWorkoutLog';

const ActiveWorkoutMode: React.FC<ActiveWorkoutModeProps> = ({
  workoutPlan,
  onSaveSession,
  onLogUpdate
}) => {
  const { saveLog, isLoading } = useWorkoutLog();
  const [workoutSets, setWorkoutSets] = useState<Record<string, ActiveWorkoutSet[]>>({});
  const [startTime] = useState(new Date());
  const [completedExercises, setCompletedExercises] = useState<Set<string>>(new Set());

  // Initialize workout sets from plan
  React.useEffect(() => {
    const initialSets: Record<string, ActiveWorkoutSet[]> = {};

    Object.entries(workoutPlan || {}).forEach(([day, exercises]) => {
      exercises?.forEach((exercise: any) => {
        const sets: ActiveWorkoutSet[] = [];
        for (let i = 1; i <= (exercise.sets || 1); i++) {
          sets.push({
            exerciseName: exercise.name,
            setNumber: i,
            plannedReps: exercise.reps || 0,
            plannedWeight: exercise.weight || 0,
            actualReps: undefined,
            actualWeight: undefined,
            rpe: undefined,
            completed: false,
            notes: ''
          });
        }
        initialSets[exercise.name] = sets;
      });
    });

    setWorkoutSets(initialSets);
  }, [workoutPlan]);

  const updateSet = useCallback((exerciseName: string, setNumber: number, updates: Partial<ActiveWorkoutSet>) => {
    setWorkoutSets(prev => ({
      ...prev,
      [exerciseName]: prev[exerciseName]?.map(set =>
        set.setNumber === setNumber ? { ...set, ...updates } : set
      ) || []
    }));
  }, []);

  const toggleSetComplete = useCallback((exerciseName: string, setNumber: number) => {
    updateSet(exerciseName, setNumber, { completed: !workoutSets[exerciseName]?.[setNumber - 1]?.completed });
  }, [workoutSets, updateSet]);

  const saveSet = useCallback(async (exerciseName: string, setNumber: number) => {
    const set = workoutSets[exerciseName]?.[setNumber - 1];
    if (!set || !set.actualReps) return;

    const logData: Omit<WorkoutLog, 'id' | 'created_at' | 'updated_at'> = {
      user_id: '', // Will be set by the hook
      workout_date: new Date().toISOString().split('T')[0],
      exercise_name: exerciseName,
      set_number: setNumber,
      reps_performed: set.actualReps,
      weight_used: set.actualWeight,
      rpe: set.rpe,
      notes: set.notes,
      completed: set.completed
    };

    try {
      await saveLog(logData);
      onLogUpdate([logData as WorkoutLog]);
    } catch (error) {
      console.error('Error saving workout log:', error);
    }
  }, [workoutSets, saveLog, onLogUpdate]);

  const finishWorkout = useCallback(async () => {
    const endTime = new Date();
    const duration = Math.round((endTime.getTime() - startTime.getTime()) / 60000); // minutes

    // Collect all completed sets
    const allLogs: WorkoutLog[] = [];
    Object.entries(workoutSets).forEach(([exerciseName, sets]) => {
      sets.forEach(set => {
        if (set.actualReps) {
          allLogs.push({
            id: '',
            user_id: '',
            workout_date: new Date().toISOString().split('T')[0],
            exercise_name: exerciseName,
            set_number: set.setNumber,
            reps_performed: set.actualReps,
            weight_used: set.actualWeight,
            rpe: set.rpe,
            notes: set.notes,
            completed: set.completed,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          });
        }
      });
    });

    const session: WorkoutSession = {
      date: new Date().toISOString().split('T')[0],
      exercises: allLogs,
      totalSets: Object.values(workoutSets).flat().length,
      completedSets: allLogs.length,
      duration
    };

    try {
      await onSaveSession(session);
    } catch (error) {
      console.error('Error saving workout session:', error);
    }
  }, [workoutSets, startTime, onSaveSession]);

  const getExerciseProgress = (exerciseName: string) => {
    const sets = workoutSets[exerciseName] || [];
    const completed = sets.filter(set => set.completed).length;
    return { completed, total: sets.length };
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <div>
          <h2 className="text-2xl font-bold text-[var(--text-primary)]"> </h2>
          <p className="text-[var(--text-secondary)]">       </p>
        </div>
        <div className="flex items-center gap-4 text-sm text-[var(--text-secondary)]">
          <div className="flex items-center gap-1">
            <Clock size={16} />
            <span>{Math.floor((new Date().getTime() - startTime.getTime()) / 60000)} </span>
          </div>
        </div>
      </div>

      {/* Exercises */}
      <div className="space-y-8">
        {Object.entries(workoutSets).map(([exerciseName, sets]) => {
          const progress = getExerciseProgress(exerciseName);

          return (
            <div key={exerciseName} className="glass-card p-6 rounded-xl">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold text-[var(--text-primary)]">{exerciseName}</h3>
                <div className="flex items-center gap-2 text-sm">
                  <span className="text-[var(--text-secondary)]">
                    {progress.completed}/{progress.total} 
                  </span>
                  {progress.completed === progress.total && (
                    <Check className="text-green-500" size={16} />
                  )}
                </div>
              </div>

              {/* Sets */}
              <div className="space-y-3">
                {sets.map((set) => (
                  <div key={set.setNumber} className="flex items-center gap-4 p-3 bg-[var(--glass-bg)] rounded-lg">
                    <div className="flex items-center gap-2 min-w-[60px]">
                      <span className="text-sm font-medium text-[var(--text-secondary)]">
                         {set.setNumber}
                      </span>
                      <button
                        onClick={() => toggleSetComplete(exerciseName, set.setNumber)}
                        className={`w-5 h-5 rounded border-2 flex items-center justify-center transition ${
                          set.completed
                            ? 'bg-green-500 border-green-500 text-white'
                            : 'border-[var(--glass-border)] hover:border-green-500'
                        }`}
                      >
                        {set.completed && <Check size={12} />}
                      </button>
                    </div>

                    <div className="flex items-center gap-3 flex-1">
                      {/* Planned */}
                      <div className="text-xs text-[var(--text-secondary)]">
                        : {set.plannedReps} 
                        {set.plannedWeight && `  ${set.plannedWeight}kg`}
                      </div>

                      {/* Actual Reps */}
                      <div className="flex items-center gap-2">
                        <label className="text-xs text-[var(--text-secondary)]">:</label>
                        <input
                          type="number"
                          value={set.actualReps || ''}
                          onChange={(e) => updateSet(exerciseName, set.setNumber, {
                            actualReps: parseInt(e.target.value) || undefined
                          })}
                          className="w-16 px-2 py-1 text-sm bg-[var(--bg-primary)] border border-[var(--glass-border)] rounded"
                          placeholder={set.plannedReps.toString()}
                          min="0"
                        />
                      </div>

                      {/* Actual Weight */}
                      <div className="flex items-center gap-2">
                        <label className="text-xs text-[var(--text-secondary)]">:</label>
                        <input
                          type="number"
                          value={set.actualWeight || ''}
                          onChange={(e) => updateSet(exerciseName, set.setNumber, {
                            actualWeight: parseFloat(e.target.value) || undefined
                          })}
                          className="w-16 px-2 py-1 text-sm bg-[var(--bg-primary)] border border-[var(--glass-border)] rounded"
                          placeholder={set.plannedWeight?.toString() || '0'}
                          min="0"
                          step="0.5"
                        />
                        <span className="text-xs text-[var(--text-secondary)]">kg</span>
                      </div>

                      {/* RPE */}
                      <div className="flex items-center gap-2">
                        <label className="text-xs text-[var(--text-secondary)]">RPE:</label>
                        <select
                          value={set.rpe || ''}
                          onChange={(e) => updateSet(exerciseName, set.setNumber, {
                            rpe: parseInt(e.target.value) || undefined
                          })}
                          className="w-16 px-2 py-1 text-sm bg-[var(--bg-primary)] border border-[var(--glass-border)] rounded"
                        >
                          <option value="">-</option>
                          {Array.from({ length: 10 }, (_, i) => i + 1).map(rpe => (
                            <option key={rpe} value={rpe}>{rpe}</option>
                          ))}
                        </select>
                      </div>

                      {/* Save Button */}
                      <button
                        onClick={() => saveSet(exerciseName, set.setNumber)}
                        disabled={!set.actualReps || isLoading}
                        className="px-3 py-1 text-xs bg-[var(--accent-color)] text-white rounded hover:bg-[var(--accent-secondary)] disabled:opacity-50 disabled:cursor-not-allowed"
                      >
                        
                      </button>
                    </div>
                  </div>
                ))}
              </div>

              {/* Notes */}
              <div className="mt-4">
                <textarea
                  placeholder="  ..."
                  className="w-full p-3 text-sm bg-[var(--glass-bg)] border border-[var(--glass-border)] rounded-lg resize-none"
                  rows={2}
                  onChange={(e) => {
                    // Update notes for all sets of this exercise
                    sets.forEach((_, index) => {
                      updateSet(exerciseName, index + 1, { notes: e.target.value });
                    });
                  }}
                />
              </div>
            </div>
          );
        })}
      </div>

      {/* Finish Workout Button */}
      <div className="flex justify-center">
        <button
          onClick={finishWorkout}
          className="px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition shadow-lg hover:shadow-xl"
        >
          <div className="flex items-center gap-2">
            <Target size={20} />
            <span> </span>
          </div>
        </button>
      </div>
    </div>
  );
};

export default ActiveWorkoutMode;

==================================================
FILE: .\src\context\AppContext.tsx
==================================================
/* eslint-disable react-refresh/only-export-components */
/**
 * AppContext - Legacy wrapper for backward compatibility
 * This file provides a unified interface combining UIContext and DataContext
 * New code should use useUI() and useData() directly instead of useApp()
 */
import React from 'react';
import { UIProvider, useUI } from './UIContext';
import { DataProvider, useData } from './DataContext';
import type { AppContextType } from '../types/index';

// Create a combined context for backward compatibility
const AppContext = React.createContext<AppContextType | undefined>(undefined);

/**
 * AppProvider - Wraps UIProvider and DataProvider
 * This maintains backward compatibility while using the new architecture
 */
export const AppProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  return (
    <UIProvider>
      <DataProvider>
        <AppContextProvider>{children}</AppContextProvider>
      </DataProvider>
    </UIProvider>
  );
};

/**
 * Internal provider that combines UI and Data contexts
 */
const AppContextProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const ui = useUI();
  const data = useData();

  // Combine print functionality from UI with data
  const handlePrintPreview = (type: import('../types/index').PrintType) => {
    if (!data.activeUser) {
      // Show error if no active user
            return;
        }
    // Delegate to UI context - actual HTML generation should be done in components
    // that have access to activeUser and can call generatePrintHTML
    ui.handlePrintPreview(type, data.activeUser);
  };

  const value: AppContextType = {
    // Data from DataContext
    users: data.users,
    activeUser: data.activeUser,
    templates: data.templates,
    currentRole: data.currentRole,
    currentAccountId: data.currentAccountId,
    setCurrentRole: data.setCurrentRole,
    setCurrentAccountId: data.setCurrentAccountId,
    setActiveUserId: data.setActiveUserId,
    hasPermission: data.hasPermission,
    saveUser: data.saveUser,
    deleteUser: data.deleteUser,
    updateActiveUser: data.updateActiveUser,
    saveTemplate: data.saveTemplate,
    deleteTemplate: data.deleteTemplate,
    logoutUser: data.logoutUser,
    resetSystem: data.resetSystem,
    backupData: data.backupData,
    restoreData: data.restoreData,

    // UI from UIContext
    currentTab: ui.currentTab,
    theme: ui.theme,
    setCurrentTab: ui.setCurrentTab,
    toggleTheme: ui.toggleTheme,

    // Print functionality
    printData: ui.printData,
    handlePrintPreview,
    closePrintModal: ui.closePrintModal,
    downloadPDF: ui.downloadPDF
  };

  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
};

/**
 * useApp - Legacy hook for backward compatibility
 * @deprecated Use useUI() and useData() instead
 */
export const useApp = () => {
  const context = React.useContext(AppContext);
  if (!context) {
    throw new Error('useApp must be used within AppProvider');
  }
  return context;
};

// Export helper functions that were previously in AppContext
export { mapClientToUser } from './DataContext';


==================================================
FILE: .\src\context\AuthContext.tsx
==================================================
/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useContext, useEffect, useMemo, useState, useCallback } from 'react';
import type { Session, User } from '@supabase/supabase-js';
import { supabase, isSupabaseEnabled } from '../lib/supabaseClient';

type AuthFn = (identifier: string, password: string) => Promise<void>;
type RegisterFn = (params: { email?: string; password: string; fullName: string; role: string; username: string }) => Promise<void>;

interface Profile {
  id?: string;
  full_name?: string;
  role?: string;
  email?: string;
  username?: string;
}

interface AuthContextValue {
  user: User | null;
  session: Session | null;
  role: string | null;
  profile: Profile | null;
  loading: boolean;
  signInWithPassword: AuthFn;
  signUpWithPassword: AuthFn;
  register: RegisterFn;
  signOut: () => Promise<void>;
  ready: boolean;
}

const AuthContext = createContext<AuthContextValue | undefined>(undefined);

export const AuthProvider: React.FC<React.PropsWithChildren> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [session, setSession] = useState<Session | null>(null);
  const [loading, setLoading] = useState(false);
  const [ready, setReady] = useState(false);
  const [role, setRole] = useState<string | null>(null);
  const [profile, setProfile] = useState<Profile | null>(null);

  const loadProfile = async (uid: string) => {
    if (!supabase) return null;
    const { data, error } = await supabase.from('profiles').select('*').eq('id', uid).maybeSingle();

    if (error) {
      console.warn('loadProfile error', error.message);
      return null;
    }
    return data as Profile | null;
  };

  const resolveEmail = useCallback(async (identifier: string) => {
    if (!supabase) throw new Error('Supabase auth  ');
    if (identifier.includes('@')) return identifier;
    const { data, error } = await supabase.rpc('get_email_by_username', { p_username: identifier });
    if (error) throw error;
    if (!data) throw new Error('   ');
    return data as string;
  }, []);

  useEffect(() => {
    if (!isSupabaseEnabled || !supabase) {
      setReady(true);
      return;
    }
    let active = true;
    supabase.auth.getSession().then(({ data, error }) => {
      if (!active) return;
      if (!error && data?.session) {
        setSession(data.session);
        setUser(data.session.user);
        const rMeta = data.session.user?.user_metadata?.role;
        setRole(typeof rMeta === 'string' ? rMeta : null);
        loadProfile(data.session.user.id).then((p) => {
          if (p) {
            setProfile(p);
            if (p.role) setRole(p.role);
          }
        });
      }
      setReady(true);
    });
    const { data: sub } = supabase.auth.onAuthStateChange((_event, newSession) => {
      setSession(newSession);
      setUser(newSession?.user ?? null);
      const rMeta = newSession?.user?.user_metadata?.role;
      setRole(typeof rMeta === 'string' ? rMeta : null);
      if (newSession?.user?.id) {
        loadProfile(newSession.user.id).then((p) => {
          if (p) {
            setProfile(p);
            if (p.role) setRole(p.role);
          } else {
            setProfile(null);
          }
        });
      } else {
        setProfile(null);
      }
    });
    return () => {
      active = false;
      sub?.subscription.unsubscribe();
    };
  }, []);

  const signInWithPassword = useCallback(async (identifier: string, password: string) => {
    if (!isSupabaseEnabled || !supabase) {
      const error = new Error('Supabase auth  ');
      if (import.meta.env.DEV) console.error('Sign in error:', error);
      throw error;
    }
    
    // Validation 
    if (!identifier || !identifier.trim()) {
      throw new Error('     ');
    }
    
    if (!password || password.length < 6) {
      throw new Error('    6  ');
    }
    
    setLoading(true);
    try {
      const emailToUse = await resolveEmail(identifier);
      const { error } = await supabase.auth.signInWithPassword({ email: emailToUse, password });
      if (error) {
        //   Supabase    
        let errorMessage = '  ';
        if (error.message.includes('Invalid login credentials')) {
          errorMessage = '/      ';
        } else if (error.message.includes('Email not confirmed')) {
          errorMessage = '      ';
        } else if (error.message.includes('Too many requests')) {
          errorMessage = '   .    ';
        } else {
          errorMessage = error.message || '  ';
        }
        if (import.meta.env.DEV) console.error('Sign in error:', error);
        throw new Error(errorMessage);
      }
      // 
      if (import.meta.env.DEV) console.log('Sign in successful');
    } catch (err: unknown) {
      if (import.meta.env.DEV) console.error('Sign in error:', err);
      throw err;
    } finally {
      setLoading(false);
    }
  }, [resolveEmail]);

  const signUpWithPassword = useCallback(async (email: string, password: string) => {
    if (!isSupabaseEnabled || !supabase) throw new Error('Supabase auth  ');
    setLoading(true);
    try {
      const { error } = await supabase.auth.signUp({ email, password });
      if (error) throw error;
    } finally {
      setLoading(false);
    }
  }, []);

  const signOut = useCallback(async () => {
    if (!isSupabaseEnabled || !supabase) {
      setUser(null);
      setSession(null);
      return;
    }
    await supabase.auth.signOut();
    setUser(null);
    setSession(null);
  }, []);

  const register: RegisterFn = useCallback(async ({ email, password, fullName, role: r, username }) => {
    if (!isSupabaseEnabled || !supabase) {
      const error = new Error('Supabase auth  ');
      if (import.meta.env.DEV) console.error('Register error:', error);
      throw error;
    }
    
    // Validation 
    if (!fullName || !fullName.trim() || fullName.trim().length < 2) {
      throw new Error('    2  ');
    }
    
    if (!username || !username.trim() || username.trim().length < 3) {
      throw new Error('    3  ');
    }
    
    const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
    if (!usernameRegex.test(username)) {
      throw new Error('   3  20           ');
    }
    
    if (email && email.trim().length > 0) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        throw new Error('    ');
      }
    }
    
    if (!password || password.length < 8) {
      throw new Error('    8  ');
    }
    
    if (!r || (r !== 'coach' && r !== 'client')) {
      throw new Error('  ');
    }
    
    setLoading(true);
    try {
      //     
      const { data: existing, error: usernameErr } = await supabase
        .from('profiles')
        .select('id')
        .eq('username', username)
        .limit(1)
        .maybeSingle();
      
      if (usernameErr && usernameErr.code !== 'PGRST116') {
        if (import.meta.env.DEV) console.error('Username check error:', usernameErr);
        throw new Error('    ');
      }
      
      if (existing) {
        throw new Error('   .      ');
      }

      const finalEmail = (email && email.trim().length > 0) ? email.trim() : `${username}-${Date.now()}@placeholder.flexpro`;

      const { data, error } = await supabase.auth.signUp({
        email: finalEmail,
        password,
        options: {
          data: { role: r, full_name: fullName, username },
        }
      });
      
      if (error) {
        //   Supabase    
        let errorMessage = '  ';
        if (error.message.includes('User already registered')) {
          errorMessage = '     ';
        } else if (error.message.includes('Password')) {
          errorMessage = '   ';
        } else if (error.message.includes('Email')) {
          errorMessage = '  ';
        } else {
          errorMessage = error.message || '  ';
        }
        if (import.meta.env.DEV) console.error('Sign up error:', error);
        throw new Error(errorMessage);
      }
      
      //  
      if (data.user) {
        const { error: profileError } = await supabase.from('profiles').upsert({
          id: data.user.id,
          full_name: fullName,
          role: r,
          email: finalEmail,
          username
        });
        
        if (profileError) {
          if (import.meta.env.DEV) console.error('Profile upsert error:', profileError);
          throw new Error('   ');
        }
        
        setRole(r);
        setProfile({ id: data.user.id, full_name: fullName, role: r, email: finalEmail, username });
        if (import.meta.env.DEV) console.log('Registration successful');
      } else {
        throw new Error('   ');
      }
    } catch (err: unknown) {
      if (import.meta.env.DEV) console.error('Register error:', err);
      throw err;
    } finally {
      setLoading(false);
    }
  }, []);

  const value = useMemo<AuthContextValue>(() => ({
    user,
    session,
    loading,
    ready,
    role,
    profile,
    signInWithPassword,
    signUpWithPassword,
    register,
    signOut
  }), [user, session, loading, ready, role, profile, signInWithPassword, signUpWithPassword, register, signOut]);

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};

export const useAuth = () => {
  const ctx = useContext(AuthContext);
  if (!ctx) throw new Error('AuthContext   Provider   ');
  return ctx;
};



==================================================
FILE: .\src\context\DataContext.tsx
==================================================
/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useContext, useState, useEffect, useRef, useCallback, useMemo } from 'react';
import { toast } from 'react-hot-toast';
import Swal from 'sweetalert2';
import type {
  User,
  UserInput,
  UserId,
  Template,
  Role,
  PermissionAction,
  Client,
  WorkoutPlanFromDB,
  UserPlans,
  DataContextType,
  ProgramRequest
} from '../types/index';
import { supabase } from '../lib/supabaseClient';
import {
  searchFoods,
  searchExercises,
  getAllFoods,
  getAllExercises,
  getFoodCategories,
  getMuscleGroups,
  getExerciseTypes
} from '../lib/database';
import {
  fetchUsers as fetchUsersRemote,
  fetchTemplates as fetchTemplatesRemote,
  upsertUser as upsertUserRemote,
  removeUser as removeUserRemote,
  upsertTemplate as upsertTemplateRemote,
  removeTemplate as removeTemplateRemote,
  isSupabaseReady,
  fetchClientsByCoach,
  fetchWorkoutPlansByCoach,
  upsertClient,
  upsertWorkoutPlan,
  deleteClient,
  deleteWorkoutPlan,
  fetchRequestsByCoach,
  updateRequestStatus,
  deleteProgramRequest
} from '../lib/supabaseApi';
import { Food, Exercise } from '../types/database';
import { useAuth } from './AuthContext';
import { useUI } from './UIContext';

const STORAGE_KEY = 'flexProMaxData_v15';
const ROLE_KEY = 'flexRole';
const ACCOUNT_KEY = 'flexAccountId';

const DataContext = createContext<DataContextType | undefined>(undefined);

// Helper functions
/**
 * Generate a valid UUID v4 string for local user records
 * Uses crypto.randomUUID() for consistency with Supabase API
 */
const makeId = (): string => {
  if (typeof crypto !== 'undefined' && crypto.randomUUID) {
    try {
      return crypto.randomUUID();
    } catch (err) {
      // Fallback only for legacy environments (though unlikely in modern browsers)
      console.warn('UUID generation failed, using fallback:', err);
    }
  }
  // Fallback for compatibility with very old environments
  return `u-${Date.now()}-${Math.floor(Math.random() * 1e6)}`;
};

const migrateUser = (input: UserInput): User => {
  const user: User = {
    ...input,
    id: input.id ?? makeId(),
    plans: input.plans ?? { workouts: {}, diet: [], dietRest: [], supps: [], prog: [] },
    measurements: input.measurements ?? {},
    financial: input.financial ?? { startDate: '', duration: 1, amount: 0 },
    injuries: input.injuries ?? [],
    medicalConditions: input.medicalConditions ?? []
  };

  if (!user.plans.workouts) user.plans.workouts = {};
  for (let i = 1; i <= 7; i++) {
    if (!user.plans.workouts[i]) user.plans.workouts[i] = [];
  }
  if (!user.plans.diet) user.plans.diet = [];
  if (!user.plans.dietRest) {
    user.plans.dietRest = user.plans.diet && user.plans.diet.length > 0
      ? user.plans.diet.map(item => ({ ...item }))
      : [];
  }
  if (!user.plans.supps) user.plans.supps = [];
  if (!user.plans.prog) user.plans.prog = [];
  if (!user.measurements) user.measurements = {};
  if (!user.financial) user.financial = { startDate: '', duration: 1, amount: 0 };
  if (!user.injuries) user.injuries = [];
  if (!user.medicalConditions) user.medicalConditions = [];
  return user;
};

const planIdForClient = (clientId: string) => `${clientId}-plan`;

const clientPayloadFromUser = (user: User, coachId: string): Partial<Client> => ({
  id: String(user.id),
  coach_id: coachId,
  full_name: user.name,
  gender: user.gender,
  age: user.age ? String(user.age) : undefined,
  height: user.height ? String(user.height) : undefined,
  weight: user.weight ? String(user.weight) : undefined,
  goal: user.nutritionGoals ? String(user.nutritionGoals) : undefined,
  notes: user.notes,
  profile_data: { ...user, plans: user.plans }
});

const workoutPlanPayloadFromUser = (user: User, coachId: string): Partial<WorkoutPlanFromDB> => ({
  id: planIdForClient(String(user.id)),
  coach_id: coachId,
  client_id: String(user.id),
  plan_data: user.plans,
  title: ' ',
  description: user.notes
});

export const mapClientToUser = (client: Client, plan?: WorkoutPlanFromDB): User => {
  const profile = client.profile_data as UserInput | undefined;
  const defaultPlans: UserPlans = {
    workouts: {},
    diet: [],
    dietRest: [],
    supps: [],
    prog: []
  };
  const merged: UserInput = {
    ...(profile ?? {}),
    id: client.id,
    name: client.full_name ?? profile?.name ?? '',
    gender: client.gender ?? profile?.gender,
    age: client.age ?? profile?.age,
    height: client.height ?? profile?.height,
    weight: client.weight ?? profile?.weight,
    notes: client.notes ?? profile?.notes,
    nutritionGoals: profile?.nutritionGoals,
    plans: plan?.plan_data ?? profile?.plans ?? defaultPlans
  };
  return migrateUser(merged);
};

// Export helper functions
export { migrateUser, planIdForClient, clientPayloadFromUser, workoutPlanPayloadFromUser };

export const DataProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const auth = useAuth();
  const { theme } = useUI();

  const getInitialUsers = useCallback((): User[] => {
    try {
      const savedData = localStorage.getItem(STORAGE_KEY);
      if (savedData) {
        const parsed = JSON.parse(savedData);
        if (parsed.users && Array.isArray(parsed.users)) {
          return parsed.users.map(migrateUser);
        }
      }
    } catch (e) {
      console.error('   :', e);
    }
    return [];
  }, []);

  const getInitialTemplates = useCallback((): Template[] => {
    try {
      const savedData = localStorage.getItem(STORAGE_KEY);
      if (savedData) {
        const parsed = JSON.parse(savedData);
        if (parsed.templates && Array.isArray(parsed.templates)) {
          return parsed.templates;
        }
      }
    } catch (e) {
      console.error('   :', e);
    }
    return [];
  }, []);

  const [users, setUsers] = useState<User[]>(() => getInitialUsers());
  const [templates, setTemplates] = useState<Template[]>(() => getInitialTemplates());
  const [requests, setRequests] = useState<ProgramRequest[]>([]);
  const [activeUserId, setActiveUserId] = useState<UserId | null>(null);
  const [currentRole, setCurrentRole] = useState<Role>(() => {
    const saved = localStorage.getItem(ROLE_KEY) as Role | null;
    return saved === 'coach' || saved === 'client' ? saved : 'coach';
  });
  const [currentAccountId, setCurrentAccountId] = useState<UserId | null>(() => {
    const saved = localStorage.getItem(ACCOUNT_KEY);
    return saved ? (saved as UserId) : null;
  });

  const isFirstRender = useRef<boolean>(true);

  // Fetch data from Supabase (single source of truth)
  const refreshData = useCallback(async () => {
    if (!auth?.user?.id) {
      setUsers(getInitialUsers());
      setTemplates(getInitialTemplates());
      setRequests([]);
      return;
    }

    if (!isSupabaseReady) {
      // Don't overwrite local data when Supabase is not ready
      // Keep existing local data to prevent loss of newly added users
      console.warn('Supabase not ready, keeping local data');
      return;
    }

    const coachId = auth.user.id;

    try {
      const [clientsResponse, plansResponse, templatesResponse, requestsResponse] = await Promise.all([
        fetchClientsByCoach(coachId),
        fetchWorkoutPlansByCoach(coachId),
        fetchTemplatesRemote(coachId),
        fetchRequestsByCoach(coachId)
      ]);

      // Handle errors gracefully
      if (clientsResponse.error) {
        console.error('Failed to fetch clients:', clientsResponse.error);
      }
      if (plansResponse.error) {
        console.error('Failed to fetch workout plans:', plansResponse.error);
      }
      if (templatesResponse.error) {
        console.error('Failed to fetch templates:', templatesResponse.error);
      }
      if (requestsResponse.error) {
        console.error('Failed to fetch requests:', requestsResponse.error);
      }

      // Process data
      const remoteClients = clientsResponse.data || [];
      const remotePlans = plansResponse.data || [];
      const remoteTemplates = templatesResponse.data || [];
      const remoteRequests = requestsResponse.data || [];

      // Map clients to users with their plans
      const planMap = new Map(remotePlans.map(p => [p.client_id, p]));
      const mappedUsers = remoteClients.map(c => mapClientToUser(c, planMap.get(c.id)));

      // Update state - merge with existing local users to preserve newly added ones
      setUsers(prevUsers => {
        const remoteUserIds = new Set(mappedUsers.map(u => u.id));
        const existingUsers = prevUsers.filter(u => !remoteUserIds.has(u.id));
        const mergedUsers = [...mappedUsers, ...existingUsers];

        // Cache merged data to preserve local changes
        try {
          const cacheData = {
            users: mergedUsers,
            templates: remoteTemplates,
            requests: remoteRequests,
            timestamp: Date.now()
          };
          localStorage.setItem(STORAGE_KEY, JSON.stringify(cacheData));
        } catch (e) {
          console.warn('Failed to cache merged data:', e);
        }

        return mergedUsers;
      });

      setTemplates(remoteTemplates);
      setRequests(remoteRequests);

    } catch (error) {
      console.error('Critical error fetching data from Supabase:', error);
      toast.error('     ');

      // Keep existing local data - don't overwrite with cache
      // The users state already contains the most recent data including newly added users
      toast.warning('    -     ');
    }
  }, [auth?.user?.id]);

  // Load data when Supabase is ready and user is authenticated
  useEffect(() => {
    if (isSupabaseReady && auth?.user?.id) {
      refreshData();
    } else {
      // Clear data when offline or not authenticated
      setUsers([]);
      setTemplates([]);
      setRequests([]);
    }
  }, [isSupabaseReady, auth?.user?.id, refreshData]);

  // Save role and account ID to localStorage
  useEffect(() => {
    localStorage.setItem(ROLE_KEY, currentRole);
    if (currentAccountId != null) {
      localStorage.setItem(ACCOUNT_KEY, String(currentAccountId));
    } else {
      localStorage.removeItem(ACCOUNT_KEY);
    }
  }, [currentRole, currentAccountId]);

  // Cache data for offline mode (only when online)
  useEffect(() => {
    if (users.length === 0 && templates.length === 0) return;

    const timeoutId = setTimeout(() => {
      try {
        const cacheData = {
          users,
          templates,
          timestamp: Date.now()
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(cacheData));
      } catch (e) {
        console.warn('Failed to cache data for offline mode:', e);
      }
    }, 1000); // Debounced caching

    return () => clearTimeout(timeoutId);
  }, [users, templates, isSupabaseReady]);

  const activeUser = useMemo(() => {
    if (activeUserId == null) return null;
    const targetId = String(activeUserId);
    return users.find(u => String(u.id) === targetId) || null;
  }, [users, activeUserId]);

  const hasPermission = useCallback(
    (action: PermissionAction, targetUserId: UserId | null = null) => {
      if (currentRole === 'coach') return true;
      const isSelf = targetUserId === currentAccountId || targetUserId === activeUserId;
      switch (action) {
        case 'manageUsers':
        case 'restoreBackup':
        case 'resetSystem':
        case 'editProgram':
          return false;
        case 'viewProgram':
        case 'viewProgress':
        case 'printProgram':
        case 'logProgress':
          return isSelf;
        default:
          return false;
      }
    },
    [currentRole, currentAccountId, activeUserId]
  );

  const syncUserToSupabase = useCallback(
    (user: User) => {
      if (!isSupabaseReady) return;
      const coachId = auth?.user?.id;
      if (!coachId) return;
      const clientPayload = clientPayloadFromUser(user, coachId);
      const planPayload = workoutPlanPayloadFromUser(user, coachId);
      
      // Type assertions for required fields
      if (clientPayload.id && clientPayload.coach_id) {
        upsertClient(clientPayload as Partial<Client> & { id: string; coach_id: string }).catch(err => {
          if (import.meta.env.DEV) console.error('supabase client upsert', err);
        });
      }
      
      if (planPayload.id && planPayload.coach_id && planPayload.client_id && planPayload.plan_data) {
        upsertWorkoutPlan(planPayload as Partial<WorkoutPlanFromDB> & { 
          id: string; 
          coach_id: string; 
          client_id: string; 
          plan_data: UserPlans 
        }).catch(err => {
          if (import.meta.env.DEV) console.error('supabase plan upsert', err);
        });
      }
      
      upsertUserRemote({ ...user, coach_id: coachId }).catch(err => {
        if (import.meta.env.DEV) console.error('supabase user upsert', err);
      });
    },
    [auth?.user?.id]
  );

  const saveUser = useCallback(
    async (userData: UserInput) => {
      if (!hasPermission('manageUsers', userData.id ?? null)) {
        toast.error('   ');
        return;
      }

      if (!auth?.user?.id) {
        toast.error('     ');
        return;
      }

      try {
        const coachId = auth.user.id;
        const userId = userData.id ?? makeId();
        const newUser = migrateUser({ ...userData, id: userId });

        // Update local state first for better UX
        setUsers(prev => {
          const idx = prev.findIndex(u => u.id === newUser.id);
          let updatedUsers;
          if (idx > -1) {
            const updated = [...prev];
            updated[idx] = newUser;
            updatedUsers = updated;
          } else {
            updatedUsers = [...prev, newUser];
          }

          // Immediately save to localStorage to persist across page refreshes
          try {
            const cacheData = {
              users: updatedUsers,
              templates,
              requests,
              timestamp: Date.now()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(cacheData));
          } catch (e) {
            console.warn('Failed to save user to localStorage:', e);
          }

          return updatedUsers;
        });

        if (isSupabaseReady) {
          const clientPayload = clientPayloadFromUser(newUser, coachId);
          const workoutPayload = workoutPlanPayloadFromUser(newUser, coachId);

          const results = await Promise.allSettled([
            upsertClient(clientPayload as Client),
            upsertWorkoutPlan(workoutPayload as WorkoutPlanFromDB)
          ]);

          // Check for errors and log them, but don't revert local state
          results.forEach((result, index) => {
            if (result.status === 'rejected') {
              console.error(`Failed to save ${index === 0 ? 'client' : 'workout plan'}:`, result.reason);
            }
          });
        }

        toast.success('    ');
      } catch (error) {
        console.error('Failed to save user:', error);
        toast.error('   ');
        // Revert local state on critical error
        setUsers(prev => prev.filter(u => u.id !== userData.id));
      }
    },
    [hasPermission, auth?.user?.id, isSupabaseReady, users.length]
  );

  const updateActiveUser = useCallback(
    (u: User) => {
      setUsers(prev => prev.map(user => (user.id === u.id ? u : user)));
      syncUserToSupabase(u);
    },
    [syncUserToSupabase]
  );

  const deleteUser = useCallback(
    async (id: UserId) => {
      if (!hasPermission('manageUsers', id)) {
        toast.error('   ');
        return;
      }

      const result = await Swal.fire({
        title: '  ',
        text: '      !',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#ef4444',
        cancelButtonColor: '#64748b',
        confirmButtonText: '  ',
        cancelButtonText: '',
        background: theme === 'dark' ? '#1e293b' : '#fff',
        color: theme === 'dark' ? '#fff' : '#000'
      });

      if (result.isConfirmed) {
        try {
          // Update local state immediately for better UX
          setUsers(prev => prev.filter(u => u.id !== id));
          if (activeUserId === id) setActiveUserId(null);

          // Delete from Supabase
          if (isSupabaseReady && auth?.user?.id) {
            const coachId = auth.user.id;
            const planId = planIdForClient(String(id));

            const [planRes, clientRes] = await Promise.all([
              deleteWorkoutPlan(planId),
              deleteClient(String(id))
            ]);

            if (planRes.error) {
              console.error('Failed to delete workout plan:', planRes.error);
            }
            if (clientRes.error) {
              console.error('Failed to delete client:', clientRes.error);
            }

            toast.success('    ');
          }
        } catch (error) {
          console.error('Failed to delete user:', error);
          toast.error('   ');
          // Revert local state on error
          await refreshData();
        }
      }
    },
    [hasPermission, theme, auth?.user?.id, activeUserId]
  );

  const saveTemplate = useCallback(
    (name: string, workout: User['plans']['workouts'][number]) => {
      if (!hasPermission('editProgram')) {
        toast.error('   ');
        return;
      }
      const newTemplate: Template = { id: Date.now(), name, workout };
      setTemplates(prev => [...prev, newTemplate]);
      if (isSupabaseReady) {
        const coachId = auth?.user?.id;
        upsertTemplateRemote({ ...newTemplate, coach_id: coachId }).then(response => {
          if (response.error && import.meta.env.DEV) {
            console.error('supabase upsert template', response.error);
          }
        });
      }
      toast.success('  ');
    },
    [hasPermission, auth?.user?.id]
  );

  const deleteTemplate = useCallback(
    (id: UserId) => {
      if (!hasPermission('editProgram')) {
        toast.error('   ');
        return;
      }
      setTemplates(prev => prev.filter(t => t.id !== id));
      if (isSupabaseReady) {
        const coachId = auth?.user?.id;
        removeTemplateRemote(id, coachId).then(response => {
          if (response.error && import.meta.env.DEV) {
            console.error('supabase delete template', response.error);
          }
        });
      }
      toast.success('  ');
    },
    [hasPermission, auth?.user?.id]
  );

  const acceptRequest = useCallback(async (req: ProgramRequest) => {
    if (!auth?.user?.id) return;

    try {
      // Update request status
      const res = await updateRequestStatus(req.id, 'accepted', undefined, req);
      if (res.error) {
        toast.error('    ()');
        return;
      }

      // Create user from request data
      if (req.client_data) {
        const clientData = req.client_data as Record<string, unknown>;
        const clientName = String(req.client_name || clientData.name || '');

        const newUserData: UserInput = {
          name: clientName,
          id: req.client_id,
          coach_id: auth.user.id,
          gender: typeof clientData.gender === 'string' ? clientData.gender : undefined,
          age: typeof clientData.age === 'number' ? Number(clientData.age) : undefined,
          height: typeof clientData.height === 'number' ? Number(clientData.height) : undefined,
          weight: typeof clientData.weight === 'number' ? Number(clientData.weight) : undefined,
          phone: typeof clientData.phone === 'string' ? clientData.phone : undefined,
          email: typeof clientData.email === 'string' ? clientData.email : undefined,
          plans: { workouts: {}, diet: [], dietRest: [], supps: [], prog: [] }
        };

        // Add user to local state immediately
        const newUser = migrateUser(newUserData);
        setUsers(prev => {
          const idx = prev.findIndex(u => u.id === newUser.id);
          if (idx > -1) {
            const updated = [...prev];
            updated[idx] = newUser;
            return updated;
          }
          return [...prev, newUser];
        });

        // Save to Supabase
        await saveUser(newUserData);

        // Update client and profile tables
        if (isSupabaseReady) {
          await upsertClient({
            id: req.client_id,
            coach_id: auth.user.id,
            full_name: clientName,
            profile_data: newUserData,
            profile_completed: true
          }).catch(err => {
            if (import.meta.env.DEV) console.warn('upsertClient error', err);
          });

          await supabase
            .from('profiles')
            .upsert({
              id: req.client_id,
              coach_id: auth.user.id,
              updated_at: new Date().toISOString()
            }, { onConflict: 'id' })
            .catch(err => {
              if (import.meta.env.DEV) console.warn('update client profile coach_id error', err);
            });
        }
      }

      // Update requests list
      setRequests(prev => prev.filter(r => r.id !== req.id));

      toast.success('      ');
    } catch (error) {
      console.error('Error accepting request:', error);
      toast.error('   ');
    }
  }, [auth?.user?.id, saveUser]);

  const rejectRequest = useCallback(async (req: ProgramRequest) => {
    if (!auth?.user?.id) return;

    try {
      const res = await updateRequestStatus(req.id, 'rejected', undefined, req);
      if (res.error) {
        toast.error('    ()');
        return;
      }

      setRequests(prev => prev.map(r => (r.id === req.id ? { ...r, status: 'rejected' } : r)));
      toast.success('  ');
    } catch (error) {
      console.error('Error rejecting request:', error);
      toast.error('   ');
    }
  }, [auth?.user?.id]);

  const deleteRequest = useCallback(async (requestId: string) => {
    try {
      const res = await deleteProgramRequest(requestId);
      if (res.error) {
        toast.error('   ');
        return;
      }

      setRequests(prev => prev.filter(r => r.id !== requestId));
      toast.success('  ');
    } catch (error) {
      console.error('Error deleting request:', error);
      toast.error('   ');
    }
  }, []);

  const logoutUser = useCallback(() => {
    setActiveUserId(null);
    toast.success('   ');
  }, []);

  const resetSystem = useCallback(() => {
    Swal.fire({
      title: ' ',
      text: '   !',
      icon: 'error',
      showCancelButton: true,
      confirmButtonText: '  ',
      cancelButtonText: ''
    }).then((res) => {
      if (res.isConfirmed) {
        localStorage.removeItem(STORAGE_KEY);
        localStorage.removeItem('flexTheme');
        window.location.reload();
      }
    });
  }, []);

  const backupData = useCallback(() => {
    if (!hasPermission('restoreBackup')) {
      toast.error('  ');
      return;
    }
    const data = JSON.stringify({ users, templates, requests }, null, 2);
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `flexpro_backup_${new Date().toISOString().split('T')[0]}.json`;
    a.click();
    URL.revokeObjectURL(url);
    toast.success('  ');
  }, [users, templates, hasPermission]);

  const restoreData = useCallback(
    (file: File) => {
      if (!hasPermission('restoreBackup')) {
        toast.error('  ');
        return;
      }
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target?.result as string);
          if (data.users && Array.isArray(data.users)) {
            setUsers(data.users.map(migrateUser));
          }
          if (data.templates && Array.isArray(data.templates)) {
            setTemplates(data.templates);
          }
          toast.success('  ');
        } catch (err) {
          toast.error('   ');
          console.error(err);
        }
      };
      reader.readAsText(file);
    },
    [hasPermission]
  );

  // Clear data on logout - only when user was logged in and now is not
  const [wasLoggedIn, setWasLoggedIn] = useState(!!auth?.user);
  useEffect(() => {
    const isLoggedIn = !!auth?.user;
    if (wasLoggedIn && !isLoggedIn) {
      // User just logged out - clear data
      const timer = setTimeout(() => {
        setUsers([]);
        setTemplates([]);
        setActiveUserId(null);
      }, 0);
      return () => clearTimeout(timer);
    }
    setWasLoggedIn(isLoggedIn);
  }, [auth?.user, wasLoggedIn]);

  return (
    <DataContext.Provider
      value={{
        users,
        requests,
        activeUser,
        activeUserId,
        templates,
        currentRole,
        currentAccountId,
        setCurrentRole,
        setCurrentAccountId,
        setActiveUserId,
        hasPermission,
        saveUser,
        deleteUser,
        acceptRequest,
        rejectRequest,
        deleteRequest,
        updateActiveUser,
        saveTemplate,
        deleteTemplate,
        logoutUser,
        resetSystem,
        backupData,
        restoreData,
        refreshData,
        // New database functions
        searchFoods,
        searchExercises,
        getAllFoods,
        getAllExercises,
        getFoodCategories,
        getMuscleGroups,
        getExerciseTypes
      }}
    >
      {children}
    </DataContext.Provider>
  );
};

export const useData = () => {
  const context = useContext(DataContext);
  if (!context) {
    throw new Error('useData must be used within DataProvider');
  }
  return context;
};



==================================================
FILE: .\src\context\UIContext.tsx
==================================================
/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useContext, useState, useEffect, useRef, useCallback } from 'react';
import { toast } from 'react-hot-toast';
import type { TabKey, PrintType, PrintData } from '../types/index';

interface UIContextType {
  theme: 'light' | 'dark';
  currentTab: TabKey;
  printData: PrintData | null;
  sidebarOpen: boolean;
  toggleTheme: () => void;
  setCurrentTab: (tab: TabKey) => void;
  handlePrintPreview: (type: PrintType, user?: import('../types/index').User) => void;
  closePrintModal: () => void;
  downloadPDF: () => Promise<void>;
  setSidebarOpen: (open: boolean) => void;
}

const UIContext = createContext<UIContextType | undefined>(undefined);

export const UIProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setTheme] = useState<'light' | 'dark'>('dark');
  const [currentTab, setCurrentTab] = useState<TabKey>('users');
  const [printData, setPrintData] = useState<PrintData | null>(null);
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const pdfLibsLoaded = useRef(false);

  // Load theme from localStorage on mount
  useEffect(() => {
    const savedTheme = (localStorage.getItem('flexTheme') as 'light' | 'dark') || 'dark';
    setTheme(savedTheme);
    document.documentElement.classList.toggle('dark', savedTheme === 'dark');
  }, []);

  const toggleThemeFn = useCallback(() => {
    const t: 'light' | 'dark' = theme === 'dark' ? 'light' : 'dark';
    setTheme(t);
    localStorage.setItem('flexTheme', t);
    document.documentElement.classList.toggle('dark', t === 'dark');
  }, [theme]);

  const handlePrintPreview = useCallback((type: PrintType, user?: import('../types/index').User) => {
    // This will be called from components that have access to activeUser
    // For now, we just set up the structure - actual HTML generation should be done in AppContext
    // where activeUser is available
    void type;
    void user;
    setPrintData({ html: '' });
  }, []);

  const closePrintModal = useCallback(() => {
    setPrintData(null);
  }, []);

  const downloadPDF = useCallback(async (): Promise<void> => {
    const element = document.getElementById('print-content-area');
    if (!element) {
      toast.error('    ');
      return;
    }

    try {
      toast.loading('   ...', { id: 'pdf' });

      // Lazy load html2canvas and jsPDF only when needed
      if (!pdfLibsLoaded.current) {
        const [html2canvasModule, jsPDFModule] = await Promise.all([
          import('html2canvas'),
          import('jspdf')
        ]);
        // Store references globally for this session
        window.html2canvas = html2canvasModule.default;
        window.jsPDF = jsPDFModule.default;
        pdfLibsLoaded.current = true;
      }

      const html2canvas = window.html2canvas;
      const jsPDF = window.jsPDF;

      toast.loading('   PDF...', { id: 'pdf' });

      const canvas = await html2canvas(element, {
        scale: 2,
        useCORS: true,
        backgroundColor: '#ffffff',
        logging: false,
        allowTaint: true,
        scrollX: 0,
        scrollY: 0,
        windowWidth: element.scrollWidth,
        windowHeight: element.scrollHeight
      });

      const pdf = new jsPDF('p', 'mm', 'a4');

      const pdfWidth = 210;
      const pdfHeight = 297;
      const margin = 0;

      const imgWidth = canvas.width;
      const imgHeight = canvas.height;

      const ratio = (pdfWidth - margin * 2) / imgWidth;

      let yPosition = 0;
      let pageCount = 0;
      const pageHeightPx = pdfHeight / ratio;

      while (yPosition < imgHeight) {
        if (pageCount > 0) {
          pdf.addPage();
        }

        const sourceY = yPosition;
        const sourceHeight = Math.min(pageHeightPx, imgHeight - yPosition);

        const pageCanvas = document.createElement('canvas');
        pageCanvas.width = imgWidth;
        pageCanvas.height = sourceHeight;
        const ctx = pageCanvas.getContext('2d');
        if (!ctx) {
          throw new Error('Failed to get canvas context');
        }
        ctx.drawImage(canvas, 0, sourceY, imgWidth, sourceHeight, 0, 0, imgWidth, sourceHeight);

        const pageImgData = pageCanvas.toDataURL('image/png', 1.0);
        const pageScaledHeight = sourceHeight * ratio;

        pdf.addImage(pageImgData, 'PNG', margin, 0, pdfWidth - margin * 2, pageScaledHeight);

        yPosition += pageHeightPx;
        pageCount++;
      }

      const fileName = `Vo2max_${new Date().toLocaleDateString('fa-IR')}.pdf`;
      pdf.save(fileName);
      toast.success(`PDF  ${pageCount}   `, { id: 'pdf' });
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : ' ';
      toast.error('   PDF: ' + errorMessage, { id: 'pdf' });
      console.error(err);
    }
  }, []);

  return (
    <UIContext.Provider
      value={{
        theme,
        currentTab,
        printData,
        sidebarOpen,
        toggleTheme: toggleThemeFn,
        setCurrentTab,
        handlePrintPreview,
        closePrintModal,
        downloadPDF,
        setSidebarOpen
      }}
    >
      {children}
    </UIContext.Provider>
  );
};

export const useUI = () => {
  const context = useContext(UIContext);
  if (!context) {
    throw new Error('useUI must be used within UIProvider');
  }
  return context;
};


==================================================
FILE: .\src\data\cardioExercises.ts
==================================================
export const cardioExercises: Record<string, string[]> = {
    " ": [
        " (Treadmill)",
        "   (Incline Treadmill)",
        "   (Flat Treadmill)",
        "  (Stationary Bike)",
        "   (Seated Bike)",
        "   (Upright Bike)",
        "  (Spinning Bike)",
        " (Elliptical)",
        "   (Elliptical with Arms)",
        "   (Elliptical without Arms)",
        " (Rowing Machine)",
        "   ",
        "   ",
        "   ",
        " (Stepper)",
        "   ",
        "   ",
        "   ",
        "  (SkiErg)",
        "    ",
        "    ",
        "    ",
        " (Aerobic Machine)",
        "   ",
        "   ",
        "   "
    ],
    " ": [
        "HIIT (    )",
        "HIIT  ",
        "HIIT  ",
        "HIIT  ",
        "HIIT  ",
        "HIIT   ",
        "Tabata",
        "Tabata  ",
        "Tabata  ",
        "Tabata  ",
        "Tabata   ",
        "AMRAP (As Many Rounds As Possible)",
        "AMRAP   ",
        "AMRAP  ",
        "AMRAP  ",
        "EMOM (Every Minute On the Minute)",
        "EMOM   ",
        "EMOM  ",
        "EMOM  "
    ],
    "  ": [
        "  (Jogging)",
        "  (Running)",
        "  (Sprinting)",
        " ",
        " ",
        " ",
        " ",
        "  ",
        "  ",
        "  ",
        "",
        " ",
        " ",
        "  ",
        "  ",
        "  ",
        "  ",
        "  "
    ],
    "": [
        "  ",
        "  ",
        "  ",
        "   ",
        "   ",
        "   ",
        " ",
        " ",
        " ",
        " "
    ],
    "": [
        "  ",
        "  ",
        " ",
        " ",
        " ",
        "  ",
        "  ",
        " ",
        " ",
        " "
    ],
    " ": [
        " (Burpee)",
        "  ",
        "  ",
        "  ",
        "  ",
        " (Jumping Jacks)",
        "  ",
        "  ",
        " (Mountain Climbers)",
        " ",
        " ",
        "  ",
        "  ",
        "   (Box Jumps)",
        "     ",
        "     ",
        "     ",
        "    ",
        "    ",
        " ",
        "  ",
        "  ",
        "  ",
        "   ",
        "   "
    ]
};



==================================================
FILE: .\src\data\correctiveExercises.ts
==================================================
export const correctiveExercises: Record<string, string[]> = {
    "     (Kyphosis/Forward Head)": [
        "     (Doorway Stretch)",
        "    (Band Chest Stretch)",
        "    (Wall Chest Stretch)",
        " YTWL  ",
        " YTWL  ",
        " YTWL   ",
        "  (Wall Angel)",
        "   ",
        "    ",
        "    (Thoracic Foam Rolling)",
        "  ",
        "  ",
        "   (Chin Tuck)",
        "    ",
        "     ",
        "  (Scapular Retraction)",
        "   ",
        "   ",
        " SCM/Levator Scapulae",
        "  ",
        "    ",
        "    ",
        "   ",
        "  "
    ],
    "    (Lordosis)": [
        "     (Hip Flexor Stretch)",
        "      ",
        "      ",
        "      ",
        " (Dead Bug)",
        "  ",
        "   ",
        " - (Cat-Cow)",
        " -  ",
        " -   ",
        "    (Plank with Pelvic Tilt)",
        "     ",
        "      ",
        "   (Core Strengthening)",
        "    ",
        "    ",
        " QL",
        " QL  ",
        " QL  ",
        "  ",
        "    ",
        "     ",
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "    "
    ],
    " (Scoliosis)": [
        "  (Unilateral Stretching)",
        "   ",
        "   ",
        "  (Balance Exercises)",
        "   ",
        "   ",
        "  (Side Plank)",
        "   ",
        "    ",
        "  ",
        "   ",
        "   ",
        "  / ",
        "  /   ",
        "  /   ",
        "   ",
        "     ",
        "     ",
        "   ",
        "     ",
        "     "
    ],
    " / (Knee Valgus/Varus)": [
        " (Clamshell)",
        "  ",
        "   ",
        "   (Hip Abduction)",
        "    ",
        "    ",
        "  (Step Down)",
        "   ",
        "    ",
        "  (Adductor Stretch)",
        "   ",
        "   ",
        "X-band Walks",
        "X-band Walks  ",
        "X-band Walks   ",
        "  ",
        "    ",
        "    ",
        " IT Band",
        " IT Band   ",
        " IT Band  ",
        "   ",
        "     ",
        "     "
    ],
    "  (Flat Feet)": [
        "    ",
        "      ",
        "      ",
        "  ",
        "    ",
        "    ",
        "Calf Raise   ",
        "Calf Raise     ",
        "Calf Raise      ",
        "Short Foot Exercise",
        "Short Foot Exercise  ",
        "Short Foot Exercise  ",
        "  ",
        "    ",
        "    ",
        "   ",
        "     ",
        "      ",
        "  ",
        "    ",
        "    ",
        "   ",
        "     ",
        "     "
    ],
    "  (Rounded Shoulders)": [
        "  ",
        "    ",
        "    ",
        "   ",
        "     ",
        "     ",
        " ",
        "   ",
        "   ",
        "   ",
        "     ",
        "      "
    ],
    "  (Frozen Shoulder)": [
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "     ",
        "  ",
        "    ",
        "    ",
        "   ",
        "     ",
        "      "
    ],
    "   (Carpal Tunnel)": [
        "  ",
        "    ",
        "    ",
        "   ",
        "     ",
        "      ",
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "    "
    ],
    "   (Lower Back Pain)": [
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "     ",
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "     ",
        " ",
        "   ",
        "   ",
        "  ",
        "    ",
        "    "
    ]
};


==================================================
FILE: .\src\data\foodData.ts
==================================================
export interface FoodInfo {
    u: string;
    b: number;
    c: number;
    p: number;
    ch: number;
    f: number;
}

export const foodData: Record<string, Record<string, FoodInfo>> = {
    "  (Protein)":{
        "  ()":{u:"",b:100,c:165,p:31,ch:0,f:3.6},
        "   ":{u:"",b:100,c:170,p:28,ch:0,f:5},
        "  ()":{u:"",b:100,c:195,p:27,ch:0,f:8},
        "   ()":{u:"",b:100,c:210,p:28,ch:0,f:10},
        "   ()":{u:"",b:100,c:250,p:26,ch:0,f:15},
        "  ()":{u:"",b:100,c:180,p:26,ch:0,f:8},
        "  ()":{u:"",b:100,c:294,p:25,ch:0,f:21},
        "  ()":{u:"",b:100,c:206,p:22,ch:0,f:12},
        "  ()":{u:"",b:100,c:150,p:20,ch:0,f:7},
        "  ()":{u:"",b:100,c:184,p:30,ch:0,f:6},
        " ":{u:"",b:100,c:208,p:25,ch:0,f:11},
        "  ()":{u:"",b:100,c:105,p:23,ch:0,f:1},
        " ":{u:"",b:100,c:116,p:23,ch:0,f:3},
        " ()":{u:"",b:100,c:99,p:24,ch:0,f:0.3},
        " ":{u:"",b:100,c:128,p:26,ch:0,f:2.7},
        " ( )":{u:"",b:100,c:92,p:15.6,ch:3.1,f:1.4},
        " ()":{u:"",b:100,c:97,p:19,ch:0,f:1.5},
        " ()":{u:"",b:100,c:111,p:20.1,ch:4.7,f:1.6},
        "  ":{u:" (50 )",b:1,c:72,p:6.3,ch:0.4,f:5},
        "  ":{u:" (33 )",b:1,c:17,p:3.6,ch:0.2,f:0.1},
        "  ":{u:" (17 )",b:1,c:55,p:2.7,ch:0.6,f:4.5},
        " ":{u:" (9 )",b:1,c:14,p:1.2,ch:0,f:1},
        "  ()":{u:"",b:100,c:72,p:12.4,ch:2.7,f:1},
        " ":{u:"",b:100,c:264,p:14,ch:4,f:21},
        "  ()":{u:"",b:100,c:280,p:18,ch:3,f:22},
        " ":{u:"",b:100,c:402,p:25,ch:1.3,f:33},
        "  ()":{u:"",b:100,c:59,p:10,ch:3.6,f:0.4},
        "  ()":{u:"",b:100,c:97,p:9,ch:3.6,f:5},
        "  ":{u:" (30 )",b:1,c:110,p:25,ch:1,f:0.5},
        "  ":{u:" (30 )",b:1,c:120,p:24,ch:3,f:1.5},
        " ":{u:" (30 )",b:1,c:105,p:24,ch:3,f:1},
        "  (/)":{u:" (30 )",b:1,c:100,p:22,ch:2,f:1},
        "  (  )":{u:"",b:100,c:116,p:26,ch:0,f:0.8},
        "  (  )":{u:"",b:100,c:198,p:29,ch:0,f:8},
        "  ()":{u:"",b:100,c:127,p:8.7,ch:22,f:0.5},
        "  ()":{u:"",b:100,c:127,p:8.7,ch:22.8,f:0.5},
        "  ()":{u:"",b:100,c:132,p:8.9,ch:23.7,f:0.5},
        " ()":{u:"",b:100,c:116,p:9,ch:20,f:0.4},
        " ()":{u:"",b:100,c:164,p:8.9,ch:27.4,f:2.6},
        "  ()":{u:"",b:100,c:127,p:9.7,ch:22.8,f:0.7},
        " ()":{u:"",b:100,c:173,p:16.6,ch:9.9,f:9},
        " ()":{u:"",b:100,c:144,p:17,ch:3,f:9},
        "":{u:"",b:100,c:193,p:19,ch:9,f:11},
        "  ()":{u:"",b:100,c:135,p:30,ch:0,f:1},
        "  ()":{u:"",b:100,c:189,p:28,ch:0,f:8},
        "  ()":{u:"",b:100,c:167,p:24.5,ch:0.6,f:6.5},
        " ":{u:"",b:100,c:112,p:19,ch:0.8,f:3.4},
        " ":{u:" (100 )",b:1,c:280,p:22,ch:2,f:20},
        " ":{u:" (100 )",b:1,c:220,p:28,ch:0,f:12},
        " ":{u:" (100 )",b:1,c:190,p:30,ch:1,f:7}
    },
    "   (Carbs)":{
        "  ()":{u:"",b:100,c:130,p:2.7,ch:28,f:0.3},
        "  ()":{u:"",b:100,c:123,p:2.6,ch:25.6,f:1},
        "  ()":{u:"",b:100,c:130,p:2.7,ch:28,f:0.3},
        "  ()":{u:"",b:100,c:130,p:2.5,ch:28,f:0.3},
        "   ()":{u:"",b:100,c:389,p:16.9,ch:66.3,f:6.9},
        "   ()":{u:"",b:100,c:68,p:2.4,ch:12,f:1.4},
        " ()":{u:"",b:100,c:120,p:4.4,ch:21.3,f:1.9},
        "  ()":{u:"",b:100,c:111,p:4,ch:23,f:0.8},
        " ()":{u:"",b:100,c:83,p:3.1,ch:18.6,f:0.2},
        "  ()":{u:"",b:100,c:87,p:1.9,ch:20.1,f:0.1},
        "  ( )":{u:"",b:100,c:312,p:3.2,ch:41,f:14},
        "   ()":{u:"",b:100,c:90,p:2,ch:20.7,f:0.2},
        " ()":{u:"",b:100,c:158,p:5.8,ch:30.9,f:0.9},
        "  ()":{u:"",b:100,c:124,p:5,ch:25,f:1.2},
        " ":{u:"  (30 )",b:1,c:75,p:2.5,ch:15,f:0.5},
        " ":{u:"  (40 )",b:1,c:105,p:3.6,ch:21,f:0.8},
        " ":{u:"  (25 )",b:1,c:63,p:2.1,ch:12.5,f:0.4},
        " ":{u:" (20 )",b:1,c:55,p:1.8,ch:11,f:0.3},
        " ":{u:"  (30 )",b:1,c:80,p:3,ch:16,f:1},
        " ":{u:"  (30 )",b:1,c:74,p:2.8,ch:14.5,f:0.8},
        " ":{u:" (25 )",b:1,c:66,p:2.1,ch:12.5,f:0.7},
        "  ":{u:" (28 )",b:1,c:70,p:2.5,ch:13.5,f:0.9},
        " ()":{u:"",b:100,c:96,p:3.4,ch:21,f:1.2},
        "   ( )":{u:"",b:100,c:387,p:12.9,ch:77.8,f:4.5},
        "":{u:"",b:100,c:352,p:9.9,ch:73.5,f:3.2},
        " ()":{u:"",b:100,c:119,p:3.5,ch:23.7,f:1},
        " ":{u:"",b:100,c:357,p:7,ch:84,f:0.4},
        " ":{u:" (57 )",b:1,c:134,p:4.4,ch:26.2,f:1},
        " ":{u:" (8 )",b:1,c:35,p:0.8,ch:5.8,f:1.1}
    },
    "    (Fats)":{
        "  ":{u:"  (15ml)",b:1,c:119,p:0,ch:0,f:13.5},
        " ":{u:"  (15ml)",b:1,c:117,p:0,ch:0,f:13.6},
        " ":{u:"  (15ml)",b:1,c:120,p:0,ch:0,f:14},
        " ":{u:"  (15ml)",b:1,c:120,p:0,ch:0,f:13.6},
        "":{u:"  (14 )",b:1,c:102,p:0.1,ch:0,f:11.5},
        "  ()":{u:"  (14 )",b:1,c:102,p:0.2,ch:0.1,f:11.4},
        "":{u:"  (200 )",b:1,c:322,p:4,ch:17,f:29},
        " ()":{u:" (100 )",b:1,c:161,p:2,ch:8.5,f:14.7},
        " ":{u:"",b:100,c:579,p:21.2,ch:21.6,f:49.9},
        "  ( )":{u:" (28 )",b:1,c:162,p:6,ch:6,f:14},
        "":{u:"",b:100,c:654,p:15.2,ch:13.7,f:65.2},
        " ( )":{u:" (50 )",b:1,c:327,p:7.6,ch:6.9,f:32.6},
        "":{u:"",b:100,c:562,p:20.3,ch:28,f:45.3},
        " ( )":{u:" (30 )",b:1,c:169,p:6.1,ch:8.4,f:13.6},
        "":{u:"",b:100,c:628,p:15,ch:17,f:61},
        " ( )":{u:" (30 )",b:1,c:188,p:4.5,ch:5.1,f:18.3},
        "  ":{u:"  (16 )",b:1,c:94,p:4,ch:3,f:8},
        " ":{u:"  (16 )",b:1,c:98,p:3.4,ch:3,f:8.9},
        "":{u:"",b:100,c:573,p:17,ch:23,f:50},
        " ":{u:"",b:100,c:584,p:20.8,ch:20,f:51.5},
        " ":{u:"",b:100,c:559,p:30.2,ch:10.7,f:49},
        " ":{u:"",b:100,c:553,p:18.2,ch:30.2,f:43.9},
        " ":{u:"",b:100,c:567,p:25.8,ch:16.1,f:49.2},
        " ":{u:"",b:100,c:660,p:6.9,ch:23.7,f:64.5},
        " ":{u:"",b:100,c:354,p:3.3,ch:15.2,f:33.5},
        " ":{u:" (3 )",b:1,c:5,p:0.1,ch:0.2,f:0.4},
        " ":{u:" (3 )",b:1,c:6,p:0.1,ch:0.2,f:0.5},
        " MCT":{u:"  (15ml)",b:1,c:130,p:0,ch:0,f:14.5}
    },
    " (Dairy)":{
        "  (1.5%)":{u:" (240ml)",b:1,c:103,p:8.2,ch:12.2,f:2.4},
        "  (2.5%)":{u:" (240ml)",b:1,c:122,p:8,ch:12,f:4.8},
        "  (3.5%)":{u:" (240ml)",b:1,c:150,p:8,ch:12,f:8},
        "  ":{u:" (240ml)",b:1,c:122,p:8,ch:12,f:4.8},
        " ":{u:" (240ml)",b:1,c:30,p:1,ch:1,f:2.5},
        " ":{u:" (240ml)",b:1,c:80,p:7,ch:4,f:4},
        " ":{u:" (240ml)",b:1,c:45,p:0.5,ch:2,f:4.5},
        "  ":{u:" (240ml)",b:1,c:120,p:3,ch:16,f:5},
        " ":{u:"",b:100,c:59,p:3.5,ch:4.7,f:3.3},
        " ":{u:"",b:100,c:63,p:5.3,ch:7,f:1.6},
        " ":{u:"",b:100,c:61,p:3.3,ch:4.7,f:3.3},
        " ":{u:" (250ml)",b:1,c:70,p:3,ch:5.5,f:3},
        " ":{u:" (250ml)",b:1,c:80,p:3,ch:6,f:3.5},
        "":{u:" (240ml)",b:1,c:104,p:9,ch:12,f:2.5},
        " ":{u:"",b:100,c:342,p:6.2,ch:4.1,f:34.4},
        "  ":{u:"",b:100,c:72,p:7.8,ch:2.7,f:1.9},
        " ":{u:"  (12 )",b:1,c:23,p:0.3,ch:0.5,f:2.3},
        "  ":{u:"  (15 )",b:1,c:52,p:0.3,ch:0.4,f:5.6},
        " ":{u:"",b:100,c:174,p:11.3,ch:3,f:13},
        " ":{u:"",b:100,c:431,p:38.5,ch:4.1,f:29},
        " ":{u:"",b:100,c:280,p:17,ch:3,f:22},
        " ":{u:"",b:100,c:250,p:15,ch:4,f:19},
        " ":{u:"",b:100,c:98,p:11,ch:3.4,f:4.5},
        "":{u:"",b:100,c:112,p:8,ch:12,f:3}
    },
    " (Fruits)":{
        "":{u:"  (118 )",b:1,c:105,p:1.3,ch:27,f:0.4},
        "":{u:"  (182 )",b:1,c:95,p:0.5,ch:25,f:0.3},
        "":{u:"  (130 )",b:1,c:62,p:1.2,ch:15.4,f:0.2},
        "":{u:"  (88 )",b:1,c:47,p:0.7,ch:12,f:0.2},
        " ":{u:"  (236 )",b:1,c:78,p:1.4,ch:20,f:0.2},
        "":{u:"  (58 )",b:1,c:17,p:0.6,ch:5.4,f:0.2},
        "":{u:"  (92 )",b:1,c:62,p:0.6,ch:16,f:0.2},
        " ":{u:"  (144 )",b:1,c:49,p:1,ch:11.7,f:0.5},
        " ":{u:"  (148 )",b:1,c:84,p:1.1,ch:21.4,f:0.5},
        "":{u:"  (123 )",b:1,c:64,p:1.5,ch:14.7,f:0.8},
        "":{u:"  (144 )",b:1,c:62,p:2,ch:13.8,f:0.7},
        "":{u:"  (150 )",b:1,c:59,p:1.4,ch:14,f:0.4},
        "":{u:"  (35 )",b:1,c:17,p:0.5,ch:3.9,f:0.1},
        "":{u:"  (66 )",b:1,c:30,p:0.5,ch:7.5,f:0.2},
        "":{u:"  (178 )",b:1,c:101,p:0.7,ch:27,f:0.2},
        "":{u:"  (69 )",b:1,c:42,p:0.8,ch:10,f:0.4},
        "":{u:"  (165 )",b:1,c:83,p:0.9,ch:21.6,f:0.2},
        "":{u:"  (336 )",b:1,c:202,p:2.8,ch:50,f:0.6},
        "":{u:"  (145 )",b:1,c:62,p:0.9,ch:15.7,f:0.4},
        "":{u:"  (177 )",b:1,c:60,p:1.5,ch:14.4,f:0.3},
        "":{u:"  (152 )",b:1,c:46,p:0.9,ch:11.5,f:0.2},
        " ()":{u:" (8 )",b:1,c:23,p:0.2,ch:6,f:0},
        " ()":{u:" (7 )",b:1,c:20,p:0.2,ch:5.3,f:0},
        " ":{u:"  (50 )",b:1,c:37,p:0.4,ch:9.6,f:0.2},
        " ":{u:" (8 )",b:1,c:20,p:0.3,ch:5.3,f:0.1},
        "":{u:"  (145 )",b:1,c:434,p:4.5,ch:115,f:0.7},
        "":{u:"  (140 )",b:1,c:78,p:1.6,ch:19,f:0.3},
        "":{u:"  (140 )",b:1,c:87,p:1.5,ch:22,f:0.3},
        "":{u:"  (168 )",b:1,c:118,p:0.8,ch:31,f:0.3},
        "":{u:"  (282 )",b:1,c:234,p:4.7,ch:52,f:3.3}
    },
    " (Vegetables)":{
        "  ()":{u:"",b:100,c:35,p:2.4,ch:7.2,f:0.4},
        "  ()":{u:"",b:100,c:34,p:2.8,ch:7,f:0.4},
        " ()":{u:"",b:100,c:23,p:3,ch:3.8,f:0.3},
        " ()":{u:"",b:100,c:23,p:2.9,ch:3.6,f:0.4},
        "":{u:"",b:100,c:15,p:1.4,ch:2.9,f:0.2},
        "":{u:"",b:100,c:25,p:1.3,ch:5.8,f:0.1},
        " ":{u:"",b:100,c:36,p:3.4,ch:7.1,f:0.5},
        "":{u:"",b:100,c:15,p:0.7,ch:3.6,f:0.1},
        "":{u:"",b:100,c:18,p:0.9,ch:3.9,f:0.2},
        "  ":{u:"",b:100,c:31,p:1,ch:7,f:0.3},
        "  ":{u:"",b:100,c:20,p:0.9,ch:4.6,f:0.2},
        "":{u:"",b:100,c:41,p:0.9,ch:9.6,f:0.2},
        "":{u:"",b:100,c:16,p:0.7,ch:3,f:0.2},
        " ":{u:"",b:100,c:17,p:1.2,ch:3.4,f:0.3},
        " ":{u:"",b:100,c:26,p:1,ch:6.5,f:0.1},
        "":{u:"",b:100,c:25,p:1,ch:5.9,f:0.2},
        "":{u:"",b:100,c:22,p:3.1,ch:3.3,f:0.3},
        "":{u:"",b:100,c:40,p:1.1,ch:9.3,f:0.1},
        "":{u:" (3 )",b:1,c:4,p:0.2,ch:1,f:0},
        "":{u:"",b:100,c:80,p:1.8,ch:17.8,f:0.8},
        "":{u:"",b:100,c:36,p:3,ch:6.3,f:0.8},
        "":{u:"",b:100,c:44,p:3.3,ch:8.4,f:0.7},
        "":{u:"",b:100,c:22,p:3.2,ch:2.6,f:0.6},
        "":{u:"",b:100,c:43,p:3.5,ch:7,f:1.1},
        "":{u:"",b:100,c:16,p:0.7,ch:3.4,f:0.1},
        "":{u:"",b:100,c:43,p:1.6,ch:9.6,f:0.2},
        " ":{u:"",b:100,c:31,p:1.8,ch:7,f:0.1},
        " ":{u:"",b:100,c:81,p:5.4,ch:14.5,f:0.4},
        " ":{u:"",b:100,c:86,p:3.2,ch:19,f:1.2},
        "":{u:"",b:100,c:20,p:2.2,ch:3.9,f:0.1}
    },
    " (Beverages)":{
        //    
        "":{u:" (240ml)",b:1,c:0,p:0,ch:0,f:0},
        " ":{u:" (240ml)",b:1,c:0,p:0,ch:0,f:0},
        " ":{u:" (240ml)",b:1,c:46,p:1.7,ch:9,f:0.5},
        
        //   
        "  ( )":{u:" (240ml)",b:1,c:2,p:0,ch:0,f:0},
        "  ( )":{u:" (240ml)",b:1,c:2,p:0,ch:0,f:0},
        "  ":{u:" (240ml)",b:1,c:5,p:0.3,ch:0,f:0},
        "   ":{u:" (240ml)",b:1,c:40,p:3,ch:5,f:1},
        "":{u:" (30ml)",b:1,c:2,p:0.1,ch:0,f:0},
        "":{u:"  (360ml)",b:1,c:150,p:9,ch:12,f:6},
        "":{u:" (240ml)",b:1,c:80,p:4,ch:8,f:4},
        "":{u:"  (360ml)",b:1,c:290,p:10,ch:35,f:13},
        " ":{u:"  (60ml)",b:1,c:10,p:0.2,ch:2,f:0},
        
        // 
        "  ":{u:" (240ml)",b:1,c:112,p:1.7,ch:26,f:0.5},
        "  ":{u:" (240ml)",b:1,c:114,p:0.3,ch:28,f:0.3},
        "  ":{u:" (240ml)",b:1,c:94,p:2.2,ch:22,f:0.4},
        " ":{u:" (240ml)",b:1,c:134,p:0.4,ch:32.7,f:0.7},
        " ":{u:" (240ml)",b:1,c:152,p:1.4,ch:37,f:0.2},
        "  ":{u:" (240ml)",b:1,c:54,p:0.9,ch:16.6,f:0.6},
        " ":{u:" (240ml)",b:1,c:96,p:1.2,ch:22.7,f:0.2},
        " ":{u:" (240ml)",b:1,c:133,p:0.9,ch:32.2,f:0.2},
        " ":{u:" (240ml)",b:1,c:71,p:1.4,ch:17.8,f:0.4},
        " ":{u:" (240ml)",b:1,c:62,p:1.5,ch:15,f:0.3},
        
        // 
        " ":{u:" (300ml)",b:1,c:180,p:4,ch:38,f:2},
        " ":{u:" (300ml)",b:1,c:140,p:3,ch:30,f:1.5},
        "  (  )":{u:" (300ml)",b:1,c:150,p:5,ch:32,f:1},
        " ":{u:" (350ml)",b:1,c:280,p:25,ch:35,f:5},
        " ":{u:" (300ml)",b:1,c:190,p:3,ch:42,f:1.5},
        
        //    
        " ":{u:" (250ml)",b:1,c:110,p:0,ch:27,f:0},
        " ":{u:" (500ml)",b:1,c:130,p:0,ch:32,f:0},
        " ":{u:" (500ml)",b:1,c:50,p:0,ch:12,f:0},
        "BCAA ":{u:" (300ml)",b:1,c:10,p:5,ch:0,f:0},
        
        //  
        " ":{u:" (330ml)",b:1,c:140,p:0,ch:39,f:0},
        " /":{u:" (330ml)",b:1,c:0,p:0,ch:0,f:0},
        "":{u:" (330ml)",b:1,c:85,p:0,ch:21,f:0},
        "":{u:" (240ml)",b:1,c:99,p:0.2,ch:26,f:0.1},
        
        //    
        " ":{u:" (240ml)",b:1,c:190,p:8,ch:26,f:5},
        " ":{u:" (240ml)",b:1,c:160,p:6,ch:24,f:4},
        "  ":{u:" (330ml)",b:1,c:200,p:25,ch:15,f:5},
        "   ":{u:" (300ml)",b:1,c:120,p:25,ch:2,f:1},
        "   ":{u:" (350ml)",b:1,c:250,p:33,ch:15,f:5},
        
        //  
        " ":{u:" (240ml)",b:1,c:2,p:0,ch:0.5,f:0},
        " ":{u:" (240ml)",b:1,c:2,p:0,ch:0.5,f:0},
        " ":{u:" (240ml)",b:1,c:4,p:0,ch:1,f:0},
        "  ":{u:" (240ml)",b:1,c:3,p:0,ch:0.7,f:0},
        " ":{u:" (240ml)",b:1,c:3,p:0,ch:0.8,f:0},
        " ":{u:" (240ml)",b:1,c:2,p:0,ch:0,f:0},
        " ":{u:" (240ml)",b:1,c:2,p:0,ch:0,f:0},
        
        //   
        " ":{u:" (240ml)",b:1,c:120,p:0,ch:30,f:0},
        " ":{u:" (240ml)",b:1,c:85,p:1,ch:20,f:0.5},
        "  ":{u:" (240ml)",b:1,c:90,p:0,ch:22,f:0},
        " ":{u:" (240ml)",b:1,c:70,p:0.5,ch:17,f:0.2},
        " ":{u:" (240ml)",b:1,c:140,p:0.5,ch:35,f:0.2}
    },
    "   (Sweeteners)":{
        //   
        " ":{u:"  (21 )",b:1,c:64,p:0.1,ch:17,f:0},
        " (100 )":{u:"",b:100,c:304,p:0.3,ch:82,f:0},
        " ":{u:"  (20 )",b:1,c:60,p:0.1,ch:16,f:0},
        " ":{u:"  (20 )",b:1,c:55,p:0.2,ch:14,f:0},
        " ( )":{u:"  (20 )",b:1,c:58,p:0,ch:15,f:0},
        
        //   
        " ":{u:"  (4 )",b:1,c:16,p:0,ch:4,f:0},
        " ":{u:"  (4 )",b:1,c:15,p:0,ch:4,f:0},
        "":{u:" (5 )",b:1,c:20,p:0,ch:5,f:0},
        " ":{u:" (1 )",b:1,c:0,p:0,ch:0,f:0},
        "":{u:" (1 )",b:1,c:0,p:0,ch:0,f:0},
        
        //   
        " ()":{u:"  (20 )",b:1,c:50,p:0.1,ch:13,f:0},
        "":{u:"  (18 )",b:1,c:100,p:1,ch:11,f:6},
        "  ":{u:" (20 )",b:1,c:110,p:1.5,ch:8,f:8},
        "  ":{u:" (20 )",b:1,c:108,p:1.5,ch:12,f:6},
        " ":{u:"  (5 )",b:1,c:12,p:1,ch:1,f:0.5},
        
        // 
        " ":{u:"  (17 )",b:1,c:19,p:0.2,ch:4.5,f:0},
        " ":{u:"  (5 )",b:1,c:3,p:0.2,ch:0.3,f:0.2},
        " ":{u:"  (14 )",b:1,c:94,p:0.1,ch:0.1,f:10},
        "  ":{u:"  (14 )",b:1,c:35,p:0.1,ch:2,f:3},
        " ":{u:"  (15 )",b:1,c:8,p:1,ch:1,f:0},
        "  ()":{u:"  (15 )",b:1,c:89,p:2.6,ch:3.2,f:8.1},
        " ":{u:"  (15 )",b:1,c:14,p:0.1,ch:2.7,f:0},
        " ":{u:"  (15 )",b:1,c:3,p:0,ch:0.1,f:0},
        " ":{u:"  (14 )",b:1,c:119,p:0,ch:0,f:13.5},
        "  ":{u:"  (30 )",b:1,c:78,p:1,ch:0.8,f:8},
        " ":{u:"  (18 )",b:1,c:29,p:0.1,ch:7,f:0.1},
        "":{u:"  (30 )",b:1,c:54,p:1.4,ch:4,f:3.5},
        " ":{u:"  (16 )",b:1,c:13,p:0.6,ch:2.8,f:0.1}
    },
    "    (Fast Food)":{
        "  ()":{u:" (107 )",b:1,c:298,p:13,ch:33,f:13},
        "  ()":{u:" (100 )",b:1,c:250,p:11,ch:30,f:10},
        " ":{u:" (110 )",b:1,c:295,p:17,ch:24,f:14},
        "":{u:" (135 )",b:1,c:359,p:21,ch:28,f:18},
        " ":{u:" (98 )",b:1,c:290,p:11,ch:24,f:17},
        "  ()":{u:" (71 )",b:1,c:222,p:2.6,ch:29,f:10},
        "  ()":{u:" (154 )",b:1,c:480,p:5.6,ch:63,f:22},
        "  (6 )":{u:" (96 )",b:1,c:286,p:14,ch:18,f:18},
        "  ":{u:" (170 )",b:1,c:440,p:24,ch:42,f:20},
        "":{u:" (47 )",b:1,c:192,p:2,ch:22,f:11},
        "":{u:" (57 )",b:1,c:231,p:4.7,ch:26,f:12},
        "  ()":{u:" (64 )",b:1,c:235,p:2.6,ch:34,f:10},
        " ":{u:" (66 )",b:1,c:137,p:2.3,ch:16,f:7},
        "":{u:" (17 )",b:1,c:57,p:2,ch:5,f:3},
        " ":{u:" (300 )",b:1,c:520,p:35,ch:42,f:22},
        " ":{u:" (350 )",b:1,c:600,p:30,ch:55,f:28}
    }
};


==================================================
FILE: .\src\data\nasmImages.ts
==================================================
//   SVG       NASM
//         

type NasmImage = { start: string; end: string };

export const nasmExerciseImages: Record<string, NasmImage> = {
    //  1: / (Inhibit)
    "    (Thoracic Foam Rolling)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--   -->
            <rect x="20" y="50" width="100" height="15" rx="7" fill="#3b82f6" opacity="0.6"/>
            <!--   ( ) -->
            <ellipse cx="70" cy="45" rx="25" ry="20" fill="#fbbf24" opacity="0.3"/>
            <circle cx="70" cy="40" r="8" fill="#fbbf24"/>
            <path d="M 50 50 Q 70 45, 90 50" stroke="#fbbf24" stroke-width="3" fill="none"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--   -->
            <rect x="20" y="50" width="100" height="15" rx="7" fill="#10b981" opacity="0.6"/>
            <!--   ( ) -->
            <ellipse cx="70" cy="42" rx="25" ry="20" fill="#fbbf24" opacity="0.3"/>
            <circle cx="70" cy="38" r="8" fill="#fbbf24"/>
            <path d="M 50 48 Q 70 42, 90 48" stroke="#fbbf24" stroke-width="3" fill="none"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--    -->
            <circle cx="70" cy="30" r="12" fill="#fbbf24"/>
            <rect x="65" y="30" width="10" height="20" rx="5" fill="#fbbf24"/>
            <!--   -->
            <rect x="55" y="35" width="30" height="8" rx="4" fill="#3b82f6" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--    -->
            <circle cx="70" cy="28" r="12" fill="#fbbf24"/>
            <rect x="65" y="28" width="10" height="20" rx="5" fill="#fbbf24"/>
            <!--   -->
            <rect x="55" y="33" width="30" height="8" rx="4" fill="#10b981" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="40" r="10" fill="#fbbf24"/>
            <!--   -->
            <circle cx="45" cy="35" r="8" fill="#fbbf24"/>
            <rect x="40" y="35" width="10" height="15" rx="5" fill="#3b82f6" opacity="0.6"/>
            <!--   -->
            <circle cx="95" cy="35" r="8" fill="#fbbf24"/>
            <rect x="90" y="35" width="10" height="15" rx="5" fill="#3b82f6" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="40" r="10" fill="#fbbf24"/>
            <!--   -->
            <circle cx="45" cy="33" r="8" fill="#fbbf24"/>
            <rect x="40" y="33" width="10" height="15" rx="5" fill="#10b981" opacity="0.6"/>
            <!--   -->
            <circle cx="95" cy="33" r="8" fill="#fbbf24"/>
            <rect x="90" y="33" width="10" height="15" rx="5" fill="#10b981" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "     ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="55" y="20" width="30" height="50" rx="15" fill="#fbbf24" opacity="0.7"/>
            <!--  -->
            <rect x="50" y="50" width="20" height="40" rx="10" fill="#fbbf24"/>
            <!--   -->
            <rect x="45" y="55" width="30" height="12" rx="6" fill="#3b82f6" opacity="0.6"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="55" y="20" width="30" height="50" rx="15" fill="#fbbf24" opacity="0.7"/>
            <!--  -->
            <rect x="50" y="48" width="20" height="40" rx="10" fill="#fbbf24"/>
            <!--   -->
            <rect x="45" y="53" width="30" height="12" rx="6" fill="#10b981" opacity="0.6"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  QL": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="55" y="25" width="30" height="50" rx="15" fill="#fbbf24" opacity="0.7"/>
            <!--      -->
            <rect x="50" y="40" width="40" height="15" rx="7" fill="#3b82f6" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="55" y="25" width="30" height="50" rx="15" fill="#fbbf24" opacity="0.7"/>
            <!--      -->
            <rect x="50" y="38" width="40" height="15" rx="7" fill="#10b981" opacity="0.6"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="30" width="20" height="60" rx="10" fill="#fbbf24"/>
            <!--   -->
            <rect x="55" y="50" width="30" height="15" rx="7" fill="#3b82f6" opacity="0.6"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="30" width="20" height="60" rx="10" fill="#fbbf24"/>
            <!--   -->
            <rect x="55" y="48" width="30" height="15" rx="7" fill="#10b981" opacity="0.6"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    
    //  2:  (Lengthen)
    "     (Doorway Stretch)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="20" y="10" width="100" height="80" rx="5" fill="#e5e7eb" stroke="#9ca3af" stroke-width="2"/>
            <line x1="50" y1="15" x2="50" y2="85" stroke="#9ca3af" stroke-width="2"/>
            <line x1="90" y1="15" x2="90" y2="85" stroke="#9ca3af" stroke-width="2"/>
            <!--  -->
            <circle cx="70" cy="40" r="8" fill="#fbbf24"/>
            <rect x="60" y="40" width="20" height="30" rx="10" fill="#fbbf24"/>
            <!--  -->
            <rect x="45" y="42" width="15" height="4" rx="2" fill="#fbbf24"/>
            <rect x="80" y="42" width="15" height="4" rx="2" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="20" y="10" width="100" height="80" rx="5" fill="#e5e7eb" stroke="#9ca3af" stroke-width="2"/>
            <line x1="50" y1="15" x2="50" y2="85" stroke="#9ca3af" stroke-width="2"/>
            <line x1="90" y1="15" x2="90" y2="85" stroke="#9ca3af" stroke-width="2"/>
            <!--  -->
            <circle cx="70" cy="38" r="8" fill="#fbbf24"/>
            <rect x="60" y="38" width="20" height="30" rx="10" fill="#fbbf24"/>
            <!--  ( ) -->
            <rect x="42" y="40" width="18" height="4" rx="2" fill="#10b981"/>
            <rect x="80" y="40" width="18" height="4" rx="2" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "    (Band Chest Stretch)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="40" r="8" fill="#fbbf24"/>
            <rect x="60" y="40" width="20" height="30" rx="10" fill="#fbbf24"/>
            <!--  -->
            <rect x="50" y="42" width="12" height="4" rx="2" fill="#fbbf24"/>
            <rect x="78" y="42" width="12" height="4" rx="2" fill="#fbbf24"/>
            <!--  -->
            <path d="M 50 44 Q 70 42, 90 44" stroke="#10b981" stroke-width="3" fill="none"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="38" r="8" fill="#fbbf24"/>
            <rect x="60" y="38" width="20" height="30" rx="10" fill="#fbbf24"/>
            <!--  ( ) -->
            <rect x="45" y="40" width="15" height="4" rx="2" fill="#10b981"/>
            <rect x="80" y="40" width="15" height="4" rx="2" fill="#10b981"/>
            <!--  ( ) -->
            <path d="M 45 42 Q 70 38, 95 42" stroke="#3b82f6" stroke-width="3" fill="none"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "     (Hip Flexor Stretch)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="20" width="20" height="50" rx="10" fill="#fbbf24"/>
            <!--   () -->
            <rect x="55" y="60" width="15" height="30" rx="7" fill="#fbbf24"/>
            <!--   () -->
            <rect x="70" y="50" width="15" height="35" rx="7" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="20" width="20" height="50" rx="10" fill="#fbbf24"/>
            <!--   () -->
            <rect x="55" y="58" width="15" height="30" rx="7" fill="#fbbf24"/>
            <!--   ( -  ) -->
            <rect x="70" y="45" width="15" height="40" rx="7" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    " ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="25" width="20" height="40" rx="10" fill="#fbbf24"/>
            <!--  -->
            <rect x="62" y="50" width="16" height="45" rx="8" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="60" y="25" width="20" height="40" rx="10" fill="#fbbf24"/>
            <!--  ( ) -->
            <rect x="62" y="48" width="16" height="47" rx="8" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    
    //  3:  (Activate)
    "   (Chin Tuck)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="35" r="12" fill="#fbbf24"/>
            <!--  -->
            <rect x="65" y="35" width="10" height="20" rx="5" fill="#fbbf24"/>
            <!--  -->
            <rect x="60" y="50" width="20" height="30" rx="10" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  (  ) -->
            <circle cx="70" cy="33" r="12" fill="#fbbf24"/>
            <!--  -->
            <rect x="65" y="33" width="10" height="20" rx="5" fill="#10b981"/>
            <!--  -->
            <rect x="60" y="50" width="20" height="30" rx="10" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  (Scapular Retraction)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="45" r="10" fill="#fbbf24"/>
            <!--  -->
            <circle cx="50" cy="40" r="7" fill="#fbbf24"/>
            <circle cx="90" cy="40" r="7" fill="#fbbf24"/>
            <!--  -->
            <rect x="45" y="42" width="10" height="15" rx="5" fill="#fbbf24"/>
            <rect x="85" y="42" width="10" height="15" rx="5" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <circle cx="70" cy="45" r="10" fill="#fbbf24"/>
            <!--  ( ) -->
            <circle cx="48" cy="40" r="7" fill="#10b981"/>
            <circle cx="92" cy="40" r="7" fill="#10b981"/>
            <!--  -->
            <rect x="43" y="42" width="10" height="15" rx="5" fill="#10b981"/>
            <rect x="87" y="42" width="10" height="15" rx="5" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "   (Core Strengthening)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="55" y="30" width="30" height="50" rx="15" fill="#fbbf24"/>
            <!--  -->
            <rect x="60" y="70" width="12" height="25" rx="6" fill="#fbbf24"/>
            <rect x="68" y="70" width="12" height="25" rx="6" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <rect x="55" y="28" width="30" height="45" rx="15" fill="#10b981"/>
            <!--  -->
            <rect x="60" y="68" width="12" height="25" rx="6" fill="#fbbf24"/>
            <rect x="68" y="68" width="12" height="25" rx="6" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    " (Dead Bug)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <rect x="55" y="50" width="30" height="20" rx="10" fill="#fbbf24"/>
            <!--  () -->
            <rect x="60" y="30" width="8" height="20" rx="4" fill="#fbbf24"/>
            <rect x="72" y="30" width="8" height="20" rx="4" fill="#fbbf24"/>
            <!--  -->
            <rect x="62" y="65" width="8" height="25" rx="4" fill="#fbbf24"/>
            <rect x="70" y="65" width="8" height="25" rx="4" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <rect x="55" y="50" width="30" height="20" rx="10" fill="#fbbf24"/>
            <!--  () -->
            <rect x="60" y="45" width="8" height="10" rx="4" fill="#10b981"/>
            <rect x="72" y="45" width="8" height="10" rx="4" fill="#10b981"/>
            <!--  () -->
            <rect x="62" y="30" width="8" height="30" rx="4" fill="#10b981"/>
            <rect x="70" y="30" width="8" height="30" rx="4" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    
    //  4:  (Integrate)
    " YTWL  ": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <rect x="55" y="50" width="30" height="20" rx="10" fill="#fbbf24"/>
            <!--  ( Y) -->
            <path d="M 60 45 L 70 30 L 80 45" stroke="#fbbf24" stroke-width="3" fill="none"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <rect x="55" y="50" width="30" height="20" rx="10" fill="#fbbf24"/>
            <!--  ( W) -->
            <path d="M 60 45 L 65 40 L 70 45 L 75 40 L 80 45" stroke="#10b981" stroke-width="3" fill="none"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "  (Wall Angel)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="15" y="10" width="5" height="80" fill="#9ca3af"/>
            <!--  -->
            <rect x="30" y="25" width="20" height="50" rx="10" fill="#fbbf24"/>
            <!--  -->
            <rect x="25" y="35" width="12" height="4" rx="2" fill="#fbbf24"/>
            <rect x="53" y="35" width="12" height="4" rx="2" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  -->
            <rect x="15" y="10" width="5" height="80" fill="#9ca3af"/>
            <!--  -->
            <rect x="30" y="25" width="20" height="50" rx="10" fill="#fbbf24"/>
            <!--  () -->
            <rect x="22" y="28" width="12" height="4" rx="2" fill="#10b981"/>
            <rect x="50" y="28" width="12" height="4" rx="2" fill="#10b981"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    "    (Plank with Pelvic Tilt)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  () -->
            <rect x="50" y="40" width="40" height="15" rx="7" fill="#fbbf24"/>
            <!--  -->
            <rect x="52" y="35" width="8" height="10" rx="4" fill="#fbbf24"/>
            <rect x="80" y="35" width="8" height="10" rx="4" fill="#fbbf24"/>
            <!--  -->
            <rect x="58" y="52" width="8" height="30" rx="4" fill="#fbbf24"/>
            <rect x="74" y="52" width="8" height="30" rx="4" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  (  ) -->
            <path d="M 50 45 Q 70 38, 90 45" stroke="#10b981" stroke-width="15" fill="none" stroke-linecap="round"/>
            <!--  -->
            <rect x="52" y="33" width="8" height="10" rx="4" fill="#10b981"/>
            <rect x="80" y="33" width="8" height="10" rx="4" fill="#10b981"/>
            <!--  -->
            <rect x="58" y="50" width="8" height="30" rx="4" fill="#fbbf24"/>
            <rect x="74" y="50" width="8" height="30" rx="4" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    },
    " - (Cat-Cow)": {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <path d="M 50 50 Q 70 40, 90 50" stroke="#fbbf24" stroke-width="12" fill="none" stroke-linecap="round"/>
            <!--  -->
            <rect x="48" y="45" width="8" height="12" rx="4" fill="#fbbf24"/>
            <rect x="84" y="45" width="8" height="12" rx="4" fill="#fbbf24"/>
            <!--  -->
            <rect x="54" y="52" width="8" height="25" rx="4" fill="#fbbf24"/>
            <rect x="78" y="52" width="8" height="25" rx="4" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <!--  ( ) -->
            <path d="M 50 50 Q 70 60, 90 50" stroke="#10b981" stroke-width="12" fill="none" stroke-linecap="round"/>
            <!--  -->
            <rect x="48" y="55" width="8" height="12" rx="4" fill="#10b981"/>
            <rect x="84" y="55" width="8" height="12" rx="4" fill="#10b981"/>
            <!--  -->
            <rect x="54" y="58" width="8" height="25" rx="4" fill="#fbbf24"/>
            <rect x="78" y="58" width="8" height="25" rx="4" fill="#fbbf24"/>
            <text x="70" y="95" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    }
};

//         
export const getExerciseImage = (exerciseName: string): NasmImage => {
    const images = nasmExerciseImages[exerciseName];
    if (images) return images;
    
    //  
    return {
        start: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <rect x="50" y="30" width="40" height="40" rx="20" fill="#94a3b8" opacity="0.3"/>
            <circle cx="70" cy="50" r="12" fill="#94a3b8"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`,
        end: `<svg width="140" height="100" viewBox="0 0 140 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="140" height="100" fill="#f8fafc"/>
            <rect x="50" y="30" width="40" height="40" rx="20" fill="#64748b" opacity="0.3"/>
            <circle cx="70" cy="50" r="12" fill="#64748b"/>
            <text x="70" y="90" text-anchor="middle" font-size="10" fill="#64748b" font-family="Arial"></text>
        </svg>`
    };
};



==================================================
FILE: .\src\data\nasmPrograms.ts
==================================================
//   NASM   Corrective Exercise Continuum
//  4 : Inhibit, Lengthen, Activate, Integrate

type PhaseKey = 'inhibit' | 'lengthen' | 'activate' | 'integrate';

export type NasmProgram = Record<PhaseKey, string[]>;

export const nasmPrograms: Record<string, NasmProgram> = {
    "     (Kyphosis/Forward Head)": {
        inhibit: [
            "    (Thoracic Foam Rolling)",
            "  ",
            "  "
        ],
        lengthen: [
            "     (Doorway Stretch)",
            "    (Band Chest Stretch)",
            " SCM/Levator Scapulae",
            "  "
        ],
        activate: [
            "   (Chin Tuck)",
            "  (Scapular Retraction)",
            "   ",
            "   "
        ],
        integrate: [
            " YTWL  ",
            " YTWL  ",
            "  (Wall Angel)",
            "   "
        ]
    },
    "    (Lordosis)": {
        inhibit: [
            "     ",
            "  QL",
            "  "
        ],
        lengthen: [
            "     (Hip Flexor Stretch)",
            "      ",
            " QL",
            " ",
            "   "
        ],
        activate: [
            "   (Core Strengthening)",
            "    ",
            "  ",
            "    ",
            " (Dead Bug)"
        ],
        integrate: [
            "    (Plank with Pelvic Tilt)",
            " - (Cat-Cow)",
            "  "
        ]
    },
    " (Scoliosis)": {
        inhibit: [
            "    ",
            "   ",
            "  IT Band"
        ],
        lengthen: [
            "  (Unilateral Stretching)",
            "   ",
            "   ",
            "  (Adductor Stretch)"
        ],
        activate: [
            "   ",
            "     ",
            "  / ",
            "  /   "
        ],
        integrate: [
            "  (Balance Exercises)",
            "   ",
            "  (Side Plank)",
            "  "
        ]
    },
    " / (Knee Valgus/Varus)": {
        inhibit: [
            "  IT Band",
            "   ",
            "  "
        ],
        lengthen: [
            " IT Band",
            " IT Band   ",
            "  (Adductor Stretch)",
            " "
        ],
        activate: [
            " (Clamshell)",
            "  ",
            "   (Hip Abduction)",
            "    ",
            "  ",
            "   "
        ],
        integrate: [
            "  (Step Down)",
            "   ",
            "X-band Walks",
            "X-band Walks  "
        ]
    },
    "  (Flat Feet)": {
        inhibit: [
            "   ",
            "   ",
            "   "
        ],
        lengthen: [
            "  ",
            "    ",
            "  ",
            "    "
        ],
        activate: [
            "    ",
            "      ",
            "Short Foot Exercise",
            "   ",
            "   "
        ],
        integrate: [
            "  ",
            "    ",
            "Calf Raise   "
        ]
    },
    "  (Rounded Shoulders)": {
        inhibit: [
            "   ",
            "  ",
            "  "
        ],
        lengthen: [
            "  ",
            "    ",
            " ",
            "   "
        ],
        activate: [
            "   ",
            "     ",
            "   ",
            "     "
        ],
        integrate: [
            " YTWL  ",
            " YTWL  ",
            "  (Wall Angel)",
            "   "
        ]
    },
    "  (Frozen Shoulder)": {
        inhibit: [
            "  ",
            "   ",
            "  "
        ],
        lengthen: [
            " ",
            "   ",
            "  ",
            "    "
        ],
        activate: [
            "  ",
            "    ",
            "   ",
            "     "
        ],
        integrate: [
            " YTWL  ",
            " YTWL  ",
            "  (Wall Angel)",
            "   "
        ]
    },
    "   (Carpal Tunnel)": {
        inhibit: [
            "   ",
            "   ",
            "  "
        ],
        lengthen: [
            "  ",
            "    ",
            " ",
            "   "
        ],
        activate: [
            "   ",
            "     ",
            "  ",
            "    "
        ],
        integrate: [
            "   ",
            "  ",
            "  "
        ]
    },
    "   (Lower Back Pain)": {
        inhibit: [
            "  ",
            "  ",
            "  ",
            "  "
        ],
        lengthen: [
            " ",
            "   ",
            " ",
            "   ",
            " ",
            "   "
        ],
        activate: [
            "  ",
            "    ",
            "  ",
            "    ",
            "  ",
            "    "
        ],
        integrate: [
            " (Dead Bug)",
            "  ",
            " - (Cat-Cow)",
            "    (Plank with Pelvic Tilt)"
        ]
    }
};

//      NASM
type PhaseDefaults = { sets: number; reps: string; rest: string; restUnit?: string; intensity?: string };

export const nasmPhaseDefaults: Record<PhaseKey, PhaseDefaults> = {
    inhibit: {
        sets: 1,
        reps: "30-60 ",
        rest: "30",
        restUnit: "s",
        intensity: "  "
    },
    lengthen: {
        sets: 1,
        reps: "30-60 ",
        rest: "30",
        restUnit: "s",
        intensity: "  "
    },
    activate: {
        sets: 2,
        reps: "10-15",
        rest: "30",
        restUnit: "s",
        intensity: ""
    },
    integrate: {
        sets: 2,
        reps: "10-15",
        rest: "60",
        restUnit: "s",
        intensity: "  "
    }
};

//   
export const intensityLevels: Record<string, Record<PhaseKey, { sets: number; reps: string; rest: string }>> = {
    low: {
        inhibit: { sets: 1, reps: "30 ", rest: "30" },
        lengthen: { sets: 1, reps: "30 ", rest: "30" },
        activate: { sets: 2, reps: "10", rest: "30" },
        integrate: { sets: 2, reps: "10", rest: "60" }
    },
    medium: {
        inhibit: { sets: 1, reps: "45 ", rest: "30" },
        lengthen: { sets: 1, reps: "45 ", rest: "30" },
        activate: { sets: 2, reps: "12", rest: "30" },
        integrate: { sets: 2, reps: "12", rest: "60" }
    },
    high: {
        inhibit: { sets: 1, reps: "60 ", rest: "30" },
        lengthen: { sets: 1, reps: "60 ", rest: "30" },
        activate: { sets: 3, reps: "15", rest: "30" },
        integrate: { sets: 3, reps: "15", rest: "60" }
    }
};



==================================================
FILE: .\src\data\resistanceExercises.ts
==================================================
export const resistanceExercises: Record<string, Record<string, string[]>> = {
    " (Chest)":{
        " (Mid)":[
            "   (Bench Press)",
            "   (DB Press)",
            "  (Push-up)",
            "    (Close-Grip Push-up)",
            "    (Wide-Grip Push-up)",
            "   (Diamond Push-up)",
            "    (Decline Push-up)",
            "    (Incline Push-up)",
            "   (Machine Press)",
            "  (Pec Deck)",
            "   (DB Fly)",
            "   (Cable Fly)",
            "   (Smith Press)",
            "    (Close-Grip Press)",
            "    (Wide-Grip Press)",
            "    (Resistance Band Press)",
            "      (Floor Press)",
            "      (Swiss Ball Press)",
            "       (Incline DB Press)",
            "       (Decline DB Press)",
            "       (Flat DB Press)",
            "       (Incline DB Press)",
            "       (Decline DB Press)",
            "       (Flat DB Press)",
            "       (Incline DB Press)",
            "       (Decline DB Press)",
            "       (Flat DB Press)"
        ],
        " (Upper)":[
            "    (Incline Press)",
            "    (Incline DB Press)",
            "    (Incline Fly)",
            "    (Incline Cable Fly)",
            "    (Low Cable Crossover)",
            "    (Incline Machine)",
            "   (Incline Smith)",
            "     (Incline Band Press)",
            "        (Incline DB Press)",
            "        (Decline DB Press)",
            "        (Flat DB Press)"
        ],
        " (Lower)":[
            "    (Decline Press)",
            "    (Decline DB Press)",
            " (Dips)",
            "   (Assisted Dips)",
            "   (Weighted Dips)",
            "    (High Cable Crossover)",
            "   (Decline Smith)",
            "     (Decline Band Press)",
            "        (Incline DB Press)",
            "        (Decline DB Press)",
            "        (Flat DB Press)"
        ]
    },
    "   (Back)":{
        " (Thickness)":[
            "   (Barbell Row)",
            "     (Close-Grip Barbell Row)",
            "     (Wide-Grip Barbell Row)",
            "    (DB Row)",
            "      (Single-Arm DB Row)",
            "  (Seated Cable Row)",
            "    (Close-Grip Cable Row)",
            "    (Wide-Grip Cable Row)",
            " (T-Bar Row)",
            "   (Close-Grip T-Bar Row)",
            "   (Wide-Grip T-Bar Row)",
            "  (Face Pull)",
            "    (Single-arm Row)",
            "    (Band Row)",
            "      (DB Row on Bench)",
            "      (DB Row on Floor)",
            "       (Incline DB Row)",
            "       (Decline DB Row)",
            "       (Flat DB Row)"
        ],
        " (Width)":[
            " (Pull-up)",
            "   (Close-Grip Pull-up)",
            "   (Wide-Grip Pull-up)",
            "   (Assisted Pull-up)",
            "   (Weighted Pull-up)",
            "    (Lat Pulldown)",
            "      (Close-Grip Lat Pulldown)",
            "      (Wide-Grip Lat Pulldown)",
            "     (Behind-Neck Lat Pulldown)",
            "  (DB Pullover)",
            "  (Cable Pullover)",
            "    (Straight-Arm Pulldown)",
            " (Assisted Pull-up)",
            "   (Band Pull-up)",
            "   (DB Pull-up)",
            "   (Cable Pull-up)"
        ],
        "   (Traps)":[
            "  (Barbell Shrug)",
            "   (Behind-Back Barbell Shrug)",
            "  (DB Shrug)",
            "    (Single-Arm DB Shrug)",
            "  (Cable Shrug)",
            "    (Upright Row)",
            "    (Close-Grip Upright Row)",
            "  (Cable Upright Row)",
            "  (DB Upright Row)",
            "   (Band Upright Row)",
            "   (Band Shrug)",
            "     (DB Shrug on Bench)",
            "     (DB Shrug on Floor)"
        ],
        "  (Lower Back)":[
            "  (Deadlift)",
            "  (RDL)",
            "  (Sumo Deadlift)",
            "   (DB Deadlift)",
            "   (Cable Deadlift)",
            "   (Back Extension)",
            "    (DB Back Extension)",
            "  (Good Morning)",
            "    (Barbell Good Morning)",
            "    (DB Good Morning)",
            "    (Cable Good Morning)",
            "    (Band Good Morning)"
        ]
    },
    " (Legs)":{
        " (Quads)":[
            "    (Squat)",
            "    (Front Squat)",
            "  (Sumo Squat)",
            "  (Bulgarian Split Squat)",
            "  (Smith Squat)",
            "   (DB Squat)",
            "   (Cable Squat)",
            "   (Band Squat)",
            "    (Bodyweight Squat)",
            "   (Box Squat)",
            "   (Ball Squat)",
            "   (Leg Press)",
            "     (Single-Leg Press)",
            "     (Ball Leg Press)",
            "   (Leg Extension)",
            "     (Single-Leg Extension)",
            "    (Band Leg Extension)",
            "  (DB Lunges)",
            "   (Forward DB Lunges)",
            "   (Reverse DB Lunges)",
            "   (Side DB Lunges)",
            "    (Walking DB Lunges)",
            "   (Barbell Lunges)",
            "   (Cable Lunges)",
            "   (Band Lunges)",
            "   (Hack Squat)",
            "     (Single-Leg Hack Squat)",
            "     (Ball Hack Squat)",
            "     (DB Squat on Bench)",
            "     (DB Squat on Floor)"
        ],
        " (Hamstrings)":[
            "    (Lying Leg Curl)",
            "      (Single-Leg Lying Curl)",
            "   (Seated Leg Curl)",
            "     (Single-Leg Seated Curl)",
            "   (Stiff-Leg Deadlift)",
            "     (Barbell Stiff-Leg Deadlift)",
            "     (DB Stiff-Leg Deadlift)",
            "     (Cable Stiff-Leg Deadlift)",
            "  (Cable Kickback)",
            "   (Band Kickback)",
            "   (Standing Leg Curl)",
            "     (Single-Leg Standing Curl)",
            "    (DB Leg Curl)",
            "    (Band Leg Curl)",
            "    (Ball Leg Curl)",
            "    (Bench Leg Curl)"
        ],
        " (Glutes)":[
            "   (Hip Thrust)",
            "    (DB Hip Thrust)",
            "    (Cable Hip Thrust)",
            "    (Band Hip Thrust)",
            "    (Single-Leg Hip Thrust)",
            "  (Glute Bridge)",
            "    (Barbell Glute Bridge)",
            "    (DB Glute Bridge)",
            "    (Cable Glute Bridge)",
            "    (Band Glute Bridge)",
            "    (Single-Leg Glute Bridge)",
            "  (Sumo Squat)",
            "    (Barbell Sumo Squat)",
            "    (DB Sumo Squat)",
            "  (Sumo Deadlift)",
            "    (Barbell Sumo Deadlift)",
            "    (DB Sumo Deadlift)",
            "   (Hip Abduction Machine)",
            "    (Band Hip Abduction)",
            "    (Cable Hip Abduction)",
            "    (DB Hip Abduction)",
            "    (Single-Leg Hip Abduction)"
        ],
        " (Calves)":[
            "   (Standing Calf Raise)",
            "     (Single-Leg Standing Calf Raise)",
            "     (Barbell Standing Calf Raise)",
            "     (DB Standing Calf Raise)",
            "     (Cable Standing Calf Raise)",
            "     (Band Standing Calf Raise)",
            "   (Seated Calf Raise)",
            "     (Single-Leg Seated Calf Raise)",
            "     (Barbell Seated Calf Raise)",
            "     (DB Seated Calf Raise)",
            "     (Cable Seated Calf Raise)",
            "     (Band Seated Calf Raise)",
            "    (Leg Press Calf Raise)",
            "      (Single-Leg Press Calf Raise)",
            "  (Smith Calf Raise)",
            "    (Single-Leg Smith Calf Raise)",
            "    (Ball Calf Raise)",
            "    (Bench Calf Raise)"
        ]
    },
    " (Shoulders)":{
        " (Anterior)":[
            "    (Military Press)",
            "     (Behind-Neck Military Press)",
            "   (DB Shoulder Press)",
            "    (Seated DB Shoulder Press)",
            "    (Standing DB Shoulder Press)",
            "   (Machine Press)",
            "    (Cable Shoulder Press)",
            "    (Band Shoulder Press)",
            "    (Front Raise)",
            "      (Single-Arm Front Raise)",
            "    (Cable Front Raise)",
            "     (Band Front Raise)",
            "     (Barbell Front Raise)",
            "       (DB Front Raise on Bench)",
            "       (DB Front Raise on Floor)"
        ],
        " (Lateral)":[
            "   (Lateral Raise)",
            "     (Single-Arm Lateral Raise)",
            "    (Seated Lateral Raise)",
            "    (Standing Lateral Raise)",
            "   (Cable Lateral Raise)",
            "    (Band Lateral Raise)",
            "    (Close-Grip Upright Row)",
            "    (Wide-Grip Upright Row)",
            "  (DB Upright Row)",
            "  (Cable Upright Row)",
            "   (Band Upright Row)",
            "  (Cable Lateral)",
            "   (Band Lateral)",
            "   (DB Lateral)",
            "   (Barbell Lateral)"
        ],
        " (Posterior)":[
            "   (Bent-Over DB Raise)",
            "     (Single-Arm Bent-Over Raise)",
            "    (Seated Bent-Over Raise)",
            "    (Standing Bent-Over Raise)",
            "   (Reverse Pec Deck)",
            "    (DB Reverse Fly)",
            "    (Cable Reverse Fly)",
            "    (Band Reverse Fly)",
            "  (Face Pull)",
            "    (Cable Face Pull)",
            "    (Band Face Pull)",
            "  ",
            "    (Band Reverse Pullover)",
            "    (DB Reverse Pullover)"
        ]
    },
    " (Arms)":{
        "  (Biceps)":[
            "    (Barbell Curl)",
            "    (Seated Barbell Curl)",
            "     (Close-Grip Barbell Curl)",
            "     (Wide-Grip Barbell Curl)",
            "    (Alternating DB Curl)",
            "    (Simultaneous DB Curl)",
            "    (Seated DB Curl)",
            "    (Standing DB Curl)",
            "   (Hammer Curl)",
            "     (Single-Arm Hammer Curl)",
            "   (Preacher Curl)",
            "     (Barbell Preacher Curl)",
            "     (DB Preacher Curl)",
            "     (Cable Preacher Curl)",
            "   (Cable Curl)",
            "     (Single-Arm Cable Curl)",
            "     (Rope Cable Curl)",
            " (Concentration Curl)",
            "   (DB Concentration Curl)",
            "   (Cable Concentration Curl)",
            "    (Band Curl)",
            "    (Ball Curl)",
            "    (Bench Curl)"
        ],
        "  (Triceps)":[
            "   (Triceps Pushdown)",
            "     (Single-Arm Pushdown)",
            "     (Rope Pushdown)",
            "     (Bar Pushdown)",
            "    (Skullcrusher)",
            "      (Close-Grip Skullcrusher)",
            "      (Wide-Grip Skullcrusher)",
            "    (DB Skullcrusher)",
            "      (Single-Arm DB Skullcrusher)",
            "  (Bench Dip)",
            "    (Assisted Bench Dip)",
            "    (Weighted Bench Dip)",
            "     (Overhead DB Extension)",
            "       (Single-Arm Overhead Extension)",
            "     (Overhead Cable Extension)",
            "       (Single-Arm Overhead Cable Extension)",
            "   (DB Kickback)",
            "     (Single-Arm DB Kickback)",
            "   (Cable Kickback)",
            "    (Band Kickback)",
            "   (Rope Pushdown)",
            "     (Single-Arm Rope Pushdown)",
            "    (Band Triceps Extension)",
            "    (Ball Triceps Extension)",
            "    (Bench Triceps Extension)"
        ]
    },
    "   (Core)":{
        " (Abs)":[
            " (Crunch)",
            "   (Weighted Crunch)",
            "   (Ball Crunch)",
            "   (Bench Crunch)",
            "  (Reverse Crunch)",
            "    (Ball Reverse Crunch)",
            "    (Bench Reverse Crunch)",
            "  (Hanging Leg Raise)",
            "    (Assisted Hanging Leg Raise)",
            "    (Weighted Hanging Leg Raise)",
            "    (Ab Rollout)",
            "      (Assisted Ab Rollout)",
            "      (Weighted Ab Rollout)",
            " (Plank)",
            "   (Weighted Plank)",
            "   (Ball Plank)",
            "   (Bench Plank)",
            "  (Cable Crunch)",
            "    (Single-Arm Cable Crunch)",
            "   (Band Crunch)",
            "   (Ball Crunch)",
            "   (Bench Crunch)"
        ],
        " (Obliques)":[
            "  (Russian Twist)",
            "    (Weighted Russian Twist)",
            "    (Ball Russian Twist)",
            "    (Bench Russian Twist)",
            "  (Bicycle Crunch)",
            "    (Weighted Bicycle Crunch)",
            "    (Ball Bicycle Crunch)",
            "    (Bench Bicycle Crunch)",
            "  (Side Plank)",
            "    (Weighted Side Plank)",
            "    (Ball Side Plank)",
            "    (Bench Side Plank)",
            " (Cable Woodchop)",
            "   (Cable Woodchop)",
            "   (Band Woodchop)",
            "   (DB Woodchop)",
            "  (Side Crunch)",
            "    (Weighted Side Crunch)",
            "    (Ball Side Crunch)",
            "    (Bench Side Crunch)"
        ]
    }
};

export const riskyExercises: Record<string, string[]> = {
    " ": [
        "  (Deadlift)",
        "    (Squat)",
        "   (Barbell Row)",
        "  (Good Morning)",
        "  (RDL)",
        "  (Sumo Deadlift)",
        "   (Back Extension)"
    ],
    " ": [
        "    (Military Press)",
        "  (Barbell Shrug)",
        "    (Upright Row)",
        "     (Behind-Neck Military Press)",
        "     (Behind-Neck Lat Pulldown)"
    ],
    " ": [
        "   (Leg Extension)",
        "  (DB Lunges)",
        " ",
        "   ",
        "    ",
        "    "
    ],
    " ": [
        "    (Military Press)",
        " (Dips)",
        "    ",
        "     (Behind-Neck Military Press)",
        "     ",
        "    "
    ],
    " ": [
        "   (Preacher Curl)",
        "    (Skullcrusher)",
        "  (Bench Dip)",
        "    ",
        "    "
    ],
    " ": [
        "    ",
        "    ",
        "   ",
        "   "
    ]
};


==================================================
FILE: .\src\data\supplementsData.ts
==================================================
export const supplementsData: string[] = [
    // 
    "  (Whey Protein)",
    "   (Whey Isolate)",
    "   (Whey Concentrate)",
    "   (Whey Hydrolysate)",
    "  (Casein Protein)",
    "   (Micellar Casein)",
    "   (Egg Protein)",
    "  (Beef Protein)",
    "  (Soy Protein)",
    "  (Pea Protein)",
    "  (Rice Protein)",
    "  (Hemp Protein)",
    "   (Plant Blend)",
    " (Mass Gainer)",
    "  (Low-Sugar Mass Gainer)",
    "  (High-Carb Mass Gainer)",
    
    // 
    "  (Creatine Monohydrate)",
    "   (Creatine Ethyl Ester)",
    "  (Creatine HCl)",
    "   (Buffered Creatine)",
    "  (Micronized Creatine)",
    "  (Liquid Creatine)",
    
    //  
    "BCAA (  )",
    "BCAA 2:1:1",
    "BCAA 4:1:1",
    "BCAA 8:1:1",
    "EAA (  )",
    " (Glutamine)",
    "  (Glutamine Peptide)",
    " (L-Arginine)",
    " (Citrulline)",
    "  (Citrulline Malate)",
    " (Taurine)",
    " (Glycine)",
    " (Alanine)",
    "  (Beta-Alanine)",
    "HMB (  )",
    " (Leucine)",
    " (Isoleucine)",
    " (Valine)",
    
    //    
    "/   (Pre-Workout)",
    "    (Stim-Free Pre-Workout)",
    "     (High-Caffeine Pre-Workout)",
    "  (Post-Workout)",
    " (Recovery)",
    "   (Post-Workout Nutrition)",
    
    //   
    "  ",
    "  ",
    "  ",
    "  ",
    " D3",
    " D3 + K2",
    " C",
    " C   ",
    " E",
    " A",
    " K",
    " B ",
    " B1 ()",
    " B2 ()",
    " B3 ()",
    " B5 ( )",
    " B6",
    " B7 ()",
    " B9 ( )",
    " B12",
    " (Zinc)",
    " ",
    " ",
    " (Magnesium)",
    " ",
    " ",
    " ",
    " (Iron)",
    " (Calcium)",
    " (Phosphorus)",
    " (Selenium)",
    " (Chromium)",
    " (Copper)",
    " (Manganese)",
    " (Molybdenum)",
    " (Iodine)",
    
    //  
    " 3 (Omega-3)",
    "  (Fish Oil)",
    "  (Krill Oil)",
    "DHA",
    "EPA",
    "ALA (  )",
    "CLA (  )",
    "MCT Oil",
    " ",
    
    //  
    "- (L-Carnitine)",
    "- -",
    "- ",
    "   (Green Tea Extract)",
    " (Caffeine)",
    " ",
    "   ",
    "",
    " (Yohimbine)",
    " (Synephrine)",
    " (Capsaicin)",
    "- (L-Tyrosine)",
    "-  (L-Phenylalanine)",
    
    //   
    " (Tribulus)",
    " (Fenugreek)",
    " (Ashwagandha)",
    " (Ginseng)",
    " (Maca)",
    "  (Horny Goat Weed)",
    "DHEA",
    "D-  (D-Aspartic Acid)",
    
    //   
    "",
    "",
    " ",
    "",
    "",
    "",
    "",
    "",
    "",
    
    //   
    " (Collagen)",
    " ",
    "  1",
    "  2",
    "",
    "",
    "MSM",
    " ",
    " (Curcumin)",
    "",
    "",
    
    //   
    " (Melatonin)",
    "",
    " ( )",
    "- (L-Tryptophan)",
    "5-HTP",
    " (Valerian)",
    "",
    "",
    
    //   
    " Q10",
    "- ( )",
    "",
    "  ( )",
    " ( )",
    " ",
    
    // 
    "",
    " Q10",
    "  ",
    "",
    "",
    "",
    "",
    
    //  
    "",
    "",
    "",
    "",
    "",
    "",
    " ",
    " ",
    "",
    
    // 
    "",
    "",
    "",
    " ()",
    "",
    " ",
    
    // 
    "",
    "",
    "",
    " ",
    " ",
    
    // 
    " ",
    "-",
    "NAC (N-Acetyl Cysteine)",
    "-",
    "",
    "",
    "PQQ",
    "NAD+",
    "",
    "",
    "EGCG",
    "",
    " ",
    "",
    "",
    "",
    "",
    "",
    " "
];


==================================================
FILE: .\src\data\warmupCooldown.ts
==================================================
//   
export const warmupExercises: string[] = [
    //  
    "   (5 )",
    "   ",
    "   (5 )",
    "  (5 )",
    "  ",
    "   ",
    
    //   - 
    "  (Arm Circles)",
    "  (Shoulder Circles)",
    "   (Dynamic Chest Stretch)",
    "   (Cat-Cow)",
    "  ",
    "  ",
    "  ",
    "   (Arm Swings)",
    
    //   - 
    "  (Walking Lunges)",
    "   (Bodyweight Squat)",
    "   (Leg Swings)",
    "High Knees ( )",
    "Butt Kicks (  )",
    "  (Hip Circles)",
    "  ",
    "Side Shuffle ( )",
    
    //  
    "Jumping Jacks",
    "Inchworm ( )",
    "World's Greatest Stretch",
    "Frankenstein Walk",
    "A-Skip",
    "B-Skip",
    "Carioca ( )",
    
    //  -
    "   ",
    "  ",
    "    ",
    "   ",
    
    //   
    "    ( )",
    "    ( )",
    "    ( )",
    "    ( )",
    "    ",
    "    ",
];

//   
export const cooldownExercises: string[] = [
    //  
    "   (5 )",
    "   (5 )",
    " ",
    
    //   - 
    "    (30 )",
    "   (Triceps Stretch)",
    "   (Biceps Stretch)",
    "    (Cross-Body Stretch)",
    "  ",
    "    ",
    "  (Lat Stretch)",
    "   ",
    "Child's Pose ( )",
    "Thread the Needle",
    
    //   - 
    "   (Quad Stretch)",
    "  ",
    "  ",
    "Pigeon Pose ( )",
    "Figure Four Stretch",
    "    ",
    "   (Butterfly)",
    " IT Band",
    "   (Hip Flexor Stretch)",
    "90/90 Stretch",
    "Frog Stretch",
    
    //  
    "   (Knee to Chest)",
    "    (Supine Twist)",
    "Cat-Cow ",
    "Cobra Stretch",
    "  (Child's Pose)",
    "Scorpion Stretch",
    
    // 
    "  (2 )",
    "  (3 )",
    "Savasana ( )",
    
    //  
    "  ",
    "  ",
    "  IT Band",
    "  ",
    "   ",
    "  ",
    
    //   /
    "   ",
    "  ",
    "  ",
];



==================================================
FILE: .\src\hooks\useChat.ts
==================================================
import { useState, useEffect, useCallback, useRef } from 'react';
import { supabase } from '../lib/supabaseClient';
import { Message, OptimisticMessage, UseChatReturn } from '../types/interactive';
import { useAuth } from '../context/AuthContext';

export function useChat(otherUserId: string): UseChatReturn {
  const { user } = useAuth();
  const [messages, setMessages] = useState<(Message | OptimisticMessage)[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [hasMore, setHasMore] = useState(false);
  const [isTyping, setIsTyping] = useState(false);

  const currentOffset = useRef(0);
  const PAGE_SIZE = 50;
  const channelRef = useRef<any>(null);

  // Load initial messages
  const loadMessages = useCallback(async (loadMore = false) => {
    if (!user?.id || !otherUserId) return;

    setIsLoading(true);
    setError(null);

    try {
      const offset = loadMore ? currentOffset.current : 0;

      const { data, error: fetchError } = await supabase
        .from('messages')
        .select('*')
        .or(`and(sender_id.eq.${user.id},receiver_id.eq.${otherUserId}),and(sender_id.eq.${otherUserId},receiver_id.eq.${user.id})`)
        .order('created_at', { ascending: false })
        .range(offset, offset + PAGE_SIZE - 1);

      if (fetchError) throw fetchError;

      const newMessages = data || [];
      setHasMore(newMessages.length === PAGE_SIZE);

      if (loadMore) {
        setMessages(prev => [...newMessages.reverse(), ...prev]);
      } else {
        setMessages(newMessages.reverse());
      }

      currentOffset.current = offset + newMessages.length;

    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error loading messages:', err);
    } finally {
      setIsLoading(false);
    }
  }, [user?.id, otherUserId]);

  // Send message with optimistic UI
  const sendMessage = useCallback(async (content: string) => {
    if (!user?.id || !otherUserId || !content.trim()) return;

    const optimisticMessage: OptimisticMessage = {
      id: `temp-${Date.now()}`,
      sender_id: user.id,
      receiver_id: otherUserId,
      content: content.trim(),
      is_read: false,
      status: 'sending',
      created_at: new Date().toISOString()
    };

    // Add optimistic message immediately
    setMessages(prev => [...prev, optimisticMessage]);

    try {
      const { data, error: sendError } = await supabase
        .from('messages')
        .insert({
          sender_id: user.id,
          receiver_id: otherUserId,
          content: content.trim()
        })
        .select()
        .single();

      if (sendError) throw sendError;

      // Replace optimistic message with real one
      setMessages(prev =>
        prev.map(msg =>
          msg.id === optimisticMessage.id
            ? { ...data, status: 'sent' as const }
            : msg
        )
      );

    } catch (err: any) {
      // Mark as failed and show error
      setMessages(prev =>
        prev.map(msg =>
          msg.id === optimisticMessage.id
            ? { ...msg, status: 'sending' as const }
            : msg
        )
      );
      setError('   ');
      console.error('Error sending message:', err);
    }
  }, [user?.id, otherUserId]);

  // Mark messages as read
  const markAsRead = useCallback(async () => {
    if (!user?.id || !otherUserId) return;

    try {
      const { error } = await supabase.rpc('mark_messages_as_read', {
        sender_uuid: otherUserId,
        receiver_uuid: user.id
      });

      if (error) throw error;

      // Update local state
      setMessages(prev =>
        prev.map(msg =>
          msg.sender_id === otherUserId && msg.receiver_id === user.id
            ? { ...msg, is_read: true }
            : msg
        )
      );

    } catch (err: any) {
      console.error('Error marking messages as read:', err);
    }
  }, [user?.id, otherUserId]);

  // Load more messages
  const loadMore = useCallback(() => {
    if (!isLoading && hasMore) {
      loadMessages(true);
    }
  }, [isLoading, hasMore, loadMessages]);

  // Set typing indicator
  const setTyping = useCallback((typing: boolean) => {
    setIsTyping(typing);
  }, []);

  // Real-time subscription
  useEffect(() => {
    if (!user?.id || !otherUserId) return;

    // Create channel for real-time messages
    const channel = supabase.channel(`messages-${user.id}-${otherUserId}`)
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'messages',
          filter: `or(and(sender_id.eq.${user.id},receiver_id.eq.${otherUserId}),and(sender_id.eq.${otherUserId},receiver_id.eq.${user.id}))`
        },
        (payload) => {
          const newMessage = payload.new as Message;
          setMessages(prev => {
            // Check if message already exists (avoid duplicates)
            const exists = prev.some(msg => msg.id === newMessage.id);
            if (exists) return prev;

            return [...prev, newMessage];
          });

          // Auto-mark as read if we're viewing this conversation
          if (newMessage.sender_id === otherUserId) {
            markAsRead();
          }
        }
      )
      .on(
        'postgres_changes',
        {
          event: 'UPDATE',
          schema: 'public',
          table: 'messages',
          filter: `or(sender_id.eq.${user.id},receiver_id.eq.${otherUserId})`
        },
        (payload) => {
          const updatedMessage = payload.new as Message;
          setMessages(prev =>
            prev.map(msg =>
              msg.id === updatedMessage.id ? updatedMessage : msg
            )
          );
        }
      )
      .subscribe();

    channelRef.current = channel;

    return () => {
      if (channelRef.current) {
        supabase.removeChannel(channelRef.current);
      }
    };
  }, [user?.id, otherUserId, markAsRead]);

  // Load initial messages
  useEffect(() => {
    loadMessages();
  }, [loadMessages]);

  return {
    messages,
    isLoading,
    error,
    sendMessage,
    markAsRead,
    loadMore,
    hasMore,
    isTyping,
    setTyping
  };
}

==================================================
FILE: .\src\hooks\useDatabaseQueries.ts
==================================================
import { useQuery } from '@tanstack/react-query';
import { supabase } from '../lib/supabaseClient';
import type { Exercise, Food, ExerciseSearchParams, FoodSearchParams } from '../types/database';

/**
 * Hook for fetching exercises with caching
 * Uses React Query for efficient server state management
 */
export const useExercisesQuery = (searchParams?: ExerciseSearchParams) => {
  return useQuery({
    queryKey: ['exercises', searchParams],
    queryFn: async () => {
      if (!supabase) return [];

      // Use RPC function for search with full-text support
      const { data, error } = await supabase.rpc('search_exercises', {
        search_query: searchParams?.query || '',
        muscle_group_filter: searchParams?.muscle_group || null,
        type_filter: searchParams?.type || null,
        limit_count: searchParams?.limit || 100,
        offset_count: searchParams?.offset || 0,
      });

      if (error) throw error;
      return data as Exercise[];
    },
    staleTime: 10 * 60 * 1000, // 10 minutes
    gcTime: 30 * 60 * 1000, // 30 minutes
  });
};

/**
 * Hook for fetching foods with caching
 */
export const useFoodsQuery = (searchParams?: FoodSearchParams) => {
  return useQuery({
    queryKey: ['foods', searchParams],
    queryFn: async () => {
      if (!supabase) return [];

      const { data, error } = await supabase.rpc('search_foods', {
        search_query: searchParams?.query || '',
        limit_count: searchParams?.limit || 100,
        offsetcount: searchParams?.offset || 0,
      });

      if (error) throw error;
      return data as Food[];
    },
    staleTime: 10 * 60 * 1000, // 10 minutes
    gcTime: 30 * 60 * 1000, // 30 minutes
  });
};

/**
 * Hook for fetching all exercises of a specific type
 */
export const useExercisesByType = (type: 'resistance' | 'cardio' | 'corrective' | 'warmup' | 'cooldown') => {
  return useQuery({
    queryKey: ['exercises', 'by-type', type],
    queryFn: async () => {
      if (!supabase) return [];

      const { data, error } = await supabase
        .from('exercises')
        .select('*')
        .eq('type', type)
        .order('name', { ascending: true });

      if (error) throw error;
      return data as Exercise[];
    },
    staleTime: 15 * 60 * 1000, // 15 minutes
    gcTime: 60 * 60 * 1000, // 1 hour
  });
};

/**
 * Hook for fetching exercises by muscle group
 */
export const useExercisesByMuscleGroup = (muscleGroup: string) => {
  return useQuery({
    queryKey: ['exercises', 'by-muscle', muscleGroup],
    queryFn: async () => {
      if (!supabase || !muscleGroup) return [];

      const { data, error } = await supabase
        .from('exercises')
        .select('*')
        .eq('muscle_group', muscleGroup)
        .order('name', { ascending: true });

      if (error) throw error;
      return data as Exercise[];
    },
    enabled: !!muscleGroup, // Only run query if muscleGroup is provided
    staleTime: 15 * 60 * 1000,
    gcTime: 60 * 60 * 1000,
  });
};

/**
 * Hook for fetching all foods of a specific category
 */
export const useFoodsByCategory = (category: string) => {
  return useQuery({
    queryKey: ['foods', 'by-category', category],
    queryFn: async () => {
      if (!supabase || !category) return [];

      const { data, error } = await supabase
        .from('foods')
        .select('*')
        .eq('category', category)
        .order('name', { ascending: true });

      if (error) throw error;
      return data as Food[];
    },
    enabled: !!category,
    staleTime: 15 * 60 * 1000,
    gcTime: 60 * 60 * 1000,
  });
};

/**
 * Hook for fetching food categories for filtering
 */
export const useFoodCategories = () => {
  return useQuery({
    queryKey: ['food-categories'],
    queryFn: async () => {
      if (!supabase) return [];

      const { data, error } = await supabase
        .from('foods')
        .select('category', { count: 'exact' })
        .order('category', { ascending: true });

      if (error) throw error;
      
      // Get unique categories
      const categories = Array.from(new Set(data?.map(item => item.category) || []));
      return categories as string[];
    },
    staleTime: 1 * 60 * 60 * 1000, // 1 hour
    gcTime: 2 * 60 * 60 * 1000, // 2 hours
  });
};

/**
 * Hook for fetching exercise muscle groups for filtering
 */
export const useExerciseMuscleGroups = () => {
  return useQuery({
    queryKey: ['exercise-muscle-groups'],
    queryFn: async () => {
      if (!supabase) return [];

      const { data, error } = await supabase
        .from('exercises')
        .select('muscle_group', { count: 'exact' })
        .order('muscle_group', { ascending: true });

      if (error) throw error;
      
      // Get unique muscle groups
      const groups = Array.from(new Set(data?.map(item => item.muscle_group) || []));
      return groups as string[];
    },
    staleTime: 1 * 60 * 60 * 1000,
    gcTime: 2 * 60 * 60 * 1000,
  });
};


==================================================
FILE: .\src\hooks\useDebounce.ts
==================================================
import { useState, useEffect } from 'react';

export function useDebounce<T>(value: T, delay: number = 300): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(timer);
    };
  }, [value, delay]);

  return debouncedValue;
}

export default useDebounce;



==================================================
FILE: .\src\hooks\useDietTemplates.ts
==================================================
import { useState, useCallback } from 'react';
import { supabase } from '../lib/supabaseClient';
import { DietTemplate, UseDietTemplatesReturn } from '../types/interactive';
import { useAuth } from '../context/AuthContext';

export function useDietTemplates(): UseDietTemplatesReturn {
  const { user } = useAuth();
  const [templates, setTemplates] = useState<DietTemplate[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load templates
  const loadTemplates = useCallback(async () => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      const { data, error: fetchError } = await supabase
        .from('diet_templates')
        .select('*')
        .or(`coach_id.eq.${user.id},is_public.eq.true`)
        .order('created_at', { ascending: false });

      if (fetchError) throw fetchError;

      setTemplates(data || []);
    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error loading diet templates:', err);
    } finally {
      setIsLoading(false);
    }
  }, [user?.id]);

  // Save template
  const saveTemplate = useCallback(async (templateData: Omit<DietTemplate, 'id' | 'coach_id' | 'created_at' | 'updated_at'>) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      const { data, error: saveError } = await supabase
        .from('diet_templates')
        .insert({
          ...templateData,
          coach_id: user.id
        })
        .select()
        .single();

      if (saveError) throw saveError;

      // Add to local state
      setTemplates(prev => [data, ...prev]);

    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error saving diet template:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [user?.id]);

  // Load template
  const loadTemplate = useCallback(async (templateId: string): Promise<DietTemplate> => {
    setIsLoading(true);
    setError(null);

    try {
      const { data, error: fetchError } = await supabase
        .from('diet_templates')
        .select('*')
        .eq('id', templateId)
        .single();

      if (fetchError) throw fetchError;

      return data;
    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error loading diet template:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, []);

  // Delete template
  const deleteTemplate = useCallback(async (templateId: string) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      const { error: deleteError } = await supabase
        .from('diet_templates')
        .delete()
        .eq('id', templateId)
        .eq('coach_id', user.id); // Ensure user can only delete their own templates

      if (deleteError) throw deleteError;

      // Remove from local state
      setTemplates(prev => prev.filter(t => t.id !== templateId));

    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error deleting diet template:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [user?.id]);

  return {
    templates,
    saveTemplate,
    loadTemplate,
    deleteTemplate,
    isLoading,
    error
  };
}

==================================================
FILE: .\src\hooks\useExercises.ts
==================================================
import { useQuery } from '@tanstack/react-query';
import { supabase } from '../lib/supabaseClient';

export function useExercises() {
  return useQuery({
    queryKey: ['exercises'],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('exercises')
        .select('*')
        .order('name');

      if (error) throw error;
      return data;
    },
    staleTime: 10 * 60 * 1000, // 10 minutes
    gcTime: 30 * 60 * 1000, // 30 minutes
  });
}

export function useFoods() {
  return useQuery({
    queryKey: ['foods'],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('foods')
        .select('*')
        .order('name');

      if (error) throw error;
      return data;
    },
    staleTime: 10 * 60 * 1000, // 10 minutes
    gcTime: 30 * 60 * 1000, // 30 minutes
  });
}


==================================================
FILE: .\src\hooks\useExerciseSearch.ts
==================================================
import { useQuery } from '@tanstack/react-query';
import { supabase } from '../lib/supabaseClient';
import { ExerciseSearchResult, ExerciseSearchParams } from '../types/database';

interface UseExerciseSearchReturn {
  results: ExerciseSearchResult[];
  loading: boolean;
  error: string | null;
  hasMore: boolean;
  loadMore: () => void;
  refetch: () => void;
  clearResults: () => void;
}

export function useExerciseSearch(params: ExerciseSearchParams): UseExerciseSearchReturn {
  const {
    data,
    isLoading: loading,
    error,
    refetch
  } = useQuery({
    queryKey: ['exercises', params],
    queryFn: async () => {
      let query = supabase
        .from('exercises')
        .select('*')
        .limit(params.limit || 20)
        .range(params.offset || 0, (params.offset || 0) + (params.limit || 20) - 1);

      // Add search filter
      if (params.query && params.query.trim()) {
        query = query.ilike('name', `%${params.query.trim()}%`);
      }

      // Add muscle group filter
      if (params.muscle_group) {
        query = query.eq('muscle_group', params.muscle_group);
      }

      // Add type filter
      if (params.type) {
        query = query.eq('type', params.type);
      }

      const { data, error } = await query;

      if (error) throw error;
      return data as ExerciseSearchResult[];
    },
    enabled: Boolean(params.query?.trim()) || Boolean(params.muscle_group) || Boolean(params.type),
    staleTime: 5 * 60 * 1000, // 5 minutes
    gcTime: 10 * 60 * 1000, // 10 minutes
  });

  const results = data || [];
  const errorMessage = error ? (error as Error).message : null;

  // Calculate hasMore based on results length
  const hasMore = results.length === (params.limit || 20);

  const loadMore = () => {
    // Update params to load next page
    const nextParams = {
      ...params,
      offset: (params.offset || 0) + (params.limit || 20)
    };
    // This will trigger a new query since params changed
    refetch();
  };

  const clearResults = () => {
    // Clear by disabling the query
    refetch();
  };

  return {
    results,
    loading,
    error: errorMessage,
    hasMore,
    loadMore,
    refetch,
    clearResults
  };
}

==================================================
FILE: .\src\hooks\useFoodSearch.ts
==================================================
import { useQuery } from '@tanstack/react-query';
import { supabase } from '../lib/supabaseClient';
import { FoodSearchResult, FoodSearchParams } from '../types/database';

interface UseFoodSearchReturn {
  results: FoodSearchResult[];
  loading: boolean;
  error: string | null;
  hasMore: boolean;
  loadMore: () => void;
  refetch: () => void;
  clearResults: () => void;
}

export function useFoodSearch(params: FoodSearchParams): UseFoodSearchReturn {
  const {
    data,
    isLoading: loading,
    error,
    refetch
  } = useQuery({
    queryKey: ['foods', params],
    queryFn: async () => {
      let query = supabase
        .from('foods')
        .select('*')
        .limit(params.limit || 20)
        .range(params.offset || 0, (params.offset || 0) + (params.limit || 20) - 1);

      // Add search filter
      if (params.query && params.query.trim()) {
        query = query.ilike('name', `%${params.query.trim()}%`);
      }

      const { data, error } = await query;

      if (error) throw error;
      return data as FoodSearchResult[];
    },
    enabled: Boolean(params.query?.trim()),
    staleTime: 5 * 60 * 1000, // 5 minutes
    gcTime: 10 * 60 * 1000, // 10 minutes
  });

  const results = data || [];
  const errorMessage = error ? (error as Error).message : null;

  // Calculate hasMore based on results length
  const hasMore = results.length === (params.limit || 20);

  const loadMore = () => {
    // Update params to load next page
    const nextParams = {
      ...params,
      offset: (params.offset || 0) + (params.limit || 20)
    };
    // This will trigger a new query since params changed
    refetch();
  };

  const clearResults = () => {
    // Clear by disabling the query
    refetch();
  };

  return {
    results,
    loading,
    error: errorMessage,
    hasMore,
    loadMore,
    refetch,
    clearResults
  };
}

==================================================
FILE: .\src\hooks\useProgressPhotos.ts
==================================================
import { useState, useCallback } from 'react';
import { supabase } from '../lib/supabaseClient';
import { ProgressPhoto, PhotoComparison, UseProgressPhotosReturn } from '../types/interactive';
import { useAuth } from '../context/AuthContext';

export function useProgressPhotos(userId: string): UseProgressPhotosReturn {
  const { user } = useAuth();
  const [photos, setPhotos] = useState<ProgressPhoto[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load photos
  const loadPhotos = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const { data, error: fetchError } = await supabase
        .from('progress_photos')
        .select('*')
        .eq('user_id', userId)
        .order('photo_date', { ascending: false });

      if (fetchError) throw fetchError;

      setPhotos(data || []);
    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error loading progress photos:', err);
    } finally {
      setIsLoading(false);
    }
  }, [userId]);

  // Upload photo
  const uploadPhoto = useCallback(async (file: File, metadata: Partial<ProgressPhoto>) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      // Create unique filename
      const fileExt = file.name.split('.').pop();
      const fileName = `${userId}/${Date.now()}.${fileExt}`;

      // Upload to storage
      const { data: uploadData, error: uploadError } = await supabase.storage
        .from('progress-photos')
        .upload(fileName, file, {
          cacheControl: '3600',
          upsert: false
        });

      if (uploadError) throw uploadError;

      // Get public URL
      const { data: urlData } = supabase.storage
        .from('progress-photos')
        .getPublicUrl(fileName);

      if (!urlData.publicUrl) throw new Error('Failed to get photo URL');

      // Save metadata to database
      const photoData: Omit<ProgressPhoto, 'id' | 'created_at' | 'updated_at'> = {
        user_id: userId,
        photo_url: urlData.publicUrl,
        photo_date: metadata.photo_date || new Date().toISOString().split('T')[0],
        pose_type: metadata.pose_type || 'front',
        weight: metadata.weight,
        height: metadata.height,
        body_fat_percentage: metadata.body_fat_percentage,
        notes: metadata.notes,
        is_private: metadata.is_private || false
      };

      const { data, error: saveError } = await supabase
        .from('progress_photos')
        .insert(photoData)
        .select()
        .single();

      if (saveError) throw saveError;

      // Add to local state
      setPhotos(prev => [data, ...prev]);

    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error uploading progress photo:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [user?.id, userId]);

  // Delete photo
  const deletePhoto = useCallback(async (photoId: string) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      // Get photo data first
      const { data: photo, error: fetchError } = await supabase
        .from('progress_photos')
        .select('*')
        .eq('id', photoId)
        .single();

      if (fetchError) throw fetchError;

      // Delete from storage
      const fileName = photo.photo_url.split('/').pop();
      if (fileName) {
        const { error: storageError } = await supabase.storage
          .from('progress-photos')
          .remove([`${userId}/${fileName}`]);

        if (storageError) {
          console.warn('Failed to delete from storage:', storageError);
        }
      }

      // Delete from database
      const { error: deleteError } = await supabase
        .from('progress_photos')
        .delete()
        .eq('id', photoId)
        .eq('user_id', userId); // Ensure user can only delete their own photos

      if (deleteError) throw deleteError;

      // Remove from local state
      setPhotos(prev => prev.filter(p => p.id !== photoId));

    } catch (err: any) {
      setError(err.message || '   ');
      console.error('Error deleting progress photo:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [user?.id, userId]);

  // Get photos by date range
  const getPhotosByDateRange = useCallback((startDate: string, endDate: string): ProgressPhoto[] => {
    return photos.filter(photo => {
      const photoDate = photo.photo_date;
      return photoDate >= startDate && photoDate <= endDate;
    });
  }, [photos]);

  // Get photo comparisons (before/after pairs)
  const getComparisons = useCallback((): PhotoComparison[] => {
    if (photos.length < 2) return [];

    const sortedPhotos = [...photos].sort((a, b) =>
      new Date(a.photo_date).getTime() - new Date(b.photo_date).getTime()
    );

    const comparisons: PhotoComparison[] = [];

    for (let i = 0; i < sortedPhotos.length - 1; i++) {
      for (let j = i + 1; j < sortedPhotos.length; j++) {
        const before = sortedPhotos[i];
        const after = sortedPhotos[j];

        // Only compare photos of the same pose
        if (before.pose_type === after.pose_type) {
          const dateDifference = Math.floor(
            (new Date(after.photo_date).getTime() - new Date(before.photo_date).getTime()) / (1000 * 60 * 60 * 24)
          );

          const weightChange = before.weight && after.weight ? after.weight - before.weight : undefined;

          comparisons.push({
            before,
            after,
            weightChange,
            dateDifference
          });
        }
      }
    }

    // Return top comparisons by date difference
    return comparisons
      .sort((a, b) => b.dateDifference - a.dateDifference)
      .slice(0, 10);
  }, [photos]);

  // Load photos on mount
  React.useEffect(() => {
    loadPhotos();
  }, [loadPhotos]);

  return {
    photos,
    uploadPhoto,
    deletePhoto,
    getPhotosByDateRange,
    getComparisons,
    isLoading,
    error
  };
}

==================================================
FILE: .\src\hooks\useRole.ts
==================================================
import { useMemo } from 'react';
import { useAuth } from '../context/AuthContext';
import type { Role } from '../types/index';

interface UseRoleResult {
  role: Role | null;
  profile: { role: Role; coach_code?: string } | null;
  loading: boolean;
}

/**
 * Custom hook to securely derive user role from Supabase user metadata or profile
 * Never relies on localStorage for security checks
 */
export const useRole = (): UseRoleResult => {
  const { user, profile, loading } = useAuth();

  const derivedRole: Role | null = useMemo(() => {
    // First check profile from database (most reliable)
    if (profile?.role === 'coach' || profile?.role === 'client') {
      return profile.role as Role;
    }

    // Fallback to user metadata (set during registration)
    const metadataRole = user?.user_metadata?.role;
    if (metadataRole === 'coach' || metadataRole === 'client') {
      return metadataRole as Role;
    }

    // If no role found, return null (user should set role)
    return null;
  }, [user, profile]);

  const derivedProfile = useMemo(() => {
    // Only return profile if it has a valid role
    if (profile?.role === 'coach' || profile?.role === 'client') {
      return profile as { role: Role; coach_code?: string };
    }
    return null;
  }, [profile]);

  return {
    role: derivedRole,
    profile: derivedProfile,
    loading,
  };
};



==================================================
FILE: .\src\hooks\useSync.ts
==================================================
import { useState, useEffect, useCallback, useRef } from 'react';
import { supabase } from '../lib/supabaseClient';
import { useAuth } from '../context/AuthContext';
import { SyncMetadata, LocalChange } from '../types/database';

interface UseSyncReturn {
  isOnline: boolean;
  isSyncing: boolean;
  lastSynced: Date | null;
  syncNow: () => Promise<void>;
  pendingChanges: number;
}

const SYNC_STORAGE_KEY = 'flexpro_sync_changes';
const SYNC_METADATA_KEY = 'flexpro_sync_metadata';

export function useSync(): UseSyncReturn {
  const { user } = useAuth();
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [isSyncing, setIsSyncing] = useState(false);
  const [lastSynced, setLastSynced] = useState<Date | null>(null);
  const [pendingChanges, setPendingChanges] = useState(0);

  const syncTimeoutRef = useRef<NodeJS.Timeout>();

  // Monitor online status
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Load pending changes count
  useEffect(() => {
    const loadPendingChanges = () => {
      try {
        const stored = localStorage.getItem(SYNC_STORAGE_KEY);
        if (stored) {
          const changes: LocalChange[] = JSON.parse(stored);
          const userChanges = changes.filter(change => change.synced === false);
          setPendingChanges(userChanges.length);
        }
      } catch (error) {
        console.error('Error loading pending changes:', error);
      }
    };

    loadPendingChanges();
  }, [user?.id]);

  // Load last sync time
  useEffect(() => {
    const loadLastSynced = () => {
      try {
        const stored = localStorage.getItem(SYNC_METADATA_KEY);
        if (stored) {
          const metadata: SyncMetadata[] = JSON.parse(stored);
          const userMetadata = metadata.find(m => m.user_id === user?.id);
          if (userMetadata) {
            setLastSynced(new Date(userMetadata.last_synced));
          }
        }
      } catch (error) {
        console.error('Error loading sync metadata:', error);
      }
    };

    if (user?.id) {
      loadLastSynced();
    }
  }, [user?.id]);

  // Auto-sync when coming online
  useEffect(() => {
    if (isOnline && user?.id && pendingChanges > 0) {
      // Debounce auto-sync to avoid immediate sync on reconnect
      syncTimeoutRef.current = setTimeout(() => {
        syncNow();
      }, 2000);
    }

    return () => {
      if (syncTimeoutRef.current) {
        clearTimeout(syncTimeoutRef.current);
      }
    };
  }, [isOnline, user?.id, pendingChanges]);

  const syncNow = useCallback(async () => {
    if (!user?.id || !isOnline) return;

    setIsSyncing(true);

    try {
      // Get pending changes
      const storedChanges = localStorage.getItem(SYNC_STORAGE_KEY);
      if (!storedChanges) {
        setIsSyncing(false);
        return;
      }

      const changes: LocalChange[] = JSON.parse(storedChanges);
      const pendingChanges = changes.filter(change => !change.synced);

      if (pendingChanges.length === 0) {
        setIsSyncing(false);
        return;
      }

      console.log(` Syncing ${pendingChanges.length} changes...`);

      // Process each change
      for (const change of pendingChanges) {
        try {
          await processChange(change);
          change.synced = true;
          change.timestamp = Date.now();
        } catch (error) {
          console.error(`Failed to sync change:`, change, error);
          // Continue with other changes
        }
      }

      // Update local storage
      localStorage.setItem(SYNC_STORAGE_KEY, JSON.stringify(changes));

      // Update sync metadata
      const metadata: SyncMetadata = {
        id: crypto.randomUUID(),
        user_id: user.id,
        table_name: 'sync_log',
        record_id: crypto.randomUUID(),
        last_synced: new Date().toISOString(),
        version: 1
      };

      const storedMetadata = localStorage.getItem(SYNC_METADATA_KEY);
      const metadataArray: SyncMetadata[] = storedMetadata ? JSON.parse(storedMetadata) : [];
      metadataArray.push(metadata);
      localStorage.setItem(SYNC_METADATA_KEY, JSON.stringify(metadataArray));

      setLastSynced(new Date());
      setPendingChanges(0);

      console.log(' Sync completed successfully');

    } catch (error) {
      console.error(' Sync failed:', error);
    } finally {
      setIsSyncing(false);
    }
  }, [user?.id, isOnline]);

  return {
    isOnline,
    isSyncing,
    lastSynced,
    syncNow,
    pendingChanges
  };
}

/**
 * Process a single change
 */
async function processChange(change: LocalChange): Promise<void> {
  const { table, operation, data } = change;

  // Skip user-specific tables that shouldn't be synced from local changes
  // (These should only be synced from server)
  const protectedTables = ['users', 'clients', 'workout_plans', 'program_requests'];

  if (protectedTables.includes(table)) {
    throw new Error(`Cannot sync protected table: ${table}`);
  }

  switch (operation) {
    case 'insert':
      const { error: insertError } = await supabase
        .from(table)
        .insert(data);
      if (insertError) throw insertError;
      break;

    case 'update':
      const { id, ...updateData } = data;
      const { error: updateError } = await supabase
        .from(table)
        .update(updateData)
        .eq('id', id);
      if (updateError) throw updateError;
      break;

    case 'delete':
      const { error: deleteError } = await supabase
        .from(table)
        .delete()
        .eq('id', data.id);
      if (deleteError) throw deleteError;
      break;

    default:
      throw new Error(`Unknown operation: ${operation}`);
  }
}

/**
 * Add a change to the sync queue
 */
export function queueChange(change: Omit<LocalChange, 'timestamp' | 'synced'>): void {
  try {
    const stored = localStorage.getItem(SYNC_STORAGE_KEY);
    const changes: LocalChange[] = stored ? JSON.parse(stored) : [];

    changes.push({
      ...change,
      timestamp: Date.now(),
      synced: false
    });

    localStorage.setItem(SYNC_STORAGE_KEY, JSON.stringify(changes));
  } catch (error) {
    console.error('Error queuing change:', error);
  }
}

==================================================
FILE: .\src\hooks\useTemplates.ts
==================================================
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { supabase } from '../lib/supabaseClient';

export interface TemplateData {
  id: string;
  name: string;
  description?: string;
  full_week_data: Record<string, any>;
  is_full_program: boolean;
  created_by: string;
  created_at: string;
}

/**
 * Fetch all full-week templates
 */
export const useTemplates = () => {
  return useQuery({
    queryKey: ['templates'],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('templates')
        .select('*')
        .eq('is_full_program', true)
        .order('created_at', { ascending: false });

      if (error) throw error;
      return data as TemplateData[];
    },
  });
};

/**
 * Fetch templates created by current user
 */
export const useUserTemplates = (userId: string) => {
  return useQuery({
    queryKey: ['templates', userId],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('templates')
        .select('*')
        .eq('created_by', userId)
        .eq('is_full_program', true)
        .order('created_at', { ascending: false });

      if (error) throw error;
      return data as TemplateData[];
    },
    enabled: !!userId,
  });
};

/**
 * Save a full program as template
 */
export const useSaveTemplate = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (templateData: {
      name: string;
      description?: string;
      full_week_data: Record<string, any>;
      created_by: string;
    }) => {
      const { data, error } = await supabase
        .from('templates')
        .insert({
          ...templateData,
          is_full_program: true,
        })
        .select()
        .single();

      if (error) throw error;
      return data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['templates'] });
    },
  });
};

/**
 * Load a template (overwrite client's current plan)
 */
export const useLoadTemplate = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (data: {
      clientId: string;
      templateId: string;
      fullWeekData: Record<string, any>;
    }) => {
      // Update user's plan in the profiles table
      const { error } = await supabase
        .from('profiles')
        .update({
          plans: {
            workouts: data.fullWeekData,
          },
        })
        .eq('id', data.clientId);

      if (error) throw error;
      return data;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['profiles'] });
    },
  });
};

/**
 * Delete a template
 */
export const useDeleteTemplate = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (templateId: string) => {
      const { error } = await supabase
        .from('templates')
        .delete()
        .eq('id', templateId);

      if (error) throw error;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['templates'] });
    },
  });
};


==================================================
FILE: .\src\hooks\useUserForm.ts
==================================================
import { useState, useEffect, useMemo, useCallback } from 'react';
import { toast } from 'react-hot-toast';
import type { User, UserInput } from '../types/index';
import { calculateFitnessMetrics, type MeasurementData, type CalculationResult } from '../utils/calculations';

export interface FormErrors {
  name?: string;
  phone?: string;
  email?: string;
  age?: string;
  height?: string;
  weight?: string;
  [key: string]: string | undefined;
}

export interface UseUserFormReturn {
  formData: UserInput;
  errors: FormErrors;
  calculations: CalculationResult;
  isSubmitting: boolean;
  activeTab: string;
  setFormData: (data: UserInput | ((prev: UserInput) => UserInput)) => void;
  setActiveTab: (tab: string) => void;
  updateField: (field: keyof UserInput, value: any) => void;
  updateNestedField: (parent: keyof UserInput, field: string, value: any) => void;
  validateForm: () => boolean;
  handleSubmit: (onSave: (data: UserInput) => void | Promise<void>) => Promise<void>;
  resetForm: (initialData?: User | null) => void;
}

const initialFormState: UserInput = {
  name: '', phone: '', age: '', gender: 'male',
  height: '', weight: '', activity: '1.55',
  injuries: [], notes: '',
  exp: '', level: 'beginner', job: '', allergy: '',
  days: '', sleep: 'fair', smoke: 'no', alcohol: 'no', caffeine: 'no',
  financial: { startDate: '', duration: 1, amount: 0 },
  measurements: { neck: '', hip: '', thigh: '', arm: '', waist: '', wrist: '', calf: '', chest: '', shoulder: '' },
  email: '', address: '', education: '', maritalStatus: 'single',
  medicalConditions: [], medications: '', dietType: '', nutritionGoals: '',
  waterIntake: '', mealFrequency: '', foodPreferences: [],
  targetWeight: '', bodyFat: '',
  plans: { workouts: {}, diet: [], dietRest: [], supps: [], prog: [] }
};

export function useUserForm(initialData?: User | null): UseUserFormReturn {
  const [formData, setFormData] = useState<UserInput>(initialFormState);
  const [errors, setErrors] = useState<FormErrors>({});
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [activeTab, setActiveTab] = useState('identity');

  // Reset form
  const resetForm = useCallback((data?: User | null) => {
    if (data) {
      // Convert User to UserInput format
      const userInput: UserInput = {
        ...initialFormState,
        ...data,
        // Ensure nested objects exist
        financial: data.financial ? {
          startDate: data.financial.startDate || '',
          duration: data.financial.duration || 1,
          amount: data.financial.amount || 0
        } : initialFormState.financial,
        measurements: { ...initialFormState.measurements, ...(data.measurements || {}) },
        plans: { ...initialFormState.plans, ...(data.plans || {}) }
      };
      setFormData(userInput);
    } else {
      setFormData(initialFormState);
    }
    setErrors({});
    setActiveTab('identity');
  }, []);

  // Initialize form with data
  useEffect(() => {
    resetForm(initialData);
  }, [initialData, resetForm]);

  // Calculate fitness metrics
  const calculations = useMemo(() => {
    const measurementData: MeasurementData = {
      weight: parseFloat(String(formData.weight || '')) || 0,
      height: parseFloat(String(formData.height || '')) || 0,
      age: parseFloat(String(formData.age || '')) || 0,
      gender: (formData.gender === 'male' || formData.gender === 'female') ? formData.gender : 'male',
      activity: parseFloat(String(formData.activity || '1.55')) || 1.55,
      waist: parseFloat(String(formData.measurements?.waist || '')) || 0,
      hip: parseFloat(String(formData.measurements?.hip || '')) || 0,
      neck: parseFloat(String(formData.measurements?.neck || '')) || 0,
      bodyFat: parseFloat(String(formData.bodyFat || '')) || 0,
      trainingDays: parseInt(String(formData.days || '3'), 10) || 3,
      goal: formData.nutritionGoals
    };

    return calculateFitnessMetrics(measurementData);
  }, [formData]);

  // Form validation
  const validateForm = useCallback((): boolean => {
    const newErrors: FormErrors = {};

    // Required fields validation
    if (!formData.name?.trim()) {
      newErrors.name = '  ';
    }

    if (!formData.phone?.trim()) {
      newErrors.phone = '   ';
    } else {
      const cleanPhone = formData.phone.replace(/\s/g, '');
      if (!/^(\+98|0)?9\d{9}$/.test(cleanPhone)) {
        newErrors.phone = '    (    )';
      }
    }

    if (formData.email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      newErrors.email = '  ';
    }

    // Numeric validations
    const age = parseFloat(String(formData.age || ''));
    if (formData.age && (isNaN(age) || age < 10 || age > 120)) {
      newErrors.age = '       ';
    }

    const height = parseFloat(String(formData.height || ''));
    if (formData.height && (isNaN(height) || height < 100 || height > 250)) {
      newErrors.height = '       ';
    }

    const weight = parseFloat(String(formData.weight || ''));
    if (formData.weight && (isNaN(weight) || weight < 30 || weight > 300)) {
      newErrors.weight = '       ';
    }

    // Financial validation
    if (formData.financial?.amount && Number(formData.financial.amount) < 0) {
      newErrors.financial = '   ';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  }, [formData]);

  // Update single field
  const updateField = useCallback((field: keyof UserInput, value: any) => {
    setFormData(prev => ({ ...prev, [field]: value }));

    // Clear error for this field when user starts typing
    if (errors[field]) {
      setErrors(prev => ({ ...prev, [field]: undefined }));
    }
  }, [errors]);

  // Update nested field (for objects like measurements, financial)
  const updateNestedField = useCallback((parent: keyof UserInput, field: string, value: any) => {
    setFormData(prev => ({
      ...prev,
      [parent]: {
        ...(prev[parent] as any),
        [field]: value
      }
    }));
  }, []);

  // Form submission
  const handleSubmit = useCallback(async (onSave: (data: UserInput) => void | Promise<void>) => {
    if (!validateForm()) {
      toast.error('     ');
      return;
    }

    setIsSubmitting(true);
    try {
      await onSave(formData);
      toast.success('    ');
    } catch (error) {
      console.error('Form submission error:', error);
      toast.error('   ');
    } finally {
      setIsSubmitting(false);
    }
  }, [formData, validateForm]);

  return {
    formData,
    errors,
    calculations,
    isSubmitting,
    activeTab,
    setFormData,
    setActiveTab,
    updateField,
    updateNestedField,
    validateForm,
    handleSubmit,
    resetForm
  };
}




==================================================
FILE: .\src\hooks\useWorkoutLog.ts
==================================================
import { useState, useCallback } from 'react';
import { supabase } from '../lib/supabaseClient';
import { WorkoutLog, WorkoutSession, UseWorkoutLogReturn } from '../types/interactive';
import { useAuth } from '../context/AuthContext';

export function useWorkoutLog(): UseWorkoutLogReturn {
  const { user } = useAuth();
  const [logs, setLogs] = useState<WorkoutLog[]>([]);
  const [sessions, setSessions] = useState<WorkoutSession[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Save workout log
  const saveLog = useCallback(async (logData: Omit<WorkoutLog, 'id' | 'created_at' | 'updated_at'>) => {
    if (!user?.id) return;

    const completeLogData = {
      ...logData,
      user_id: user.id
    };

    try {
      const { data, error: saveError } = await supabase
        .from('workout_logs')
        .upsert(completeLogData, {
          onConflict: 'user_id,workout_date,exercise_name,set_number'
        })
        .select()
        .single();

      if (saveError) throw saveError;

      // Update local state
      setLogs(prev => {
        const existingIndex = prev.findIndex(log =>
          log.workout_date === data.workout_date &&
          log.exercise_name === data.exercise_name &&
          log.set_number === data.set_number
        );

        if (existingIndex >= 0) {
          const updated = [...prev];
          updated[existingIndex] = data;
          return updated;
        } else {
          return [...prev, data];
        }
      });

      return data;
    } catch (err: any) {
      setError(err.message || '    ');
      console.error('Error saving workout log:', err);
      throw err;
    }
  }, [user?.id]);

  // Save workout session
  const saveSession = useCallback(async (session: WorkoutSession) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      // Save all logs for this session
      const logPromises = session.exercises.map(log =>
        supabase
          .from('workout_logs')
          .upsert({
            ...log,
            user_id: user.id
          }, {
            onConflict: 'user_id,workout_date,exercise_name,set_number'
          })
      );

      await Promise.all(logPromises);

      // Update local state
      setLogs(prev => {
        const updated = [...prev];
        session.exercises.forEach(newLog => {
          const existingIndex = updated.findIndex(log =>
            log.workout_date === newLog.workout_date &&
            log.exercise_name === newLog.exercise_name &&
            log.set_number === newLog.set_number
          );

          if (existingIndex >= 0) {
            updated[existingIndex] = newLog;
          } else {
            updated.push(newLog);
          }
        });
        return updated;
      });

      // Add session to sessions list
      setSessions(prev => {
        const existingIndex = prev.findIndex(s => s.date === session.date);
        if (existingIndex >= 0) {
          const updated = [...prev];
          updated[existingIndex] = session;
          return updated;
        } else {
          return [...prev, session];
        }
      });

    } catch (err: any) {
      setError(err.message || '    ');
      console.error('Error saving workout session:', err);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [user?.id]);

  // Get logs for specific date
  const getLogsForDate = useCallback((date: string): WorkoutLog[] => {
    return logs.filter(log => log.workout_date === date);
  }, [logs]);

  // Get logs for specific exercise
  const getLogsForExercise = useCallback((exerciseName: string): WorkoutLog[] => {
    return logs.filter(log => log.exercise_name === exerciseName);
  }, [logs]);

  // Load logs for user
  const loadLogs = useCallback(async (startDate?: string, endDate?: string) => {
    if (!user?.id) return;

    setIsLoading(true);
    setError(null);

    try {
      let query = supabase
        .from('workout_logs')
        .select('*')
        .eq('user_id', user.id)
        .order('workout_date', { ascending: false })
        .order('exercise_name', { ascending: true })
        .order('set_number', { ascending: true });

      if (startDate) {
        query = query.gte('workout_date', startDate);
      }

      if (endDate) {
        query = query.lte('workout_date', endDate);
      }

      const { data, error: fetchError } = await query;

      if (fetchError) throw fetchError;

      setLogs(data || []);

      // Group logs into sessions
      const sessionMap = new Map<string, WorkoutLog[]>();

      (data || []).forEach(log => {
        if (!sessionMap.has(log.workout_date)) {
          sessionMap.set(log.workout_date, []);
        }
        sessionMap.get(log.workout_date)!.push(log);
      });

      const sessionsArray: WorkoutSession[] = Array.from(sessionMap.entries())
        .map(([date, exercises]) => ({
          date,
          exercises,
          totalSets: exercises.length,
          completedSets: exercises.filter(e => e.completed).length,
          duration: undefined // Could be calculated from timestamps if available
        }))
        .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

      setSessions(sessionsArray);

    } catch (err: any) {
      setError(err.message || '    ');
      console.error('Error loading workout logs:', err);
    } finally {
      setIsLoading(false);
    }
  }, [user?.id]);

  // Load logs on mount
  React.useEffect(() => {
    loadLogs();
  }, [loadLogs]);

  return {
    logs,
    sessions,
    saveLog,
    saveSession,
    getLogsForDate,
    getLogsForExercise,
    isLoading,
    error
  };
}

==================================================
FILE: .\src\hooks\__tests__\useAuth.test.tsx
==================================================
import { describe, it, expect, vi, beforeEach } from 'vitest';
import { renderHook, act, waitFor } from '@testing-library/react';
import { waitFor as waitForUtils } from '@testing-library/react';
import { AuthProvider, useAuth } from '../../context/AuthContext';
import type { User, Session } from '@supabase/supabase-js';

// Mock Supabase client
vi.mock('../../lib/supabaseClient', () => ({
  supabase: {
    auth: {
      getSession: vi.fn(),
      signInWithPassword: vi.fn(),
      signUp: vi.fn(),
      signOut: vi.fn(),
      onAuthStateChange: vi.fn(() => ({ data: { subscription: { unsubscribe: vi.fn() } } })),
    },
    from: vi.fn(() => ({
      select: vi.fn(() => ({
        eq: vi.fn(() => ({
          maybeSingle: vi.fn().mockResolvedValue({ data: null, error: null }),
          limit: vi.fn(() => ({
            maybeSingle: vi.fn().mockResolvedValue({ data: null, error: null }),
          })),
        })),
        upsert: vi.fn().mockResolvedValue({ data: null, error: null }),
      })),
      upsert: vi.fn().mockResolvedValue({ data: null, error: null }),
    })),
  },
  isSupabaseEnabled: true,
}));

const mockSupabase = vi.mocked(await import('../../lib/supabaseClient')).supabase;


describe('useAuth Hook', () => {
  const wrapper = ({ children }: { children: React.ReactNode }) => (
    <AuthProvider>{children}</AuthProvider>
  );

  beforeEach(() => {
    vi.clearAllMocks();
  });

  it('should initialize with default values', async () => {
    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: null },
      error: null,
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await waitFor(() => {
      expect(result.current.ready).toBe(true);
    });

    expect(result.current.user).toBeNull();
    expect(result.current.session).toBeNull();
    expect(result.current.loading).toBe(false);
  });

  it('should load user session on mount', async () => {
    const mockUser: User = {
      id: 'user-123',
      email: 'test@example.com',
      user_metadata: { role: 'coach' },
    } as User;

    const mockSession: Session = {
      user: mockUser,
      access_token: 'token',
      refresh_token: 'refresh',
    } as Session;

    const mockProfile = {
      id: 'user-123',
      full_name: 'Test User',
      role: 'coach',
      email: 'test@example.com',
      username: 'testuser',
    };

    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: mockSession },
      error: null,
    });

    mockSupabase.from.mockReturnValue({
      select: vi.fn().mockReturnValue({
        eq: vi.fn().mockReturnValue({
          maybeSingle: vi.fn().mockResolvedValue({
            data: mockProfile,
            error: null,
          }),
        }),
      }),
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await waitFor(() => {
      expect(result.current.ready).toBe(true);
    });

    expect(result.current.user).toEqual(mockUser);
    expect(result.current.session).toEqual(mockSession);
    expect(result.current.role).toBe('coach');
    expect(result.current.profile).toEqual(mockProfile);
  });

  it('should handle sign in', async () => {
    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: null },
      error: null,
    });

    const mockUser: User = {
      id: 'user-123',
      email: 'test@example.com',
      user_metadata: { role: 'client' },
    } as User;

    mockSupabase.auth.signInWithPassword.mockResolvedValue({
      data: { user: mockUser, session: null },
      error: null,
    });

    mockSupabase.from.mockReturnValue({
      select: vi.fn().mockReturnValue({
        eq: vi.fn().mockReturnValue({
          limit: vi.fn().mockReturnValue({
            maybeSingle: vi.fn().mockResolvedValue({
              data: { email: 'test@example.com' },
              error: null,
            }),
          }),
        }),
      }),
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await act(async () => {
      await result.current.signInWithPassword('test@example.com', 'password123');
    });

    expect(mockSupabase.auth.signInWithPassword).toHaveBeenCalledWith({
      email: 'test@example.com',
      password: 'password123',
    });
  });

  it('should handle sign in with username', async () => {
    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: null },
      error: null,
    });

    mockSupabase.auth.signInWithPassword.mockResolvedValue({
      data: { user: null, session: null },
      error: null,
    });

    // Mock username resolution
    mockSupabase.from.mockReturnValue({
      select: vi.fn().mockReturnValue({
        eq: vi.fn().mockReturnValue({
          limit: vi.fn().mockReturnValue({
            maybeSingle: vi.fn().mockResolvedValue({
              data: { email: 'test@example.com' },
              error: null,
            }),
          }),
        }),
      }),
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await act(async () => {
      await result.current.signInWithPassword('testuser', 'password123');
    });

    expect(mockSupabase.auth.signInWithPassword).toHaveBeenCalledWith({
      email: 'test@example.com',
      password: 'password123',
    });
  });

  it('should handle registration', async () => {
    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: null },
      error: null,
    });

    const mockUser: User = {
      id: 'user-123',
      email: 'test@example.com',
    } as User;

    mockSupabase.auth.signUp.mockResolvedValue({
      data: { user: mockUser, session: null },
      error: null,
    });

    // Mock username check (no existing user)
    mockSupabase.from.mockReturnValueOnce({
      select: vi.fn().mockReturnValue({
        eq: vi.fn().mockReturnValue({
          limit: vi.fn().mockReturnValue({
            maybeSingle: vi.fn().mockResolvedValue({
              data: null,
              error: null,
            }),
          }),
        }),
      }),
    }).mockReturnValueOnce({
      upsert: vi.fn().mockResolvedValue({
        error: null,
      }),
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await act(async () => {
      await result.current.register({
        email: 'test@example.com',
        password: 'password123',
        fullName: 'Test User',
        role: 'coach',
        username: 'testuser',
      });
    });

    expect(mockSupabase.auth.signUp).toHaveBeenCalledWith({
      email: 'test@example.com',
      password: 'password123',
      options: {
        data: { role: 'coach', full_name: 'Test User', username: 'testuser' },
      },
    });
  });

  it('should handle sign out', async () => {
    const mockSession: Session = {
      user: { id: 'user-123' } as User,
      access_token: 'token',
      refresh_token: 'refresh',
    } as Session;

    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: mockSession },
      error: null,
    });

    mockSupabase.auth.signOut.mockResolvedValue({
      error: null,
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await waitFor(() => {
      expect(result.current.ready).toBe(true);
    });

    await act(async () => {
      await result.current.signOut();
    });

    expect(mockSupabase.auth.signOut).toHaveBeenCalled();
    expect(result.current.user).toBeNull();
    expect(result.current.session).toBeNull();
  });

  it('should handle validation errors', async () => {
    mockSupabase.auth.getSession.mockResolvedValue({
      data: { session: null },
      error: null,
    });

    const { result } = renderHook(() => useAuth(), { wrapper });

    await waitFor(() => {
      expect(result.current.ready).toBe(true);
    });

    await expect(
      result.current.signInWithPassword('', 'pass')
    ).rejects.toThrow('     ');

    await expect(
      result.current.signInWithPassword('test@example.com', '123')
    ).rejects.toThrow('    6  ');
  });

  it('should throw error when used outside provider', () => {
    // Temporarily suppress console.error for this test
    const originalConsoleError = console.error;
    console.error = vi.fn();

    expect(() => {
      renderHook(() => useAuth());
    }).toThrow('AuthContext   Provider   ');

    // Restore console.error
    console.error = originalConsoleError;
  });
});






==================================================
FILE: .\src\hooks\__tests__\useRole.test.tsx
==================================================
import { describe, it, expect, vi } from 'vitest';
import { renderHook } from '@testing-library/react';
import { AuthProvider } from '../../context/AuthContext';
import { useRole } from '../useRole';

// Mock Supabase client first
vi.mock('../../lib/supabaseClient', () => ({
  supabase: null,
  isSupabaseEnabled: false,
}));

// Mock the useAuth hook
const mockUseAuth = vi.fn();

vi.mock('../../context/AuthContext', async () => {
  const actual = await vi.importActual('../../context/AuthContext');
  return {
    ...actual,
    useAuth: () => mockUseAuth(),
  };
});

describe('useRole Hook', () => {
  const wrapper = ({ children }: { children: React.ReactNode }) => (
    <AuthProvider>{children}</AuthProvider>
  );

  beforeEach(() => {
    vi.clearAllMocks();
  });

  it('should return coach role from profile', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'client' }, // Different from profile
      },
      profile: {
        role: 'coach',
        coach_code: 'COACH123',
      },
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('coach');
    expect(result.current.profile).toEqual({
      role: 'coach',
      coach_code: 'COACH123',
    });
    expect(result.current.loading).toBe(false);
  });

  it('should return client role from profile', () => {
    mockUseAuth.mockReturnValue({
      user: null,
      profile: {
        role: 'client',
      },
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('client');
    expect(result.current.profile).toEqual({
      role: 'client',
    });
  });

  it('should fallback to user metadata when profile role is invalid', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'coach' },
      },
      profile: {
        role: 'invalid_role',
      },
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('coach');
  });

  it('should fallback to user metadata when no profile', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'client' },
      },
      profile: null,
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('client');
  });

  it('should return null when no valid role found', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'invalid' },
      },
      profile: {
        role: 'also_invalid',
      },
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBeNull();
    expect(result.current.profile).toBeNull();
  });

  it('should return null when user metadata role is invalid', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'admin' }, // Invalid role
      },
      profile: null,
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBeNull();
  });

  it('should handle loading state', () => {
    mockUseAuth.mockReturnValue({
      user: null,
      profile: null,
      loading: true,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBeNull();
    expect(result.current.loading).toBe(true);
  });

  it('should handle undefined profile', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'coach' },
      },
      profile: undefined,
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('coach');
    expect(result.current.profile).toBeNull();
  });

  it('should prioritize profile over user metadata', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 'client' },
      },
      profile: {
        role: 'coach',
      },
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBe('coach');
  });

  it('should handle empty user metadata', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: {},
      },
      profile: null,
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBeNull();
  });

  it('should handle non-string role in user metadata', () => {
    mockUseAuth.mockReturnValue({
      user: {
        user_metadata: { role: 123 }, // Number instead of string
      },
      profile: null,
      loading: false,
    });

    const { result } = renderHook(() => useRole(), { wrapper });

    expect(result.current.role).toBeNull();
  });
});






==================================================
FILE: .\src\lib\database.ts
==================================================
/**
 * Database operations for FlexPro v2
 * Centralized data access layer
 */

import { supabase } from './supabaseClient';
import {
  Food,
  Exercise,
  FoodSearchResult,
  ExerciseSearchResult,
  FoodSearchParams,
  ExerciseSearchParams,
  PaginatedResponse
} from '../types/database';

// ========== Food Operations ==========

export async function searchFoods(params: FoodSearchParams): Promise<PaginatedResponse<FoodSearchResult>> {
  const { data, error } = await supabase.rpc('search_foods', {
    search_query: params.query,
    limit_count: params.limit || 20,
    offset_count: params.offset || 0
  });

  if (error) throw error;

  const results = data as FoodSearchResult[];
  return {
    data: results,
    count: results.length,
    hasMore: results.length === (params.limit || 20),
    nextOffset: params.offset ? params.offset + results.length : results.length
  };
}

export async function getAllFoods(): Promise<Food[]> {
  const { data, error } = await supabase
    .from('foods')
    .select('*')
    .order('category', { ascending: true })
    .order('name', { ascending: true });

  if (error) throw error;
  return data as Food[];
}

export async function getFoodsByCategory(category: string): Promise<Food[]> {
  const { data, error } = await supabase
    .from('foods')
    .select('*')
    .eq('category', category)
    .order('name', { ascending: true });

  if (error) throw error;
  return data as Food[];
}

// ========== Exercise Operations ==========

export async function searchExercises(params: ExerciseSearchParams): Promise<PaginatedResponse<ExerciseSearchResult>> {
  const { data, error } = await supabase.rpc('search_exercises', {
    search_query: params.query,
    muscle_group_filter: params.muscle_group || null,
    type_filter: params.type || null,
    limit_count: params.limit || 20,
    offset_count: params.offset || 0
  });

  if (error) throw error;

  const results = data as ExerciseSearchResult[];
  return {
    data: results,
    count: results.length,
    hasMore: results.length === (params.limit || 20),
    nextOffset: params.offset ? params.offset + results.length : results.length
  };
}

export async function getAllExercises(): Promise<Exercise[]> {
  const { data, error } = await supabase
    .from('exercises')
    .select('*')
    .order('muscle_group', { ascending: true })
    .order('name', { ascending: true });

  if (error) throw error;
  return data as Exercise[];
}

export async function getExercisesByMuscleGroup(muscleGroup: string): Promise<Exercise[]> {
  const { data, error } = await supabase
    .from('exercises')
    .select('*')
    .eq('muscle_group', muscleGroup)
    .order('name', { ascending: true });

  if (error) throw error;
  return data as Exercise[];
}

export async function getExercisesByType(type: string): Promise<Exercise[]> {
  const { data, error } = await supabase
    .from('exercises')
    .select('*')
    .eq('type', type)
    .order('name', { ascending: true });

  if (error) throw error;
  return data as Exercise[];
}

// ========== Utility Functions ==========

export async function getFoodCategories(): Promise<string[]> {
  const { data, error } = await supabase
    .from('foods')
    .select('category')
    .order('category');

  if (error) throw error;

  // Get unique categories
  const categories = [...new Set(data.map(item => item.category))];
  return categories;
}

export async function getMuscleGroups(): Promise<string[]> {
  const { data, error } = await supabase
    .from('exercises')
    .select('muscle_group')
    .order('muscle_group');

  if (error) throw error;

  // Get unique muscle groups
  const groups = [...new Set(data.map(item => item.muscle_group))];
  return groups;
}

export async function getExerciseTypes(): Promise<string[]> {
  const { data, error } = await supabase
    .from('exercises')
    .select('type')
    .order('type');

  if (error) throw error;

  // Get unique types
  const types = [...new Set(data.map(item => item.type))];
  return types;
}

==================================================
FILE: .\src\lib\queryClient.tsx
==================================================
import React, { ReactNode } from 'react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

/**
 * Configure React Query with reasonable defaults
 */
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      // How long data is considered fresh before background refetch
      staleTime: 5 * 60 * 1000, // 5 minutes
      
      // How long unused data is kept in cache before garbage collection
      gcTime: 10 * 60 * 1000, // 10 minutes (formerly called cacheTime)
      
      // Retry failed requests once
      retry: 1,
      
      // Retry after exponential backoff
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
      
      // Don't refetch on window focus for now (can be enabled per query)
      refetchOnWindowFocus: false,
      
      // Refetch on mount only if data is stale
      refetchOnMount: 'stale',
    },
    mutations: {
      // Retry mutations once on failure
      retry: 1,
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
    },
  },
});

interface ReactQueryProviderProps {
  children: ReactNode;
}

/**
 * React Query Provider Wrapper
 * Wraps application with QueryClientProvider for centralized server state management
 */
export const ReactQueryProvider: React.FC<ReactQueryProviderProps> = ({ children }) => {
  return (
    <QueryClientProvider client={queryClient}>
      {children}
    </QueryClientProvider>
  );
};

export { queryClient };
export { useQuery, useMutation, useInfiniteQuery } from '@tanstack/react-query';
export type { UseQueryResult, UseMutationResult } from '@tanstack/react-query';


==================================================
FILE: .\src\lib\supabaseApi.ts
==================================================
/**
 * Supabase API Layer - Production Ready
 * 
 * This module provides a clean, type-safe interface to Supabase operations
 * with proper error handling and standardized response patterns.
 */

import { toast } from 'react-hot-toast';
import type {
  Template,
  User,
  Client,
  WorkoutPlanFromDB,
  UserPlans,
  ProgramRequest,
  ApiResponse,
  ProfileData
} from '../types/index';
import { supabase, isSupabaseEnabled, checkSupabaseHealth } from './supabaseClient';

// ========== Centralized Error Handling ==========
interface ErrorContext {
  operation: string;
  userMessage?: string;
  showToast?: boolean;
  logError?: boolean;
}

class SupabaseErrorHandler {
  static handle(error: any, context: ErrorContext): ApiResponse<any> {
    const { operation, userMessage, showToast = true, logError = true } = context;

    // Log error for debugging
    if (logError && import.meta.env.DEV) {
      console.error(`${operation} failed:`, error);
    }

    // Show user-friendly message
    if (showToast) {
      const message = userMessage ||
        this.getUserFriendlyMessage(error, operation);
      toast.error(message);
    }

    return {
      data: null,
      error: {
        message: error?.message || 'Unknown error',
        code: error?.code || 'UNKNOWN_ERROR',
        details: error
      }
    };
  }

  private static getUserFriendlyMessage(error: any, operation: string): string {
    // Network errors
    if (!navigator.onLine) {
      return '    ';
    }

    // Authentication errors
    if (error?.message?.includes('JWT') || error?.message?.includes('auth')) {
      return '   ';
    }

    // Permission errors
    if (error?.code === 'PGRST116' || error?.message?.includes('permission')) {
      return '      ';
    }

    // Duplicate key errors
    if (error?.code === '23505' || error?.message?.includes('duplicate')) {
      return '     ';
    }

    // Foreign key constraint errors
    if (error?.code === '23503') {
      return '           ';
    }

    // Generic operation-specific messages
    const operationMessages: Record<string, string> = {
      'save user': '    ',
      'delete user': '   ',
      'fetch users': '    ',
      'save template': '   ',
      'fetch templates': '   ',
      'create request': '   ',
      'fetch requests': '   '
    };

    return operationMessages[operation.toLowerCase()] ||
           '   .    ';
  }

  static success(message: string): void {
    toast.success(message);
  }

  static info(message: string): void {
    toast.info(message);
  }
}

// ========== Constants ==========
const tableUsers = 'users';
const tableTemplates = 'templates';
const tableClients = 'clients';
const tableWorkoutPlans = 'workout_plans';
const COACH_CODE_KEY = 'flexpro_coach_code';

// ========== Helper Functions ==========
/**
 * Generate a valid UUID v4 string for Supabase records
 * Uses crypto.randomUUID() which is supported in modern browsers and Node.js 15+
 * @throws Error if UUID generation fails
 */
const makeId = (): string => {
  if (typeof crypto === 'undefined' || !crypto.randomUUID) {
    throw new Error(
      'UUID generation unavailable. This environment does not support crypto.randomUUID(). ' +
      'Please update your browser or Node.js version to 15.7.0 or later.'
    );
  }
  
  try {
    const uuid = crypto.randomUUID();
    // Validate the generated UUID format (UUID v4 format: xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx)
    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
    if (!uuidRegex.test(uuid)) {
      throw new Error(`Generated invalid UUID format: ${uuid}`);
    }
    return uuid;
  } catch (error) {
    throw new Error(
      `Failed to generate UUID: ${error instanceof Error ? error.message : 'Unknown error'}`
    );
  }
};

/**
 * Generate coach code from phone number (last 5 digits)
 * Returns null if phone is not provided or invalid
 */
const generateCoachCodeFromPhone = (phone: string | null | undefined): string | null => {
  if (!phone || typeof phone !== 'string') {
    return null;
  }
  
  // Remove all non-digit characters
  const digitsOnly = phone.replace(/\D/g, '');
  
  // Check if we have at least 5 digits
  if (digitsOnly.length < 5) {
    return null;
  }
  
  // Return last 5 digits
  return digitsOnly.slice(-5);
};

const createApiResponse = <T>(data: T | null, error: Error | null): ApiResponse<T> => ({
  data,
  error
});

const handleSupabaseError = (error: unknown, operation: string): Error => {
  if (error instanceof Error) {
    if (import.meta.env.DEV) {
      console.error(`${operation} error:`, error);
    }
    return error;
  }
  return new Error(`${operation} failed: Unknown error`);
};

// ========== Users API ==========
export const fetchUsers = async (coachId?: string): Promise<ApiResponse<User[]>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<User[]>([], null);
  }

  try {
    let query = supabase.from(tableUsers).select('*');
    if (coachId) {
      query = query.eq('coach_id', coachId);
    }
    
    const { data, error } = await query;
    
    if (error) {
      return createApiResponse<User[]>(
        [],
        handleSupabaseError(error, 'fetchUsers')
      );
    }
    
    if (!data) {
      return createApiResponse<User[]>([], null);
    }
    
    return createApiResponse<User[]>(data as User[], null);
  } catch (err) {
    return createApiResponse<User[]>(
      [],
      handleSupabaseError(err, 'fetchUsers')
    );
  }
};

export const upsertUser = async (user: User): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(null, null);
  }

  try {
    const { error } = await supabase.from(tableUsers).upsert(user);
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'upsertUser')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'upsertUser')
    );
  }
};

export const removeUser = async (
  id: User['id'],
  coachId?: string
): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(null, null);
  }

  try {
    let query = supabase.from(tableUsers).delete().eq('id', id);
    if (coachId) {
      query = query.eq('coach_id', coachId);
    }
    
    const { error } = await query;
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'removeUser')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'removeUser')
    );
  }
};

// ========== Templates API ==========
export const fetchTemplates = async (coachId?: string): Promise<ApiResponse<Template[]>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<Template[]>([], null);
  }

  try {
    let query = supabase.from(tableTemplates).select('*');
    if (coachId) {
      query = query.eq('coach_id', coachId);
    }
    
    const { data, error } = await query;
    
    if (error) {
      return createApiResponse<Template[]>(
        [],
        handleSupabaseError(error, 'fetchTemplates')
      );
    }
    
    if (!data) {
      return createApiResponse<Template[]>([], null);
    }
    
    return createApiResponse<Template[]>(data as Template[], null);
  } catch (err) {
    return createApiResponse<Template[]>(
      [],
      handleSupabaseError(err, 'fetchTemplates')
    );
  }
};

export const upsertTemplate = async (template: Template): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(null, null);
  }

  try {
    const { error } = await supabase.from(tableTemplates).upsert(template);
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'upsertTemplate')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'upsertTemplate')
    );
  }
};

export const removeTemplate = async (
  id: Template['id'],
  coachId?: string
): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(null, null);
  }

  try {
    let query = supabase.from(tableTemplates).delete().eq('id', id);
    if (coachId) {
      query = query.eq('coach_id', coachId);
    }
    
    const { error } = await query;
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'removeTemplate')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'removeTemplate')
    );
  }
};

// Utility function to ensure Supabase is ready
export const ensureSupabaseReady = async (): Promise<boolean> => {
  if (!isSupabaseEnabled) {
    if (import.meta.env.DEV) {
      console.warn('Supabase is not enabled - check environment variables');
    }
    return false;
  }

  try {
    const isHealthy = await checkSupabaseHealth();
    if (!isHealthy && import.meta.env.DEV) {
      console.warn('Supabase health check failed - connection may be unstable');
    }
    return isHealthy;
  } catch (error) {
    if (import.meta.env.DEV) {
      console.error('Error checking Supabase health:', error);
    }
    return false;
  }
};

export const isSupabaseReady = isSupabaseEnabled;

// ========== Clients API ==========
export const fetchClientsByCoach = async (coachId: string): Promise<ApiResponse<Client[]>> => {
  if (!await ensureSupabaseReady()) {
    return createApiResponse<Client[]>([], null);
  }

  try {
    const { data, error } = await supabase
      .from(tableClients)
      .select('*')
      .eq('coach_id', coachId);
    
    if (error) {
      return createApiResponse<Client[]>(
        [],
        handleSupabaseError(error, 'fetchClientsByCoach')
      );
    }
    
    if (!data) {
      return createApiResponse<Client[]>([], null);
    }
    
    return createApiResponse<Client[]>(data as Client[], null);
  } catch (err) {
    return createApiResponse<Client[]>(
      [],
      handleSupabaseError(err, 'fetchClientsByCoach')
    );
  }
};

export const fetchClientById = async (clientId: string): Promise<ApiResponse<Client | null>> => {
  // Try localStorage first (for offline support)
  try {
    const saved = localStorage.getItem(`client_profile_${clientId}`);
    if (saved) {
      const localData = JSON.parse(saved) as Client;
      if (!isSupabaseEnabled || !supabase) {
        return createApiResponse<Client | null>(localData, null);
      }
    }
  } catch {
    // Ignore localStorage errors
  }
  
  if (!await ensureSupabaseReady()) {
    return createApiResponse<Client | null>(null, null);
  }
  
  try {
    const { data, error } = await supabase
      .from(tableClients)
      .select('*')
      .eq('id', clientId)
      .maybeSingle();
    
    if (error) {
      // Fallback to localStorage on error
      try {
        const saved = localStorage.getItem(`client_profile_${clientId}`);
        if (saved) {
          return createApiResponse<Client | null>(
            JSON.parse(saved) as Client,
            null
          );
        }
      } catch {
        // Ignore
      }
      return createApiResponse<Client | null>(
        null,
        handleSupabaseError(error, 'fetchClientById')
      );
    }
    
    return createApiResponse<Client | null>(data as Client | null, null);
  } catch (err) {
    // Fallback to localStorage
    try {
      const saved = localStorage.getItem(`client_profile_${clientId}`);
      if (saved) {
        return createApiResponse<Client | null>(
          JSON.parse(saved) as Client,
          null
        );
      }
    } catch {
      // Ignore
    }
    return createApiResponse<Client | null>(
      null,
      handleSupabaseError(err, 'fetchClientById')
    );
  }
};

export const createClient = async (
  coachId: string,
  payload: Partial<Client>
): Promise<ApiResponse<Client>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<Client>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const insertPayload: Client = {
      ...payload,
      id: payload.id ?? makeId(),
      coach_id: coachId,
      full_name: payload.full_name ?? '',
    } as Client;
    
    const { data, error } = await supabase
      .from(tableClients)
      .insert(insertPayload)
      .select()
      .maybeSingle();
    
    if (error || !data) {
      return createApiResponse<Client>(
        null,
        handleSupabaseError(error ?? new Error('createClient failed'), 'createClient')
      );
    }
    
    return createApiResponse<Client>(data as Client, null);
  } catch (err) {
    return createApiResponse<Client>(
      null,
      handleSupabaseError(err, 'createClient')
    );
  }
};

export const upsertClient = async (
  payload: Partial<Client> & { id: string; coach_id: string }
): Promise<ApiResponse<Client>> => {
  if (!await ensureSupabaseReady()) {
    return createApiResponse<Client>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const { data, error } = await supabase
      .from(tableClients)
      .upsert(payload)
      .select()
      .maybeSingle();
    
    if (error || !data) {
      return createApiResponse<Client>(
        null,
        handleSupabaseError(error ?? new Error('upsertClient failed'), 'upsertClient')
      );
    }
    
    return createApiResponse<Client>(data as Client, null);
  } catch (err) {
    return createApiResponse<Client>(
      null,
      handleSupabaseError(err, 'upsertClient')
    );
  }
};

export const updateClient = async (
  id: string,
  payload: Partial<Client> & { coach_id?: string; profile_data?: ProfileData }
): Promise<Client> => {
  // Always save to localStorage first
  const effectiveCoachId = payload.coach_id || id;
  const safeProfileData: ProfileData | undefined = payload.profile_data ? { ...payload.profile_data } : undefined;
  
  const clientData: Client = {
    id,
    coach_id: effectiveCoachId,
    full_name: payload.full_name || '',
    gender: payload.gender,
    age: payload.age,
    height: payload.height,
    weight: payload.weight,
    goal: payload.goal,
    notes: payload.notes,
    profile_data: safeProfileData,
    profile_completed: payload.profile_completed ?? false,
    updated_at: new Date().toISOString(),
    created_at: payload.created_at || new Date().toISOString()
  };
  
  try {
    localStorage.setItem(`client_profile_${id}`, JSON.stringify(clientData));
  } catch {
    // ignore
  }
  
  if (!await ensureSupabaseReady()) {
    return clientData;
  }
  
  try {
    const { data, error } = await supabase
      .from(tableClients)
      .upsert(clientData)
      .select()
      .maybeSingle();
    
    if (error) {
      SupabaseErrorHandler.handle(error, {
        operation: 'update client',
        userMessage: '    '
      });
      return clientData;
    }

    return (data as Client) || clientData;
  } catch (err) {
    SupabaseErrorHandler.handle(err, {
      operation: 'update client',
      userMessage: '    '
    });
    return clientData;
  }
};

export const deleteClient = async (id: string): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const { error } = await supabase.from(tableClients).delete().eq('id', id);
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'deleteClient')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'deleteClient')
    );
  }
};

// ========== Workout Plans API ==========
export const fetchWorkoutPlansByClient = async (
  clientId: string
): Promise<ApiResponse<WorkoutPlanFromDB[]>> => {
  if (!await ensureSupabaseReady()) {
    return createApiResponse<WorkoutPlanFromDB[]>([], null);
  }

  try {
    const { data, error } = await supabase
      .from(tableWorkoutPlans)
      .select('*')
      .eq('client_id', clientId);
    
    if (error) {
      return createApiResponse<WorkoutPlanFromDB[]>(
        [],
        handleSupabaseError(error, 'fetchWorkoutPlansByClient')
      );
    }
    
    if (!data) {
      return createApiResponse<WorkoutPlanFromDB[]>([], null);
    }
    
    return createApiResponse<WorkoutPlanFromDB[]>(data as WorkoutPlanFromDB[], null);
  } catch (err) {
    return createApiResponse<WorkoutPlanFromDB[]>(
      [],
      handleSupabaseError(err, 'fetchWorkoutPlansByClient')
    );
  }
};

export const fetchWorkoutPlansByCoach = async (
  coachId: string
): Promise<ApiResponse<WorkoutPlanFromDB[]>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<WorkoutPlanFromDB[]>([], null);
  }

  try {
    const { data, error } = await supabase
      .from(tableWorkoutPlans)
      .select('*')
      .eq('coach_id', coachId);
    
    if (error) {
      return createApiResponse<WorkoutPlanFromDB[]>(
        [],
        handleSupabaseError(error, 'fetchWorkoutPlansByCoach')
      );
    }
    
    if (!data) {
      return createApiResponse<WorkoutPlanFromDB[]>([], null);
    }
    
    return createApiResponse<WorkoutPlanFromDB[]>(data as WorkoutPlanFromDB[], null);
  } catch (err) {
    return createApiResponse<WorkoutPlanFromDB[]>(
      [],
      handleSupabaseError(err, 'fetchWorkoutPlansByCoach')
    );
  }
};

export const createWorkoutPlan = async (
  coachId: string,
  clientId: string,
  plan: UserPlans,
  title?: string,
  description?: string
): Promise<ApiResponse<WorkoutPlanFromDB>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const payload: Partial<WorkoutPlanFromDB> = {
      coach_id: coachId,
      client_id: clientId,
      plan_data: plan,
      title,
      description,
      id: makeId()
    };
    
    const { data, error } = await supabase
      .from(tableWorkoutPlans)
      .insert(payload)
      .select()
      .maybeSingle();
    
    if (error || !data) {
      return createApiResponse<WorkoutPlanFromDB>(
        null,
        handleSupabaseError(error ?? new Error('createWorkoutPlan failed'), 'createWorkoutPlan')
      );
    }
    
    return createApiResponse<WorkoutPlanFromDB>(data as WorkoutPlanFromDB, null);
  } catch (err) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      handleSupabaseError(err, 'createWorkoutPlan')
    );
  }
};

export const upsertWorkoutPlan = async (
  payload: Partial<WorkoutPlanFromDB> & {
    id: string;
    coach_id: string;
    client_id: string;
    plan_data: UserPlans;
  }
): Promise<ApiResponse<WorkoutPlanFromDB>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const { data, error } = await supabase
      .from(tableWorkoutPlans)
      .upsert(payload)
      .select()
      .maybeSingle();
    
    if (error || !data) {
      return createApiResponse<WorkoutPlanFromDB>(
        null,
        handleSupabaseError(error ?? new Error('upsertWorkoutPlan failed'), 'upsertWorkoutPlan')
      );
    }
    
    return createApiResponse<WorkoutPlanFromDB>(data as WorkoutPlanFromDB, null);
  } catch (err) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      handleSupabaseError(err, 'upsertWorkoutPlan')
    );
  }
};

export const updateWorkoutPlan = async (
  planId: string,
  plan: UserPlans,
  title?: string,
  description?: string
): Promise<ApiResponse<WorkoutPlanFromDB>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const payload: Partial<WorkoutPlanFromDB> = {
      plan_data: plan,
      title,
      description
    };
    
    const { data, error } = await supabase
      .from(tableWorkoutPlans)
      .update(payload)
      .eq('id', planId)
      .select()
      .maybeSingle();
    
    if (error || !data) {
      return createApiResponse<WorkoutPlanFromDB>(
        null,
        handleSupabaseError(error ?? new Error('updateWorkoutPlan failed'), 'updateWorkoutPlan')
      );
    }
    
    return createApiResponse<WorkoutPlanFromDB>(data as WorkoutPlanFromDB, null);
  } catch (err) {
    return createApiResponse<WorkoutPlanFromDB>(
      null,
      handleSupabaseError(err, 'updateWorkoutPlan')
    );
  }
};

export const deleteWorkoutPlan = async (planId: string): Promise<ApiResponse<void>> => {
  if (!isSupabaseEnabled || !supabase) {
    return createApiResponse<void>(
      null,
      new Error('Supabase unavailable')
    );
  }

  try {
    const { error } = await supabase.from(tableWorkoutPlans).delete().eq('id', planId);
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'deleteWorkoutPlan')
      );
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'deleteWorkoutPlan')
    );
  }
};

// ========== Coach Code API ==========
/**
 * Get or create coach code from phone number (last 5 digits)
 * Returns null if phone number is not set in profile
 */
export const getOrCreateCoachCode = async (coachId: string): Promise<string | null> => {
  // First, try to get phone number from profile
  let phone: string | null | undefined = null;
  
  // Check localStorage first
  try {
    const savedProfile = localStorage.getItem(`coach_profile_${coachId}`);
    if (savedProfile) {
      const profile = JSON.parse(savedProfile);
      phone = profile.phone;
    }
  } catch {
    // Ignore errors
  }
  
  // Check Supabase for phone number
  if (isSupabaseEnabled && supabase) {
    try {
      const { data: profile } = await supabase
        .from('profiles')
        .select('phone, coach_code')
        .eq('id', coachId)
        .maybeSingle();
      
      if (profile) {
        // Use phone from database if available
        if (profile.phone) {
          phone = profile.phone;
        }
        
        // If coach_code exists and phone matches, return it
        if (profile.coach_code && profile.coach_code.length === 5) {
          const codeFromPhone = generateCoachCodeFromPhone(phone);
          if (codeFromPhone === profile.coach_code) {
            const localKey = `${COACH_CODE_KEY}_${coachId}`;
            localStorage.setItem(localKey, profile.coach_code);
            return profile.coach_code;
          }
        }
      }
    } catch {
      // Ignore errors
    }
  }
  
  // If no phone number, return null
  if (!phone) {
    return null;
  }
  
  // Generate code from phone number
  const newCode = generateCoachCodeFromPhone(phone);
  
  if (!newCode) {
    return null;
  }
  
  // Check if code already exists for another coach (should be rare but possible)
  if (isSupabaseEnabled && supabase) {
    try {
      const { data: existing } = await supabase
        .from('profiles')
        .select('id')
        .eq('coach_code', newCode)
        .neq('id', coachId)
        .maybeSingle();
      
      if (existing) {
        // Code conflict - this is very rare but possible
        // In this case, we still return the code but log a warning
        if (import.meta.env.DEV) {
          console.warn(`Coach code conflict: ${newCode} already exists for another coach`);
        }
      }
      
      // Save to DB
      try {
        await supabase
          .from('profiles')
          .update({ coach_code: newCode })
          .eq('id', coachId);
      } catch {
        // Ignore errors
      }
    } catch {
      // Ignore errors
    }
  }
  
  // Save to localStorage
  const localKey = `${COACH_CODE_KEY}_${coachId}`;
  localStorage.setItem(localKey, newCode);
  
  return newCode;
};

export const findCoachByCode = async (
  code: string
): Promise<{ id: string; full_name: string } | null> => {
  // Check localStorage first (for offline support)
  try {
    const allKeys = Object.keys(localStorage);
    for (const key of allKeys) {
      if (key.startsWith(`${COACH_CODE_KEY}_`)) {
        const savedCode = localStorage.getItem(key);
        if (savedCode === code) {
          const coachId = key.replace(`${COACH_CODE_KEY}_`, '');
          // Try to find coach name
          const profileKey = `coach_profile_${coachId}`;
          const profileData = localStorage.getItem(profileKey);
          if (profileData) {
            try {
              const profile = JSON.parse(profileData) as { fullName?: string };
              return { id: coachId, full_name: profile.fullName || '' };
            } catch {
              // Ignore parse errors
            }
          }
          // If no profile, try database
          if (isSupabaseEnabled && supabase) {
            try {
              const { data } = await supabase
                .from('profiles')
                .select('id, full_name')
                .eq('id', coachId)
                .maybeSingle();
              if (data) {
                return { id: data.id, full_name: data.full_name || '' };
              }
            } catch {
              // Ignore errors
            }
          }
          return { id: coachId, full_name: '' };
        }
      }
    }
  } catch {
    // Ignore errors
  }
  
  // If not found in localStorage, check Supabase
  if (!isSupabaseEnabled || !supabase) {
    return null;
  }
  
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('id, full_name')
      .eq('coach_code', code)
      .eq('role', 'coach')
      .maybeSingle();
    
    if (error || !data) {
      // Try without role filter
      try {
        const { data: data2 } = await supabase
          .from('profiles')
          .select('id, full_name')
          .eq('coach_code', code)
          .maybeSingle();
        if (data2) {
          return { id: data2.id, full_name: data2.full_name || '' };
        }
      } catch {
        // Ignore errors
      }
      return null;
    }
    
    return { id: data.id, full_name: data.full_name || '' };
  } catch {
    return null;
  }
};

// ========== Program Requests API ==========
const readLocalRequests = (key: string): ProgramRequest[] => {
  try {
    const saved = localStorage.getItem(key);
    if (!saved) return [];
    return JSON.parse(saved) as ProgramRequest[];
  } catch {
    return [];
  }
};

const writeLocalRequests = (key: string, list: ProgramRequest[]): void => {
  try {
    localStorage.setItem(key, JSON.stringify(list));
  } catch {
    // ignore
  }
};

const upsertRequestInKey = (key: string, req: ProgramRequest): void => {
  const list = readLocalRequests(key);
  const idx = list.findIndex(r => r.id === req.id);
  if (idx > -1) {
    list[idx] = { ...list[idx], ...req };
  } else {
    list.unshift(req);
  }
  writeLocalRequests(key, list);
};

const syncRequestToLocal = (req: ProgramRequest): ProgramRequest => {
  upsertRequestInKey(`program_requests_${req.client_id}`, req);
  upsertRequestInKey(`coach_requests_${req.coach_id}`, req);
  return req;
};

const findLocalRequestById = (requestId: string): ProgramRequest | null => {
  try {
    const keys = Object.keys(localStorage).filter(
      k => k.startsWith('program_requests_') || k.startsWith('coach_requests_')
    );
    for (const key of keys) {
      const found = readLocalRequests(key).find(r => r.id === requestId);
      if (found) return found;
    }
  } catch {
    // ignore
  }
  return null;
};

const removeRequestFromLocal = (requestId: string, coachId?: string, clientId?: string): void => {
  const keys = new Set<string>();
  if (clientId) keys.add(`program_requests_${clientId}`);
  if (coachId) keys.add(`coach_requests_${coachId}`);
  if (keys.size === 0) {
    try {
      Object.keys(localStorage).forEach(key => {
        if (key.startsWith('program_requests_') || key.startsWith('coach_requests_')) {
          keys.add(key);
        }
      });
    } catch {
      // ignore
    }
  }
  keys.forEach(key => {
    const filtered = readLocalRequests(key).filter(r => r.id !== requestId);
    writeLocalRequests(key, filtered);
  });
};

export const createProgramRequest = async (
  request: Omit<ProgramRequest, 'id' | 'created_at' | 'updated_at'>
): Promise<ProgramRequest> => {
  try {
    const newRequest: ProgramRequest = {
      ...request,
      id: makeId(),
      status: 'pending',
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString()
    };
    
    syncRequestToLocal(newRequest);
    
    // If Supabase is available, save there too
    if (isSupabaseEnabled && supabase) {
      try {
        const { data, error } = await supabase
          .from('program_requests')
          .insert(newRequest)
          .select()
          .maybeSingle();
        
        if (error) {
          SupabaseErrorHandler.handle(error, {
            operation: 'create request',
            userMessage: '          '
          });
        }
        if (data) {
          const stored = data as ProgramRequest;
          syncRequestToLocal(stored);
          return stored;
        }
      } catch (err) {
        SupabaseErrorHandler.handle(err, {
          operation: 'create request',
          userMessage: '          '
        });
      }
    }
    
    return newRequest;
  } catch (err) {
    SupabaseErrorHandler.handle(err, {
      operation: 'create request',
      userMessage: '    '
    });
    throw err;
  }
};

export const fetchRequestsByCoach = async (coachId: string): Promise<ProgramRequest[]> => {
  // Read from localStorage first
  let localRequests: ProgramRequest[] = [];
  try {
    const key = `coach_requests_${coachId}`;
    const saved = localStorage.getItem(key);
    if (saved) {
      localRequests = JSON.parse(saved);
    }
  } catch {
    // Ignore errors
  }

  // If Supabase is not available, return localStorage data
  if (!await ensureSupabaseReady()) {
    return localRequests;
  }
  
  try {
    const { data, error } = await supabase
      .from('program_requests')
      .select('*')
      .eq('coach_id', coachId)
      .order('created_at', { ascending: false });
    
    if (error || !data) {
      SupabaseErrorHandler.handle(error, {
        operation: 'fetch requests',
        showToast: false // Don't show toast for fetch operations
      });
      return localRequests;
    }
    
    const dbRequests = (data as ProgramRequest[]).map(syncRequestToLocal);
    const dbIds = new Set(dbRequests.map(r => r.id));
    const uniqueLocal = localRequests.filter(r => !dbIds.has(r.id));
    return [...dbRequests, ...uniqueLocal];
  } catch {
    return localRequests;
  }
};

export const fetchRequestsByClient = async (clientId: string): Promise<ProgramRequest[]> => {
  // Read from localStorage first
  let localRequests: ProgramRequest[] = [];
  try {
    const key = `program_requests_${clientId}`;
    const saved = localStorage.getItem(key);
    if (saved) {
      localRequests = JSON.parse(saved);
    }
  } catch {
    // Ignore errors
  }

  // If Supabase is not available, return localStorage data
  if (!await ensureSupabaseReady()) {
    return localRequests;
  }
  
  try {
    const { data, error } = await supabase
      .from('program_requests')
      .select('*')
      .eq('client_id', clientId)
      .order('created_at', { ascending: false });
    
    if (error || !data) {
      if (import.meta.env.DEV) {
        console.error('fetchRequestsByClient error', error);
      }
      return localRequests;
    }
    
    const dbRequests = (data as ProgramRequest[]).map(syncRequestToLocal);
    const dbIds = new Set(dbRequests.map(r => r.id));
    const uniqueLocal = localRequests.filter(r => !dbIds.has(r.id));
    return [...dbRequests, ...uniqueLocal];
  } catch {
    return localRequests;
  }
};

export const updateRequestStatus = async (
  requestId: string,
  status: ProgramRequest['status'],
  response?: string,
  request?: ProgramRequest
): Promise<ApiResponse<void>> => {
  const target = request || findLocalRequestById(requestId);
  if (target) {
    const updated: ProgramRequest = {
      ...target,
      status,
      coach_response: response ?? target.coach_response,
      updated_at: new Date().toISOString()
    };
    syncRequestToLocal(updated);
  }
  if (!await ensureSupabaseReady()) {
    return createApiResponse<void>(undefined, null);
  }
  
  try {
    const payload: Partial<ProgramRequest> = {
      status,
      updated_at: new Date().toISOString()
    };
    if (response) {
      payload.coach_response = response;
    }
    
    const { data, error } = await supabase
      .from('program_requests')
      .update(payload)
      .eq('id', requestId)
      .select()
      .maybeSingle();
    
    if (error) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(error, 'updateRequestStatus')
      );
    }
    
    if (data) {
      syncRequestToLocal(data as ProgramRequest);
    }
    
    return createApiResponse<void>(undefined, null);
  } catch (err) {
    return createApiResponse<void>(
      null,
      handleSupabaseError(err, 'updateRequestStatus')
    );
  }
};

export const deleteProgramRequestLocally = (
  requestId: string,
  coachId?: string,
  clientId?: string
): void => {
  removeRequestFromLocal(requestId, coachId, clientId);
};

export const deleteProgramRequest = async (
  requestId: string,
  coachId?: string,
  clientId?: string
): Promise<ApiResponse<void>> => {
  // Delete from localStorage first
  deleteProgramRequestLocally(requestId, coachId, clientId);

  // Delete from Supabase if available
  if (isSupabaseEnabled && supabase) {
    try {
      const { error } = await supabase
        .from('program_requests')
        .delete()
        .eq('id', requestId);

      if (error) {
        return createApiResponse<void>(
          null,
          handleSupabaseError(error, 'deleteProgramRequest')
        );
      }
    } catch (err) {
      return createApiResponse<void>(
        null,
        handleSupabaseError(err, 'deleteProgramRequest')
      );
    }
  }

  return createApiResponse<void>(undefined, null);
};



==================================================
FILE: .\src\lib\supabaseClient.ts
==================================================
// Temporarily disable Supabase for debugging
export const isSupabaseEnabled = false;
export const supabase = null;
export const checkSupabaseHealth = () => false;



==================================================
FILE: .\src\pages\AdminDashboard.tsx
==================================================
import React, { useState } from 'react';
import { supabase } from '../lib/supabaseClient';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import LoadingSpinner from '../components/LoadingSpinner';
import ErrorMessage from '../components/ErrorMessage';

interface UserData {
  id: string;
  email: string;
  full_name: string;
  role: string;
  is_banned?: boolean;
  created_at: string;
}

interface Statistics {
  total_users: number;
  total_coaches: number;
  active_subscriptions: number;
  banned_users: number;
}

/**
 * AdminDashboard Component
 * Displays all users/coaches and system statistics
 * Only accessible to super admin users
 */
const AdminDashboard: React.FC = () => {
  const [selectedUser, setSelectedUser] = useState<UserData | null>(null);
  const [banReason, setBanReason] = useState('');
  const queryClient = useQueryClient();

  // Fetch all users
  const { data: users, isLoading: usersLoading, error: usersError } = useQuery({
    queryKey: ['admin-users'],
    queryFn: async () => {
      const { data, error } = await supabase
        .from('profiles')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) throw error;
      return data as UserData[];
    },
  });

  // Fetch statistics
  const { data: stats } = useQuery({
    queryKey: ['admin-statistics'],
    queryFn: async () => {
      const { data: allUsers, error: usersError } = await supabase
        .from('profiles')
        .select('role, is_banned');

      if (usersError) throw usersError;

      const statistics: Statistics = {
        total_users: allUsers?.filter(u => u.role === 'client').length || 0,
        total_coaches: allUsers?.filter(u => u.role === 'coach').length || 0,
        active_subscriptions: allUsers?.filter(u => u.role === 'coach').length || 0,
        banned_users: allUsers?.filter(u => u.is_banned === true).length || 0,
      };

      return statistics;
    },
  });

  // Ban user mutation
  const banUserMutation = useMutation({
    mutationFn: async (userId: string) => {
      const { error } = await supabase
        .from('profiles')
        .update({
          is_banned: true,
          ban_reason: banReason,
          banned_at: new Date().toISOString(),
        })
        .eq('id', userId);

      if (error) throw error;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['admin-users'] });
      setSelectedUser(null);
      setBanReason('');
    },
  });

  // Unban user mutation
  const unbanUserMutation = useMutation({
    mutationFn: async (userId: string) => {
      const { error } = await supabase
        .from('profiles')
        .update({
          is_banned: false,
          ban_reason: null,
          banned_at: null,
        })
        .eq('id', userId);

      if (error) throw error;
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['admin-users'] });
    },
  });

  if (usersLoading) return <LoadingSpinner />;
  if (usersError) return <ErrorMessage message="   " />;

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <h1 className="text-4xl font-bold text-gray-900 mb-8"> </h1>

        {/* Statistics */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div className="bg-white p-6 rounded-lg shadow">
            <div className="text-sm text-gray-500"> </div>
            <div className="text-3xl font-bold text-blue-600">{stats?.total_users || 0}</div>
          </div>
          <div className="bg-white p-6 rounded-lg shadow">
            <div className="text-sm text-gray-500"> </div>
            <div className="text-3xl font-bold text-green-600">{stats?.total_coaches || 0}</div>
          </div>
          <div className="bg-white p-6 rounded-lg shadow">
            <div className="text-sm text-gray-500"> </div>
            <div className="text-3xl font-bold text-purple-600">{stats?.active_subscriptions || 0}</div>
          </div>
          <div className="bg-white p-6 rounded-lg shadow">
            <div className="text-sm text-gray-500"> </div>
            <div className="text-3xl font-bold text-red-600">{stats?.banned_users || 0}</div>
          </div>
        </div>

        {/* Users Table */}
        <div className="bg-white rounded-lg shadow overflow-hidden">
          <table className="w-full">
            <thead className="bg-gray-100 border-b">
              <tr>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"></th>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"></th>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"></th>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"></th>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"> </th>
                <th className="px-6 py-3 text-right text-sm font-semibold text-gray-700"></th>
              </tr>
            </thead>
            <tbody>
              {users?.map((user) => (
                <tr key={user.id} className="border-b hover:bg-gray-50">
                  <td className="px-6 py-3 text-sm text-gray-900">{user.full_name || '-'}</td>
                  <td className="px-6 py-3 text-sm text-gray-600">{user.email}</td>
                  <td className="px-6 py-3 text-sm">
                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                      user.role === 'coach' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'
                    }`}>
                      {user.role === 'coach' ? '' : ''}
                    </span>
                  </td>
                  <td className="px-6 py-3 text-sm">
                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                      user.is_banned ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'
                    }`}>
                      {user.is_banned ? '' : ''}
                    </span>
                  </td>
                  <td className="px-6 py-3 text-sm text-gray-600">
                    {new Date(user.created_at).toLocaleDateString('fa-IR')}
                  </td>
                  <td className="px-6 py-3 text-sm">
                    {user.is_banned ? (
                      <button
                        onClick={() => unbanUserMutation.mutate(user.id)}
                        className="text-green-600 hover:text-green-800 font-semibold"
                      >
                         
                      </button>
                    ) : (
                      <button
                        onClick={() => setSelectedUser(user)}
                        className="text-red-600 hover:text-red-800 font-semibold"
                      >
                         
                      </button>
                    )}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {/* Ban Modal */}
        {selectedUser && (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
              <h2 className="text-xl font-bold text-gray-900 mb-4">  </h2>
              <p className="text-gray-600 mb-4">   {selectedUser.full_name}   </p>
              <textarea
                value={banReason}
                onChange={(e) => setBanReason(e.target.value)}
                placeholder="  ()"
                className="w-full px-3 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-red-500"
                rows={3}
              />
              <div className="flex gap-4">
                <button
                  onClick={() => banUserMutation.mutate(selectedUser.id)}
                  disabled={banUserMutation.isPending}
                  className="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 disabled:opacity-50"
                >
                  {banUserMutation.isPending ? ' ...' : ''}
                </button>
                <button
                  onClick={() => setSelectedUser(null)}
                  className="flex-1 bg-gray-300 text-gray-900 py-2 rounded-lg hover:bg-gray-400"
                >
                  
                </button>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default AdminDashboard;


==================================================
FILE: .\src\pages\ClientDashboard.tsx
==================================================
import React, { useEffect, useMemo, useState, useCallback, memo } from 'react';
import { useAuth } from '../context/AuthContext';
import { useApp } from '../context/AppContext';
import { fetchClientById, fetchWorkoutPlansByClient, isSupabaseReady, updateClient, findCoachByCode, createProgramRequest, fetchRequestsByClient, deleteProgramRequestLocally } from '../lib/supabaseApi';
import type { UserPlans, WorkoutItem, Client, ProfileData, ProgramRequest, Measurements } from '../types/index';
import { toast } from 'react-hot-toast';
import { supabase } from '../lib/supabaseClient';
import { motion, AnimatePresence } from 'framer-motion';
import {
  User as UserIcon,
  Dumbbell,
  UtensilsCrossed,
  Pill,
  LogOut,
  Moon,
  Sun,
  Menu,
  X,
  Save,
  CheckCircle2,
  Clock,
  Target,
  Send,
  FileText,
  Search,
  UserCheck,
  AlertCircle,
  BarChart3,
  Zap,
  Copy,
  Award,
  TrendingUp,
  Layers,
  ExternalLink,
  Printer,
  Plus
} from 'lucide-react';

// Import React Bits components
import { HoverCard, FloatingActionButton, TextAnimation } from '../components';

type TabType = 'dashboard' | 'training' | 'nutrition' | 'supplements' | 'request' | 'profile' | 'portfolio';

const containerVariants = {
  hidden: { opacity: 0 },
  visible: { opacity: 1, transition: { staggerChildren: 0.1 } }
};

const itemVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: { opacity: 1, y: 0, transition: { duration: 0.4 } }
};

const scaleIn = {
  initial: { opacity: 0, scale: 0.95 },
  animate: { opacity: 1, scale: 1, transition: { duration: 0.3 } },
  exit: { opacity: 0, scale: 0.95 }
};

const GlowCard: React.FC<{
  children: React.ReactNode;
  className?: string;
  glowColor?: string;
  onClick?: () => void;
}> = ({ children, className = '', glowColor = 'var(--accent-color)', onClick }) => (
  <motion.div
    whileHover={{ scale: onClick ? 1.02 : 1.01, y: onClick ? -4 : 0 }}
    whileTap={{ scale: 0.98 }}
    onClick={onClick}
    className={`relative group glass-card rounded-2xl border border-[var(--glass-border)] overflow-hidden transition-all duration-500 ${onClick ? 'cursor-pointer' : ''} ${className}`}
    style={{ boxShadow: `0 0 0 1px ${glowColor}10` }}
  >
    <div
      className="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
      style={{
        background: `radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), ${glowColor}15, transparent 40%)`
      }}
    />
    {children}
  </motion.div>
);

const StatCard: React.FC<{
  icon: React.ReactNode;
  label: string;
  value: string | number;
  gradient: string;
  trend?: { value: number; positive: boolean };
  delay?: number;
}> = ({ icon, label, value, gradient, trend, delay = 0 }) => (
  <motion.div
    variants={itemVariants}
    initial="hidden"
    animate="visible"
    transition={{ delay }}
    className="relative overflow-hidden glass-card p-6 rounded-2xl border border-[var(--glass-border)] group hover:border-[var(--accent-color)]/30 transition-all duration-500"
  >
    <div
      className="absolute -top-1/2 -right-1/2 w-full h-full rounded-full opacity-20 group-hover:opacity-30 transition-opacity"
      style={{ background: gradient }}
    />
    <div className="relative flex items-start justify-between">
      <div>
        <p className="text-4xl font-black text-[var(--text-primary)] mb-1">{value}</p>
        <p className="text-sm text-[var(--text-secondary)] font-medium">{label}</p>
        {trend && (
          <div className={`flex items-center gap-1 mt-2 text-xs font-semibold ${trend.positive ? 'text-emerald-500' : 'text-red-500'}`}>
            <TrendingUp size={14} className={trend.positive ? '' : 'rotate-180'} />
            <span>{trend.value}%</span>
          </div>
        )}
      </div>
      <div className="w-14 h-14 rounded-2xl flex items-center justify-center text-white shadow-lg" style={{ background: gradient }}>
        {icon}
      </div>
    </div>
  </motion.div>
);

const NavItem: React.FC<{
  icon: React.ReactNode;
  label: string;
  active: boolean;
  onClick: () => void;
  badge?: number;
  collapsed?: boolean;
}> = ({ icon, label, active, onClick, badge, collapsed }) => (
  <motion.button
    whileHover={{ x: collapsed ? 0 : 4 }}
    whileTap={{ scale: 0.98 }}
    onClick={onClick}
    className={`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 relative group ${
      active
        ? 'bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] text-white shadow-lg shadow-[var(--accent-color)]/30'
        : 'text-[var(--text-secondary)] hover:bg-[var(--glass-bg)] hover:text-[var(--text-primary)]'
    }`}
  >
    <span className={`transition-transform duration-300 ${active ? 'scale-110' : 'group-hover:scale-110'}`}>
      {icon}
    </span>
    {!collapsed && <span className="font-semibold text-sm">{label}</span>}
    {badge !== undefined && badge > 0 && (
      <motion.span
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        className="absolute left-3 top-1/2 -translate-y-1/2 min-w-[22px] h-[22px] rounded-full bg-red-500 text-white text-xs flex items-center justify-center font-bold px-1 shadow-lg"
      >
        {badge > 99 ? '99+' : badge}
      </motion.span>
    )}
  </motion.button>
);

const QuickAction: React.FC<{
  icon: React.ReactNode;
  label: string;
  sublabel?: string;
  onClick: () => void;
  gradient: string;
}> = ({ icon, label, sublabel, onClick, gradient }) => (
  <GlowCard onClick={onClick} glowColor={gradient.includes('emerald') ? '#10b981' : gradient.includes('purple') ? '#8b5cf6' : '#3b82f6'}>
    <div className="p-5">
      <div
        className="w-12 h-12 rounded-xl flex items-center justify-center text-white mb-4 shadow-lg"
        style={{ background: gradient }}
      >
        {icon}
      </div>
      <p className="font-bold text-[var(--text-primary)]">{label}</p>
      {sublabel && <p className="text-xs text-[var(--text-secondary)] mt-1">{sublabel}</p>}
    </div>
  </GlowCard>
);

const EmptyState: React.FC<{
  icon: React.ReactNode;
  title: string;
  description: string;
  action?: { label: string; onClick: () => void };
}> = ({ icon, title, description, action }) => (
  <motion.div
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    className="text-center py-14"
  >
    <motion.div
      animate={{
        y: [0, -8, 0],
        rotate: [0, 4, -4, 0]
      }}
      transition={{ duration: 4, repeat: Infinity, ease: 'easeInOut' }}
      className="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[var(--glass-bg)] to-[var(--glass-border)] flex items-center justify-center text-[var(--text-secondary)]"
    >
      {icon}
    </motion.div>
    <h3 className="text-lg font-bold mb-1 text-[var(--text-primary)]">{title}</h3>
    <p className="text-[var(--text-secondary)] mb-4 max-w-md mx-auto text-sm">{description}</p>
    {action && (
      <motion.button
        whileHover={{ scale: 1.05 }}
        whileTap={{ scale: 0.95 }}
        onClick={action.onClick}
        className="px-5 py-3 rounded-xl font-semibold text-white shadow-lg shadow-[var(--accent-color)]/30"
        style={{ background: 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))' }}
      >
        {action.label}
      </motion.button>
    )}
  </motion.div>
);

const INJURIES_LIST = [
  ' ', ' ', ' ', ' ', '', 
  ' ', '', '', '', ' ', 
  ' ', '  ', '  ', ' ', 
  ' ', '  ', '', '',
  ' ', ' ', '', '',
  ' ', ' ', ' '
];

const CONDITIONS_LIST = [
  '  1', '  2', '', ' ', ' ',
  ' ', ' ', ' ', '', '',
  ' ', ' ', '', '', ' ',
  ' ', ' ', ' ', ' ',
  ' ', '  ', ' ', ' ',
  '', '', '', '', '', '',
  ' ', '  ', ''
];

const MedicalCheckbox = memo(({ item, isChecked, onToggle, color, disabled = false }: {
  item: string; 
  isChecked: boolean; 
  onToggle: (item: string) => void;
  color: 'red' | 'yellow';
  disabled?: boolean;
}) => (
  <label 
    className={`flex items-center gap-2 cursor-pointer p-2 rounded-lg border border-[var(--glass-border)] bg-[var(--glass-bg)] transition-colors ${
      color === 'red' 
        ? 'hover:border-red-500/50 hover:bg-red-500/10' 
        : 'hover:border-yellow-500/50 hover:bg-yellow-500/10'
    } ${disabled ? 'opacity-60 cursor-not-allowed' : ''}`}
  >
    <input 
      type="checkbox" 
      checked={isChecked}
      onChange={() => onToggle(item)}
      disabled={disabled}
      className={`${color === 'red' ? 'accent-red-500' : 'accent-yellow-500'} w-4 h-4 rounded ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}
    />
    <span className="text-xs text-[var(--text-primary)]">{item}</span>
  </label>
));

const DayCard: React.FC<{ day: number; items: WorkoutItem[]; isActive?: boolean; onClick: () => void }> = ({ day, items, isActive, onClick }) => (
  <motion.button
    onClick={onClick}
    whileHover={{ scale: 1.02 }}
    whileTap={{ scale: 0.98 }}
    className={`relative w-full p-4 rounded-2xl border-2 transition-all duration-300 ${
      isActive
        ? 'bg-[var(--accent-color)]/10 border-[var(--accent-color)] shadow-lg shadow-[var(--accent-color)]/20'
        : 'bg-[var(--glass-bg)] border-[var(--glass-border)] hover:border-[var(--accent-color)]/50 hover:bg-[var(--accent-color)]/5'
    }`}
    aria-label={` ${day}`}
    type="button"
  >
    <div className="flex items-center justify-between mb-3">
      <div className="flex items-center gap-2">
        <div className={`w-2 h-2 rounded-full ${isActive ? 'bg-[var(--accent-color)]' : 'bg-[var(--text-secondary)]'}`} />
        <span className={`text-sm font-bold ${isActive ? 'text-[var(--accent-color)]' : 'text-[var(--text-primary)]'}`}>
           {day}
        </span>
      </div>
      {items.length > 0 && (
        <span className={`text-xs px-2.5 py-1 rounded-full font-bold ${
          isActive 
            ? 'bg-[var(--accent-color)]/30 text-[var(--accent-color)]' 
            : 'bg-[var(--text-primary)]/10 text-[var(--text-secondary)]'
        }`}>
          {items.length} 
        </span>
      )}
    </div>
    {items.length === 0 ? (
      <p className="text-xs text-[var(--text-secondary)] text-right">  </p>
    ) : (
      <div className="space-y-2">
        {items.slice(0, 3).map((w, idx) => (
          <div key={idx} className="text-right text-xs bg-[var(--text-primary)]/5 rounded-lg px-2 py-1.5 border border-[var(--glass-border)]">
            <div className="font-semibold text-[var(--text-primary)]">{w.name}</div>
            <div className="flex items-center gap-2 mt-1 text-[var(--text-secondary)]">
              {w.sets && <span>: {w.sets}</span>}
              {w.reps && <span>: {w.reps}</span>}
            </div>
          </div>
        ))}
        {items.length > 3 && (
          <p className="text-xs text-[var(--accent-color)] font-semibold">+{items.length - 3}  </p>
        )}
      </div>
    )}
  </motion.button>
);

const ProgramCard: React.FC<{ title: string; icon: React.ReactNode; children: React.ReactNode; accent?: string }> = ({
  title, 
  icon, 
  children, 
  accent = 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))'
}) => (
  <GlowCard className="h-full">
    <div className="p-6">
      <div className="flex items-center gap-3 mb-4 pb-4 border-b border-[var(--glass-border)]">
        <div
          className="w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-lg"
          style={{ background: accent }}
        >
          {icon}
        </div>
        <h3 className="text-lg font-bold text-[var(--text-primary)]">{title}</h3>
      </div>
      {children}
    </div>
  </GlowCard>
);

type CoachDetails = {
  id: string;
  name: string;
  avatar?: string | null;
  bio?: string | null;
  telegram?: string | null;
  whatsapp?: string | null;
};

const ClientDashboard: React.FC = () => {
  const { user, loading: authLoading, signOut } = useAuth();
  const { activeUser, toggleTheme, theme } = useApp();
  const [loading, setLoading] = useState(false);
  const [plan, setPlan] = useState<UserPlans | null>(null);
  const [fullName, setFullName] = useState<string>('');
  const [clientInfo, setClientInfo] = useState<Client | null>(null);
  const [savingProfile, setSavingProfile] = useState(false);
  const [saveMessage, setSaveMessage] = useState<string | null>(null);
  const [currentTab, setCurrentTab] = useState<TabType>(() => {
    const saved = localStorage.getItem('client_current_tab');
    return (saved as TabType) || 'dashboard';
  });
  const [profileTab, setProfileTab] = useState<'identity' | 'anthro' | 'medical' | 'coach'>('identity');
  const [selectedDay, setSelectedDay] = useState<number | null>(null);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [sidebarOpen, setSidebarOpen] = useState(() => {
    const saved = localStorage.getItem('client_sidebar_open');
    return saved !== 'false';
  });
  const [coachCode, setCoachCode] = useState<string>('');
  const [coachInfo, setCoachInfo] = useState<{ id: string; full_name: string } | null>(null);
  const [coachDetails, setCoachDetails] = useState<CoachDetails | null>(null);
  const [searchingCoach, setSearchingCoach] = useState(false);
  const [myRequests, setMyRequests] = useState<ProgramRequest[]>([]);
  const [requestType, setRequestType] = useState<'training' | 'diet' | 'supplements' | 'all'>('all');
  const [sendingRequest, setSendingRequest] = useState(false);
  const [deletingRequestId, setDeletingRequestId] = useState<string | null>(null);
  const [profileSaved, setProfileSaved] = useState(false);
  const [coachId, setCoachId] = useState<string>('');
  const [isEditingProfile, setIsEditingProfile] = useState(true);

  const greeting = useMemo(() => {
    if (fullName) return fullName;
    return user?.user_metadata?.full_name ?? user?.email ?? ' ';
  }, [fullName, user?.email, user?.user_metadata?.full_name]);

  const sanitizeHandle = (handle?: string | null): string => {
    if (!handle) return '';
    return handle.trim().replace(/^@/, '').replace(/\s+/g, '');
  };

  const fetchCoachDetails = useCallback(
    async (id: string, fallbackName?: string) => {
      if (!id) return;
      if (!isSupabaseReady || !supabase) {
        setCoachDetails(prev => ({
          id,
          name: fallbackName || prev?.name || '',
          avatar: prev?.avatar || null,
          bio: prev?.bio || null,
          telegram: prev?.telegram || null,
          whatsapp: prev?.whatsapp || null
        }));
        return;
      }
      try {
        const { data, error } = await supabase
          .from('profiles')
          .select('id, full_name, avatar_url, bio, telegram, whatsapp, profile_data')
          .eq('id', id)
          .maybeSingle();

        if (error) throw error;

        const profileData = (data?.profile_data || {}) as Record<string, any>;
        setCoachDetails({
          id,
          name: data?.full_name || fallbackName || '',
          avatar: data?.avatar_url || profileData.avatar || null,
          bio: data?.bio || profileData.bio || null,
          telegram: data?.telegram || profileData.telegram || null,
          whatsapp: data?.whatsapp || profileData.whatsapp || null
        });
      } catch (err) {
        if (import.meta.env.DEV) console.warn('fetchCoachDetails error', err);
        setCoachDetails(prev => ({
          id,
          name: fallbackName || prev?.name || '',
          avatar: prev?.avatar || null,
          bio: prev?.bio || null,
          telegram: prev?.telegram || null,
          whatsapp: prev?.whatsapp || null
        }));
      }
    },
    []
  );

  useEffect(() => {
    localStorage.setItem('client_current_tab', currentTab);
  }, [currentTab]);

  useEffect(() => {
    localStorage.setItem('client_sidebar_open', String(sidebarOpen));
  }, [sidebarOpen]);

  useEffect(() => {
    if (!user) {
      setPlan(null);
      return;
    }
    setFullName(user.user_metadata?.full_name ?? '');
    const fallbackPlan = activeUser && String(activeUser.id) === user.id ? activeUser.plans : null;
    if (!isSupabaseReady) {
      setPlan(fallbackPlan);
      return;
    }
    setLoading(true);
    const loadData = async () => {
      try {
        const [clientResponse, plansResponse] = await Promise.all([
          fetchClientById(user.id),
          fetchWorkoutPlansByClient(user.id)
        ]);
        
        const client = clientResponse.data;
        const plans = plansResponse.data;
        
        let profileCoachId = (user.user_metadata)?.coach_id as string || '';
        if (supabase && !profileCoachId) {
          try {
            const { data: profileData } = await supabase.from('profiles').select('coach_id').eq('id', user.id).maybeSingle();
            profileCoachId = profileData?.coach_id || '';
          } catch (err: unknown) {
            if (import.meta.env.DEV) console.warn('Failed to fetch coach_id from profiles', err);
          }
        }
        
        setCoachId(profileCoachId);
        if (client?.full_name) setFullName(client.full_name);
        if (client) {
          setClientInfo({ ...client, coach_id: client.coach_id || profileCoachId });
          if (client.profile_completed) {
            setIsEditingProfile(false);
            setProfileSaved(true);
          }
        } else {
          // Try to load from localStorage if available
          const localClientKey = `client_profile_${user.id}`;
          let localClientInfo: Client | null = null;
          try {
            const saved = localStorage.getItem(localClientKey);
            if (saved) {
              localClientInfo = JSON.parse(saved);
            }
          } catch {
            // ignore
          }

          setClientInfo(localClientInfo || {
            id: user.id,
            coach_id: profileCoachId,
            full_name: '',
            profile_data: {},
            notes: ''
          } as Client);
        }
        if (plans && Array.isArray(plans) && plans.length > 0 && plans[0]?.plan_data) {
          setPlan(plans[0].plan_data);
        } else {
          setPlan(fallbackPlan);
        }
      } catch (err) {
        if (import.meta.env.DEV) console.error('loadData error', err);
        setPlan(fallbackPlan);
      } finally {
        setLoading(false);
      }
    };
    loadData();
  }, [user, activeUser, isSupabaseReady]);

  const handleProfileChange = (key: keyof Client, value: string | number | boolean | null | undefined) => {
    setClientInfo(prev => prev ? { ...prev, [key]: value } : null);
  };

  const setProfileDataField = (key: keyof ProfileData, value: ProfileData[keyof ProfileData]) => {
    setClientInfo(prev => {
      if (!prev) return null;
      const currentProfileData: ProfileData = (prev.profile_data || {}) as ProfileData;
      const newProfileData: ProfileData = { ...currentProfileData, [key]: value };
      return { ...prev, profile_data: newProfileData };
    });
  };

  const currentInjuries = useMemo(() => {
    const profileData = clientInfo?.profile_data as ProfileData | undefined;
    return Array.isArray(profileData?.injuries) ? profileData.injuries : [];
  }, [clientInfo?.profile_data]);

  const currentConditions = useMemo(() => {
    const profileData = clientInfo?.profile_data as ProfileData | undefined;
    return Array.isArray(profileData?.medicalConditions) ? profileData.medicalConditions : [];
  }, [clientInfo?.profile_data]);

  const handleInjuryToggle = useCallback((inj: string) => {
    setClientInfo(prev => {
      if (!prev) return null;
      const profileData = prev.profile_data as ProfileData | undefined;
      const current = Array.isArray(profileData?.injuries) ? profileData.injuries : [];
      const updated = current.includes(inj) 
        ? current.filter((i) => i !== inj) 
        : [...current, inj];
      return {
        ...prev, 
        profile_data: { ...(prev.profile_data || {}), injuries: updated } as ProfileData
      };
    });
  }, []);

  const handleConditionToggle = useCallback((cond: string) => {
    setClientInfo(prev => {
      if (!prev) return null;
      const profileData = prev.profile_data as ProfileData | undefined;
      const current = Array.isArray(profileData?.medicalConditions) ? profileData.medicalConditions : [];
      const updated = current.includes(cond) 
        ? current.filter((c) => c !== cond) 
        : [...current, cond];
      return {
        ...prev, 
        profile_data: { ...(prev.profile_data || {}), medicalConditions: updated } as ProfileData
      };
    });
  }, []);
      
  useEffect(() => {
    if (user?.id) {
      fetchRequestsByClient(user.id).then(setMyRequests).catch(() => {});
    }
  }, [user?.id]);

  const handleDeleteRequest = async (reqId: string) => {
    if (!user?.id) return;
    setDeletingRequestId(reqId);
    const target = myRequests.find(r => r.id === reqId);
    try {
      setMyRequests(prev => prev.filter(r => r.id !== reqId));
      deleteProgramRequestLocally(reqId, target?.coach_id, user.id);
      if (isSupabaseReady && supabase) {
        await supabase.from('program_requests').delete().eq('id', reqId);
      }
      toast.success('  ');
    } catch (err) {
      if (import.meta.env.DEV) console.error('delete request error', err);
      toast.error('   ');
    } finally {
      setDeletingRequestId(null);
    }
  };

  useEffect(() => {
    if (user?.id) {
      const storedCode = localStorage.getItem(`client_coach_code_${user.id}`);
      if (storedCode) {
        setCoachCode(storedCode);
      }
    }
  }, [user?.id]);

  useEffect(() => {
    if (coachId) {
      fetchCoachDetails(coachId, coachInfo?.full_name);
    }
  }, [coachId, coachInfo?.full_name, fetchCoachDetails]);

  const handleSearchCoach = async () => {
    if (!coachCode || coachCode.length !== 5) {
      toast.error('   5  ');
      return;
    }

    setSearchingCoach(true);
    try {
      const coach = await findCoachByCode(coachCode);
      if (coach) {
        setCoachInfo(coach);
        setCoachId(coach.id);
        fetchCoachDetails(coach.id, coach.full_name);
        if (user?.id) {
          localStorage.setItem(`client_coach_code_${user.id}`, coachCode);
        }
        toast.success(`  : ${coach.full_name}`);
      } else {
        setCoachInfo(null);
        setCoachDetails(null);
        toast.error('     ');
      }
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '   ';
      if (import.meta.env.DEV) console.error('handleSearchCoach error', err);
      toast.error(errorMessage);
    } finally {
      setSearchingCoach(false);
    }
  };

  const isProfileComplete = useMemo(() => {
    if (!clientInfo) return false;
    const pd = (clientInfo.profile_data || {}) as ProfileData;
    return !!(
      clientInfo.full_name &&
      clientInfo.gender &&
      clientInfo.age &&
      clientInfo.height &&
      clientInfo.weight &&
      clientInfo.goal &&
      pd.days &&
      pd.level &&
      pd.activity &&
      pd.nutritionGoals
    );
  }, [clientInfo]);

  const handleSendRequest = async () => {
    if (!coachId || !clientInfo || !user) {
      toast.error('        ');
      return;
    }
    
    if (!isProfileComplete) {
      toast.error('       ');
      return;
    }
    
    if (!profileSaved) {
      toast.error('      ');
      return;
    }
    
    const now = Date.now();
    const hasRecentSimilar = myRequests.some((r) => {
      if (r.request_type !== requestType) return false;
      if (!r.created_at) return false;
      const created = new Date(r.created_at).getTime();
      const twelveHours = 1000 * 60 * 60 * 12;
      return now - created < twelveHours && (r.status === 'pending' || r.status === 'accepted');
    });
    if (hasRecentSimilar) {
      toast.error('        ');
      return;
    }

    setSendingRequest(true);
        try {
          const profileData = (clientInfo.profile_data || {}) as ProfileData;
      const coachName = coachDetails?.name || coachInfo?.full_name || '';
      const clientData = {
            id: user.id,
        name: clientInfo.full_name || user.user_metadata?.full_name || user.email || '',
            gender: clientInfo.gender,
            age: clientInfo.age,
            height: clientInfo.height,
            weight: clientInfo.weight,
        goal: clientInfo.goal || profileData.nutritionGoals,
            days: profileData.days,
            level: profileData.level,
            activity: profileData.activity,
            nutritionGoals: profileData.nutritionGoals,
            phone: profileData.phone,
            email: profileData.email,
            job: profileData.job,
            exp: profileData.exp,
            sleep: profileData.sleep,
            smoke: profileData.smoke,
            alcohol: profileData.alcohol,
            caffeine: profileData.caffeine,
            allergy: profileData.allergy,
            injuries: profileData.injuries || [],
            medicalConditions: profileData.medicalConditions || [],
            medications: profileData.medications,
            dietType: profileData.dietType,
            waterIntake: profileData.waterIntake,
            mealFrequency: profileData.mealFrequency,
            foodPreferences: profileData.foodPreferences || [],
            targetWeight: profileData.targetWeight,
            bodyFat: profileData.bodyFat,
            measurements: profileData.measurements || {},
        notes: clientInfo.notes
      };

      await createProgramRequest({
        client_id: user.id,
        client_name: clientInfo.full_name || user.user_metadata?.full_name || user.email || '',
        coach_id: coachId,
        coach_code: coachCode,
        request_type: requestType,
        status: 'pending',
        client_data: clientData
      });
      
      const requests = await fetchRequestsByClient(user.id);
      setMyRequests(requests);
      
      toast.success('     ');
      
      setClientInfo(prev => prev ? { ...prev, coach_id: coachId } : null);
      fetchCoachDetails(coachId, coachName);
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '   ';
      if (import.meta.env.DEV) {
        console.error('handleSendRequest error', err);
      }
      toast.error(errorMessage);
    } finally {
      setSendingRequest(false);
    }
  };

  const handleSaveProfile = async () => {
    if (!clientInfo || !user) {
      toast.error('   ');
      return;
    }
    
    setSavingProfile(true);
    setSaveMessage(null);
    
    try {
      const effectiveCoachId = coachId || coachInfo?.id || clientInfo.coach_id || user.id;
      
      const payload: Partial<Client> = {
        ...clientInfo,
        id: user.id,
        coach_id: effectiveCoachId,
        profile_completed: true,
        updated_at: new Date().toISOString(),
        created_at: clientInfo.created_at || new Date().toISOString()
      };

      const savedClient = await updateClient(user.id, payload);
      
      setClientInfo(savedClient);
      setCoachId(effectiveCoachId);
      setProfileSaved(true);
      setSaveMessage('  ');
      setIsEditingProfile(false);
      
      toast.success('    ');
      setTimeout(() => setSaveMessage(null), 3000);
      
      if (isSupabaseReady && supabase) {
        try {
          await supabase
            .from('profiles')
            .update({ 
              full_name: savedClient.full_name,
              coach_id: effectiveCoachId 
            })
            .eq('id', user.id);
        } catch (profileErr: unknown) {
          if (import.meta.env.DEV) {
            console.warn('Failed to sync profile to profiles table', profileErr);
          }
        }
      }
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '   ';
      if (import.meta.env.DEV) {
        console.error('saveProfile error', err);
      }
      toast.error(errorMessage);
      setSaveMessage('   ');
      setTimeout(() => setSaveMessage(null), 3000);
    } finally {
      setSavingProfile(false);
    }
  };

  const copyCoachId = useCallback(() => {
    if (!coachId) return;
    navigator.clipboard.writeText(coachId);
    toast.success('   ');
  }, [coachId]);

  const pendingRequests = useMemo(() => myRequests.filter(r => r.status === 'pending'), [myRequests]);

  const stats = useMemo(() => {
    const workoutDays = plan?.workouts ? Object.values(plan.workouts).filter(d => (d || []).length > 0).length : 0;
    const totalExercises = plan?.workouts ? Object.values(plan.workouts).reduce((acc, day) => acc + ((day || []).length), 0) : 0;
    const dietItems = plan?.diet?.length ?? 0;
    const suppCount = plan?.supps?.length ?? 0;
    return { workoutDays, totalExercises, dietItems, suppCount };
  }, [plan]);

  if (authLoading || loading) {
    return (
      <div className="min-h-screen bg-[var(--bg-primary)] flex items-center justify-center">
        <div className="flex flex-col items-center gap-4">
          <div className="w-16 h-16 border-4 border-[var(--accent-color)] border-t-transparent rounded-full animate-spin" />
          <p className="text-sm text-[var(--text-secondary)] font-semibold">  ...</p>
        </div>
      </div>
    );
  }

  if (!user) return null;

  const currentDayWorkouts = selectedDay && plan?.workouts?.[selectedDay] ? plan.workouts[selectedDay] : [];

  const navItems = [
    { id: 'dashboard' as TabType, icon: <BarChart3 size={20} />, label: '' },
    { id: 'training' as TabType, icon: <Dumbbell size={20} />, label: ' ' },
    { id: 'nutrition' as TabType, icon: <UtensilsCrossed size={20} />, label: ' ' },
    { id: 'supplements' as TabType, icon: <Pill size={20} />, label: '' },
    { id: 'portfolio' as TabType, icon: <FileText size={20} />, label: ' ' },
    { id: 'request' as TabType, icon: <Send size={20} />, label: ' ', badge: pendingRequests.length },
    { id: 'profile' as TabType, icon: <UserIcon size={20} />, label: ' ' }
  ];

  return (
    <div className="min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] flex">
      <motion.aside
        initial={false}
        animate={{ width: sidebarOpen ? 280 : 88 }}
        transition={{ duration: 0.3, ease: 'easeInOut' }}
        className="hidden lg:flex flex-col h-screen sticky top-0 glass-panel border-l border-[var(--glass-border)] z-30"
      >
        <div className="p-5 border-b border-[var(--glass-border)]">
          <div className="flex items-center gap-3">
            <motion.div
              whileHover={{ rotate: 360 }}
              transition={{ duration: 0.6 }}
              className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-black text-xl shadow-lg shadow-[var(--accent-color)]/30"
            >
              V2
            </motion.div>
            <AnimatePresence>
              {sidebarOpen && (
                <motion.div
                  initial={{ opacity: 0, x: -10 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: -10 }}
                >
                  <h1 className="text-xl font-black bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] bg-clip-text text-transparent">
                    VOMAX
                  </h1>
                  <p className="text-xs text-[var(--text-secondary)] font-medium"> </p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>

        <nav className="flex-1 p-4 space-y-1.5 overflow-y-auto custom-scrollbar">
          {navItems.map(item => (
            <NavItem
              key={item.id}
              icon={item.icon}
              label={item.label}
              active={currentTab === item.id}
              onClick={() => setCurrentTab(item.id)}
              badge={item.badge}
              collapsed={!sidebarOpen}
            />
          ))}
        </nav>

        <div className="p-4 border-t border-[var(--glass-border)] space-y-2">
            <button
            onClick={() => setSidebarOpen(!sidebarOpen)}
            className="w-full flex items-center justify-center p-2.5 rounded-xl hover:bg-[var(--glass-bg)] text-[var(--text-secondary)] transition"
          >
            <motion.div animate={{ rotate: sidebarOpen ? 0 : 180 }}>
              <X size={18} />
            </motion.div>
            </button>
            </div>
      </motion.aside>

      <motion.button
        whileTap={{ scale: 0.95 }}
        onClick={() => setMobileMenuOpen(true)}
        className="lg:hidden fixed top-4 right-4 z-50 p-3 glass-panel rounded-xl shadow-lg"
      >
        <Menu size={24} />
      </motion.button>

      <AnimatePresence>
        {mobileMenuOpen && (
          <>
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={() => setMobileMenuOpen(false)}
              className="lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50"
            />
            <motion.aside
              initial={{ x: '100%' }}
              animate={{ x: 0 }}
              exit={{ x: '100%' }}
              transition={{ type: 'spring', damping: 30, stiffness: 300 }}
              className="lg:hidden fixed right-0 top-0 bottom-0 w-80 glass-panel z-50 flex flex-col shadow-2xl"
            >
              <div className="p-5 border-b border-[var(--glass-border)] flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold">
                    V2
          </div>
                  <h1 className="text-lg font-black">VOMAX</h1>
                </div>
            <button
                  onClick={() => setMobileMenuOpen(false)}
                  className="p-2 rounded-xl hover:bg-[var(--glass-bg)] transition"
                >
                  <X size={24} />
            </button>
              </div>
              <nav className="flex-1 p-4 space-y-1.5 overflow-y-auto">
                {navItems.map(item => (
                  <NavItem
                    key={item.id}
                    icon={item.icon}
                    label={item.label}
                    active={currentTab === item.id}
                    onClick={() => {
                      setCurrentTab(item.id);
                      setMobileMenuOpen(false);
                    }}
                    badge={item.badge}
                  />
                ))}
              </nav>
              <div className="p-4 border-t border-[var(--glass-border)]">
            <button
                  onClick={() => { signOut(); setMobileMenuOpen(false); }}
                  className="w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold"
                >
                  <LogOut size={18} />
                    
            </button>
              </div>
            </motion.aside>
          </>
        )}
      </AnimatePresence>

      <main className="flex-1 flex flex-col min-h-screen overflow-hidden">
        <header className="sticky top-0 z-40 glass-panel border-b border-[var(--glass-border)] px-4 sm:px-6 py-4">
          <div className="flex items-center justify-between">
            <div className="pr-12 lg:pr-0">
              <h2 className="text-xl sm:text-2xl font-black text-[var(--text-primary)]">
                {navItems.find(n => n.id === currentTab)?.label || ''}
              </h2>
              <p className="text-xs sm:text-sm text-[var(--text-secondary)] mt-0.5">
                {new Date().toLocaleDateString('fa-IR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
              </p>
            </div>

            <div className="flex items-center gap-2 sm:gap-3">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={toggleTheme}
                className="p-2.5 rounded-xl hover:bg-[var(--glass-bg)] transition"
              >
                <motion.div
                  initial={false}
                  animate={{ rotate: theme === 'dark' ? 0 : 180 }}
                  transition={{ duration: 0.3 }}
                >
                  {theme === 'dark' ? <Sun size={20} className="text-yellow-400" /> : <Moon size={20} className="text-indigo-500" />}
                </motion.div>
              </motion.button>

              <div className="hidden sm:flex items-center gap-3 pr-3 border-r border-[var(--glass-border)]">
                <div className="text-left">
                  <p className="text-sm font-bold">{greeting || ''}</p>
                  <p className="text-xs text-[var(--text-secondary)]"></p>
                </div>
                <motion.div
                  whileHover={{ scale: 1.05 }}
                  className="w-11 h-11 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold shadow-lg cursor-pointer"
                  onClick={() => setCurrentTab('profile')}
                >
                  {greeting?.charAt(0) || ''}
                </motion.div>
              </div>

              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={signOut}
                className="hidden sm:flex p-2.5 rounded-xl hover:bg-red-500/10 text-red-500 transition"
                title=""
              >
                <LogOut size={20} />
              </motion.button>
          </div>
        </div>
      </header>

        <div className="flex-1 p-4 sm:p-6 overflow-y-auto custom-scrollbar">
          <AnimatePresence mode="wait">
            {currentTab === 'dashboard' && (
              <motion.div
                key="dashboard"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                <motion.div variants={itemVariants}>
                  <GlowCard>
                    <div className="p-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
                      <div>
                        <h3 className="text-2xl font-black mb-1">
                          <TextAnimation.FadeInText
                            text={` ${greeting?.split(' ')[0] || ''}  `}
                            className="text-2xl font-black"
                            stagger={50}
                          />
                        </h3>
                        <p className="text-[var(--text-secondary)] text-sm">
                          {plan ? '       .' : '        .'}
                        </p>
                      </div>
                      <div className="flex items-center gap-3">
                        <div className="px-4 py-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-right min-w-[150px]">
                          <p className="text-xs text-[var(--text-secondary)]"> </p>
                          <p className="text-sm font-bold text-[var(--text-primary)]">{plan ? '' : ' '}</p>
                        </div>
                        <div className="px-4 py-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-right min-w-[150px]">
                          <p className="text-xs text-[var(--text-secondary)]"> </p>
                          <p className="text-sm font-bold text-[var(--text-primary)]">
                            {coachInfo?.full_name || (coachId ? '  ' : '')}
                          </p>
                        </div>
                      </div>
                    </div>
                  </GlowCard>
                </motion.div>

                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                  <HoverCard variant="glow" className="transform hover:scale-105 transition-all duration-300">
                    <StatCard
                      icon={<Dumbbell size={22} className="text-blue-500" />}
                      label="  "
                      value={stats.workoutDays}
                      gradient="linear-gradient(135deg, #3b82f6, #1d4ed8)"
                      delay={0}
                    />
                  </HoverCard>

                  <HoverCard variant="tilt" className="transform hover:scale-105 transition-all duration-300">
                    <StatCard
                      icon={<Layers size={22} className="text-green-500" />}
                      label=" "
                      value={stats.totalExercises}
                      gradient="linear-gradient(135deg, #10b981, #059669)"
                      delay={0.1}
                    />
                  </HoverCard>

                  <HoverCard variant="morph" className="transform hover:scale-105 transition-all duration-300">
                    <StatCard
                      icon={<UtensilsCrossed size={22} className="text-orange-500" />}
                      label=" "
                      value={stats.dietItems}
                      gradient="linear-gradient(135deg, #f59e0b, #d97706)"
                      delay={0.2}
                    />
                  </HoverCard>

                  <HoverCard variant="border" className="transform hover:scale-105 transition-all duration-300">
                    <StatCard
                      icon={<Send size={22} className="text-purple-500" />}
                      label=" "
                      value={pendingRequests.length}
                      gradient="linear-gradient(135deg, #8b5cf6, #6d28d9)"
                      delay={0.3}
                    />
                  </HoverCard>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <motion.div variants={itemVariants} className="lg:col-span-1">
                    <GlowCard>
                      <div className="p-6 space-y-4">
                        <div className="flex items-center gap-3">
                          <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white">
                            <Award size={20} />
            </div>
            <div>
                            <h4 className="font-bold">  </h4>
                            <p className="text-xs text-[var(--text-secondary)]">   </p>
            </div>
          </div>

                        {coachId ? (
                          <motion.div
                            whileHover={{ scale: 1.02 }}
                            onClick={copyCoachId}
                            className="relative bg-gradient-to-l from-emerald-500/10 to-emerald-500/5 rounded-xl p-4 border border-emerald-500/30 cursor-pointer group"
                          >
                            <p className="text-3xl font-mono font-black text-center tracking-[0.3em] text-emerald-600 dark:text-emerald-400">
                              {coachId}
                            </p>
                            <div className="absolute inset-0 flex items-center justify-center bg-emerald-500/90 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity">
                              <span className="text-white font-bold flex items-center gap-2">
                                <Copy size={18} />  
                              </span>
                            </div>
                          </motion.div>
                        ) : (
                          <div className="p-4 rounded-xl bg-amber-500/10 border border-amber-500/30">
                            <p className="text-amber-600 dark:text-amber-400 text-sm text-center">
                                  
                            </p>
                          </div>
                        )}

            <button
                          onClick={() => setCurrentTab('request')}
                          className="w-full px-4 py-3 rounded-xl text-sm font-semibold bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition"
                        >
                             
            </button>
              </div>
                    </GlowCard>
                  </motion.div>

                  <motion.div variants={itemVariants} className="lg:col-span-2">
                    <h4 className="font-bold mb-4 flex items-center gap-2">
                      <Zap size={18} className="text-[var(--accent-color)]" />
                       
                    </h4>
                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
                      <QuickAction
                        icon={<Dumbbell size={20} />}
                        label=" "
                        sublabel=" "
                        onClick={() => setCurrentTab('training')}
                        gradient="linear-gradient(135deg, #3b82f6, #1d4ed8)"
                      />
                      <QuickAction
                        icon={<UtensilsCrossed size={20} />}
                        label=" "
                        sublabel=" "
                        onClick={() => setCurrentTab('nutrition')}
                        gradient="linear-gradient(135deg, #10b981, #059669)"
                      />
                      <QuickAction
                        icon={<Pill size={20} />}
                        label=""
                        sublabel=" "
                        onClick={() => setCurrentTab('supplements')}
                        gradient="linear-gradient(135deg, #8b5cf6, #6d28d9)"
                      />
                      <QuickAction
                        icon={<Send size={20} />}
                        label=" "
                        sublabel="   "
                        onClick={() => setCurrentTab('request')}
                        gradient="linear-gradient(135deg, #f59e0b, #d97706)"
                      />
                    </div>
                  </motion.div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  <motion.div variants={itemVariants}>
                    <GlowCard>
                      <div className="p-6 space-y-4">
                        <div className="flex items-center justify-between">
                          <h4 className="font-bold flex items-center gap-2">
                            <Dumbbell size={18} className="text-[var(--accent-color)]" />
                             
                          </h4>
                          {plan && (
            <button
                              onClick={() => setCurrentTab('training')}
                              className="text-xs text-[var(--accent-color)] hover:underline font-semibold"
            >
                               
            </button>
                          )}
          </div>

                        {plan && plan.workouts ? (
                          <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            {Array.from({ length: 4 }).map((_, idx) => {
                              const day = idx + 1;
                              const items = plan.workouts?.[day] || [];
                              return (
                                <DayCard
                                  key={day}
                                  day={day}
                                  items={items}
                                  isActive={selectedDay === day}
                                  onClick={() => {
                                    setSelectedDay(day);
                                    setCurrentTab('training');
                                  }}
                                />
                              );
                            })}
                          </div>
                        ) : (
                          <EmptyState
                            icon={<Dumbbell size={32} />}
                            title="  "
                            description="       "
                            action={{ label: ' ', onClick: () => setCurrentTab('request') }}
                          />
                        )}
                      </div>
                    </GlowCard>
                  </motion.div>

                  <motion.div variants={itemVariants}>
                    <GlowCard>
                      <div className="p-6 space-y-4">
                        <div className="flex items-center justify-between">
                          <h4 className="font-bold flex items-center gap-2">
                            <Send size={18} className="text-[var(--accent-color)]" />
                             
                          </h4>
                          <span className="px-3 py-1 rounded-full bg-[var(--glass-bg)] text-xs font-bold text-[var(--text-secondary)]">
                            {myRequests.length} 
                          </span>
                        </div>

                        {myRequests.length === 0 ? (
                          <EmptyState
                            icon={<AlertCircle size={32} />}
                            title="  "
                            description="          "
                            action={{ label: ' ', onClick: () => setCurrentTab('request') }}
                          />
                        ) : (
                          <div className="space-y-3">
                            {myRequests.slice(0, 4).map((req) => (
                              <div
                                key={req.id}
                                className="flex items-center justify-between p-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)]"
                              >
                                <div className="flex items-center gap-3">
                                  <div className="w-9 h-9 rounded-lg bg-gradient-to-br from-[var(--accent-color)]/20 to-[var(--accent-secondary)]/20 flex items-center justify-center">
                                    <Send size={16} className="text-[var(--accent-color)]" />
                                  </div>
                                  <div>
                                    <p className="font-semibold text-sm">
                                      {req.request_type === 'all'
                                        ? ' '
                                        : req.request_type === 'training'
                                        ? ''
                                        : req.request_type === 'diet'
                                        ? ' '
                                        : ''}
                                    </p>
                                    <p className="text-xs text-[var(--text-secondary)]">
                                      {req.created_at ? new Date(req.created_at).toLocaleDateString('fa-IR') : ''}
                                    </p>
                                  </div>
                                </div>
                                <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                  req.status === 'pending'
                                    ? 'bg-amber-500/20 text-amber-600'
                                    : req.status === 'accepted'
                                    ? 'bg-emerald-500/20 text-emerald-600'
                                    : req.status === 'completed'
                                    ? 'bg-blue-500/20 text-blue-500'
                                    : 'bg-red-500/20 text-red-500'
                                }`}>
                                  {req.status === 'pending'
                                    ? ' '
                                    : req.status === 'accepted'
                                    ? ' '
                                    : req.status === 'completed'
                                    ? ' '
                                    : ' '}
                                </span>
                              </div>
                            ))}
                            {myRequests.length > 4 && (
                              <button
                                onClick={() => setCurrentTab('request')}
                                className="w-full text-sm text-[var(--accent-color)] hover:underline font-semibold"
                              >
                                  
                              </button>
                            )}
                </div>
                        )}
                      </div>
                    </GlowCard>
                  </motion.div>
                </div>
              </motion.div>
            )}

            {currentTab === 'training' && (
              <motion.div key="training" {...scaleIn} className="space-y-4">
                  <ProgramCard
                    title="  "
                    icon={<Dumbbell size={20} />}
                  accent="linear-gradient(135deg, #3b82f6, #1d4ed8)"
                  >
                    {plan && plan.workouts ? (
                      <div className="space-y-4">
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4">
                          {Array.from({ length: 7 }).map((_, idx) => {
                            const day = idx + 1;
                            const items = plan.workouts?.[day] || [];
                            return (
                              <DayCard
                                key={day}
                                day={day}
                                items={items}
                                isActive={selectedDay === day}
                                onClick={() => setSelectedDay(selectedDay === day ? null : day)}
                              />
                            );
                          })}
                        </div>

                      {selectedDay && currentDayWorkouts.length > 0 ? (
                          <motion.div
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                          className="glass-card rounded-2xl p-6 border border-[var(--glass-border)]"
                          >
                            <div className="flex items-center justify-between mb-4 pb-4 border-b border-[var(--glass-border)]">
                              <h4 className="text-lg font-bold text-[var(--text-primary)] flex items-center gap-2">
                                <Target size={20} className="text-[var(--accent-color)]" />
                                  {selectedDay}
                              </h4>
                              <button
                                onClick={() => setSelectedDay(null)}
                                className="p-1.5 rounded-lg hover:bg-[var(--text-primary)]/10 transition"
                                aria-label=""
                                type="button"
                              >
                                <X size={18} />
                              </button>
                            </div>
                            <div className="space-y-3">
                              {currentDayWorkouts.map((w, idx) => (
                                <div
                                  key={idx}
                                  className="p-4 rounded-xl bg-[var(--text-primary)]/5 border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition"
                                >
                                  <div className="flex items-start justify-between mb-2">
                                    <div className="flex-1">
                                      <div className="font-bold text-[var(--text-primary)] mb-1">{w.name}</div>
                                      {w.name2 && <div className="text-xs text-yellow-600 dark:text-yellow-400 mt-1">+ {w.name2}</div>}
                                      {w.name3 && <div className="text-xs text-purple-600 dark:text-purple-400 mt-1">+ {w.name3}</div>}
                                    </div>
                                    <span className="text-xs px-2 py-1 rounded-lg bg-[var(--accent-color)]/10 text-[var(--accent-color)] border border-[var(--accent-color)]/20">
                                      {w.mode === 'cardio' ? '' : w.mode === 'warmup' ? '' : w.mode === 'cooldown' ? '' : ''}
                                    </span>
                                  </div>
                                  <div className="flex items-center gap-4 mt-3 text-xs text-[var(--text-secondary)]">
                                    {w.sets && (
                                      <div className="flex items-center gap-1">
                                        <span className="font-semibold">:</span>
                                        <span>{w.sets}</span>
                                      </div>
                                    )}
                                    {w.reps && (
                                      <div className="flex items-center gap-1">
                                        <span className="font-semibold">:</span>
                                        <span>{w.reps}</span>
                                      </div>
                                    )}
                                    {w.rest && (
                                      <div className="flex items-center gap-1">
                                        <Clock size={12} />
                                        <span>{w.rest} {w.restUnit === 'm' ? '' : ''}</span>
                                      </div>
                                    )}
                                  </div>
                                  {w.note && (
                                    <p className="text-xs text-[var(--text-secondary)] mt-2 pt-2 border-t border-[var(--glass-border)]">
                                      {w.note}
                                    </p>
                                  )}
                                </div>
                              ))}
                            </div>
                          </motion.div>
                    ) : (
                        <div className="text-center text-sm text-[var(--text-secondary)]">
                                
                        </div>
                      )}
                      </div>
                  ) : (
                    <EmptyState
                      icon={<Dumbbell size={36} />}
                      title="  "
                      description="     "
                      action={{ label: ' ', onClick: () => setCurrentTab('request') }}
                    />
                    )}
                  </ProgramCard>
              </motion.div>
                )}

            {currentTab === 'nutrition' && (
              <motion.div key="nutrition" {...scaleIn}>
                  <ProgramCard
                    title=" "
                    icon={<UtensilsCrossed size={20} />}
                  accent="linear-gradient(135deg, #10b981, #059669)"
                  >
                    {plan && plan.diet && plan.diet.length > 0 ? (
                      <div className="space-y-3">
                        {plan.diet.map((d, i) => (
                          <div
                            key={i}
                            className="p-4 rounded-xl bg-[var(--text-primary)]/5 border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition"
                          >
                            <div className="flex items-center justify-between mb-2">
                              <span className="font-bold text-[var(--text-primary)]">{d.name}</span>
                              <span className="text-xs px-2 py-1 rounded-lg bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-500/20">
                                {d.meal}
                              </span>
                            </div>
                            <div className="flex items-center gap-4 mt-3 text-xs text-[var(--text-secondary)] flex-wrap">
                              {d.amount && (
                                <div className="flex items-center gap-1">
                                  <span className="font-semibold">:</span>
                                  <span>{d.amount} {d.unit}</span>
                                </div>
                              )}
                              {d.c && (
                                <div className="flex items-center gap-1">
                                  <span className="font-semibold">:</span>
                                  <span>{d.c}g</span>
                                </div>
                              )}
                              {d.p && (
                                <div className="flex items-center gap-1">
                                  <span className="font-semibold">:</span>
                                  <span>{d.p}g</span>
                                </div>
                              )}
                              {d.f && (
                                <div className="flex items-center gap-1">
                                  <span className="font-semibold">:</span>
                                  <span>{d.f}g</span>
                                </div>
                              )}
                            </div>
                          </div>
                        ))}
                      </div>
                    ) : (
                    <EmptyState
                      icon={<UtensilsCrossed size={36} />}
                      title="   "
                      description="    "
                      action={{ label: ' ', onClick: () => setCurrentTab('request') }}
                    />
                    )}
                  </ProgramCard>
              </motion.div>
                )}

            {currentTab === 'supplements' && (
              <motion.div key="supplements" {...scaleIn}>
                  <ProgramCard
                    title=""
                    icon={<Pill size={20} />}
                  accent="linear-gradient(135deg, #8b5cf6, #6d28d9)"
                  >
                    {plan && plan.supps && plan.supps.length > 0 ? (
                      <div className="space-y-3">
                        {plan.supps.map((s, i) => (
                          <div
                            key={i}
                            className="p-4 rounded-xl bg-[var(--text-primary)]/5 border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition"
                          >
                            <div className="flex items-center justify-between mb-2">
                              <span className="font-bold text-[var(--text-primary)]">{s.name}</span>
                              {s.time && (
                                <span className="text-xs px-2 py-1 rounded-lg bg-purple-500/10 text-purple-600 dark:text-purple-400 border border-purple-500/20 flex items-center gap-1">
                                  <Clock size={12} />
                                  {s.time}
                                </span>
                              )}
                            </div>
                            {s.dose && (
                              <div className="text-xs text-[var(--text-secondary)] mt-2">
                                <span className="font-semibold">:</span> {s.dose}
                              </div>
                            )}
                            {s.note && (
                              <p className="text-xs text-[var(--text-secondary)] mt-2 pt-2 border-t border-[var(--glass-border)]">
                                {s.note}
                              </p>
                            )}
                          </div>
                        ))}
                      </div>
                    ) : (
                    <EmptyState
                      icon={<Pill size={36} />}
                      title="  "
                      description="      "
                      action={{ label: ' ', onClick: () => setCurrentTab('request') }}
                    />
                  )}
                </ProgramCard>
              </motion.div>
            )}

            {currentTab === 'portfolio' && (
              <motion.div
                key="portfolio"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                <div className="flex items-center justify-between">
                  <div>
                    <h2 className="text-2xl font-bold text-[var(--text-primary)]">  </h2>
                    <p className="text-sm text-[var(--text-secondary)] mt-1">
                              
                    </p>
                  </div>
                  <div className="flex items-center gap-3">
                    <div className="text-left">
                      <div className="text-sm font-bold text-[var(--text-primary)]">
                        {Object.keys(plan?.workouts || {}).length}  
                      </div>
                      <div className="text-xs text-[var(--text-secondary)]">
                        {plan?.diet?.length || 0}    {plan?.supps?.length || 0} 
                      </div>
                    </div>
                    <button
                      onClick={() => window.print()}
                      className="flex items-center gap-2 px-4 py-2 bg-[var(--accent-color)] text-white rounded-xl hover:bg-[var(--accent-secondary)] transition"
                    >
                      <Printer size={18} />
                       
                    </button>
                  </div>
                </div>

                {/*   */}
                <ProgramCard
                  title="  "
                  icon={<Dumbbell size={20} />}
                  accent="linear-gradient(135deg, #3b82f6, #1d4ed8)"
                >
                  {plan && plan.workouts ? (
                    <div className="space-y-4">
                      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4">
                        {Array.from({ length: 7 }).map((_, idx) => {
                          const day = idx + 1;
                          const items = plan.workouts?.[day] || [];
                          return (
                            <DayCard
                              key={day}
                              day={day}
                              items={items}
                              isActive={selectedDay === day}
                              onClick={() => setSelectedDay(selectedDay === day ? null : day)}
                            />
                          );
                        })}
                      </div>

                      {selectedDay && currentDayWorkouts.length > 0 ? (
                        <motion.div
                          initial={{ opacity: 0, y: 20 }}
                          animate={{ opacity: 1, y: 0 }}
                          className="glass-card rounded-2xl p-6 border border-[var(--glass-border)]"
                        >
                          <div className="flex items-center justify-between mb-4 pb-4 border-b border-[var(--glass-border)]">
                            <h4 className="text-lg font-bold text-[var(--text-primary)] flex items-center gap-2">
                              <Target size={20} className="text-[var(--accent-color)]" />
                                {selectedDay}
                            </h4>
                            <button
                              onClick={() => setSelectedDay(null)}
                              className="p-1.5 rounded-lg hover:bg-[var(--text-primary)]/10 transition"
                              aria-label=""
                              type="button"
                            >
                              <X size={18} />
                            </button>
                          </div>
                          <div className="space-y-3">
                            {currentDayWorkouts.map((w, idx) => (
                              <div
                                key={idx}
                                className="p-4 rounded-xl bg-[var(--text-primary)]/5 border border-[var(--glass-border)] hover:border-[var(--accent-color)]/30 transition"
                              >
                                <div className="flex items-start justify-between mb-2">
                                  <div className="flex-1">
                                    <div className="font-bold text-[var(--text-primary)] mb-1">{w.name}</div>
                                    {w.name2 && <div className="text-xs text-yellow-600 dark:text-yellow-400 mt-1">+ {w.name2}</div>}
                                    {w.name3 && <div className="text-xs text-purple-600 dark:text-purple-400 mt-1">+ {w.name3}</div>}
                                  </div>
                                  <span className="text-xs px-2 py-1 rounded-lg bg-[var(--accent-color)]/10 text-[var(--accent-color)] border border-[var(--accent-color)]/20">
                                    {w.mode === 'cardio' ? '' : w.mode === 'warmup' ? '' : w.mode === 'cooldown' ? '' : ''}
                                  </span>
                                </div>
                                <div className="flex items-center gap-4 mt-3 text-xs text-[var(--text-secondary)]">
                                  {w.sets && (
                                    <div className="flex items-center gap-1">
                                      <span className="font-semibold">:</span>
                                      <span>{w.sets}</span>
                                    </div>
                                  )}
                                  {w.reps && (
                                    <div className="flex items-center gap-1">
                                      <span className="font-semibold">:</span>
                                      <span>{w.reps}</span>
                                    </div>
                                  )}
                                  {w.rest && (
                                    <div className="flex items-center gap-1">
                                      <Clock size={12} />
                                      <span>{w.rest} {w.restUnit === 'm' ? '' : ''}</span>
                                    </div>
                                  )}
                                </div>
                                {w.note && (
                                  <p className="text-xs text-[var(--text-secondary)] mt-2 pt-2 border-t border-[var(--glass-border)]">
                                    {w.note}
                                  </p>
                                )}
                              </div>
                            ))}
                          </div>
                        </motion.div>
                      ) : (
                        <div className="text-center text-sm text-[var(--text-secondary)]">
                                
                        </div>
                      )}
                    </div>
                  ) : (
                    <EmptyState
                      icon={<Dumbbell size={36} />}
                      title="  "
                      description="        "
                    />
                  )}
                </ProgramCard>

                {/*   */}
                <ProgramCard
                  title=" "
                  icon={<UtensilsCrossed size={20} />}
                  accent="linear-gradient(135deg, #10b981, #059669)"
                >
                  {plan.diet && plan.diet.length > 0 ? (
                    <div className="space-y-4">
                      {plan.diet.map((d, i) => (
                        <DietItem key={i} diet={d} />
                      ))}
                    </div>
                  ) : (
                    <EmptyState
                      icon={<UtensilsCrossed size={36} />}
                      title="  "
                      description="        "
                    />
                  )}
                </ProgramCard>

                {/*  */}
                <ProgramCard
                  title=""
                  icon={<Pill size={20} />}
                  accent="linear-gradient(135deg, #8b5cf6, #6d28d9)"
                >
                  {plan.supps && plan.supps.length > 0 ? (
                    <div className="space-y-4">
                      {plan.supps.map((s, i) => (
                        <SupplementItem key={i} supplement={s} />
                      ))}
                    </div>
                  ) : (
                    <EmptyState
                      icon={<Pill size={36} />}
                      title="  "
                      description="         "
                    />
                  )}
                </ProgramCard>

                {/*  */}
                <div className="flex flex-wrap gap-4">
                  <motion.button
                    whileHover={{ scale: 1.02 }}
                    whileTap={{ scale: 0.98 }}
                    onClick={() => setCurrentTab('request')}
                    className="flex items-center gap-2 px-6 py-3 bg-[var(--accent-color)] text-white rounded-xl hover:bg-[var(--accent-secondary)] transition font-semibold"
                  >
                    <Plus size={18} />
                      
                  </motion.button>
                  <motion.button
                    whileHover={{ scale: 1.02 }}
                    whileTap={{ scale: 0.98 }}
                    onClick={() => window.print()}
                    className="flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-semibold"
                  >
                    <Printer size={18} />
                      
                  </motion.button>
                </div>
              </motion.div>
            )}

            {currentTab === 'request' && (
              <motion.div
                key="request"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                <ProgramCard
                  title=" "
                  icon={<Send size={20} />}
                  accent="linear-gradient(135deg, #10b981, #059669)"
                >
                  <div className="space-y-6">
                    <div className="glass-panel rounded-2xl p-5 border border-emerald-500/30 bg-gradient-to-r from-emerald-500/5 to-transparent">
                      <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                        <span className="w-1 h-5 bg-emerald-500 rounded-full" />
                        <Search size={16} />
                          
                      </h4>

                      <div className="flex flex-col sm:flex-row gap-4">
                        <div className="flex-1">
                          <label className="text-xs text-[var(--text-secondary)] mb-2 block"> 5  </label>
                          <div className="flex gap-2">
                            <input
                              type="text"
                              value={coachCode}
                              onChange={(e) => {
                                const val = e.target.value.replace(/\D/g, '').slice(0, 5);
                                setCoachCode(val);
                              }}
                              placeholder=": 12345"
                              className="flex-1 rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] px-4 py-3 text-lg font-bold text-center tracking-widest text-[var(--text-primary)] focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 transition"
                              maxLength={5}
                            />
                            <motion.button
                              onClick={handleSearchCoach}
                              disabled={coachCode.length !== 5 || searchingCoach}
                              whileHover={{ scale: 1.05 }}
                              whileTap={{ scale: 0.95 }}
                              className="px-6 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-sm shadow-lg shadow-emerald-500/30 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                              type="button"
                            >
                              {searchingCoach ? (
                                <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" />
                              ) : (
                                <Search size={16} />
                              )}
                              
                            </motion.button>
                        </div>
                        </div>

                        {coachInfo && (
                          <div className="flex items-center gap-3 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/30">
                            <div className="w-12 h-12 rounded-full bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center text-white font-bold text-lg">
                              {coachInfo.full_name?.charAt(0) || ''}
                            </div>
                            <div>
                              <p className="text-xs text-emerald-600 dark:text-emerald-400 font-semibold"> :</p>
                              <p className="text-sm font-bold text-[var(--text-primary)]">{coachInfo.full_name}</p>
                              <div className="flex items-center gap-1 text-[10px] text-emerald-500 mt-1">
                                <UserCheck size={12} />
                                <span> </span>
                              </div>
                            </div>
                      </div>
                    )}
                      </div>

                      <p className="text-xs text-[var(--text-secondary)] mt-3">
                         5        .          .
                      </p>
                    </div>

                    {coachInfo && (
                      <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                        <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                          <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                          <FileText size={16} />
                           
                        </h4>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                          {[
                            { value: 'all', label: ' ', icon: '', desc: ' +  + ' },
                            { value: 'training', label: ' ', icon: '', desc: ' ' },
                            { value: 'diet', label: ' ', icon: '', desc: ' ' },
                            { value: 'supplements', label: '', icon: '', desc: ' ' }
                          ].map((type) => (
                            <button
                              key={type.value}
                              onClick={() => setRequestType(type.value as 'training' | 'diet' | 'supplements' | 'all')}
                              className={`p-4 rounded-xl border-2 transition-all text-right ${
                                requestType === type.value
                                  ? 'border-[var(--accent-color)] bg-[var(--accent-color)]/10 shadow-lg'
                                  : 'border-[var(--glass-border)] hover:border-[var(--accent-color)]/50'
                              }`}
                              type="button"
                            >
                              <div className="text-2xl mb-2">{type.icon}</div>
                              <div className="text-sm font-bold text-[var(--text-primary)]">{type.label}</div>
                              <div className="text-[10px] text-[var(--text-secondary)] mt-1">{type.desc}</div>
                            </button>
                          ))}
                        </div>
                      </div>
                    )}

                    {coachInfo && (
                      <div className="flex flex-col sm:flex-row justify-between items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-emerald-500/10 to-green-500/5 border border-emerald-500/30">
                        <div className="text-center sm:text-right">
                          <p className="text-sm font-bold text-[var(--text-primary)]">  </p>
                          <p className="text-xs text-[var(--text-secondary)] mt-1">
                                 {coachInfo.full_name}   
                          </p>
                        </div>
                        <motion.button
                          onClick={handleSendRequest}
                          disabled={sendingRequest}
                          whileHover={{ scale: 1.05 }}
                          whileTap={{ scale: 0.95 }}
                          className="px-8 py-4 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-bold text-base shadow-xl shadow-emerald-500/30 flex items-center gap-3 disabled:opacity-50"
                          type="button"
                        >
                          {sendingRequest ? (
                            <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" />
                          ) : (
                            <Send size={20} />
                          )}
                             
                        </motion.button>
                      </div>
                    )}

                    {myRequests.length > 0 && (
                      <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                        <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                          <span className="w-1 h-5 bg-purple-500 rounded-full" />
                          <Clock size={16} />
                           
                        </h4>

                        <div className="space-y-3">
                          {myRequests.map((req) => (
                            <div
                              key={req.id}
                              className="p-4 rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] flex flex-col sm:flex-row justify-between gap-4"
                            >
                              <div>
                                <div className="flex items-center gap-2 mb-2">
                                  <span className={`px-2 py-1 rounded-lg text-xs font-bold ${
                                    req.status === 'pending' ? 'bg-amber-500/10 text-amber-500' :
                                    req.status === 'accepted' ? 'bg-emerald-500/10 text-emerald-500' :
                                    req.status === 'completed' ? 'bg-blue-500/10 text-blue-500' :
                                    'bg-red-500/10 text-red-500'
                                  }`}>
                                    {req.status === 'pending' ? '  ' :
                                     req.status === 'accepted' ? '  ' :
                                     req.status === 'completed' ? '  ' : '  '}
                                  </span>
                                  <span className="text-xs text-[var(--text-secondary)]">
                                    {req.request_type === 'all' ? ' ' :
                                     req.request_type === 'training' ? ' ' :
                                     req.request_type === 'diet' ? ' ' : ''}
                                  </span>
                                </div>
                                <p className="text-xs text-[var(--text-secondary)]">
                                  {req.created_at ? new Date(req.created_at).toLocaleDateString('fa-IR') : ''}
                                </p>
                              </div>
                              <div className="flex flex-col sm:flex-row gap-2 sm:items-center">
                                {req.coach_response && (
                                  <div className="text-xs text-[var(--text-secondary)] p-2 rounded-lg bg-[var(--text-primary)]/5">
                                     : {req.coach_response}
                                  </div>
                                )}
                                <button
                                  onClick={() => handleDeleteRequest(req.id)}
                                  disabled={deletingRequestId === req.id}
                                  className="px-3 py-2 rounded-lg bg-red-500/10 text-red-500 text-xs font-semibold hover:bg-red-500/20 disabled:opacity-50"
                                >
                                  {deletingRequestId === req.id ? '...' : ' '}
                                </button>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    )}

                    {!coachInfo && (
                      <div className="text-center py-8">
                        <AlertCircle size={48} className="mx-auto mb-4 text-amber-500 opacity-50" />
                        <p className="text-sm text-[var(--text-secondary)]">
                                    
                        </p>
                      </div>
                    )}
                  </div>
                </ProgramCard>
              </motion.div>
            )}

            {currentTab === 'profile' && (
              <motion.div
                key="profile"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                <ProgramCard
                  title=" "
                  icon={<UserIcon size={20} />}
                  accent="linear-gradient(135deg, #6366f1, #3b82f6)"
                >
                  <div className="space-y-6">
                    <div className="flex flex-wrap gap-2">
                      {(['identity', 'anthro', 'medical', 'coach'] as const).map((tab) => (
                        <button
                          key={tab}
                          onClick={() => setProfileTab(tab)}
                          className={`px-4 py-2 rounded-xl text-xs font-bold border-2 transition-all ${
                            profileTab === tab
                              ? 'bg-[var(--accent-color)] text-white border-transparent shadow-lg'
                              : 'bg-[var(--glass-bg)] border-[var(--glass-border)] text-[var(--text-secondary)] hover:border-[var(--accent-color)]/50'
                          }`}
                          type="button"
                        >
                          {tab === 'identity' ? ' ' : tab === 'anthro' ? ' ' : tab === 'medical' ? ' ' : '  '}
                        </button>
                      ))}
                    </div>

                    <div className="space-y-4">
                      {profileTab === 'identity' && (
                        <div className="space-y-6">
                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                               
                            </h4>
                            <div className="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
                              <Field label=" ">
                                <Input value={`${clientInfo?.full_name ?? ''}`} onChange={(v) => handleProfileChange('full_name', v)} placeholder=":  " disabled={!isEditingProfile} />
                              </Field>
                              <Field label="">
                                <Select value={`${clientInfo?.gender ?? ''}`} onChange={(v) => handleProfileChange('gender', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'male', label: '' },
                                  { value: 'female', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label="">
                                <Input value={`${clientInfo?.age ?? ''}`} onChange={(v) => handleProfileChange('age', v)} placeholder="" disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" (cm)">
                                <Input value={`${clientInfo?.height ?? ''}`} onChange={(v) => handleProfileChange('height', v)} placeholder=": 175" disabled={!isEditingProfile} />
                              </Field>
                              <Field label="  (kg)">
                                <Input value={`${clientInfo?.weight ?? ''}`} onChange={(v) => handleProfileChange('weight', v)} placeholder=": 72" disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.goal ?? ''}`} onChange={(v) => handleProfileChange('goal', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'weight-loss', label: ' ' },
                                  { value: 'weight-gain', label: ' ' },
                                  { value: 'muscle-gain', label: '' },
                                  { value: 'maintenance', label: ' ' },
                                  { value: 'recomp', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                               
                            </h4>
                            <div className="grid gap-4 sm:grid-cols-2">
                              <Field label=" ">
                                <Input value={`${clientInfo?.profile_data?.phone ?? ''}`} onChange={(v) => setProfileDataField('phone', v)} placeholder="09xxxxxxxxx" disabled={!isEditingProfile} />
                              </Field>
                              <Field label="">
                                <Input value={`${clientInfo?.profile_data?.email ?? ''}`} onChange={(v) => setProfileDataField('email', v)} placeholder="example@mail.com" disabled={!isEditingProfile} />
                              </Field>
                              <Field label="">
                                <Input value={`${clientInfo?.profile_data?.address ?? ''}`} onChange={(v) => setProfileDataField('address', v)} placeholder="  ..." disabled={!isEditingProfile} />
                              </Field>
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                               
                            </h4>
                            <div className="grid gap-4 sm:grid-cols-2 md:grid-cols-4">
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.level ?? ''}`} onChange={(v) => setProfileDataField('level', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'beginner', label: ' (0-6 )' },
                                  { value: 'intermediate', label: ' (6-24 )' },
                                  { value: 'advanced', label: ' (2-5 )' },
                                  { value: 'pro', label: ' (+5 )' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label="   ">
                                <Select value={`${clientInfo?.profile_data?.days ?? ''}`} onChange={(v) => setProfileDataField('days', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: '1', label: '1 ' },
                                  { value: '2', label: '2 ' },
                                  { value: '3', label: '3 ' },
                                  { value: '4', label: '4 ' },
                                  { value: '5', label: '5 ' },
                                  { value: '6', label: '6 ' },
                                  { value: '7', label: '7 ' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label="  ()">
                                <Input value={`${clientInfo?.profile_data?.exp ?? ''}`} onChange={(v) => setProfileDataField('exp', v)} placeholder=" 2" disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.activity ?? ''}`} onChange={(v) => setProfileDataField('activity', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: '1.2', label: ' ( )' },
                                  { value: '1.375', label: ' ( )' },
                                  { value: '1.55', label: ' ( )' },
                                  { value: '1.725', label: ' ( )' },
                                  { value: '1.9', label: '  ()' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                               
                            </h4>
                            <div className="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.nutritionGoals ?? ''}`} onChange={(v) => setProfileDataField('nutritionGoals', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'weight-loss', label: ' ' },
                                  { value: 'weight-gain', label: ' ' },
                                  { value: 'muscle-gain', label: '' },
                                  { value: 'maintenance', label: ' ' },
                                  { value: 'recomp', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.dietType ?? ''}`} onChange={(v) => setProfileDataField('dietType', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'normal', label: '' },
                                  { value: 'vegetarian', label: '' },
                                  { value: 'vegan', label: '' },
                                  { value: 'keto', label: '' },
                                  { value: 'paleo', label: '' },
                                  { value: 'halal', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label="  (%)">
                                <Input value={`${clientInfo?.profile_data?.bodyFat ?? ''}`} onChange={(v) => setProfileDataField('bodyFat', v)} placeholder=" 15" disabled={!isEditingProfile} />
                              </Field>
                              <Field label="  (kg)">
                                <Input value={`${clientInfo?.profile_data?.targetWeight ?? ''}`} onChange={(v) => setProfileDataField('targetWeight', v)} placeholder=": 70" disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Input value={`${clientInfo?.profile_data?.allergy ?? ''}`} onChange={(v) => setProfileDataField('allergy', v)} placeholder=" " disabled={!isEditingProfile} />
                              </Field>
                            </div>
                          </div>
                        </div>
                      )}

                      {profileTab === 'anthro' && (
                        <div className="space-y-4">
                          <div className="grid gap-4 sm:grid-cols-3">
                            {([
                              { key: 'neck', label: '' },
                              { key: 'shoulder', label: '' },
                              { key: 'chest', label: '' },
                              { key: 'arm', label: '' },
                              { key: 'waist', label: '' },
                              { key: 'hip', label: '' },
                              { key: 'thigh', label: '' },
                              { key: 'calf', label: '' },
                              { key: 'wrist', label: ' ' }
                            ] as { key: keyof Measurements; label: string }[]).map(({ key, label }) => (
                              <Field key={key} label={label}>
                                <Input value={`${clientInfo?.profile_data?.measurements?.[key] ?? ''}`} onChange={(v) => {
                                  const prevMeas = clientInfo?.profile_data?.measurements || {};
                                  setProfileDataField('measurements', { ...prevMeas, [key]: v });
                                }} disabled={!isEditingProfile} />
                              </Field>
                            ))}
                          </div>
                        </div>
                      )}

                      {profileTab === 'medical' && (
                        <div className="space-y-6">
                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                               
                            </h4>
                            <div className="grid gap-4 sm:grid-cols-2 md:grid-cols-4">
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.sleep ?? ''}`} onChange={(v) => setProfileDataField('sleep', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'excellent', label: ' (8+ )' },
                                  { value: 'good', label: ' (7-8 )' },
                                  { value: 'fair', label: ' (5-7 )' },
                                  { value: 'poor', label: ' (<5 )' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.smoke ?? ''}`} onChange={(v) => setProfileDataField('smoke', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'no', label: '' },
                                  { value: 'yes', label: '' },
                                  { value: 'quit', label: ' ' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.alcohol ?? ''}`} onChange={(v) => setProfileDataField('alcohol', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'no', label: '' },
                                  { value: 'yes', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                              <Field label=" ">
                                <Select value={`${clientInfo?.profile_data?.caffeine ?? ''}`} onChange={(v) => setProfileDataField('caffeine', v)} options={[
                                  { value: '', label: ' ' },
                                  { value: 'no', label: '' },
                                  { value: 'yes', label: '' }
                                ]} disabled={!isEditingProfile} />
                              </Field>
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-red-500/20 bg-red-500/5">
                            <h4 className="text-sm font-bold text-red-600 dark:text-red-400 mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-red-500 rounded-full" />
                              
                            </h4>
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                              {INJURIES_LIST.map(inj => (
                                <MedicalCheckbox
                                  key={inj}
                                  item={inj}
                                  isChecked={currentInjuries.includes(inj)}
                                  onToggle={isEditingProfile ? handleInjuryToggle : () => {}}
                                  color="red"
                                  disabled={!isEditingProfile}
                                />
                              ))}
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-yellow-500/20 bg-yellow-500/5">
                            <h4 className="text-sm font-bold text-yellow-600 dark:text-yellow-400 mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-yellow-500 rounded-full" />
                                 
                            </h4>
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                              {CONDITIONS_LIST.map(cond => (
                                <MedicalCheckbox
                                  key={cond}
                                  item={cond}
                                  isChecked={currentConditions.includes(cond)}
                                  onToggle={isEditingProfile ? handleConditionToggle : () => {}}
                                  color="yellow"
                                  disabled={!isEditingProfile}
                                />
                              ))}
                            </div>
                          </div>

                          <div className="grid gap-4 sm:grid-cols-2">
                            <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                              <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4"> </h4>
                              <Textarea 
                                value={clientInfo?.profile_data?.medications ?? ''} 
                                onChange={(v) => setProfileDataField('medications', v)} 
                                rows={4}
                              placeholder="      ..." disabled={!isEditingProfile}
                              />
                            </div>
                            <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                              <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4">/ </h4>
                              <Textarea 
                                value={Array.isArray(clientInfo?.profile_data?.foodPreferences) 
                                  ? clientInfo.profile_data?.foodPreferences?.join('\n') || ''
                                  : ''} 
                                onChange={(v) => {
                                  const arr = v.split('\n').filter(Boolean);
                                  setProfileDataField('foodPreferences', arr);
                                }} disabled={!isEditingProfile}
                                rows={4}
                                placeholder="     ..."
                              />
                            </div>
                          </div>

                          <div className="glass-panel rounded-2xl p-5 border border-[var(--glass-border)]">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4"> /  </h4>
                            <Textarea 
                              value={clientInfo?.notes ?? ''} 
                            onChange={(v) => handleProfileChange('notes', v)} disabled={!isEditingProfile}
                              rows={3}
                              placeholder=" ..."
                            />
                          </div>
                        </div>
                      )}

                      {profileTab === 'coach' && (
                        <div className="space-y-6">
                          <div className="glass-panel rounded-2xl p-5 border border-[var(--accent-color)]/30 bg-gradient-to-r from-[var(--accent-color)]/5 to-transparent">
                            <h4 className="text-sm font-bold text-[var(--text-primary)] mb-4 flex items-center gap-2">
                              <span className="w-1 h-5 bg-[var(--accent-color)] rounded-full" />
                                
                            </h4>
                            <div className="flex flex-col sm:flex-row gap-4">
                              <div className="flex-1">
                                <label className="text-xs text-[var(--text-secondary)] mb-2 block"> 5  </label>
                                <div className="flex gap-2">
                                  <input
                                    type="text"
                                    value={coachCode}
                                    onChange={(e) => {
                                      const val = e.target.value.replace(/\D/g, '').slice(0, 5);
                                      setCoachCode(val);
                                    }}
                                    placeholder=": 12345"
                                    className="flex-1 rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] px-4 py-3 text-lg font-bold text-center tracking-widest text-[var(--text-primary)] focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/20 transition"
                                    maxLength={5}
                                  />
                                  <motion.button
                                    onClick={handleSearchCoach}
                                    disabled={coachCode.length !== 5 || searchingCoach}
                                    whileHover={{ scale: 1.05 }}
                                    whileTap={{ scale: 0.95 }}
                                    className="px-6 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-sm shadow-lg shadow-emerald-500/30 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                    type="button"
                                  >
                                    {searchingCoach ? (
                                      <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" />
                                    ) : (
                                      <Search size={16} />
                                    )}
                                    
                                  </motion.button>
                                </div>
                              </div>
                              {coachId && (
                                <div className="flex items-end gap-2">
                                  <button
                                    onClick={() => {
                                      setCoachId('');
                                      setCoachInfo(null);
                                      setCoachDetails(null);
                                      setCoachCode('');
                                      if (user?.id) localStorage.removeItem(`client_coach_code_${user.id}`);
                                    }}
                                    className="px-4 py-3 rounded-xl bg-red-500/10 text-red-500 text-sm font-semibold hover:bg-red-500/20 transition"
                                  >
                                     
                                  </button>
                                </div>
                              )}
                            </div>
                            <p className="text-xs text-[var(--text-secondary)] mt-3">
                                                .
                            </p>
                          </div>

                          {coachId ? (
                            <GlowCard>
                              <div className="p-5 flex flex-col sm:flex-row gap-4 items-start sm:items-center">
                                <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white text-2xl font-bold overflow-hidden">
                                  {coachDetails?.avatar ? (
                                    <img src={coachDetails.avatar} alt="coach avatar" className="w-full h-full object-cover" />
                                  ) : (
                                    (coachDetails?.name || coachInfo?.full_name || '').charAt(0)
                                  )}
                                </div>
                                <div className="flex-1 space-y-1">
                                  <div className="flex items-center gap-2">
                                    <h4 className="text-lg font-bold text-[var(--text-primary)]">{coachDetails?.name || coachInfo?.full_name || ''}</h4>
                                    <span className="px-2 py-1 rounded-lg bg-emerald-500/10 text-emerald-600 text-xs font-semibold border border-emerald-500/30"></span>
                                  </div>
                                  <p className="text-xs text-[var(--text-secondary)] leading-5">
                                    {coachDetails?.bio || '         .'}
                                  </p>
                                  <div className="flex flex-wrap gap-2 pt-2">
                                    {coachDetails?.telegram && (
                                      <a
                                        href={`https://t.me/${sanitizeHandle(coachDetails.telegram)}`}
                                        target="_blank"
                                        rel="noreferrer"
                                        className="flex items-center gap-1 px-3 py-2 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm text-[var(--accent-color)] hover:border-[var(--accent-color)]/50"
                                      >
                                        <ExternalLink size={14} /> 
                                      </a>
                                    )}
                                    {coachDetails?.whatsapp && (
                                      <a
                                        href={`https://wa.me/${sanitizeHandle(coachDetails.whatsapp)}`}
                                        target="_blank"
                                        rel="noreferrer"
                                        className="flex items-center gap-1 px-3 py-2 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm text-emerald-600 hover:border-emerald-500/50"
                                      >
                                        <ExternalLink size={14} /> 
                                      </a>
                                    )}
                                    {coachCode && (
                                      <span className="px-3 py-2 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-xs font-mono tracking-widest text-[var(--text-secondary)]">
                                        : {coachCode}
                                      </span>
                                    )}
                                  </div>
                                </div>
                              </div>
                            </GlowCard>
                          ) : (
                            <EmptyState
                              icon={<UserCheck size={32} />}
                              title="  "
                              description="          ."
                            />
                          )}
                        </div>
                      )}
                    </div>

                    <div className="flex items-center justify-between pt-4 border-t border-[var(--glass-border)]">
                          <div className="flex items-center gap-3">
                            {saveMessage && (
                              <div className="flex items-center gap-2 text-sm text-emerald-500">
                                <CheckCircle2 size={16} />
                                <span>{saveMessage}</span>
                              </div>
                            )}
                            {isProfileComplete && coachId && (
                              <div className="flex items-center gap-2 text-xs text-emerald-600 dark:text-emerald-400 bg-emerald-500/10 px-3 py-1.5 rounded-lg border border-emerald-500/20">
                                <CheckCircle2 size={14} />
                                <span>  -    </span>
                              </div>
                            )}
                          </div>
                          <div className="flex items-center gap-2">
                            {!isEditingProfile && (
                              <button
                                onClick={() => setIsEditingProfile(true)}
                                className="px-4 py-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm font-semibold hover:border-[var(--accent-color)]/50 transition"
                                type="button"
                              >
                                
                              </button>
                            )}
                            <motion.button
                              onClick={handleSaveProfile}
                              disabled={savingProfile || !isEditingProfile}
                              whileHover={{ scale: 1.02 }}
                              whileTap={{ scale: 0.98 }}
                              className="px-6 py-3 rounded-xl bg-[var(--accent-color)] hover:bg-[var(--accent-color)]/90 text-white font-bold text-sm shadow-lg shadow-[var(--accent-color)]/30 flex items-center gap-2 disabled:opacity-50"
                              type="button"
                            >
                              <Save size={16} />
                              {savingProfile ? '  ...' : ' '}
                            </motion.button>
                          </div>
                        </div>
                  </div>
                </ProgramCard>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
        </main>
    </div>
  );
};

// React Bits Floating Action Button for ClientDashboard
const ClientDashboardWithFAB = () => (
  <>
    <ClientDashboard />
    <FloatingActionButton
      onClick={() => {
        // Scroll to top or open request modal
        const requestTab = document.querySelector('[data-tab="request"]');
        if (requestTab) {
          (requestTab as HTMLElement).click();
        }
      }}
      icon={<Send className="w-5 h-5" />}
      tooltip="  "
      position="bottom-right"
    />
  </>
);

export default ClientDashboardWithFAB;

type FieldProps = { label: string; children: React.ReactNode };
const Field: React.FC<FieldProps> = ({ label, children }) => (
  <label className="text-sm text-slate-600 dark:text-slate-300 flex flex-col gap-2 font-semibold">
    {label}
    {children}
  </label>
);

const Input: React.FC<{ value: string; onChange: (value: string) => void; placeholder?: string; disabled?: boolean }> = (props) => (
  <input
    className="rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] px-4 py-3 text-sm text-[var(--text-primary)] focus:border-[var(--accent-color)] focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]/20 transition disabled:opacity-60 disabled:cursor-not-allowed"
    value={props.value}
    placeholder={props.placeholder}
    onChange={(e) => props.onChange(e.target.value)}
    disabled={props.disabled}
    aria-label={props.placeholder}
  />
);

const Textarea: React.FC<{ value: string; onChange: (value: string) => void; rows?: number; placeholder?: string; disabled?: boolean }> = (props) => (
  <textarea
    className="rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] px-4 py-3 text-sm text-[var(--text-primary)] focus:border-[var(--accent-color)] focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]/20 transition resize-none disabled:opacity-60 disabled:cursor-not-allowed"
    rows={props.rows || 3}
    value={props.value}
    placeholder={props.placeholder}
    onChange={(e) => props.onChange(e.target.value)}
    disabled={props.disabled}
    aria-label={props.placeholder}
  />
);

const Select: React.FC<{ value: string; onChange: (value: string) => void; options: { value: string; label: string }[]; disabled?: boolean }> = (props) => (
  <select
    className="rounded-xl border border-[var(--glass-border)] bg-[var(--glass-bg)] px-4 py-3 text-sm text-[var(--text-primary)] focus:border-[var(--accent-color)] focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]/20 transition appearance-none disabled:opacity-60 disabled:cursor-not-allowed"
    value={props.value}
    onChange={(e) => props.onChange(e.target.value)}
    disabled={props.disabled}
    aria-label=""
  >
    {props.options.map((o) => (
      <option key={o.value} value={o.value}>{o.label}</option>
    ))}
  </select>
);


==================================================
FILE: .\src\pages\CoachDashboard.tsx
==================================================
import React, { useEffect, useState, useMemo, useCallback, Suspense, lazy } from 'react';
import { useAuth } from '../context/AuthContext';
import { useUI } from '../context/UIContext';
import { useData } from '../context/DataContext';

// Lazy load heavy panel components
const TrainingPanel = lazy(() => import('../components/TrainingPanel'));
const DietPanel = lazy(() => import('../components/DietPanel'));
const SupplementsPanel = lazy(() => import('../components/SupplementsPanel'));
const ProfilePanel = lazy(() => import('../components/ProfilePanel'));

// Loading component for lazy-loaded panels
const PanelLoadingFallback = () => (
  <div className="flex items-center justify-center p-8 bg-[var(--glass-bg)] rounded-2xl border border-[var(--glass-border)]">
    <div className="text-center space-y-4">
      <div className="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[var(--accent-color)] border-r-transparent"></div>
      <p className="text-sm text-[var(--text-secondary)]">  ...</p>
    </div>
  </div>
);
import UserModal from '../components/UserModal';
import PrintModal from '../components/PrintModal';
import PrintPanel from '../components/print/PrintPanel';
import ClientInfoPanel from '../components/ClientInfoPanel';
import SupabaseDebug from '../components/SupabaseDebug';
import type { UserId, UserInput, Client } from '../types/index';
import { fetchClientById, fetchWorkoutPlansByClient, isSupabaseReady, getOrCreateCoachCode, upsertClient } from '../lib/supabaseApi';
import { supabase } from '../lib/supabaseClient';
import { mapClientToUser } from '../context/DataContext';
import { toast } from 'react-hot-toast';
import { motion, AnimatePresence } from 'framer-motion';
import {
  Sun,
  Moon,
  LogOut,
  Menu,
  X,
  User as UserIcon,
  Users,
  Dumbbell,
  UtensilsCrossed,
  Pill,
  Printer,
  FileText,
  CheckCircle,
  XCircle,
  Clock,
  Search,
  Plus,
  Edit,
  Activity,
  Award,
  BarChart3,
  Settings,
  ChevronRight,
  ChevronLeft,
  TrendingUp,
  Bell,
  Briefcase,
  Calendar,
  Copy,
  Database,
  Eye,
  Globe,
  GraduationCap,
  Heart,
  Instagram,
  Mail,
  MapPin,
  MessageCircle,
  Phone,
  Star,
  Target,
  Zap,
  Trash2
} from 'lucide-react';

// Import React Bits components
import { StatCounter, HoverCard, FloatingActionButton, ExpandableFab } from '../components';
import type { ProgramRequest } from '../types/index';

// ========== Types ==========
type TabType = 'dashboard' | 'students' | 'training' | 'nutrition' | 'supplements' | 'print' | 'profile';
type StudentsSubTab = 'list' | 'requests' | 'info';

// ========== Animation Variants ==========
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.1 }
  }
};

const itemVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: { opacity: 1, y: 0, transition: { duration: 0.4 } }
};

const scaleIn = {
  initial: { opacity: 0, scale: 0.9 },
  animate: { opacity: 1, scale: 1, transition: { duration: 0.3 } },
  exit: { opacity: 0, scale: 0.9 }
};

// ========== Reusable Components ==========
const GlowCard: React.FC<{ 
  children: React.ReactNode; 
  className?: string;
  glowColor?: string;
  onClick?: () => void;
}> = ({ children, className = '', glowColor = 'var(--accent-color)', onClick }) => (
  <motion.div
    whileHover={{ scale: 1.02, y: -4 }}
    whileTap={{ scale: 0.98 }}
    onClick={onClick}
    className={`relative group glass-card rounded-2xl border border-[var(--glass-border)] overflow-hidden transition-all duration-500 ${onClick ? 'cursor-pointer' : ''} ${className}`}
    style={{ 
      boxShadow: `0 0 0 1px ${glowColor}10`,
    }}
  >
    <div 
      className="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
      style={{
        background: `radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), ${glowColor}15, transparent 40%)`
      }}
    />
    {children}
  </motion.div>
);

const StatCard: React.FC<{ 
  icon: React.ReactNode; 
  label: string; 
  value: string | number; 
  trend?: { value: number; positive: boolean };
  gradient: string;
  delay?: number;
}> = ({ icon, label, value, trend, gradient, delay = 0 }) => (
  <motion.div
    variants={itemVariants}
    initial="hidden"
    animate="visible"
    transition={{ delay }}
    className="relative overflow-hidden glass-card p-6 rounded-2xl border border-[var(--glass-border)] group hover:border-[var(--accent-color)]/30 transition-all duration-500"
  >
    {/* Background Gradient */}
    <div 
      className="absolute -top-1/2 -right-1/2 w-full h-full rounded-full opacity-20 group-hover:opacity-30 transition-opacity pointer-events-none"
      style={{ background: gradient }}
    />
    
    <div className="relative flex items-start justify-between">
      <div>
        <p className="text-4xl font-black text-[var(--text-primary)] mb-1">{value}</p>
        <p className="text-sm text-[var(--text-secondary)] font-medium">{label}</p>
        {trend && (
          <div className={`flex items-center gap-1 mt-2 text-xs font-semibold ${trend.positive ? 'text-emerald-500' : 'text-red-500'}`}>
            <TrendingUp size={14} className={trend.positive ? '' : 'rotate-180'} />
            <span>{trend.value}%   </span>
          </div>
        )}
      </div>
      <div 
        className="w-14 h-14 rounded-2xl flex items-center justify-center text-white shadow-lg"
        style={{ background: gradient }}
      >
        {icon}
      </div>
    </div>
  </motion.div>
);

const NavItem: React.FC<{ 
  icon: React.ReactNode; 
  label: string; 
  active: boolean; 
  onClick: () => void;
  badge?: number;
  collapsed?: boolean;
}> = ({ icon, label, active, onClick, badge, collapsed }) => (
  <motion.button
    whileHover={{ x: collapsed ? 0 : 4 }}
    whileTap={{ scale: 0.98 }}
    onClick={onClick}
    className={`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 relative group ${
      active
        ? 'bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] text-white shadow-lg shadow-[var(--accent-color)]/30'
        : 'text-[var(--text-secondary)] hover:bg-[var(--glass-bg)] hover:text-[var(--text-primary)]'
    }`}
  >
    <span className={`transition-transform duration-300 ${active ? 'scale-110' : 'group-hover:scale-110'}`}>
      {icon}
    </span>
    {!collapsed && <span className="font-semibold text-sm">{label}</span>}
    {badge !== undefined && badge > 0 && (
      <motion.span 
        initial={{ scale: 0 }}
        animate={{ scale: 1 }}
        className="absolute left-3 top-1/2 -translate-y-1/2 min-w-[22px] h-[22px] rounded-full bg-red-500 text-white text-xs flex items-center justify-center font-bold px-1 shadow-lg"
      >
        {badge > 99 ? '99+' : badge}
      </motion.span>
    )}
  </motion.button>
);

const QuickAction: React.FC<{
  icon: React.ReactNode;
  label: string;
  sublabel?: string;
  onClick: () => void;
  gradient: string;
}> = ({ icon, label, sublabel, onClick, gradient }) => (
  <GlowCard onClick={onClick} glowColor={gradient.includes('blue') ? '#3b82f6' : gradient.includes('emerald') ? '#10b981' : '#8b5cf6'}>
    <div className="p-5">
      <div 
        className="w-12 h-12 rounded-xl flex items-center justify-center text-white mb-4 shadow-lg"
        style={{ background: gradient }}
      >
        {icon}
      </div>
      <p className="font-bold text-[var(--text-primary)]">{label}</p>
      {sublabel && <p className="text-xs text-[var(--text-secondary)] mt-1">{sublabel}</p>}
    </div>
  </GlowCard>
);

const EmptyState: React.FC<{
  icon: React.ReactNode;
  title: string;
  description: string;
  action?: { label: string; onClick: () => void };
}> = ({ icon, title, description, action }) => (
  <motion.div 
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    className="text-center py-20"
  >
    <motion.div 
      animate={{ 
        y: [0, -10, 0],
        rotate: [0, 5, -5, 0]
      }}
      transition={{ duration: 4, repeat: Infinity, ease: "easeInOut" }}
      className="w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-[var(--glass-bg)] to-[var(--glass-border)] flex items-center justify-center text-[var(--text-secondary)]"
    >
      {icon}
    </motion.div>
    <h3 className="text-xl font-bold mb-2 text-[var(--text-primary)]">{title}</h3>
    <p className="text-[var(--text-secondary)] mb-6 max-w-md mx-auto">{description}</p>
    {action && (
      <motion.button
        whileHover={{ scale: 1.05 }}
        whileTap={{ scale: 0.95 }}
        onClick={action.onClick}
        className="px-6 py-3 rounded-xl font-semibold text-white shadow-lg shadow-[var(--accent-color)]/30"
        style={{ background: 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))' }}
      >
        {action.label}
      </motion.button>
    )}
  </motion.div>
);

// ========== Main Component ==========
const CoachDashboard: React.FC = () => {
  const { user, signOut } = useAuth();
  const { theme, toggleTheme, printData, closePrintModal, downloadPDF } = useUI();
  const {
    users,
    requests,
    activeUser,
    activeUserId,
    saveUser,
    deleteUser,
    acceptRequest,
    rejectRequest,
    deleteRequest,
    updateActiveUser,
    backupData,
    restoreData,
    setActiveUserId,
    refreshData
  } = useData();


  // ========== State ==========
  const [currentTab, setCurrentTab] = useState<TabType>(() => {
    const saved = localStorage.getItem('coach_current_tab');
    return (saved as TabType) || 'dashboard';
  });
  const [studentsSubTab, setStudentsSubTab] = useState<StudentsSubTab>('list');
  const [sidebarOpen, setSidebarOpen] = useState(() => {
    const saved = localStorage.getItem('coach_sidebar_open');
    return saved !== 'false';
  });
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [isUserModalOpen, setIsUserModalOpen] = useState(false);
  const [editingUserId, setEditingUserId] = useState<UserId | null>(null);
  const [clientProfile, setClientProfile] = useState<Client | null>(null);
  const [profileLoading, setProfileLoading] = useState(false);
  const [isSupabaseDebugOpen, setIsSupabaseDebugOpen] = useState(false);
  const [deletingRequestId, setDeletingRequestId] = useState<string | null>(null);
  const [coachCode, setCoachCode] = useState<string | null>(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [currentPage, setCurrentPage] = useState(1);
  const [sortBy, setSortBy] = useState<'name' | 'date'>('name');
  const itemsPerPage = 8;

  // Compute activeUser locally to ensure it updates immediately
  const localActiveUser = useMemo(() => {
    if (activeUserId == null) return null;
    const targetId = String(activeUserId);
    return users.find(u => String(u.id) === targetId) || null;
  }, [users, activeUserId]);
  
  //  
  const [coachProfile, setCoachProfile] = useState({
    fullName: user?.user_metadata?.full_name || '',
    email: user?.email || '',
    phone: '',
    nationalId: '',
    birthDate: '',
    city: '',
    address: '',
    specialization: '',
    certifications: '',
    experience: '',
    education: '',
    bio: '',
    instagram: '',
    telegram: '',
    whatsapp: '',
    website: ''
  });
  const [savingProfile, setSavingProfile] = useState(false);

  // Ensure data is loaded when component mounts
  React.useEffect(() => {
    if (user?.id) {
      refreshData();
    }
  }, [user?.id, refreshData]);

  // Also refresh data when currentTab changes to students
  React.useEffect(() => {
    if (currentTab === 'students' && user?.id) {
      refreshData();
    }
  }, [currentTab, user?.id, refreshData]);

  // ========== Effects ==========
  //     localStorage
  useEffect(() => {
    localStorage.setItem('coach_current_tab', currentTab);
  }, [currentTab]);

  useEffect(() => {
    localStorage.setItem('coach_sidebar_open', String(sidebarOpen));
  }, [sidebarOpen]);

  // Cleanup effect    memory leaks
  useEffect(() => {
    return () => {
      // Cleanup     
    };
  }, []);

  useEffect(() => {
    if (!user?.id) return;

    //     localStorage
    const savedProfile = localStorage.getItem(`coach_profile_${user.id}`);
    if (savedProfile) {
      try {
        const parsed = JSON.parse(savedProfile);
        setCoachProfile(prev => ({ ...prev, ...parsed }));
      } catch (err: unknown) {
        if (import.meta.env.DEV) console.warn('Failed to parse coach profile', err);
      }
    }

    //   
    getOrCreateCoachCode(user.id).then(setCoachCode);

  }, [user?.id]);

  //    Supabase   
  useEffect(() => {
    if (!user?.id || !isSupabaseReady || !supabase) return;

    supabase
      .from('profiles')
      .select('*')
      .eq('id', user.id)
      .maybeSingle()
      .then(({ data, error }) => {
        if (!error && data) {
          setCoachProfile(prev => ({
            ...prev,
            fullName: data.full_name || prev.fullName,
            email: data.email || prev.email,
            phone: data.phone || prev.phone,
            ...(typeof data.profile_data === 'object' ? data.profile_data : {})
          }));
        }
      })
      .catch((error) => {
        if (import.meta.env.DEV) console.error('Error loading coach profile from Supabase:', error);
      });
  }, [user?.id, isSupabaseReady, supabase]);

  //     
  useEffect(() => {
    if (!localActiveUser || studentsSubTab !== 'info') return;

    setProfileLoading(true);
    Promise.all([
      fetchClientById(String(localActiveUser.id)),
      fetchWorkoutPlansByClient(String(localActiveUser.id))
    ])
      .then(([clientRes, plansRes]) => {
        if (clientRes.data) {
          setClientProfile(clientRes.data);
          const plan = plansRes.data?.[0];
          if (isSupabaseReady && plan) {
            updateActiveUser(mapClientToUser(clientRes.data, plan));
          }
        }
      })
      .catch((err: unknown) => {
        if (import.meta.env.DEV) console.error('Error fetching client', err);
      })
      .finally(() => setProfileLoading(false));
  }, [localActiveUser, studentsSubTab, updateActiveUser]);

  // ========== Computed ==========
  
  const filteredUsers = useMemo(() => {
    let result = users;
    
    if (searchTerm) {
      const term = searchTerm.toLowerCase();
      result = result.filter(u => 
        u.name.toLowerCase().includes(term) || 
        u.phone?.includes(term) ||
        u.email?.toLowerCase().includes(term)
      );
    }
    
    // Sort
    result = [...result].sort((a, b) => {
      if (sortBy === 'name') {
        return a.name.localeCompare(b.name, 'fa');
      }
      return 0;
    });
    
    return result;
  }, [users, searchTerm, sortBy]);

  const paginatedUsers = useMemo(() => {
    const start = (currentPage - 1) * itemsPerPage;
    return filteredUsers.slice(start, start + itemsPerPage);
  }, [filteredUsers, currentPage]);

  const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);

  const pendingRequests = useMemo(() => requests.filter(r => r.status === 'pending'), [requests]);
  const acceptedRequests = useMemo(() => requests.filter(r => r.status === 'accepted'), [requests]);

  const stats = useMemo(() => ({
    totalStudents: users.length,
    pendingRequests: pendingRequests.length,
    acceptedRequests: acceptedRequests.length,
    activePrograms: users.filter(u => u.plans?.workouts && Object.keys(u.plans.workouts).length > 0).length,
  }), [users, pendingRequests.length, acceptedRequests.length]);

  // ========== Handlers ==========
  const handleSaveCoachProfile = async () => {
    if (!user?.id) return;
    setSavingProfile(true);
    
    try {
      localStorage.setItem(`coach_profile_${user.id}`, JSON.stringify(coachProfile));
      
      if (isSupabaseReady && supabase) {
        await supabase.from('profiles').upsert({
          id: user.id,
          full_name: coachProfile.fullName,
          email: coachProfile.email,
          phone: coachProfile.phone,
          profile_data: coachProfile
        });
      }
      
      const newCode = await getOrCreateCoachCode(user.id);
      setCoachCode(newCode);
      
      toast.success('    ');
    } catch (err: unknown) {
      toast.error('   ');
      if (import.meta.env.DEV) console.error('handleSaveCoachProfile error', err);
    } finally {
      setSavingProfile(false);
    }
  };

  const handleAcceptRequest = useCallback(async (req: ProgramRequest) => {
    await acceptRequest(req);

    // Navigate to student info tab
    setActiveUserId(req.client_id);
    setStudentsSubTab('info');
    setCurrentTab('students');
  }, [acceptRequest]);

  const handleRejectRequest = useCallback(async (req: ProgramRequest) => {
    await rejectRequest(req);
  }, [rejectRequest]);

  const handleDeleteRequest = useCallback(async (req: ProgramRequest) => {
    setDeletingRequestId(req.id);
    try {
      await deleteRequest(req.id);
    } finally {
      setDeletingRequestId(null);
    }
  }, [deleteRequest]);

  const handleGeneratePrint = useCallback(async (type: string, data: any) => {
    try {
      let html = '';
      let title = '';

      switch (type) {
        case 'program':
          const { programType } = data;
          title = ` ${programType === 'workout' ? '' : programType === 'diet' ? '' : ''} - ${data.user.name}`;
          html = generateProgramHTML(data.user, programType);
          break;
        case 'client-report':
          title = `  - ${data.name}`;
          html = generateClientReportHTML(data);
          break;
        case 'progress':
          title = `  - ${data.name}`;
          html = generateProgressHTML(data);
          break;
        default:
          throw new Error('  ');
      }

      setPrintData({
        html,
        title,
        type: type as 'program' | 'client-report' | 'progress'
      });
    } catch (error) {
      console.error('Error generating print:', error);
      toast.error('    ');
    }
  }, []);

  // HTML Generation Functions
  const generateProgramHTML = (user: User, programType: string): string => {
    let html = `
      <div style="font-family: 'Vazirmatn', sans-serif; direction: rtl; padding: 40px; background: white;">
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #f59e0b; padding-bottom: 20px;">
          <h1 style="color: #1f2937; font-size: 28px; margin: 0;"> ${programType === 'workout' ? '' : programType === 'diet' ? '' : ''}</h1>
          <h2 style="color: #6b7280; font-size: 20px; margin: 10px 0;">${user.name}</h2>
          <p style="color: #9ca3af; font-size: 14px;">${new Date().toLocaleDateString('fa-IR')}</p>
        </div>
    `;

    if (programType === 'workout' && user.plans?.workouts) {
      html += '<h3 style="color: #1f2937; margin: 30px 0 20px;"> </h3>';
      Object.entries(user.plans.workouts).forEach(([day, exercises]) => {
        html += `<div style="margin-bottom: 20px; border: 1px solid #e5e7eb; border-radius: 8px; padding: 15px;">
          <h4 style="color: #374151; margin: 0 0 10px;">${day}</h4>`;
        if (Array.isArray(exercises)) {
          exercises.forEach((exercise: any) => {
            html += `<div style="margin-bottom: 8px; padding: 8px; background: #f9fafb; border-radius: 4px;">
              <strong>${exercise.name || ''}</strong> - ${exercise.sets || 0}   ${exercise.reps || 0} 
            </div>`;
          });
        }
        html += '</div>';
      });
    }

    if (programType === 'diet' && user.plans?.diet) {
      html += '<h3 style="color: #1f2937; margin: 30px 0 20px;"> </h3>';
      user.plans.diet.forEach((meal: any, index: number) => {
        html += `<div style="margin-bottom: 20px; border: 1px solid #e5e7eb; border-radius: 8px; padding: 15px;">
          <h4 style="color: #374151; margin: 0 0 10px;"> ${index + 1}: ${meal.name || ' '}</h4>
          <p style="color: #6b7280;">${meal.description || ''}</p>
        </div>`;
      });
    }

    if (programType === 'supplements' && user.plans?.supps) {
      html += '<h3 style="color: #1f2937; margin: 30px 0 20px;"> </h3>';
      user.plans.supps.forEach((supp: any) => {
        html += `<div style="margin-bottom: 10px; padding: 10px; background: #f0f9ff; border-radius: 6px;">
          <strong>${supp.name || ''}</strong> - ${supp.dosage || ''} ${supp.timing || ''}
        </div>`;
      });
    }

    html += '</div>';
    return html;
  };

  const generateClientReportHTML = (user: User): string => {
    return `
      <div style="font-family: 'Vazirmatn', sans-serif; direction: rtl; padding: 40px; background: white;">
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #3b82f6; padding-bottom: 20px;">
          <h1 style="color: #1f2937; font-size: 28px; margin: 0;">  </h1>
          <h2 style="color: #6b7280; font-size: 20px; margin: 10px 0;">${user.name}</h2>
          <p style="color: #9ca3af; font-size: 14px;">${new Date().toLocaleDateString('fa-IR')}</p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
            <h3 style="color: #1f2937; margin-bottom: 15px;"> </h3>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.name}</strong></div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.gender === 'male' ? '' : ''}</strong></div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.age} </strong></div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.height} </strong></div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.weight} </strong></div>
            <div style="display: flex; justify-content: space-between;"><span>:</span><strong>${user.level || ''}</strong></div>
          </div>

          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
            <h3 style="color: #1f2937; margin-bottom: 15px;"> </h3>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span> :</span><strong>${user.plans?.workouts ? Object.keys(user.plans.workouts).length : 0}</strong></div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span> :</span><strong>${user.plans?.diet ? user.plans.diet.length : 0}</strong></div>
            <div style="display: flex; justify-content: space-between;"><span> :</span><strong>${user.plans?.supps ? user.plans.supps.length : 0}</strong></div>
          </div>
        </div>

        ${user.notes ? `<div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
          <h3 style="color: #1f2937; margin-bottom: 10px;"></h3>
          <p style="color: #6b7280;">${user.notes}</p>
        </div>` : ''}

        ${user.nutritionGoals ? `<div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
          <h3 style="color: #1f2937; margin-bottom: 15px;"> </h3>
          ${user.nutritionGoals.calories ? `<div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span> :</span><strong>${user.nutritionGoals.calories} kcal</strong></div>` : ''}
          ${user.nutritionGoals.protein ? `<div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.nutritionGoals.protein}g</strong></div>` : ''}
          ${user.nutritionGoals.carbs ? `<div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span>:</span><strong>${user.nutritionGoals.carbs}g</strong></div>` : ''}
          ${user.nutritionGoals.fat ? `<div style="display: flex; justify-content: space-between;"><span>:</span><strong>${user.nutritionGoals.fat}g</strong></div>` : ''}
        </div>` : ''}
      </div>
    `;
  };

  const generateProgressHTML = (user: User): string => {
    const calculateBMI = () => {
      if (!user.height || !user.weight) return null;
      const heightInMeters = user.height / 100;
      return (user.weight / (heightInMeters * heightInMeters)).toFixed(1);
    };

    const bmi = calculateBMI();
    const getBMICategory = (bmi: number) => {
      if (bmi < 18.5) return '';
      if (bmi < 25) return '';
      if (bmi < 30) return ' ';
      if (bmi < 35) return '  ';
      if (bmi < 40) return '  ';
      return '  ';
    };

    return `
      <div style="font-family: 'Vazirmatn', sans-serif; direction: rtl; padding: 40px; background: white;">
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #10b981; padding-bottom: 20px;">
          <h1 style="color: #1f2937; font-size: 28px; margin: 0;">   </h1>
          <h2 style="color: #6b7280; font-size: 20px; margin: 10px 0;">${user.name}</h2>
          <p style="color: #9ca3af; font-size: 14px;">${new Date().toLocaleDateString('fa-IR')}</p>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #3b82f6; margin-bottom: 10px;">${bmi || 'N/A'}</div>
            <div style="color: #6b7280; font-size: 14px;">   (BMI)</div>
            ${bmi ? `<div style="color: #9ca3af; font-size: 12px; margin-top: 5px;">${getBMICategory(parseFloat(bmi))}</div>` : ''}
          </div>
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #06b6d4; margin-bottom: 10px;">${user.height || 'N/A'}</div>
            <div style="color: #6b7280; font-size: 14px;"> (cm)</div>
          </div>
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #10b981; margin-bottom: 10px;">${user.weight || 'N/A'}</div>
            <div style="color: #6b7280; font-size: 14px;"> (kg)</div>
          </div>
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #8b5cf6; margin-bottom: 10px;">${user.age || 'N/A'}</div>
            <div style="color: #6b7280; font-size: 14px;"></div>
          </div>
        </div>

        ${bmi ? `<div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin-bottom: 20px; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);">
          <h3 style="color: #1e40af; margin-bottom: 10px;"> BMI</h3>
          <p style="color: #3730a3;">    ${bmi}     ${getBMICategory(parseFloat(bmi))}  .</p>
        </div>` : ''}

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
            <h3 style="color: #065f46; margin-bottom: 10px;"> </h3>
            <p style="color: #047857;">
              ${user.plans?.diet && user.plans.diet.length > 0
                ? ` ${user.plans.diet.length}     .`
                : '      .'}
            </p>
          </div>
          <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
            <h3 style="color: #7c3aed; margin-bottom: 10px;"> </h3>
            <p style="color: #6d28d9;">
              ${user.plans?.workouts && Object.keys(user.plans.workouts).length > 0
                ? ` ${Object.keys(user.plans.workouts).length}   .`
                : '      .'}
            </p>
          </div>
        </div>
      </div>
    `;
  };

  const handleOpenUserModal = (id?: UserId | null) => {
    setEditingUserId(id ?? null);
    setIsUserModalOpen(true);
  };

  const handleCloseUserModal = () => {
    setIsUserModalOpen(false);
    setEditingUserId(null);
  };

  const handleSaveUserForm = async (data: UserInput) => {
    await saveUser(data);

    handleCloseUserModal();
  };

  const handleSelectUser = useCallback((id: UserId) => {
    setActiveUserId(id);
    // Always try to go to info tab - the UI will show loading if data isn't ready
    setStudentsSubTab('info');
    setCurrentTab('students');
  }, []);

  const copyCoachCode = useCallback(() => {
    if (coachCode) {
      navigator.clipboard.writeText(coachCode);
      toast.success('   !');
    }
  }, [coachCode]);

  // ========== Navigation Items ==========
  const navItems = [
    { id: 'dashboard' as TabType, icon: <BarChart3 size={20} />, label: '' },
    { id: 'students' as TabType, icon: <Users size={20} />, label: '', badge: pendingRequests.length },
    { id: 'training' as TabType, icon: <Dumbbell size={20} />, label: ' ' },
    { id: 'nutrition' as TabType, icon: <UtensilsCrossed size={20} />, label: ' ' },
    { id: 'supplements' as TabType, icon: <Pill size={20} />, label: '' },
    { id: 'print' as TabType, icon: <Printer size={20} />, label: '  ' },
    { id: 'profile' as TabType, icon: <Settings size={20} />, label: ' ' },
  ];

  if (!user) return null;

  // ========== Render ==========
  return (
    <div className="min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] flex">
      {/* ==================== Sidebar - Desktop ==================== */}
      <motion.aside
        initial={false}
        animate={{ width: sidebarOpen ? 280 : 88 }}
        transition={{ duration: 0.3, ease: 'easeInOut' }}
        className="hidden lg:flex flex-col h-screen sticky top-0 glass-panel border-l border-[var(--glass-border)] z-30"
      >
        {/* Logo & Brand */}
        <div className="p-5 border-b border-[var(--glass-border)]">
          <div className="flex items-center gap-3">
            <motion.div 
              whileHover={{ rotate: 360 }}
              transition={{ duration: 0.6 }}
              className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-black text-xl shadow-lg shadow-[var(--accent-color)]/30"
            >
              V2
            </motion.div>
            <AnimatePresence>
              {sidebarOpen && (
                <motion.div
                  initial={{ opacity: 0, x: -10 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: -10 }}
                >
                  <h1 className="text-xl font-black bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] bg-clip-text text-transparent">
                    VOMAX
                  </h1>
                  <p className="text-xs text-[var(--text-secondary)] font-medium">  </p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>

        {/* Navigation */}
        <nav className="flex-1 p-4 space-y-1.5 overflow-y-auto custom-scrollbar">
          {navItems.map(item => (
            <NavItem
              key={item.id}
              icon={item.icon}
              label={item.label}
              active={currentTab === item.id}
              onClick={() => setCurrentTab(item.id)}
              badge={item.badge}
              collapsed={!sidebarOpen}
            />
          ))}
        </nav>

        {/* Sidebar Footer */}
        <div className="p-4 border-t border-[var(--glass-border)] space-y-2">
          <AnimatePresence>
            {sidebarOpen && (
              <motion.div
                initial={{ opacity: 0, height: 0 }}
                animate={{ opacity: 1, height: 'auto' }}
                exit={{ opacity: 0, height: 0 }}
                className="space-y-2 overflow-hidden"
              >
                <button
                  onClick={backupData}
                  className="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-500/20 transition font-semibold text-sm"
                >
                  <FileText size={16} />
                   
                </button>
                <label className="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-blue-500/10 text-blue-600 dark:text-blue-400 hover:bg-blue-500/20 transition font-semibold text-sm cursor-pointer">
                  <FileText size={16} />
                   
                  <input type="file" className="hidden" accept=".json" onChange={(e) => e.target.files?.[0] && restoreData(e.target.files[0])} />
                </label>
              </motion.div>
            )}
          </AnimatePresence>
          
          <button
            onClick={() => setSidebarOpen(!sidebarOpen)}
            className="w-full flex items-center justify-center p-2.5 rounded-xl hover:bg-[var(--glass-bg)] text-[var(--text-secondary)] transition"
          >
            <motion.div animate={{ rotate: sidebarOpen ? 0 : 180 }}>
              <ChevronRight size={20} />
            </motion.div>
          </button>
        </div>
      </motion.aside>

      {/* ==================== Mobile Menu Button ==================== */}
      <motion.button
        whileTap={{ scale: 0.95 }}
        onClick={() => setMobileMenuOpen(true)}
        className="lg:hidden fixed top-4 right-4 z-50 p-3 glass-panel rounded-xl shadow-lg"
      >
        <Menu size={24} />
      </motion.button>

      {/* ==================== Mobile Sidebar ==================== */}
      <AnimatePresence>
        {mobileMenuOpen && (
          <>
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={() => setMobileMenuOpen(false)}
              className="lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50"
            />
            <motion.aside
              initial={{ x: '100%' }}
              animate={{ x: 0 }}
              exit={{ x: '100%' }}
              transition={{ type: 'spring', damping: 30, stiffness: 300 }}
              className="lg:hidden fixed right-0 top-0 bottom-0 w-80 glass-panel z-50 flex flex-col shadow-2xl"
            >
              <div className="p-5 border-b border-[var(--glass-border)] flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold">
                    V2
                  </div>
                  <h1 className="text-lg font-black">VOMAX</h1>
                </div>
                <button 
                  onClick={() => setMobileMenuOpen(false)}
                  className="p-2 rounded-xl hover:bg-[var(--glass-bg)] transition"
                >
                  <X size={24} />
                </button>
              </div>
              <nav className="flex-1 p-4 space-y-1.5 overflow-y-auto">
                {navItems.map(item => (
                  <NavItem
                    key={item.id}
                    icon={item.icon}
                    label={item.label}
                    active={currentTab === item.id}
                    onClick={() => {
                      setCurrentTab(item.id);
                      setMobileMenuOpen(false);
                    }}
                    badge={item.badge}
                  />
                ))}
              </nav>
              <div className="p-4 border-t border-[var(--glass-border)]">
                <button
                  onClick={() => { signOut(); setMobileMenuOpen(false); }}
                  className="w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold"
                >
                  <LogOut size={18} />
                    
                </button>
              </div>
            </motion.aside>
          </>
        )}
      </AnimatePresence>

      {/* ==================== Main Content ==================== */}
      <main className="flex-1 flex flex-col min-h-screen overflow-hidden">
        {/* ==================== Header ==================== */}
        <header className="sticky top-0 z-40 glass-panel border-b border-[var(--glass-border)] px-4 sm:px-6 py-4">
          <div className="flex items-center justify-between">
            <div className="pr-12 lg:pr-0">
              <h2 className="text-xl sm:text-2xl font-black text-[var(--text-primary)]">
                {navItems.find(n => n.id === currentTab)?.label || ''}
              </h2>
              <p className="text-xs sm:text-sm text-[var(--text-secondary)] mt-0.5">
                {new Date().toLocaleDateString('fa-IR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
              </p>
            </div>
            
            <div className="flex items-center gap-2 sm:gap-3">
              {/* Notifications */}
              <motion.button 
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={() => { setCurrentTab('students'); setStudentsSubTab('requests'); }}
                className="relative p-2.5 rounded-xl hover:bg-[var(--glass-bg)] transition"
              >
                <Bell size={20} className="text-[var(--text-secondary)]" />
                {pendingRequests.length > 0 && (
                  <motion.span 
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className="absolute -top-1 -right-1 w-5 h-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center font-bold shadow-lg"
                  >
                    {pendingRequests.length}
                  </motion.span>
                )}
              </motion.button>
              
              {/* Supabase Debug */}
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={() => setIsSupabaseDebugOpen(true)}
                className="p-2.5 rounded-xl hover:bg-[var(--glass-bg)] transition"
                title="  Supabase"
              >
                <Database size={20} className="text-blue-500" />
              </motion.button>

              {/* Theme Toggle */}
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={toggleTheme}
                className="p-2.5 rounded-xl hover:bg-[var(--glass-bg)] transition"
              >
                <motion.div
                  initial={false}
                  animate={{ rotate: theme === 'dark' ? 0 : 180 }}
                  transition={{ duration: 0.3 }}
                >
                  {theme === 'dark' ? <Sun size={20} className="text-yellow-400" /> : <Moon size={20} className="text-indigo-500" />}
                </motion.div>
              </motion.button>
              
              {/* User Menu */}
              <div className="hidden sm:flex items-center gap-3 pr-3 border-r border-[var(--glass-border)]">
                <div className="text-left">
                  <p className="text-sm font-bold">{coachProfile.fullName || ''}</p>
                  <p className="text-xs text-[var(--text-secondary)]"></p>
                </div>
                <motion.div 
                  whileHover={{ scale: 1.05 }}
                  className="w-11 h-11 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold shadow-lg cursor-pointer"
                  onClick={() => setCurrentTab('profile')}
                >
                  {coachProfile.fullName?.charAt(0) || ''}
                </motion.div>
              </div>
              
              {/* Logout */}
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={signOut}
                className="hidden sm:flex p-2.5 rounded-xl hover:bg-red-500/10 text-red-500 transition"
                title=""
              >
                <LogOut size={20} />
              </motion.button>
            </div>
          </div>
        </header>

        {/* ==================== Content ==================== */}
        <div className="flex-1 p-4 sm:p-6 overflow-y-auto custom-scrollbar">
          <AnimatePresence mode="wait">
            {/* ==================== Dashboard Tab ==================== */}
            {currentTab === 'dashboard' && (
              <motion.div
                key="dashboard"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                {/* Welcome Message */}
                <motion.div variants={itemVariants} className="glass-card p-6 rounded-2xl border border-[var(--glass-border)] relative overflow-hidden">
                <div className="absolute top-0 left-0 w-64 h-64 rounded-full bg-gradient-to-br from-[var(--accent-color)]/20 to-transparent blur-3xl pointer-events-none" />
                  <div className="relative">
                    <h3 className="text-2xl font-black mb-2">
                       {coachProfile.fullName?.split(' ')[0] || ''} ! 
                    </h3>
                    <p className="text-[var(--text-secondary)]">
                          .  {users.length}   {pendingRequests.length}    .
                    </p>
                  </div>
                </motion.div>

                {/* Stats Grid with React Bits Components */}
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                  <HoverCard variant="glow" className="transform hover:scale-105 transition-all duration-300">
                    <StatCounter
                      value={stats.totalStudents}
                      label=" "
                      icon={<Users className="text-blue-500" />}
                      color="text-blue-600"
                    />
                  </HoverCard>

                  <HoverCard variant="tilt" className="transform hover:scale-105 transition-all duration-300">
                    <StatCounter
                      value={stats.pendingRequests}
                      label="  "
                      icon={<Clock className="text-yellow-500" />}
                      color="text-yellow-600"
                    />
                  </HoverCard>

                  <HoverCard variant="morph" className="transform hover:scale-105 transition-all duration-300">
                    <StatCounter
                      value={stats.acceptedRequests}
                      label="  "
                      icon={<CheckCircle className="text-green-500" />}
                      color="text-green-600"
                    />
                  </HoverCard>

                  <HoverCard variant="border" className="transform hover:scale-105 transition-all duration-300">
                    <StatCounter
                      value={stats.activePrograms}
                      label=" "
                      icon={<Activity className="text-purple-500" />}
                      color="text-purple-600"
                    />
                  </HoverCard>
                </div>

                {/* Coach Code & Quick Actions */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  {/* Coach Code Card */}
                  <motion.div variants={itemVariants} className="lg:col-span-1">
                    <GlowCard className="h-full">
                      <div className="p-6">
                        <div className="flex items-center gap-3 mb-4">
                          <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white">
                            <Award size={20} />
                          </div>
                          <div>
                            <h4 className="font-bold">  </h4>
                            <p className="text-xs text-[var(--text-secondary)]">  </p>
                          </div>
                        </div>
                        
                        {coachCode ? (
                          <motion.div
                            whileHover={{ scale: 1.02 }}
                            onClick={copyCoachCode}
                            className="relative bg-gradient-to-l from-emerald-500/10 to-emerald-500/5 rounded-xl p-4 border border-emerald-500/30 cursor-pointer group"
                          >
                            <p className="text-3xl font-mono font-black text-center tracking-[0.4em] text-emerald-600 dark:text-emerald-400">
                              {coachCode}
                            </p>
                            <div className="absolute inset-0 flex items-center justify-center bg-emerald-500/90 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity">
                              <span className="text-white font-bold flex items-center gap-2">
                                <Copy size={18} />  
                              </span>
                            </div>
                          </motion.div>
                        ) : (
                          <div className="p-4 rounded-xl bg-amber-500/10 border border-amber-500/30">
                            <p className="text-amber-600 dark:text-amber-400 text-sm text-center">
                                     
                            </p>
                          </div>
                        )}
                        
                        <p className="text-xs text-center text-[var(--text-secondary)] mt-3">
                            =     
                        </p>
                      </div>
                    </GlowCard>
                  </motion.div>

                  {/* Quick Actions */}
                  <motion.div variants={itemVariants} className="lg:col-span-2">
                    <h4 className="font-bold mb-4 flex items-center gap-2">
                      <Zap size={18} className="text-[var(--accent-color)]" />
                       
                    </h4>
                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
                      <QuickAction
                        icon={<Plus size={20} />}
                        label=" "
                        onClick={() => handleOpenUserModal()}
                        gradient="linear-gradient(135deg, #3b82f6, #1d4ed8)"
                      />
                      <QuickAction
                        icon={<Dumbbell size={20} />}
                        label=" "
                        onClick={() => setCurrentTab('training')}
                        gradient="linear-gradient(135deg, #8b5cf6, #6d28d9)"
                      />
                      <QuickAction
                        icon={<UtensilsCrossed size={20} />}
                        label=" "
                        onClick={() => setCurrentTab('nutrition')}
                        gradient="linear-gradient(135deg, #10b981, #059669)"
                      />
                      <QuickAction
                        icon={<Printer size={20} />}
                        label=" "
                        onClick={() => setCurrentTab('print')}
                        gradient="linear-gradient(135deg, #f59e0b, #d97706)"
                      />
                    </div>
                  </motion.div>
                </div>

                {/* Recent Requests & Recent Students */}
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  {/* Pending Requests */}
                  <motion.div variants={itemVariants}>
                    <GlowCard>
                      <div className="p-6">
                        <div className="flex items-center justify-between mb-4">
                          <h4 className="font-bold flex items-center gap-2">
                            <Bell size={18} className="text-[var(--accent-color)]" />
                              
                          </h4>
                          {pendingRequests.length > 0 && (
                            <span className="px-2 py-1 rounded-full bg-red-500/20 text-red-500 text-xs font-bold">
                              {pendingRequests.length}
                            </span>
                          )}
                        </div>
                        
                        {pendingRequests.length === 0 ? (
                          <div className="text-center py-8 text-[var(--text-secondary)]">
                            <CheckCircle size={32} className="mx-auto mb-2 opacity-50" />
                            <p>   </p>
                          </div>
                        ) : (
                          <div className="space-y-3">
                            {pendingRequests.slice(0, 3).map((req, idx) => (
                              <motion.div
                                key={req.id}
                                initial={{ opacity: 0, x: -10 }}
                                animate={{ opacity: 1, x: 0 }}
                                transition={{ delay: idx * 0.1 }}
                                className="flex items-center justify-between p-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)]"
                              >
                                <div className="flex items-center gap-3">
                                  <div className="w-9 h-9 rounded-lg bg-gradient-to-br from-[var(--accent-color)]/20 to-[var(--accent-secondary)]/20 flex items-center justify-center">
                                    <UserIcon size={16} className="text-[var(--accent-color)]" />
                                  </div>
                                  <div>
                                    <p className="font-semibold text-sm">{req.client_name || ''}</p>
                                    <p className="text-xs text-[var(--text-secondary)]">
                                      {req.request_type === 'all' ? ' ' : req.request_type}
                                    </p>
                                  </div>
                                </div>
                                <div className="flex gap-1">
                                  <motion.button
                                    whileHover={{ scale: 1.1 }}
                                    whileTap={{ scale: 0.9 }}
                                    onClick={() => handleAcceptRequest(req)}
                                    className="p-2 rounded-lg bg-emerald-500/20 text-emerald-600 hover:bg-emerald-500/30"
                                  >
                                    <CheckCircle size={16} />
                                  </motion.button>
                                  <motion.button
                                    whileHover={{ scale: 1.1 }}
                                    whileTap={{ scale: 0.9 }}
                                    onClick={() => handleRejectRequest(req)}
                                    className="p-2 rounded-lg bg-red-500/20 text-red-500 hover:bg-red-500/30"
                                  >
                                    <XCircle size={16} />
                                  </motion.button>
                                </div>
                              </motion.div>
                            ))}
                          </div>
                        )}
                        
                        {pendingRequests.length > 3 && (
                          <button
                            onClick={() => { setCurrentTab('students'); setStudentsSubTab('requests'); }}
                            className="w-full mt-4 text-sm text-[var(--accent-color)] hover:underline font-semibold"
                          >
                              ({pendingRequests.length})
                          </button>
                        )}
                      </div>
                    </GlowCard>
                  </motion.div>

                  {/* Recent Students */}
                  <motion.div variants={itemVariants}>
                    <GlowCard>
                      <div className="p-6">
                        <div className="flex items-center justify-between mb-4">
                          <h4 className="font-bold flex items-center gap-2">
                            <Users size={18} className="text-[var(--accent-color)]" />
                             
                          </h4>
                          <button
                            onClick={() => setCurrentTab('students')}
                            className="text-xs text-[var(--accent-color)] hover:underline font-semibold"
                          >
                             
                          </button>
                        </div>
                        
                        {users.length === 0 ? (
                          <div className="text-center py-8 text-[var(--text-secondary)]">
                            <Users size={32} className="mx-auto mb-2 opacity-50" />
                            <p>   </p>
                          </div>
                        ) : (
                          <div className="space-y-3">
                            {users.slice(0, 4).map((u, idx) => (
                              <motion.div
                                key={u.id}
                                initial={{ opacity: 0, x: -10 }}
                                animate={{ opacity: 1, x: 0 }}
                                transition={{ delay: idx * 0.1 }}
                                onClick={() => handleSelectUser(u.id)}
                                className="flex items-center justify-between p-3 rounded-xl bg-[var(--glass-bg)] border border-[var(--glass-border)] cursor-pointer hover:border-[var(--accent-color)]/30 transition"
                              >
                                <div className="flex items-center gap-3">
                                  <div className="w-9 h-9 rounded-lg bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-sm">
                                    {u.name.charAt(0)}
                                  </div>
                                  <div>
                                    <p className="font-semibold text-sm">{u.name}</p>
                                    <p className="text-xs text-[var(--text-secondary)]">
                                      {u.nutritionGoals || u.level || ' '}
                                    </p>
                                  </div>
                                </div>
                                <ChevronLeft size={18} className="text-[var(--text-secondary)]" />
                              </motion.div>
                            ))}
                          </div>
                        )}
                      </div>
                    </GlowCard>
                  </motion.div>
                </div>
              </motion.div>
            )}

            {/* ==================== Students Tab ==================== */}
            {currentTab === 'students' && (
              <motion.div
                key="students"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="space-y-6"
              >
                {/* Sub Tabs */}
                <div className="flex flex-wrap gap-2 border-b border-[var(--glass-border)] pb-4">
                  {[
                    { id: 'list' as StudentsSubTab, label: ' ', icon: <Users size={16} /> },
                    { id: 'requests' as StudentsSubTab, label: '', icon: <Bell size={16} />, badge: pendingRequests.length },
                    { id: 'info' as StudentsSubTab, label: ' ', icon: <FileText size={16} />, disabled: !localActiveUser },
                  ].map(tab => (
                    <motion.button
                      key={tab.id}
                      whileHover={{ scale: 1.02 }}
                      whileTap={{ scale: 0.98 }}
                      onClick={() => !tab.disabled && setStudentsSubTab(tab.id)}
                      disabled={tab.disabled}
                      className={`flex items-center gap-2 px-4 py-2.5 rounded-xl font-semibold transition relative ${
                        studentsSubTab === tab.id
                          ? 'bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] text-white shadow-lg'
                          : tab.disabled
                          ? 'text-[var(--text-secondary)]/40 cursor-not-allowed bg-[var(--glass-bg)]'
                          : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)] bg-[var(--glass-bg)] hover:bg-[var(--glass-border)]'
                      }`}
                    >
                      {tab.icon}
                      <span className="hidden sm:inline">{tab.label}</span>
                      {tab.badge !== undefined && tab.badge > 0 && (
                        <span className="w-5 h-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center font-bold">
                          {tab.badge}
                        </span>
                      )}
                    </motion.button>
                  ))}
                </div>

                {/* Students List */}
                {studentsSubTab === 'list' && (
                  <motion.div variants={itemVariants} className="space-y-4">
                    {/* Search & Add */}
                    <div className="flex flex-col sm:flex-row gap-3">
                      <div className="flex-1 relative">
                        <Search size={18} className="absolute right-4 top-1/2 -translate-y-1/2 text-[var(--text-secondary)]" />
                        <input
                          type="text"
                          placeholder="      ..."
                          value={searchTerm}
                          onChange={(e) => { setSearchTerm(e.target.value); setCurrentPage(1); }}
                          className="input-glass pr-12 w-full"
                        />
                      </div>
                      <select
                        value={sortBy}
                        onChange={(e) => setSortBy(e.target.value as 'name' | 'date')}
                        className="input-glass w-full sm:w-40"
                      >
                        <option value="name"> </option>
                        <option value="date"> </option>
                      </select>
                      <motion.button
                        whileHover={{ scale: 1.02 }}
                        whileTap={{ scale: 0.98 }}
                        onClick={() => handleOpenUserModal()}
                        className="flex items-center justify-center gap-2 px-6 py-3 rounded-xl text-white font-bold shadow-lg shadow-[var(--accent-color)]/30"
                        style={{ background: 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))' }}
                      >
                        <Plus size={18} />
                        <span> </span>
                      </motion.button>
                    </div>

                    {/* Users Grid */}
                    {paginatedUsers.length === 0 ? (
                      <EmptyState
                        icon={<Users size={40} />}
                        title={searchTerm ? '  ' : '   '}
                        description={searchTerm ? '    ' : '     '}
                        action={!searchTerm ? { label: ' ', onClick: () => handleOpenUserModal() } : undefined}
                      />
                    ) : (
                      <>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                          {paginatedUsers.map((u, idx) => (
                            <motion.div
                              key={u.id}
                              initial={{ opacity: 0, y: 20 }}
                              animate={{ opacity: 1, y: 0 }}
                              transition={{ delay: idx * 0.05 }}
                            >
                              <GlowCard
                                className={`cursor-pointer ${activeUserId === u.id ? 'ring-2 ring-[var(--accent-color)]' : ''}`}
                                onClick={() => handleSelectUser(u.id)}
                              >
                                <div className="p-4">
                                  {/* Header with avatar and basic info */}
                                  <div className="flex items-start gap-3 mb-3">
                                    <motion.div
                                      className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg shadow-lg"
                                      whileHover={{ scale: 1.1 }}
                                    >
                                      {u.name.charAt(0).toUpperCase()}
                                    </motion.div>
                                    <div className="flex-1 min-w-0">
                                      <h3 className="font-bold text-[var(--text-primary)] truncate">{u.name}</h3>
                                      <p className="text-xs text-[var(--text-secondary)] truncate">
                                        {u.phone || u.email || '   '}
                                      </p>
                                    </div>
                                  </div>

                                  {/* Status badges */}
                                  <div className="flex flex-wrap items-center gap-2 mb-4">
                                    <span className={`px-2 py-1 rounded-lg text-xs font-medium ${
                                      u.level === 'beginner' ? 'bg-green-500/20 text-green-600 dark:text-green-400' :
                                      u.level === 'intermediate' ? 'bg-yellow-500/20 text-yellow-600 dark:text-yellow-400' :
                                      u.level === 'advanced' ? 'bg-orange-500/20 text-orange-600 dark:text-orange-400' :
                                      u.level === 'pro' ? 'bg-red-500/20 text-red-600 dark:text-red-400' :
                                      'bg-gray-500/20 text-gray-600 dark:text-gray-400'
                                    }`}>
                                      {u.level === 'beginner' ? '' :
                                       u.level === 'intermediate' ? '' :
                                       u.level === 'advanced' ? '' :
                                       u.level === 'pro' ? '' :
                                       u.level || ' '}
                                    </span>

                                    {u.gender && (
                                      <span className="px-2 py-1 rounded-lg bg-purple-500/20 text-xs text-purple-600 dark:text-purple-400">
                                        {u.gender === 'male' ? '' : ''}
                                      </span>
                                    )}

                                    {Object.keys(u.plans?.workouts || {}).length > 0 && (
                                      <span className="px-2 py-1 rounded-lg bg-emerald-500/20 text-xs text-emerald-600 dark:text-emerald-400">
                                         
                                      </span>
                                    )}

                                    {u.age && (
                                      <span className="px-2 py-1 rounded-lg bg-blue-500/20 text-xs text-blue-600 dark:text-blue-400">
                                        {u.age} 
                                      </span>
                                    )}
                                  </div>

                                  {/* Action buttons */}
                                  <div className="flex items-center gap-2">
                                    <motion.button
                                      whileHover={{ scale: 1.05 }}
                                      whileTap={{ scale: 0.95 }}
                                      onClick={(e) => {
                                        e.stopPropagation();
                                        handleSelectUser(u.id);
                                      }}
                                      className="flex-1 flex items-center justify-center gap-2 p-2.5 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition text-sm font-medium"
                                      title=" "
                                    >
                                      <Eye size={16} />
                                      
                                    </motion.button>
                                    <motion.button
                                      whileHover={{ scale: 1.05 }}
                                      whileTap={{ scale: 0.95 }}
                                      onClick={(e) => {
                                        e.stopPropagation();
                                        handleOpenUserModal(u.id);
                                      }}
                                      className="p-2.5 rounded-xl bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition"
                                      title=" "
                                    >
                                      <Edit size={16} />
                                    </motion.button>
                                    <motion.button
                                      whileHover={{ scale: 1.05 }}
                                      whileTap={{ scale: 0.95 }}
                                      onClick={(e) => {
                                        e.stopPropagation();
                                        deleteUser(u.id);
                                      }}
                                      className="p-2.5 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition"
                                      title=" "
                                    >
                                      <Trash2 size={16} />
                                    </motion.button>
                                  </div>

                                  {/* Quick stats */}
                                  <div className="mt-3 pt-3 border-t border-[var(--glass-border)]">
                                    <div className="grid grid-cols-3 gap-2 text-center">
                                      <div className="text-xs">
                                        <div className="font-bold text-[var(--text-primary)]">
                                          {Object.keys(u.plans?.workouts || {}).length}
                                        </div>
                                        <div className="text-[var(--text-secondary)]"></div>
                                      </div>
                                      <div className="text-xs">
                                        <div className="font-bold text-[var(--text-primary)]">
                                          {u.plans?.diet?.length || 0}
                                        </div>
                                        <div className="text-[var(--text-secondary)]"></div>
                                      </div>
                                      <div className="text-xs">
                                        <div className="font-bold text-[var(--text-primary)]">
                                          {u.plans?.supps?.length || 0}
                                        </div>
                                        <div className="text-[var(--text-secondary)]"></div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </GlowCard>
                            </motion.div>
                          ))}
                        </div>

                        {/* Pagination */}
                        {totalPages > 1 && (
                          <div className="flex items-center justify-center gap-2 pt-4">
                            <motion.button
                              whileHover={{ scale: 1.05 }}
                              whileTap={{ scale: 0.95 }}
                              onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
                              disabled={currentPage === 1}
                              className="p-2.5 rounded-xl bg-[var(--glass-bg)] hover:bg-[var(--glass-border)] disabled:opacity-40 transition"
                            >
                              <ChevronRight size={18} />
                            </motion.button>
                            
                            <div className="flex items-center gap-1">
                              {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
                                const pageNum = i + 1;
                                return (
                                  <button
                                    key={pageNum}
                                    onClick={() => setCurrentPage(pageNum)}
                                    className={`w-9 h-9 rounded-xl font-semibold transition ${
                                      currentPage === pageNum
                                        ? 'bg-gradient-to-l from-[var(--accent-color)] to-[var(--accent-secondary)] text-white'
                                        : 'bg-[var(--glass-bg)] hover:bg-[var(--glass-border)]'
                                    }`}
                                  >
                                    {pageNum}
                                  </button>
                                );
                              })}
                            </div>
                            
                            <motion.button
                              whileHover={{ scale: 1.05 }}
                              whileTap={{ scale: 0.95 }}
                              onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
                              disabled={currentPage === totalPages}
                              className="p-2.5 rounded-xl bg-[var(--glass-bg)] hover:bg-[var(--glass-border)] disabled:opacity-40 transition"
                            >
                              <ChevronLeft size={18} />
                            </motion.button>
                          </div>
                        )}
                      </>
                    )}
                  </motion.div>
                )}

                {/* Requests */}
                {studentsSubTab === 'requests' && (
                  <motion.div variants={itemVariants} className="space-y-4">
                    {requests.length === 0 ? (
                      <EmptyState
                        icon={<Bell size={40} />}
                        title="   "
                        description="        "
                      />
                    ) : (
                      <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                        {requests.map((req, idx) => (
                          <motion.div
                            key={req.id}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: idx * 0.05 }}
                          >
                            <GlowCard>
                              <div className="p-5">
                                <div className="flex items-start justify-between mb-4">
                                  <div className="flex items-center gap-3">
                                    <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)]/20 to-[var(--accent-secondary)]/20 flex items-center justify-center">
                                      <UserIcon size={22} className="text-[var(--accent-color)]" />
                                    </div>
                                    <div>
                                      <p className="font-bold">{req.client_name || ' '}</p>
                                      <p className="text-xs text-[var(--text-secondary)]">
                                        {req.request_type === 'all' ? '  ' : 
                                         req.request_type === 'training' ? ' ' : 
                                         req.request_type === 'diet' ? ' ' : ' '}
                                      </p>
                                    </div>
                                  </div>
                                  
                                  <span className={`px-3 py-1.5 rounded-full text-xs font-bold ${
                                    req.status === 'pending' 
                                      ? 'bg-amber-500/20 text-amber-600 dark:text-amber-400' 
                                      : req.status === 'accepted'
                                      ? 'bg-emerald-500/20 text-emerald-600 dark:text-emerald-400'
                                      : 'bg-red-500/20 text-red-500'
                                  }`}>
                                    {req.status === 'pending' ? '  ' : req.status === 'accepted' ? '  ' : '  '}
                                  </span>
                                </div>
                                
                                {req.created_at && (
                                  <p className="text-xs text-[var(--text-secondary)] mb-4 flex items-center gap-1">
                                    <Calendar size={12} />
                                    {new Date(req.created_at).toLocaleDateString('fa-IR')}
                                  </p>
                                )}
                                
                                {req.status === 'pending' && (
                                  <div className="flex gap-2">
                                    <motion.button
                                      whileHover={{ scale: 1.02 }}
                                      whileTap={{ scale: 0.98 }}
                                      onClick={() => handleAcceptRequest(req)}
                                      className="flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition"
                                    >
                                      <CheckCircle size={18} />
                                        
                                    </motion.button>
                                    <motion.button
                                      whileHover={{ scale: 1.02 }}
                                      whileTap={{ scale: 0.98 }}
                                      onClick={() => handleRejectRequest(req)}
                                      className="flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-red-500/10 text-red-500 font-semibold hover:bg-red-500/20 transition"
                                    >
                                      <XCircle size={18} />
                                       
                                    </motion.button>
                                  </div>
                                )}

                                {(req.status === 'accepted' || req.status === 'rejected') && (
                                  <motion.button
                                    whileHover={{ scale: 1.02 }}
                                    whileTap={{ scale: 0.98 }}
                                    onClick={() => handleDeleteRequest(req)}
                                    disabled={deletingRequestId === req.id}
                                    className="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-gray-500/10 text-gray-500 font-semibold hover:bg-gray-500/20 transition disabled:opacity-50"
                                  >
                                    {deletingRequestId === req.id ? (
                                      <motion.div
                                        animate={{ rotate: 360 }}
                                        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
                                        className="w-4 h-4 border-2 border-gray-500/30 border-t-gray-500 rounded-full"
                                      />
                                    ) : (
                                      <Trash2 size={18} />
                                    )}
                                     
                                  </motion.button>
                                )}
                              </div>
                            </GlowCard>
                          </motion.div>
                        ))}
                      </div>
                    )}
                  </motion.div>
                )}

                {/* Client Info */}
                {studentsSubTab === 'info' && (
                  localActiveUser ? (
                    <ClientInfoPanel
                      client={clientProfile}
                      loading={profileLoading}
                      onNavigateToTab={(tab) => {
                        setCurrentTab(tab);
                        // Keep activeUser selected for the new tab
                      }}
                    />
                  ) : (
                    <EmptyState
                      icon={<FileText size={40} />}
                      title="  "
                      description="       "
                      action={{ label: '   ', onClick: () => setStudentsSubTab('list') }}
                    />
                  )
                )}
              </motion.div>
            )}

            {/* ==================== Training Tab ==================== */}
            {currentTab === 'training' && (
              <motion.div key="training" {...scaleIn} className="space-y-6">
                {activeUser ? (
                  <>
                    {/* Student Header */}
                    <motion.div
                      initial={{ opacity: 0, y: -10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="glass-card p-4 rounded-2xl border border-[var(--glass-border)]"
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg">
                            {activeUser.name.charAt(0)}
                          </div>
                          <div>
                            <h3 className="text-lg font-bold text-[var(--text-primary)]">{activeUser.name}</h3>
                            <p className="text-sm text-[var(--text-secondary)]">
                              {activeUser.level || ' '}  {activeUser.gender === 'male' ? '' : ''}  {activeUser.age} 
                            </p>
                          </div>
                        </div>
                        <div className="flex items-center gap-2">
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => { setCurrentTab('students'); setStudentsSubTab('info'); }}
                            className="px-4 py-2 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => setActiveUserId(null)}
                            className="px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                        </div>
                      </div>
                    </motion.div>

                    <Suspense fallback={<PanelLoadingFallback />}>
                      <TrainingPanel activeUser={activeUser} onUpdateUser={updateActiveUser} />
                    </Suspense>
                  </>
                ) : (
                  <EmptyState
                    icon={<Dumbbell size={40} />}
                    title="  "
                    description="         "
                    action={{ label: ' ', onClick: () => setCurrentTab('students') }}
                  />
                )}
              </motion.div>
            )}

            {/* ==================== Nutrition Tab ==================== */}
            {currentTab === 'nutrition' && (
              <motion.div key="nutrition" {...scaleIn} className="space-y-6">
                {activeUser ? (
                  <>
                    {/* Student Header */}
                    <motion.div
                      initial={{ opacity: 0, y: -10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="glass-card p-4 rounded-2xl border border-[var(--glass-border)]"
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg">
                            {activeUser.name.charAt(0)}
                          </div>
                          <div>
                            <h3 className="text-lg font-bold text-[var(--text-primary)]">{activeUser.name}</h3>
                            <p className="text-sm text-[var(--text-secondary)]">
                              {activeUser.level || ' '}  {activeUser.gender === 'male' ? '' : ''}  {activeUser.age} 
                            </p>
                          </div>
                        </div>
                        <div className="flex items-center gap-2">
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => { setCurrentTab('students'); setStudentsSubTab('info'); }}
                            className="px-4 py-2 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => setActiveUserId(null)}
                            className="px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                        </div>
                      </div>
                    </motion.div>

                    <Suspense fallback={<PanelLoadingFallback />}>
                      <DietPanel activeUser={activeUser} onUpdateUser={updateActiveUser} />
                    </Suspense>
                  </>
                ) : (
                  <EmptyState
                    icon={<UtensilsCrossed size={40} />}
                    title="  "
                    description="         "
                    action={{ label: ' ', onClick: () => setCurrentTab('students') }}
                  />
                )}
              </motion.div>
            )}

            {/* ==================== Supplements Tab ==================== */}
            {currentTab === 'supplements' && (
              <motion.div key="supplements" {...scaleIn} className="space-y-6">
                {activeUser ? (
                  <>
                    {/* Student Header */}
                    <motion.div
                      initial={{ opacity: 0, y: -10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="glass-card p-4 rounded-2xl border border-[var(--glass-border)]"
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg">
                            {activeUser.name.charAt(0)}
                          </div>
                          <div>
                            <h3 className="text-lg font-bold text-[var(--text-primary)]">{activeUser.name}</h3>
                            <p className="text-sm text-[var(--text-secondary)]">
                              {activeUser.level || ' '}  {activeUser.gender === 'male' ? '' : ''}  {activeUser.age} 
                            </p>
                          </div>
                        </div>
                        <div className="flex items-center gap-2">
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => { setCurrentTab('students'); setStudentsSubTab('info'); }}
                            className="px-4 py-2 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => setActiveUserId(null)}
                            className="px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                        </div>
                      </div>
                    </motion.div>

                    <Suspense fallback={<PanelLoadingFallback />}>
                      <SupplementsPanel activeUser={activeUser} onUpdateUser={updateActiveUser} />
                    </Suspense>
                  </>
                ) : (
                  <EmptyState
                    icon={<Pill size={40} />}
                    title="  "
                    description="        "
                    action={{ label: ' ', onClick: () => setCurrentTab('students') }}
                  />
                )}
              </motion.div>
            )}

            {/* ==================== Print Tab ==================== */}
            {currentTab === 'print' && (
              <motion.div key="print" {...scaleIn} className="space-y-6">
                {activeUser ? (
                  <>
                    {/* Student Header */}
                    <motion.div
                      initial={{ opacity: 0, y: -10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="glass-card p-4 rounded-2xl border border-[var(--glass-border)]"
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold text-lg">
                            {activeUser.name.charAt(0)}
                          </div>
                          <div>
                            <h3 className="text-lg font-bold text-[var(--text-primary)]">{activeUser.name}</h3>
                            <p className="text-sm text-[var(--text-secondary)]">
                              {activeUser.level || ' '}  {activeUser.gender === 'male' ? '' : ''}  {activeUser.age} 
                            </p>
                          </div>
                        </div>
                        <div className="flex items-center gap-2">
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => { setCurrentTab('students'); setStudentsSubTab('info'); }}
                            className="px-4 py-2 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] hover:bg-[var(--accent-color)]/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                          <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => setActiveUserId(null)}
                            className="px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition font-semibold text-sm"
                          >
                             
                          </motion.button>
                        </div>
                      </div>
                    </motion.div>

                    {/* Print Panel */}
                    <PrintPanel user={activeUser} onGeneratePrint={handleGeneratePrint} />
                  </>
                ) : (
                  <EmptyState
                    icon={<Printer size={40} />}
                    title="  "
                    description="        "
                    action={{ label: ' ', onClick: () => setCurrentTab('students') }}
                  />
                )}
              </motion.div>
            )}

            {/* ==================== Profile Tab ==================== */}
            {currentTab === 'profile' && (
              <motion.div
                key="profile"
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                exit={{ opacity: 0 }}
                className="max-w-4xl mx-auto space-y-6"
              >
                {/* Coach Code Card */}
                <motion.div variants={itemVariants}>
                  <GlowCard glowColor="#f59e0b">
                    <div className="p-6">
                      <div className="flex items-center gap-3 mb-5">
                        <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white shadow-lg">
                          <Award size={24} />
                        </div>
                        <div>
                          <h3 className="text-lg font-bold">  </h3>
                          <p className="text-sm text-[var(--text-secondary)]">  =     </p>
                        </div>
                      </div>
                      
                      {coachCode ? (
                        <motion.div
                          whileHover={{ scale: 1.01 }}
                          onClick={copyCoachCode}
                          className="relative bg-gradient-to-l from-emerald-500/10 to-emerald-500/5 rounded-2xl p-6 border-2 border-emerald-500/30 cursor-pointer group"
                        >
                          <p className="text-5xl font-mono font-black text-center tracking-[0.5em] text-emerald-600 dark:text-emerald-400">
                            {coachCode}
                          </p>
                          <div className="absolute inset-0 flex items-center justify-center bg-emerald-500/95 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300">
                            <span className="text-white font-bold text-lg flex items-center gap-3">
                              <Copy size={24} />    
                            </span>
                          </div>
                        </motion.div>
                      ) : (
                        <div className="p-6 rounded-2xl bg-amber-500/10 border-2 border-amber-500/30 text-center">
                          <Clock size={32} className="mx-auto mb-3 text-amber-500" />
                          <p className="text-amber-600 dark:text-amber-400 font-semibold">
                                        
                          </p>
                        </div>
                      )}
                    </div>
                  </GlowCard>
                </motion.div>

                {/* Personal Info */}
                <motion.div variants={itemVariants}>
                  <GlowCard>
                    <div className="p-6">
                      <h3 className="text-lg font-bold mb-6 flex items-center gap-3">
                        <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white">
                          <UserIcon size={20} />
                        </div>
                         
                      </h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"> </label>
                          <input
                            type="text"
                            value={coachProfile.fullName}
                            onChange={(e) => setCoachProfile(p => ({ ...p, fullName: e.target.value }))}
                            className="input-glass"
                            placeholder="   "
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Phone size={14} className="inline ml-1" />
                              *
                          </label>
                          <input
                            type="tel"
                            value={coachProfile.phone}
                            onChange={(e) => setCoachProfile(p => ({ ...p, phone: e.target.value }))}
                            className="input-glass"
                            placeholder="09123456789"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Mail size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="email"
                            value={coachProfile.email}
                            onChange={(e) => setCoachProfile(p => ({ ...p, email: e.target.value }))}
                            className="input-glass"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"> </label>
                          <input
                            type="text"
                            value={coachProfile.nationalId}
                            onChange={(e) => setCoachProfile(p => ({ ...p, nationalId: e.target.value }))}
                            className="input-glass"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"> </label>
                          <input
                            type="date"
                            value={coachProfile.birthDate}
                            onChange={(e) => setCoachProfile(p => ({ ...p, birthDate: e.target.value }))}
                            className="input-glass"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <MapPin size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.city}
                            onChange={(e) => setCoachProfile(p => ({ ...p, city: e.target.value }))}
                            className="input-glass"
                          />
                        </div>
                        <div className="md:col-span-2">
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"></label>
                          <textarea
                            value={coachProfile.address}
                            onChange={(e) => setCoachProfile(p => ({ ...p, address: e.target.value }))}
                            className="input-glass resize-none"
                            rows={2}
                          />
                        </div>
                      </div>
                    </div>
                  </GlowCard>
                </motion.div>

                {/* Professional Info */}
                <motion.div variants={itemVariants}>
                  <GlowCard>
                    <div className="p-6">
                      <h3 className="text-lg font-bold mb-6 flex items-center gap-3">
                        <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white">
                          <Briefcase size={20} />
                        </div>
                         
                      </h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Target size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.specialization}
                            onChange={(e) => setCoachProfile(p => ({ ...p, specialization: e.target.value }))}
                            className="input-glass"
                            placeholder=":   ..."
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Award size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.certifications}
                            onChange={(e) => setCoachProfile(p => ({ ...p, certifications: e.target.value }))}
                            className="input-glass"
                            placeholder=": NASM, ACE, ISSA..."
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Star size={14} className="inline ml-1" />
                              ()
                          </label>
                          <input
                            type="text"
                            value={coachProfile.experience}
                            onChange={(e) => setCoachProfile(p => ({ ...p, experience: e.target.value }))}
                            className="input-glass"
                            placeholder=": 5 "
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <GraduationCap size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.education}
                            onChange={(e) => setCoachProfile(p => ({ ...p, education: e.target.value }))}
                            className="input-glass"
                            placeholder=":   "
                          />
                        </div>
                        <div className="md:col-span-2">
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Heart size={14} className="inline ml-1" />
                            
                          </label>
                          <textarea
                            value={coachProfile.bio}
                            onChange={(e) => setCoachProfile(p => ({ ...p, bio: e.target.value }))}
                            className="input-glass resize-none"
                            rows={4}
                            placeholder="      ..."
                          />
                        </div>
                      </div>
                    </div>
                  </GlowCard>
                </motion.div>

                {/* Social Links */}
                <motion.div variants={itemVariants}>
                  <GlowCard>
                    <div className="p-6">
                      <h3 className="text-lg font-bold mb-6 flex items-center gap-3">
                        <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center text-white">
                          <Globe size={20} />
                        </div>
                         
                      </h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <Instagram size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.instagram}
                            onChange={(e) => setCoachProfile(p => ({ ...p, instagram: e.target.value }))}
                            className="input-glass"
                            placeholder="@username"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]">
                            <MessageCircle size={14} className="inline ml-1" />
                            
                          </label>
                          <input
                            type="text"
                            value={coachProfile.telegram}
                            onChange={(e) => setCoachProfile(p => ({ ...p, telegram: e.target.value }))}
                            className="input-glass"
                            placeholder="@username"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"></label>
                          <input
                            type="text"
                            value={coachProfile.whatsapp}
                            onChange={(e) => setCoachProfile(p => ({ ...p, whatsapp: e.target.value }))}
                            className="input-glass"
                            placeholder="09123456789"
                            dir="ltr"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-bold mb-2 text-[var(--text-secondary)]"></label>
                          <input
                            type="url"
                            value={coachProfile.website}
                            onChange={(e) => setCoachProfile(p => ({ ...p, website: e.target.value }))}
                            className="input-glass"
                            placeholder="https://example.com"
                            dir="ltr"
                          />
                        </div>
                      </div>
                    </div>
                  </GlowCard>
                </motion.div>

                {/* Save Button */}
                <motion.button
                  variants={itemVariants}
                  whileHover={{ scale: 1.01 }}
                  whileTap={{ scale: 0.99 }}
                  onClick={handleSaveCoachProfile}
                  disabled={savingProfile}
                  className="w-full py-4 rounded-2xl text-white font-bold text-lg shadow-xl shadow-[var(--accent-color)]/30 transition-all disabled:opacity-50"
                  style={{ background: 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))' }}
                >
                  {savingProfile ? (
                    <span className="flex items-center justify-center gap-2">
                      <motion.div
                        animate={{ rotate: 360 }}
                        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}
                        className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full"
                      />
                        ...
                    </span>
                  ) : (
                    ' '
                  )}
                </motion.button>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* ==================== Active User Footer ==================== */}
        <AnimatePresence>
          {activeUser && !['dashboard', 'profile'].includes(currentTab) && (
            <motion.div
              initial={{ y: 100, opacity: 0 }}
              animate={{ y: 0, opacity: 1 }}
              exit={{ y: 100, opacity: 0 }}
              className="sticky bottom-0 glass-panel border-t border-[var(--glass-border)] px-4 sm:px-6 py-3"
            >
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--accent-color)] to-[var(--accent-secondary)] flex items-center justify-center text-white font-bold shadow-lg">
                    {activeUser.name.charAt(0)}
                  </div>
                  <div>
                    <p className="font-bold">{activeUser.name}</p>
                    <p className="text-xs text-[var(--text-secondary)]">  </p>
                  </div>
                </div>
                <div className="flex items-center gap-2">
                  <motion.button
                    whileHover={{ scale: 1.05 }}
                    whileTap={{ scale: 0.95 }}
                    onClick={() => { setCurrentTab('students'); setStudentsSubTab('info'); }}
                    className="px-4 py-2 rounded-xl bg-[var(--accent-color)]/10 text-[var(--accent-color)] font-semibold text-sm hover:bg-[var(--accent-color)]/20 transition"
                  >
                     
                  </motion.button>
                  <motion.button
                    whileHover={{ scale: 1.05 }}
                    whileTap={{ scale: 0.95 }}
                    onClick={() => setActiveUserId(null)}
                    className="px-4 py-2 rounded-xl bg-red-500/10 text-red-500 font-semibold text-sm hover:bg-red-500/20 transition"
                  >
                     
                  </motion.button>
                </div>
              </div>
            </motion.div>
          )}
        </AnimatePresence>
      </main>

      {/* React Bits Floating Action Button */}
      <ExpandableFab
        actions={[
          {
            icon: <Plus className="w-4 h-4" />,
            label: "  ",
            onClick: () => {
              setEditingUserId(null);
              setIsUserModalOpen(true);
            }
          },
          {
            icon: <Users className="w-4 h-4" />,
            label: " ",
            onClick: () => setCurrentTab('requests')
          },
          {
            icon: <Printer className="w-4 h-4" />,
            label: " ",
            onClick: () => setCurrentTab('reports')
          }
        ]}
        mainIcon={<Plus className="w-5 h-5" />}
        tooltip="  "
        position="bottom-right"
      />

      {/* ==================== Modals ==================== */}
      <AnimatePresence>
        {isUserModalOpen && (
          <UserModal
            isOpen={isUserModalOpen}
            onClose={handleCloseUserModal}
            onSave={handleSaveUserForm}
            initialData={editingUserId ? users.find(u => u.id === editingUserId) || null : null}
          />
        )}
      </AnimatePresence>

      {printData && (
        <PrintModal
          data={printData}
          onClose={closePrintModal}
          onDownload={downloadPDF}
        />
      )}

      {/* Supabase Debug Modal */}
      <SupabaseDebug
        isOpen={isSupabaseDebugOpen}
        onClose={() => setIsSupabaseDebugOpen(false)}
      />
    </div>
  );
};

export default CoachDashboard;


==================================================
FILE: .\src\pages\Dashboard.tsx
==================================================
import React, { Suspense, lazy } from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

// Code Splitting - Lazy load dashboards
const CoachDashboard = lazy(() => import('./CoachDashboard'));
const ClientDashboard = lazy(() => import('./ClientDashboard'));

const LoadingFallback = () => (
  <div className="flex h-screen items-center justify-center bg-[var(--bg-primary)]">
    <div className="text-center space-y-4">
      <div className="inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-[var(--accent-color)] border-r-transparent"></div>
      <p className="text-sm text-[var(--text-secondary)]">  ...</p>
    </div>
  </div>
);

const Dashboard: React.FC = () => {
  const { user, role, loading, profile } = useAuth();

  if (loading) {
    return <LoadingFallback />;
  }

  if (!user) {
    return <Navigate to="/login" replace />;
  }

  if (role === 'coach' || profile?.role === 'coach') {
    return (
      <Suspense fallback={<LoadingFallback />}>
        <CoachDashboard />
      </Suspense>
    );
  }

  if (role === 'client' || profile?.role === 'client') {
    return (
      <Suspense fallback={<LoadingFallback />}>
        <ClientDashboard />
      </Suspense>
    );
  }

  return <div className="p-4">   .</div>;
};

export default Dashboard;



==================================================
FILE: .\src\pages\LoginPage.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { useUI } from '../context/UIContext';
import { useRole } from '../hooks/useRole';
import { toast } from 'react-hot-toast';
import { Link, useNavigate } from 'react-router-dom';
import { Sun, Moon, Loader2, Eye, EyeOff, AlertCircle } from 'lucide-react';
import LightRays from '../components/backgrounds/LightRays';

const LoginPage: React.FC = () => {
  const { signInWithPassword, signOut, loading, user } = useAuth();
  const { toggleTheme, theme } = useUI();
  const { role: userRole, loading: roleLoading } = useRole();
  const [activeTab, setActiveTab] = useState<'coach' | 'client'>('coach');
  const [coachId, setCoachId] = useState('');
  const [coachPass, setCoachPass] = useState('');
  const [clientId, setClientId] = useState('');
  const [clientPass, setClientPass] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [rememberMe, setRememberMe] = useState(false);
  const navigate = useNavigate();

  useEffect(() => {
    if (roleLoading) return;
    if (user && userRole) {
      navigate('/dashboard', { replace: true });
      return;
    }
    if (user && !userRole) {
      toast.error('   .    .');
      signOut();
    }
  }, [user, userRole, roleLoading, navigate, signOut]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);
    
    const identifier = activeTab === 'coach' ? coachId : clientId;
    const password = activeTab === 'coach' ? coachPass : clientPass;

    //  
    if (!identifier.trim()) {
      setError('     ');
      return;
    }

    if (!password || password.length < 6) {
      setError('    6  ');
      return;
    }

    try {
      await signInWithPassword(identifier, password);
      
      //  role    
      //    useEffect  
      toast.success(' ');
      
      //    password  
      if (activeTab === 'coach') {
        setCoachPass('');
      } else {
        setClientPass('');
      }
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '  ';
      setError(errorMessage);
      toast.error(errorMessage);
      
      //    password   
      if (activeTab === 'coach') {
        setCoachPass('');
      } else {
        setClientPass('');
      }
    }
  };

  return (
    <>
      <LightRays speed="slow" intensity="normal" />
      <div className="min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] flex items-center justify-center px-3 sm:px-4 py-4 sm:py-8 transition-colors relative z-10">
        <div className="w-full max-w-md glass-panel rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 space-y-4 sm:space-y-6 relative animate-fade-in">
        <button
          type="button"
          onClick={toggleTheme}
          className="absolute left-4 top-4 p-2 rounded-xl hover:bg-[var(--text-primary)]/10 transition text-[var(--text-secondary)] hover:text-[var(--accent-color)]"
          aria-label=" "
        >
          {theme === 'dark' ? <Sun size={18} /> : <Moon size={18} />}
        </button>
        <div className="text-center space-y-2 pt-8">
          <h1 className="text-2xl md:text-3xl font-bold text-[var(--text-primary)]">   FlexPro</h1>
          <p className="text-sm text-[var(--text-secondary)]">         .</p>
        </div>
        <div className="flex gap-2 text-sm font-semibold" role="tablist" aria-label=" ">
          <button
            type="button"
            role="tab"
            aria-selected={activeTab === 'coach'}
            aria-controls="coach-login-panel"
            id="coach-tab"
            onClick={() => setActiveTab('coach')}
            className={`flex-1 rounded-xl px-4 py-3 border-2 transition-all duration-300 ${
              activeTab === 'coach'
                ? 'border-[var(--accent-color)] text-[var(--accent-color)] bg-[var(--accent-color)]/10 shadow-lg shadow-[var(--accent-color)]/20'
                : 'border-[var(--glass-border)] text-[var(--text-secondary)] bg-[var(--glass-bg)] hover:border-[var(--accent-color)]/50'
            }`}
          >
             
          </button>
          <button
            type="button"
            role="tab"
            aria-selected={activeTab === 'client'}
            aria-controls="client-login-panel"
            id="client-tab"
            onClick={() => setActiveTab('client')}
            className={`flex-1 rounded-xl px-4 py-3 border-2 transition-all duration-300 ${
              activeTab === 'client'
                ? 'border-[var(--accent-color)] text-[var(--accent-color)] bg-[var(--accent-color)]/10 shadow-lg shadow-[var(--accent-color)]/20'
                : 'border-[var(--glass-border)] text-[var(--text-secondary)] bg-[var(--glass-bg)] hover:border-[var(--accent-color)]/50'
            }`}
          >
             
          </button>
        </div>
        <form className="space-y-4" onSubmit={handleSubmit} role="tabpanel" id={activeTab === 'coach' ? 'coach-login-panel' : 'client-login-panel'} aria-labelledby={activeTab === 'coach' ? 'coach-tab' : 'client-tab'}>
          <div>
            <label htmlFor="login-identifier" className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block">   </label>
            <input
              id="login-identifier"
              type="text"
              autoComplete="username"
              className="input-glass"
              value={activeTab === 'coach' ? coachId : clientId}
              onChange={(e) => {
                setError(null);
                activeTab === 'coach' ? setCoachId(e.target.value) : setClientId(e.target.value);
              }}
              required
              disabled={loading}
              aria-required="true"
              aria-label="   "
              placeholder="example@mail.com  username"
            />
          </div>
          <div>
            <label htmlFor="login-password" className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block"> </label>
            <div className="relative">
              <input
                id="login-password"
                type={showPassword ? 'text' : 'password'}
                autoComplete="current-password"
                className="input-glass pr-10"
                value={activeTab === 'coach' ? coachPass : clientPass}
                onChange={(e) => activeTab === 'coach' ? setCoachPass(e.target.value) : setClientPass(e.target.value)}
                required
                minLength={6}
                disabled={loading}
                aria-required="true"
                aria-label=" "
                placeholder=""
              />
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-secondary)] hover:text-[var(--accent-color)] transition"
                aria-label={showPassword ? '   ' : '  '}
              >
                {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
              </button>
            </div>
          </div>
          
          {error && (
            <div className="flex items-center gap-2 text-sm text-red-400 bg-red-400/10 border border-red-400/20 rounded-lg p-3">
              <AlertCircle size={16} />
              <span>{error}</span>
            </div>
          )}
          
          <div className="flex items-center justify-between text-xs">
            <label className="flex items-center gap-2 cursor-pointer text-[var(--text-secondary)] hover:text-[var(--accent-color)] transition">
              <input
                type="checkbox"
                checked={rememberMe}
                onChange={(e) => setRememberMe(e.target.checked)}
                className="w-4 h-4 rounded border-[var(--glass-border)] bg-[var(--glass-bg)] text-[var(--accent-color)] focus:ring-[var(--accent-color)]"
              />
              <span>   </span>
            </label>
            <Link
              to="/forgot-password"
              className="text-[var(--accent-color)] hover:text-[var(--accent-secondary)] font-semibold transition"
            >
                
            </Link>
          </div>
          <button
            type="submit"
            disabled={loading}
            className="w-full btn-glass text-white font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
            style={{ background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
            aria-label={loading ? '  ...' : '  '}
            aria-busy={loading}
          >
            {loading ? (
              <>
                <Loader2 size={18} className="animate-spin" />
                <span>  ...</span>
              </>
            ) : (
              ''
            )}
          </button>
        </form>
        <div className="text-center text-xs text-[var(--text-secondary)]">
            <Link to="/register" className="text-[var(--accent-color)] hover:text-[var(--accent-secondary)] font-semibold transition"></Link>
        </div>
      </div>
    </div>
    </>
  );
};

export default LoginPage;



==================================================
FILE: .\src\pages\RegisterPage.tsx
==================================================
import React, { useEffect, useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { useApp } from '../context/AppContext';
import { toast } from 'react-hot-toast';
import { Link, useNavigate } from 'react-router-dom';
import { Sun, Moon, Loader2 } from 'lucide-react';

const RegisterPage: React.FC = () => {
  const { register, signOut, loading, user } = useAuth();
  const { toggleTheme, theme } = useApp();
  const [fullName, setFullName] = useState('');
  const [username, setUsername] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [role, setRole] = useState<'coach' | 'client'>('coach');
  const navigate = useNavigate();

  useEffect(() => {
    if (user) navigate('/dashboard', { replace: true });
  }, [user, navigate]);

  const validateInputs = (): string | null => {
    // Validation  
    if (!fullName.trim() || fullName.trim().length < 2) {
      return '    2  ';
    }
    if (fullName.trim().length > 100) {
      return '     100  ';
    }
    
    // Validation  
    const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
    if (!usernameRegex.test(username)) {
      return '   3  20           ';
    }
    
    // Validation  (   )
    if (email.trim().length > 0) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        return '    ';
      }
    }
    
    // Validation  
    if (password.length < 8) {
      return '    8  ';
    }
    if (password.length > 128) {
      return '     128  ';
    }
    //    
    const hasUpperCase = /[A-Z]/.test(password);
    const hasLowerCase = /[a-z]/.test(password);
    const hasNumber = /[0-9]/.test(password);
    if (!hasUpperCase || !hasLowerCase || !hasNumber) {
      return '         ';
    }
    
    return null;
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    // Validation
    const validationError = validateInputs();
    if (validationError) {
      toast.error(validationError);
      return;
    }
    
    try {
      await register({ email, password, fullName, role, username });
      toast.success(' ');
      navigate('/dashboard', { replace: true });
    } catch (err: unknown) {
      const errorMessage = err instanceof Error ? err.message : '   ';
      toast.error(errorMessage || '  ');
      if (import.meta.env.DEV) console.error('Registration error:', err);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-[var(--bg-primary)] text-[var(--text-primary)] px-3 sm:px-4 py-4 sm:py-8 transition-colors">
      <div className="w-full max-w-md glass-panel rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 space-y-4 sm:space-y-6 relative animate-fade-in">
        <button
          type="button"
          onClick={toggleTheme}
          className="absolute left-4 top-4 p-2 rounded-xl hover:bg-[var(--text-primary)]/10 transition text-[var(--text-secondary)] hover:text-[var(--accent-color)]"
          aria-label=" "
        >
          {theme === 'dark' ? <Sun size={18} /> : <Moon size={18} />}
        </button>
        <div className="text-center space-y-2 pt-8">
          <h1 className="text-2xl md:text-3xl font-bold text-[var(--text-primary)]">  </h1>
          <p className="text-sm text-[var(--text-secondary)]">     FlexPro.</p>
        </div>
        <form className="space-y-4" onSubmit={handleSubmit}>
          <div>
            <label className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block">  *</label>
            <input
              type="text"
              className="input-glass"
              value={fullName}
              onChange={(e) => setFullName(e.target.value)}
              required
              placeholder="   "
              aria-required="true"
            />
          </div>
          <div>
            <label className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block">  *</label>
            <input
              type="text"
              className="input-glass"
              value={username}
              onChange={(e) => {
                const value = e.target.value.trim();
                //       
                if (value === '' || /^[a-zA-Z0-9_]*$/.test(value)) {
                  setUsername(value);
                }
              }}
              required
              minLength={3}
              maxLength={20}
              pattern="[a-zA-Z0-9_]{3,20}"
              title="   3  20           "
              placeholder="username"
              aria-required="true"
            />
            <p className="text-[10px] text-[var(--text-secondary)] mt-1.5 opacity-70">3  20       _</p>
          </div>
          <div>
            <label className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block"> ()</label>
            <input
              type="email"
              className="input-glass"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="example@mail.com ()"
            />
          </div>
          <div>
            <label className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block">  *</label>
            <input
              type="password"
              className="input-glass"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              minLength={8}
              maxLength={128}
              placeholder=""
              aria-required="true"
            />
            <p className="text-[10px] text-[var(--text-secondary)] mt-1.5 opacity-70"> 8       </p>
          </div>
          <div>
            <label className="text-xs font-semibold text-[var(--text-secondary)] mb-2 block"> *</label>
            <select
              className="input-glass"
              value={role}
              onChange={(e) => setRole(e.target.value as 'coach' | 'client')}
              aria-required="true"
            >
              <option value="coach"></option>
              <option value="client"></option>
            </select>
          </div>
          <button
            type="submit"
            disabled={loading}
            className="w-full btn-glass text-white font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
            style={{ background: `linear-gradient(135deg, var(--accent-color), var(--accent-secondary))` }}
            aria-label={loading ? '  ...' : ''}
            aria-busy={loading}
          >
            {loading ? (
              <>
                <Loader2 size={18} className="animate-spin" />
                <span>  ...</span>
              </>
            ) : (
              ''
            )}
          </button>
        </form>
        <div className="text-center text-xs text-[var(--text-secondary)]">
            <Link to="/login" className="text-[var(--accent-color)] hover:text-[var(--accent-secondary)] font-semibold transition"></Link>
        </div>
        {user && (
          <div className="text-center mt-1">
            <button
              type="button"
              onClick={() => signOut().then(() => navigate('/login', { replace: true }))}
              className="text-xs text-red-400 hover:text-red-500 font-semibold transition"
            >
                
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default RegisterPage;



==================================================
FILE: .\src\test\setup.ts
==================================================
import '@testing-library/jest-dom';

// Mock Supabase client
import { vi } from 'vitest';

vi.mock('../lib/supabaseClient', () => ({
  supabase: {
    auth: {
      getUser: vi.fn(),
      getSession: vi.fn(),
      signInWithPassword: vi.fn(),
      signOut: vi.fn(),
      onAuthStateChange: vi.fn(),
    },
    from: vi.fn(() => ({
      select: vi.fn(() => ({
        eq: vi.fn(() => ({
          single: vi.fn(),
          order: vi.fn(),
        })),
        order: vi.fn(),
      })),
      insert: vi.fn(),
      update: vi.fn(),
      upsert: vi.fn(),
      delete: vi.fn(),
    })),
    functions: {
      invoke: vi.fn(),
    },
  },
}));

// Mock environment variables
Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: vi.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: vi.fn(), // deprecated
    removeListener: vi.fn(), // deprecated
    addEventListener: vi.fn(),
    removeEventListener: vi.fn(),
    dispatchEvent: vi.fn(),
  })),
});

// Mock IntersectionObserver
global.IntersectionObserver = vi.fn().mockImplementation(() => ({
  observe: vi.fn(),
  unobserve: vi.fn(),
  disconnect: vi.fn(),
}));

// Mock ResizeObserver
global.ResizeObserver = vi.fn().mockImplementation(() => ({
  observe: vi.fn(),
  unobserve: vi.fn(),
  disconnect: vi.fn(),
}));








==================================================
FILE: .\src\types\database.ts
==================================================

Error reading .\src\types\database.ts: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte

==================================================
FILE: .\src\types\index.ts
==================================================
export * from './types';



==================================================
FILE: .\src\types\interactive.ts
==================================================
// ============================================
// Interactive Features Types for FlexPro v2
// ============================================

// ========== Chat Types ==========
export interface Message {
  id: string;
  sender_id: string;
  receiver_id: string;
  content: string;
  is_read: boolean;
  created_at: string;
  updated_at: string;
}

export interface ChatUser {
  id: string;
  name: string;
  avatar?: string;
  lastMessage?: Message;
  unreadCount: number;
}

export interface ChatConversation {
  otherUser: ChatUser;
  messages: Message[];
  hasMore: boolean;
  lastMessageDate?: string;
}

// ========== Diet Templates Types ==========
export interface DietTemplate {
  id: string;
  coach_id: string;
  name: string;
  description?: string;
  diet_data: any[]; // DietItem array
  diet_rest_data?: any[]; // DietItem array for rest days
  is_public: boolean;
  created_at: string;
  updated_at: string;
}

// ========== Workout Logs Types ==========
export interface WorkoutLog {
  id: string;
  user_id: string;
  workout_date: string;
  exercise_name: string;
  set_number: number;
  reps_performed?: number;
  weight_used?: number;
  rpe?: number; // 1-10 scale
  notes?: string;
  completed: boolean;
  created_at: string;
  updated_at: string;
}

export interface WorkoutSession {
  date: string;
  exercises: WorkoutLog[];
  totalSets: number;
  completedSets: number;
  duration?: number; // in minutes
}

export interface ActiveWorkoutSet {
  exerciseName: string;
  setNumber: number;
  plannedReps: number;
  plannedWeight?: number;
  actualReps?: number;
  actualWeight?: number;
  rpe?: number;
  completed: boolean;
  notes?: string;
}

// ========== Progress Photos Types ==========
export interface ProgressPhoto {
  id: string;
  user_id: string;
  photo_url: string;
  photo_date: string;
  pose_type: 'front' | 'back' | 'side' | 'other';
  weight?: number;
  height?: number;
  body_fat_percentage?: number;
  notes?: string;
  is_private: boolean;
  created_at: string;
  updated_at: string;
}

export interface PhotoComparison {
  before: ProgressPhoto;
  after: ProgressPhoto;
  weightChange?: number;
  dateDifference: number; // in days
}

// ========== Chat Hook Types ==========
export interface UseChatReturn {
  messages: Message[];
  isLoading: boolean;
  error: string | null;
  sendMessage: (content: string) => Promise<void>;
  markAsRead: () => Promise<void>;
  loadMore: () => void;
  hasMore: boolean;
  isTyping: boolean;
  setTyping: (typing: boolean) => void;
}

// ========== Workout Log Hook Types ==========
export interface UseWorkoutLogReturn {
  logs: WorkoutLog[];
  sessions: WorkoutSession[];
  saveLog: (log: Omit<WorkoutLog, 'id' | 'created_at' | 'updated_at'>) => Promise<void>;
  saveSession: (session: WorkoutSession) => Promise<void>;
  getLogsForDate: (date: string) => WorkoutLog[];
  getLogsForExercise: (exerciseName: string) => WorkoutLog[];
  isLoading: boolean;
  error: string | null;
}

// ========== Progress Photos Hook Types ==========
export interface UseProgressPhotosReturn {
  photos: ProgressPhoto[];
  uploadPhoto: (file: File, metadata: Partial<ProgressPhoto>) => Promise<void>;
  deletePhoto: (photoId: string) => Promise<void>;
  getPhotosByDateRange: (startDate: string, endDate: string) => ProgressPhoto[];
  getComparisons: () => PhotoComparison[];
  isLoading: boolean;
  error: string | null;
}

// ========== Diet Templates Hook Types ==========
export interface UseDietTemplatesReturn {
  templates: DietTemplate[];
  saveTemplate: (template: Omit<DietTemplate, 'id' | 'coach_id' | 'created_at' | 'updated_at'>) => Promise<void>;
  loadTemplate: (templateId: string) => Promise<DietTemplate>;
  deleteTemplate: (templateId: string) => Promise<void>;
  isLoading: boolean;
  error: string | null;
}

// ========== Real-time Subscription Types ==========
export interface RealtimeMessage {
  type: 'INSERT' | 'UPDATE' | 'DELETE';
  table: string;
  record: Message;
  old_record?: Message;
}

export interface RealtimeWorkoutLog {
  type: 'INSERT' | 'UPDATE' | 'DELETE';
  table: string;
  record: WorkoutLog;
  old_record?: WorkoutLog;
}

// ========== UI Component Props ==========
export interface ChatWindowProps {
  otherUser: ChatUser;
  isOpen: boolean;
  onClose: () => void;
  className?: string;
}

export interface ActiveWorkoutModeProps {
  workoutPlan: any; // UserPlans['workouts']
  onSaveSession: (session: WorkoutSession) => Promise<void>;
  onLogUpdate: (logs: WorkoutLog[]) => void;
}

export interface GalleryPanelProps {
  userId: string;
  isCoach?: boolean;
  className?: string;
}

export interface DietTemplateManagerProps {
  currentDiet: any[]; // DietItem[]
  currentDietRest?: any[]; // DietItem[]
  onLoadTemplate: (template: DietTemplate) => void;
  className?: string;
}

// ========== API Response Types ==========
export interface PaginatedMessages extends PaginatedResponse<Message> {
  hasMore: boolean;
}

export interface PaginatedWorkoutLogs extends PaginatedResponse<WorkoutLog> {
  startDate?: string;
  endDate?: string;
}

// ========== Utility Types ==========
export type MessageStatus = 'sending' | 'sent' | 'delivered' | 'read';
export type WorkoutLogStatus = 'planned' | 'in_progress' | 'completed' | 'skipped';

export interface OptimisticMessage extends Omit<Message, 'id' | 'created_at' | 'updated_at'> {
  id: string; // Temporary ID
  status: MessageStatus;
  created_at: string;
}

export interface WorkoutSetInput {
  reps?: number;
  weight?: number;
  rpe?: number;
  notes?: string;
  completed: boolean;
}

==================================================
FILE: .\src\types\types.ts
==================================================
// ============================================
// Centralized Type Definitions for FlexPro v2
// ============================================

// ========== Core Types ==========
export type UserId = string | number;

export type Role = 'coach' | 'client';

export type Gender = 'male' | 'female' | string;

export type SleepQuality = 'excellent' | 'good' | 'fair' | 'poor' | string;

export type Level = 'beginner' | 'intermediate' | 'advanced' | 'pro' | string;

export type TabKey = 
  | 'users' 
  | 'requests' 
  | 'clientInfo' 
  | 'training' 
  | 'nutrition' 
  | 'supplements' 
  | 'progress' 
  | 'coachProfile';

export type PermissionAction =
  | 'manageUsers'
  | 'editProgram'
  | 'viewProgram'
  | 'viewProgress'
  | 'logProgress'
  | 'printProgram'
  | 'restoreBackup'
  | 'resetSystem';

// ========== Workout Types ==========
export type WorkoutMode = 'resist' | 'cardio' | 'corrective' | 'warmup' | 'cooldown';

export type WorkoutSystemType =
  | 'normal'
  | 'superset'
  | 'triset'
  | 'giantset'
  | 'dropset'
  | 'pyramid'
  | 'restpause'
  | 'german-volume'
  | 'fst7'
  | '5x5'
  | 'cluster'
  | 'myorep'
  | 'tempo'
  | 'isometric'
  | 'negatives'
  | '21s'
  | 'nasm-corrective';

export interface WorkoutItem {
  type?: WorkoutSystemType;
  mode?: WorkoutMode;
  name: string;
  name2?: string;
  name3?: string;
  name4?: string;
  sets?: string | number;
  reps?: string | number;
  rest?: string | number;
  restUnit?: 's' | 'm';
  duration?: string | number;
  intensity?: string;
  dropCount?: string | number;
  restPauseTime?: string | number;
  tempo?: string;
  holdTime?: string | number;
  note?: string;
  nasmPhase?: string;
}

// ========== Nutrition Types ==========
export interface DietItem {
  meal: string;
  name: string;
  amount: number;
  unit: string;
  c: number;   // 
  p: number;   // 
  ch: number;  // 
  f: number;   // 
}

export interface SupplementItem {
  name: string;
  dose?: string;
  time?: string;
  note?: string;
}

export interface ProgressItem {
  date: string;
  weight: string | number;
  bf?: string | number;
  note?: string;
}

// ========== User Plans ==========
export interface UserPlans {
  workouts: Record<number, WorkoutItem[]>;
  diet: DietItem[];
  dietRest: DietItem[];
  supps: SupplementItem[];
  prog: ProgressItem[];
}

// ========== User Profile Types ==========
export interface FinancialInfo {
  startDate: string;
  duration: number;
  amount: number | string;
}

export interface Measurements {
  neck?: string;
  hip?: string;
  thigh?: string;
  arm?: string;
  waist?: string;
  wrist?: string;
  calf?: string;
  chest?: string;
  shoulder?: string;
}

export interface User {
  id: UserId;
  coach_id?: string;
  name: string;
  phone?: string;
  age?: string | number;
  gender?: Gender;
  height?: string | number;
  weight?: string | number;
  activity?: string;
  injuries?: string[];
  notes?: string;
  exp?: string | number;
  level?: Level;
  job?: string;
  allergy?: string;
  days?: string | number;
  sleep?: SleepQuality;
  smoke?: string;
  alcohol?: string;
  caffeine?: string;
  financial?: FinancialInfo;
  measurements?: Measurements;
  email?: string;
  address?: string;
  education?: string;
  maritalStatus?: string;
  medicalConditions?: string[];
  medications?: string;
  dietType?: string;
  nutritionGoals?: string;
  waterIntake?: string;
  mealFrequency?: string;
  foodPreferences?: string[];
  targetWeight?: string | number;
  bodyFat?: string | number;
  plans: UserPlans;
}

export type UserInput = Omit<User, 'id'> & { id?: UserId };
export type ProfileData = Partial<UserInput>;

// ========== Template Types ==========
export interface Template {
  id: UserId;
  name: string;
  workout: WorkoutItem[];
  coach_id?: string;
}

// ========== Print Types ==========
export type PrintType = 'training' | 'nutrition' | 'supplements' | 'profile';

export interface PrintData {
  html: string;
  title: string;
  type: 'program' | 'client-report' | 'progress';
}

// ========== Supabase Database Types ==========
export interface Client {
  id: string;
  coach_id: string; // UUID from profiles table
  full_name: string;
  gender?: string;
  age?: string;
  height?: string;
  weight?: string;
  goal?: string;
  notes?: string;
  profile_data?: ProfileData;
  profile_completed?: boolean;
  created_at?: string;
  updated_at?: string;
}

export interface WorkoutPlanFromDB {
  id: string;
  coach_id: string; // UUID from profiles table
  client_id: string; // References clients.id
  title?: string;
  description?: string;
  plan_data: UserPlans;
  created_at?: string;
  updated_at?: string;
}

export interface ProgramRequest {
  id: string;
  client_id: string;
  client_name?: string;
  coach_id: string; // Coach code (text)
  coach_code: string;
  request_type: 'training' | 'diet' | 'supplements' | 'all';
  status: 'pending' | 'accepted' | 'rejected' | 'completed';
  client_data?: Record<string, unknown>;
  coach_response?: string;
  created_at?: string;
  updated_at?: string;
}

// ========== Context Types ==========
// Note: Interface method parameters are intentionally unused in type definitions
export interface AppContextType {
  users: User[];
  activeUser: User | null;
  currentTab: TabKey;
  theme: 'light' | 'dark';
  currentRole: Role;
  currentAccountId: UserId | null;
  setCurrentRole: (role: Role) => void;
  setCurrentAccountId: (id: UserId | null) => void;
  hasPermission: (action: PermissionAction, targetUserId?: UserId | null) => boolean;
  templates: Template[];
  setActiveUserId: (id: UserId | null) => void;
  setCurrentTab: (tab: TabKey) => void;
  saveUser: (user: UserInput) => void;
  deleteUser: (id: UserId) => void;
  updateActiveUser: (user: User) => void;
  saveTemplate: (name: string, workout: WorkoutItem[]) => void;
  deleteTemplate: (id: UserId) => void;
  toggleTheme: () => void;
  logoutUser: () => void;
  backupData: () => void;
  restoreData: (file: File) => void;
  resetSystem: () => void;
  printData: PrintData | null;
  handlePrintPreview: (type: PrintType) => void;
  closePrintModal: () => void;
  downloadPDF: () => Promise<void> | void;
}

// ========== Context Types (continued) ==========
export interface DataContextType {
  users: User[];
  requests: ProgramRequest[];
  activeUser: User | null;
  activeUserId: UserId | null;
  templates: Template[];
  currentRole: Role;
  currentAccountId: UserId | null;
  setCurrentRole: (role: Role) => void;
  setCurrentAccountId: (id: UserId | null) => void;
  setActiveUserId: (id: UserId | null) => void;
  hasPermission: (action: PermissionAction, targetUserId?: UserId | null) => boolean;
  saveUser: (user: UserInput) => Promise<void>;
  deleteUser: (id: UserId) => Promise<void>;
  acceptRequest: (request: ProgramRequest) => Promise<void>;
  rejectRequest: (request: ProgramRequest) => Promise<void>;
  deleteRequest: (requestId: string) => Promise<void>;
  updateActiveUser: (user: User) => void;
  saveTemplate: (name: string, workout: User['plans']['workouts'][number]) => void;
  deleteTemplate: (id: UserId) => void;
  logoutUser: () => void;
  resetSystem: () => void;
  backupData: () => void;
  restoreData: (file: File) => void;
  refreshData: () => Promise<void>;
  // New database functions
  searchFoods: (query: string, category?: string, limit?: number, offset?: number) => Promise<any>;
  searchExercises: (query: string, muscleGroup?: string, type?: string, limit?: number, offset?: number) => Promise<any>;
  getAllFoods: () => Promise<any>;
  getAllExercises: () => Promise<any>;
  getFoodCategories: () => Promise<string[]>;
  getMuscleGroups: () => Promise<string[]>;
  getExerciseTypes: () => Promise<string[]>;
}

// ========== API Response Types ==========
export interface ApiResponse<T> {
  data: T | null;
  error: Error | null;
}

export interface ApiError {
  message: string;
  code?: string;
  details?: unknown;
}



==================================================
FILE: .\src\utils\calculations.ts
==================================================
/**
 * Scientific Fitness Calculations Utility
 * Pure functions for BMI, BMR, TDEE, WHR, and nutritional calculations
 * All functions include comprehensive validation and error handling
 */

export interface MeasurementData {
  weight: number;
  height: number;
  age: number;
  gender: 'male' | 'female';
  activity: number;
  waist?: number;
  hip?: number;
  neck?: number;
  bodyFat?: number;
  trainingDays?: number;
  goal?: string;
}

export interface CalculationResult {
  bmi: number;
  bmiCategory: string;
  bmiColor: string;
  whr: number;
  whrRisk: string;
  whrColor: string;
  bmr: number;
  tdee: number;
  bodyFatPercent: number;
  leanBodyMass: number;
  idealWeightMin: number;
  idealWeightMax: number;
  idealWeight: number;
  targetCalories: number;
  calorieAdjustment: number;
  protein: number;
  fat: number;
  carbs: number;
  waterNeed: number;
  adjustedActivityFactor: number;
}

/**
 * Validates measurement inputs
 */
function validateMeasurements(data: MeasurementData): boolean {
  const { weight, height, age } = data;

  if (!weight || !height || !age) return false;
  if (weight <= 0 || weight > 500) return false;
  if (height <= 0 || height > 300) return false;
  if (age <= 0 || age > 150) return false;

  return true;
}

/**
 * Calculates BMI (Body Mass Index)
 */
export function calculateBMI(weight: number, height: number): { bmi: number; category: string; color: string } {
  const result = { bmi: 0, category: '', color: 'text-slate-400' };

  if (!validateMeasurements({ weight, height, age: 1, gender: 'male', activity: 1.2 })) {
    return result;
  }

  const heightM = height / 100;
  const bmiVal = weight / (heightM * heightM);

  if (isNaN(bmiVal) || bmiVal <= 0 || bmiVal >= 100) {
    return result;
  }

  result.bmi = Number(bmiVal.toFixed(1));

  // BMI Categories (WHO standards)
  if (result.bmi < 16) { result.category = ' '; result.color = 'text-red-500'; }
  else if (result.bmi < 17) { result.category = ' '; result.color = 'text-amber-500'; }
  else if (result.bmi < 18.5) { result.category = ' '; result.color = 'text-yellow-500'; }
  else if (result.bmi < 25) { result.category = ''; result.color = 'text-emerald-500'; }
  else if (result.bmi < 30) { result.category = ' '; result.color = 'text-amber-500'; }
  else if (result.bmi < 35) { result.category = '  1'; result.color = 'text-red-400'; }
  else if (result.bmi < 40) { result.category = '  2'; result.color = 'text-red-500'; }
  else { result.category = ' '; result.color = 'text-red-600'; }

  return result;
}

/**
 * Calculates WHR (Waist-to-Hip Ratio)
 */
export function calculateWHR(waist: number, hip: number, gender: 'male' | 'female'): { whr: number; risk: string; color: string } {
  const result = { whr: 0, risk: '', color: 'text-slate-400' };

  if (!waist || !hip || waist <= 0 || hip <= 0 || waist > 200 || hip > 200) {
    return result;
  }

  const whrVal = waist / hip;
  if (isNaN(whrVal) || whrVal <= 0 || whrVal >= 5) {
    return result;
  }

  result.whr = Number(whrVal.toFixed(2));

  // WHR Risk assessment based on gender
  if (gender === 'male') {
    if (result.whr < 0.9) { result.risk = ' ()'; result.color = 'text-emerald-500'; }
    else if (result.whr < 1.0) { result.risk = ''; result.color = 'text-yellow-500'; }
    else { result.risk = ' ()'; result.color = 'text-red-500'; }
  } else {
    if (result.whr < 0.8) { result.risk = ' ()'; result.color = 'text-emerald-500'; }
    else if (result.whr < 0.85) { result.risk = ''; result.color = 'text-yellow-500'; }
    else { result.risk = ' ()'; result.color = 'text-red-500'; }
  }

  return result;
}

/**
 * Calculates BMR using multiple validated formulas (2024 standards)
 */
export function calculateBMR(data: MeasurementData): number {
  const { weight, height, age, gender, bodyFat } = data;

  if (!validateMeasurements(data)) return 0;

  // 1. Mifflin-St Jeor (Gold standard 2024)
  const mifflin = 10 * weight + 6.25 * height - 5 * age + (gender === 'male' ? 5 : -161);

  if (isNaN(mifflin) || mifflin <= 0 || mifflin > 10000) return 0;

  // 2. Harris-Benedict (Revised 1984)
  const harrisBenedict = gender === 'male'
    ? 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age)
    : 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);

  if (isNaN(harrisBenedict) || harrisBenedict <= 0 || harrisBenedict > 10000) {
    return Math.max(0, Math.round(mifflin));
  }

  // 3. Katch-McArdle (if body fat percentage is available)
  let katch = 0;
  if (bodyFat && bodyFat > 0 && bodyFat < 100) {
    const leanMass = weight * (1 - bodyFat / 100);
    if (leanMass > 0 && leanMass <= weight) {
      katch = 370 + (21.6 * leanMass);
      if (isNaN(katch) || katch <= 0 || katch > 10000) katch = 0;
    }
  }

  // 4. Cunningham (for athletes with high muscle mass)
  let cunningham = 0;
  if (bodyFat && bodyFat > 0 && bodyFat < 100) {
    const leanMass = weight * (1 - bodyFat / 100);
    if (leanMass > 0 && leanMass <= weight) {
      cunningham = 500 + (22 * leanMass);
      if (isNaN(cunningham) || cunningham <= 0 || cunningham > 10000) cunningham = 0;
    }
  }

  // Intelligent averaging based on available data
  let bmr = 0;
  if (katch > 0 && cunningham > 0) {
    // If body fat available: Katch (40%) + Cunningham (20%) + Mifflin (25%) + Harris (15%)
    bmr = Math.round((mifflin * 0.25 + harrisBenedict * 0.15 + katch * 0.40 + cunningham * 0.20));
  } else if (katch > 0) {
    // If only Katch available: Mifflin (35%) + Harris (25%) + Katch (40%)
    bmr = Math.round((mifflin * 0.35 + harrisBenedict * 0.25 + katch * 0.40));
  } else {
    // Default: Mifflin (60%) + Harris (40%)
    bmr = Math.round((mifflin * 0.60 + harrisBenedict * 0.40));
  }

  return Math.max(0, bmr);
}

/**
 * Calculates activity factor based on lifestyle and training frequency
 */
export function calculateActivityFactor(baseActivity: number, trainingDays: number, goal?: string): number {
  if (isNaN(baseActivity) || baseActivity < 1.2 || baseActivity > 2.5) {
    baseActivity = 1.55; // Default moderate activity
  }

  let activityFactor = baseActivity;

  // Adjust based on training frequency
  if (trainingDays >= 6) activityFactor = Math.max(activityFactor, 1.725);
  else if (trainingDays >= 4) activityFactor = Math.max(activityFactor, 1.55);
  else if (trainingDays >= 2) activityFactor = Math.max(activityFactor, 1.375);
  else activityFactor = Math.max(activityFactor, 1.2);

  // Adjust based on goal
  switch (goal) {
    case 'weight-loss':
      activityFactor = Math.max(1.2, activityFactor * 0.92); // 5-10% reduction
      break;
    case 'muscle-gain':
      activityFactor = Math.min(2.5, activityFactor * 1.10); // 8-12% increase
      break;
    case 'weight-gain':
      activityFactor = Math.min(2.5, activityFactor * 1.12); // 10-15% increase
      break;
    case 'recomp':
      activityFactor = Math.max(1.2, activityFactor * 0.97); // 2-5% reduction
      break;
    default:
      // maintenance: keep base activity factor
      break;
  }

  return Math.max(1.2, Math.min(2.5, activityFactor));
}

/**
 * Calculates TDEE (Total Daily Energy Expenditure)
 */
export function calculateTDEE(bmr: number, activityFactor: number): number {
  if (bmr <= 0 || activityFactor < 1.2 || activityFactor > 2.5) return 0;

  const tdee = Math.round(bmr * activityFactor);

  // Validation
  if (tdee <= 0 || isNaN(tdee) || tdee > 20000) {
    return Math.round(bmr * 1.55); // Fallback to moderate activity
  }

  return tdee;
}

/**
 * Calculates target calories based on goal
 */
export function calculateTargetCalories(tdee: number, goal?: string): { calories: number; adjustment: number } {
  if (tdee <= 0) return { calories: 0, adjustment: 0 };

  let targetCalories = tdee;
  let adjustment = 0;

  switch (goal) {
    case 'weight-loss':
      adjustment = -500; // 500 calorie deficit for 0.5kg/week loss
      const minCalories = Math.max(1200, tdee * 0.8); // Minimum 1200 or 80% of TDEE
      targetCalories = Math.max(minCalories, tdee + adjustment);
      break;
    case 'weight-gain':
      adjustment = 400; // 400 calorie surplus
      targetCalories = Math.min(10000, tdee + adjustment);
      break;
    case 'muscle-gain':
      adjustment = 300; // 300 calorie surplus with high protein
      targetCalories = Math.min(10000, tdee + adjustment);
      break;
    case 'recomp':
      adjustment = 0; // Maintain calories while changing body composition
      targetCalories = tdee;
      break;
    default:
      targetCalories = tdee;
  }

  return {
    calories: Math.max(0, Math.min(20000, targetCalories)),
    adjustment
  };
}

/**
 * Calculates body fat percentage using Navy and Deurenberg formulas
 */
export function calculateBodyFat(data: MeasurementData): number {
  const { weight, height, age, gender, waist, hip, neck, bodyFat } = data;

  // If body fat is directly provided, validate and return it
  if (bodyFat && bodyFat > 0 && bodyFat < 100) {
    return Number(bodyFat.toFixed(1));
  }

  // Calculate using Navy formula if measurements are available
  if (!waist || !neck || !height) return 0;

  const waistNeckDiff = waist - neck;
  if (waistNeckDiff <= 0) return 0;

  let calculatedBF = 0;

  if (gender === 'male') {
    // Navy formula for men
    const logWaistNeck = Math.log10(waistNeckDiff);
    const logHeight = Math.log10(height);

    if (!isNaN(logWaistNeck) && !isNaN(logHeight)) {
      const denominator = 1.0324 - 0.19077 * logWaistNeck + 0.15456 * logHeight;
      if (denominator > 0) {
        calculatedBF = (495 / denominator) - 450;
      }
    }
  } else if (hip) {
    // Navy formula for women
    const waistHipNeck = waist + hip - neck;
    if (waistHipNeck > 0) {
      const logWaistHipNeck = Math.log10(waistHipNeck);
      const logHeight = Math.log10(height);

      if (!isNaN(logWaistHipNeck) && !isNaN(logHeight)) {
        const denominator = 1.29579 - 0.35004 * logWaistHipNeck + 0.22100 * logHeight;
        if (denominator > 0) {
          calculatedBF = (495 / denominator) - 450;
        }
      }
    }
  }

  // Validate Navy result and compare with Deurenberg
  if (calculatedBF > 0 && !isNaN(calculatedBF)) {
    // Deurenberg formula for validation
    const heightM = height / 100;
    const bmi = weight / (heightM * heightM);

    if (!isNaN(bmi) && bmi > 0) {
      const deurenberg = 1.2 * bmi + 0.23 * age - 10.8 * (gender === 'male' ? 1 : 0) - 5.4;

      if (!isNaN(deurenberg) && deurenberg > 0 && deurenberg < 100) {
        // Average Navy and Deurenberg for better accuracy
        calculatedBF = (calculatedBF * 0.7 + deurenberg * 0.3);
      }
    }

    // Constrain to reasonable ranges
    const minBF = gender === 'male' ? 3 : 10;
    calculatedBF = Math.max(minBF, Math.min(50, calculatedBF));
  }

  return calculatedBF > 0 && !isNaN(calculatedBF) ? Number(calculatedBF.toFixed(1)) : 0;
}

/**
 * Calculates ideal weight range based on BMI 18.5-24.9
 */
export function calculateIdealWeight(height: number, gender: 'male' | 'female'): { min: number; max: number; ideal: number } {
  if (!height || height <= 0 || height > 300) {
    return { min: 0, max: 0, ideal: 0 };
  }

  const heightM = height / 100;
  const minBMI = 18.5;
  const maxBMI = 24.9;
  const idealBMI = 22; // Middle of healthy range

  const min = Math.round(minBMI * heightM * heightM);
  const max = Math.round(maxBMI * heightM * heightM);
  const ideal = Math.round(idealBMI * heightM * heightM);

  return { min, max, ideal };
}

/**
 * Calculates macronutrient distribution
 */
export function calculateMacros(weight: number, targetCalories: number, goal?: string): { protein: number; fat: number; carbs: number } {
  if (targetCalories <= 0 || weight <= 0) {
    return { protein: 0, fat: 0, carbs: 0 };
  }

  let protein = 0;
  let fat = 0;
  let carbs = 0;

  switch (goal) {
    case 'muscle-gain':
      // High protein for muscle building: 2.2-2.5g per kg
      protein = Math.round(weight * 2.4);
      fat = Math.round((targetCalories * 0.25) / 9); // 25% fat
      carbs = Math.round((targetCalories - (protein * 4) - (fat * 9)) / 4);
      break;

    case 'weight-loss':
      // Moderate protein for fat loss: 1.8-2.2g per kg
      protein = Math.round(weight * 2.0);
      fat = Math.round((targetCalories * 0.25) / 9); // 25% fat
      carbs = Math.round((targetCalories - (protein * 4) - (fat * 9)) / 4);
      break;

    case 'weight-gain':
      // Moderate protein for weight gain: 1.8-2.0g per kg
      protein = Math.round(weight * 1.9);
      fat = Math.round((targetCalories * 0.30) / 9); // 30% fat
      carbs = Math.round((targetCalories - (protein * 4) - (fat * 9)) / 4);
      break;

    default: // maintenance or recomp
      // Balanced macros: 1.6-2.0g protein per kg
      protein = Math.round(weight * 1.8);
      fat = Math.round((targetCalories * 0.25) / 9); // 25% fat
      carbs = Math.round((targetCalories - (protein * 4) - (fat * 9)) / 4);
  }

  // Ensure carbs don't go negative
  if (carbs < 0) {
    carbs = Math.round(targetCalories * 0.4 / 4); // 40% carbs as fallback
    protein = Math.round((targetCalories - (carbs * 4) - (fat * 9)) / 4);
  }

  return { protein: Math.max(0, protein), fat: Math.max(0, fat), carbs: Math.max(0, carbs) };
}

/**
 * Calculates water intake recommendation
 */
export function calculateWaterIntake(weight: number, activity: number): number {
  if (weight <= 0) return 0;

  // Base: 30ml per kg body weight
  let waterML = weight * 30;

  // Adjust for activity level
  if (activity >= 1.725) waterML *= 1.3; // Very active
  else if (activity >= 1.55) waterML *= 1.2; // Moderately active
  else if (activity >= 1.375) waterML *= 1.1; // Lightly active

  return Math.round(waterML / 100) * 100; // Round to nearest 100ml
}

/**
 * Main calculation function that combines all metrics
 */
export function calculateFitnessMetrics(data: MeasurementData): CalculationResult {
  const { weight, height, age, gender, activity, waist, hip, neck, bodyFat, trainingDays, goal } = data;

  // BMI calculation
  const bmiResult = calculateBMI(weight, height);

  // WHR calculation
  const whrResult = calculateWHR(waist || 0, hip || 0, gender);

  // BMR calculation
  const bmr = calculateBMR(data);

  // Activity factor calculation
  const adjustedActivityFactor = calculateActivityFactor(activity, trainingDays || 3, goal);

  // TDEE calculation
  const tdee = calculateTDEE(bmr, adjustedActivityFactor);

  // Body fat calculation
  const bodyFatPercent = calculateBodyFat(data);

  // Lean body mass
  const leanBodyMass = bodyFatPercent > 0 && weight > 0 ? Math.round(weight * (1 - bodyFatPercent / 100)) : 0;

  // Ideal weight
  const idealWeight = calculateIdealWeight(height, gender);

  // Target calories
  const { calories: targetCalories, adjustment: calorieAdjustment } = calculateTargetCalories(tdee, goal);

  // Macronutrients
  const { protein, fat, carbs } = calculateMacros(weight, targetCalories, goal);

  // Water intake
  const waterNeed = calculateWaterIntake(weight, activity);

  return {
    bmi: bmiResult.bmi,
    bmiCategory: bmiResult.category,
    bmiColor: bmiResult.color,
    whr: whrResult.whr,
    whrRisk: whrResult.risk,
    whrColor: whrResult.color,
    bmr,
    tdee,
    bodyFatPercent,
    leanBodyMass,
    idealWeightMin: idealWeight.min,
    idealWeightMax: idealWeight.max,
    idealWeight: idealWeight.ideal,
    targetCalories,
    calorieAdjustment,
    protein,
    fat,
    carbs,
    waterNeed,
    adjustedActivityFactor
  };
}












==================================================
FILE: .\src\utils\cn.ts
==================================================
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}



==================================================
FILE: .\src\utils\pushNotifications.ts
==================================================
import { supabase } from '../lib/supabaseClient';

export interface PushSubscriptionData {
  endpoint: string;
  keys: {
    p256dh: string;
    auth: string;
  };
}

export class PushNotificationManager {
  private vapidPublicKey: string;

  constructor(vapidPublicKey: string) {
    this.vapidPublicKey = vapidPublicKey;
  }

  // Convert VAPID key from base64 to Uint8Array
  private urlBase64ToUint8Array(base64String: string): Uint8Array {
    const padding = '='.repeat((4 - base64String.length % 4) % 4);
    const base64 = (base64String + padding)
      .replace(/-/g, '+')
      .replace(/_/g, '/');

    const rawData = window.atob(base64);
    const outputArray = new Uint8Array(rawData.length);

    for (let i = 0; i < rawData.length; ++i) {
      outputArray[i] = rawData.charCodeAt(i);
    }
    return outputArray;
  }

  // Request notification permission
  async requestPermission(): Promise<NotificationPermission> {
    if (!('Notification' in window)) {
      throw new Error('This browser does not support notifications');
    }

    const permission = await Notification.requestPermission();
    return permission;
  }

  // Subscribe to push notifications
  async subscribe(): Promise<PushSubscription | null> {
    if (!('serviceWorker' in navigator)) {
      throw new Error('Service workers are not supported');
    }

    const registration = await navigator.serviceWorker.ready;
    const subscription = await registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: this.urlBase64ToUint8Array(this.vapidPublicKey)
    });

    return subscription;
  }

  // Get current subscription
  async getSubscription(): Promise<PushSubscription | null> {
    if (!('serviceWorker' in navigator)) {
      return null;
    }

    const registration = await navigator.serviceWorker.ready;
    const subscription = await registration.pushManager.getSubscription();
    return subscription;
  }

  // Unsubscribe from push notifications
  async unsubscribe(): Promise<boolean> {
    const subscription = await this.getSubscription();
    if (subscription) {
      return await subscription.unsubscribe();
    }
    return false;
  }

  // Send subscription to backend
  async saveSubscriptionToBackend(subscription: PushSubscription): Promise<void> {
    const subscriptionData: PushSubscriptionData = {
      endpoint: subscription.endpoint,
      keys: {
        p256dh: btoa(String.fromCharCode(...new Uint8Array(subscription.getKey('p256dh')!))),
        auth: btoa(String.fromCharCode(...new Uint8Array(subscription.getKey('auth')!)))
      }
    };

    const { data: { user } } = await supabase.auth.getUser();

    if (!user) {
      throw new Error('User not authenticated');
    }

    // Save subscription to user profile or dedicated table
    const { error } = await supabase
      .from('user_push_subscriptions')
      .upsert({
        user_id: user.id,
        subscription: subscriptionData,
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString()
      });

    if (error) {
      throw error;
    }
  }

  // Initialize push notifications
  async initialize(): Promise<void> {
    try {
      const permission = await this.requestPermission();

      if (permission === 'granted') {
        const subscription = await this.subscribe();

        if (subscription) {
          await this.saveSubscriptionToBackend(subscription);
          console.log('Push notifications initialized successfully');
        }
      } else {
        console.log('Push notification permission denied');
      }
    } catch (error) {
      console.error('Failed to initialize push notifications:', error);
    }
  }

  // Send push notification via Supabase Edge Function
  async sendNotification(message: {
    title: string;
    body: string;
    url?: string;
    userId?: string;
    actions?: Array<{ action: string; title: string }>;
  }): Promise<void> {
    const { data: { session } } = await supabase.auth.getSession();

    if (!session) {
      throw new Error('User not authenticated');
    }

    const { error } = await supabase.functions.invoke('send-push-notification', {
      body: message,
      headers: {
        Authorization: `Bearer ${session.access_token}`,
      },
    });

    if (error) {
      throw error;
    }
  }

  // Check if notifications are supported
  isSupported(): boolean {
    return 'Notification' in window && 'serviceWorker' in navigator && 'PushManager' in window;
  }
}

// Create and export a singleton instance
// You'll need to replace this with your actual VAPID public key
// Temporary disable push notifications until VAPID keys are configured
const VAPID_PUBLIC_KEY = import.meta.env.VITE_VAPID_PUBLIC_KEY || '';

// Create manager only if VAPID key is available
let pushNotificationManagerInstance: PushNotificationManager;
if (VAPID_PUBLIC_KEY && VAPID_PUBLIC_KEY.length > 0) {
  pushNotificationManagerInstance = new PushNotificationManager(VAPID_PUBLIC_KEY);
} else {
  // Create a dummy manager that does nothing
  pushNotificationManagerInstance = {
    isSupported: () => false,
    initialize: async () => {
      console.warn('Push notifications disabled: VITE_VAPID_PUBLIC_KEY not configured');
      return null;
    },
    subscribe: async () => null,
    unsubscribe: async () => {},
    sendNotification: async () => {}
  } as any;
}

export const pushNotificationManager = pushNotificationManagerInstance;







==================================================
FILE: .\src\utils\sanitization.ts
==================================================
/**
 * Sanitization utilities for FlexPro v2
 * Provides XSS protection and safe HTML rendering
 */

/**
 * Basic HTML entity encoding
 */
function escapeHtml(text: string): string {
  const map: Record<string, string> = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, (m) => map[m]);
}

/**
 * Sanitize text content for display
 * Removes potentially dangerous HTML and encodes entities
 */
export function sanitizeText(text: string | null | undefined): string {
  if (!text) return '';

  // Remove any HTML tags
  const withoutTags = text.replace(/<[^>]*>/g, '');

  // Encode HTML entities
  return escapeHtml(withoutTags);
}

/**
 * Sanitize HTML content while allowing safe tags
 * Used for rendering user-generated content in print templates
 */
export function sanitizeHtml(html: string | null | undefined): string {
  if (!html) return '';

  // Only allow safe tags and attributes
  const allowedTags = ['p', 'br', 'strong', 'b', 'em', 'i', 'u', 'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
  const allowedAttributes = ['style', 'class'];

  // Remove dangerous tags and attributes
  let sanitized = html
    .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
    .replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi, '')
    .replace(/<link\b[^<]*(?:(?!<\/link>)<[^<]*)*<\/link>/gi, '')
    .replace(/on\w+="[^"]*"/gi, '')
    .replace(/javascript:[^"]*/gi, '');

  // Remove any remaining dangerous tags
  sanitized = sanitized.replace(/<\/?(?!(?:p|br|strong|b|em|i|u|ul|ol|li|h[1-6])\b)[^>]*>/gi, '');

  return sanitized;
}

/**
 * Create a safe HTML element for rendering
 */
export function createSafeElement(html: string): HTMLElement {
  const template = document.createElement('template');
  template.innerHTML = sanitizeHtml(html);
  return template.content.firstElementChild as HTMLElement || document.createElement('div');
}

/**
 * Sanitize file names for download
 */
export function sanitizeFileName(fileName: string): string {
  return fileName
    .replace(/[^a-zA-Z0-9\-_\.\s]/g, '') // Remove special characters except safe ones
    .replace(/\s+/g, '_') // Replace spaces with underscores
    .substring(0, 255); // Limit length
}

/**
 * Sanitize user input for database storage
 */
export function sanitizeForDatabase(input: any): any {
  if (typeof input === 'string') {
    // Remove null bytes and other dangerous characters
    return input
      .replace(/\0/g, '') // Remove null bytes
      .replace(/[\x00-\x1F\x7F-\x9F]/g, '') // Remove control characters
      .trim();
  }

  if (Array.isArray(input)) {
    return input.map(item => sanitizeForDatabase(item));
  }

  if (typeof input === 'object' && input !== null) {
    const sanitized: Record<string, any> = {};
    for (const [key, value] of Object.entries(input)) {
      // Skip dangerous keys
      if (!['__proto__', 'constructor', 'prototype'].includes(key)) {
        sanitized[key] = sanitizeForDatabase(value);
      }
    }
    return sanitized;
  }

  return input;
}

/**
 * Validate and sanitize exercise/food names
 */
export function sanitizeName(name: string): string {
  return name
    .trim()
    .replace(/\s+/g, ' ') // Normalize spaces
    .substring(0, 200); // Limit length
}

/**
 * Sanitize numeric inputs
 */
export function sanitizeNumber(input: any, min?: number, max?: number): number | null {
  const num = parseFloat(input);
  if (isNaN(num)) return null;

  if (min !== undefined && num < min) return min;
  if (max !== undefined && num > max) return max;

  return num;
}

/**
 * Create a safe URL for external links
 */
export function sanitizeUrl(url: string): string | null {
  try {
    const parsedUrl = new URL(url);

    // Only allow http and https protocols
    if (!['http:', 'https:'].includes(parsedUrl.protocol)) {
      return null;
    }

    // Remove potentially dangerous parts
    return parsedUrl.toString();
  } catch {
    return null;
  }
}

==================================================
FILE: .\src\utils\supabaseTest.ts
==================================================
/**
 * Supabase Connection Test Utility
 * Tests all connections and API endpoints
 */

import { supabase, isSupabaseEnabled, checkSupabaseHealth } from '../lib/supabaseClient';
import {
  fetchClientsByCoach,
  fetchClientById,
  fetchWorkoutPlansByClient,
  fetchRequestsByCoach,
  fetchRequestsByClient,
  getOrCreateCoachCode
} from '../lib/supabaseApi';

interface TestResult {
  name: string;
  status: 'success' | 'warning' | 'error';
  message: string;
  duration?: number;
}

export class SupabaseTester {
  private results: TestResult[] = [];

  private addResult(result: TestResult) {
    this.results.push(result);
    console.log(`${result.status.toUpperCase()}: ${result.name} - ${result.message}`);
  }

  async runAllTests(): Promise<TestResult[]> {
    console.log(' Starting Supabase Connection Tests...\n');

    this.results = [];

    // Basic connection tests
    await this.testBasicConnection();
    await this.testHealthCheck();

    // API endpoint tests (if user is logged in)
    if (supabase?.auth.getUser()) {
      await this.testAuthStatus();
      await this.testAPIEndpoints();
    } else {
      this.addResult({
        name: 'Authentication',
        status: 'warning',
        message: 'No user logged in - skipping authenticated tests'
      });
    }

    console.log(`\n Tests completed. ${this.results.filter(r => r.status === 'success').length} passed, ${this.results.filter(r => r.status === 'warning').length} warnings, ${this.results.filter(r => r.status === 'error').length} errors.`);

    return this.results;
  }

  private async testBasicConnection(): Promise<void> {
    const startTime = Date.now();

    try {
      if (!isSupabaseEnabled) {
        this.addResult({
          name: 'Basic Connection',
          status: 'error',
          message: 'Supabase is not enabled - check environment variables',
          duration: Date.now() - startTime
        });
        return;
      }

      if (!supabase) {
        this.addResult({
          name: 'Basic Connection',
          status: 'error',
          message: 'Supabase client not initialized',
          duration: Date.now() - startTime
        });
        return;
      }

      this.addResult({
        name: 'Basic Connection',
        status: 'success',
        message: 'Supabase client initialized successfully',
        duration: Date.now() - startTime
      });
    } catch (error) {
      this.addResult({
        name: 'Basic Connection',
        status: 'error',
        message: `Connection failed: ${error instanceof Error ? error.message : 'Unknown error'}`,
        duration: Date.now() - startTime
      });
    }
  }

  private async testHealthCheck(): Promise<void> {
    const startTime = Date.now();

    try {
      const isHealthy = await checkSupabaseHealth();

      this.addResult({
        name: 'Health Check',
        status: isHealthy ? 'success' : 'error',
        message: isHealthy ? 'Database connection healthy' : 'Database connection failed',
        duration: Date.now() - startTime
      });
    } catch (error) {
      this.addResult({
        name: 'Health Check',
        status: 'error',
        message: `Health check failed: ${error instanceof Error ? error.message : 'Unknown error'}`,
        duration: Date.now() - startTime
      });
    }
  }

  private async testAuthStatus(): Promise<void> {
    const startTime = Date.now();

    try {
      const { data, error } = await supabase!.auth.getUser();

      if (error) {
        this.addResult({
          name: 'Authentication Status',
          status: 'error',
          message: `Auth check failed: ${error.message}`,
          duration: Date.now() - startTime
        });
      } else if (data.user) {
        this.addResult({
          name: 'Authentication Status',
          status: 'success',
          message: `User authenticated: ${data.user.email}`,
          duration: Date.now() - startTime
        });
      } else {
        this.addResult({
          name: 'Authentication Status',
          status: 'warning',
          message: 'No authenticated user',
          duration: Date.now() - startTime
        });
      }
    } catch (error) {
      this.addResult({
        name: 'Authentication Status',
        status: 'error',
        message: `Auth check error: ${error instanceof Error ? error.message : 'Unknown error'}`,
        duration: Date.now() - startTime
      });
    }
  }

  private async testAPIEndpoints(): Promise<void> {
    try {
      const { data: user } = await supabase!.auth.getUser();
      if (!user.user) return;

      // Test coach code generation
      await this.testEndpoint('Coach Code Generation', () => getOrCreateCoachCode(user.user!.id));

      // Test client fetching (will likely return empty for new users)
      await this.testEndpoint('Fetch Clients', () => fetchClientsByCoach(user.user!.id));

      // Test workout plans fetching
      await this.testEndpoint('Fetch Workout Plans', () => fetchWorkoutPlansByClient(user.user!.id));

      // Test requests fetching
      await this.testEndpoint('Fetch Requests (Coach)', () => fetchRequestsByCoach(user.user!.id));
      await this.testEndpoint('Fetch Requests (Client)', () => fetchRequestsByClient(user.user!.id));

      // Test client profile fetching
      await this.testEndpoint('Fetch Client Profile', () => fetchClientById(user.user!.id));

    } catch (error) {
      this.addResult({
        name: 'API Endpoints',
        status: 'error',
        message: `API tests failed: ${error instanceof Error ? error.message : 'Unknown error'}`
      });
    }
  }

  private async testEndpoint(name: string, testFn: () => Promise<any>): Promise<void> {
    const startTime = Date.now();

    try {
      const result = await testFn();

      // Check if result has error property
      if (result && typeof result === 'object' && 'error' in result && result.error) {
        this.addResult({
          name,
          status: 'warning',
          message: `API returned error: ${result.error.message || 'Unknown error'}`,
          duration: Date.now() - startTime
        });
      } else {
        this.addResult({
          name,
          status: 'success',
          message: 'API call successful',
          duration: Date.now() - startTime
        });
      }
    } catch (error) {
      this.addResult({
        name,
        status: 'error',
        message: `API call failed: ${error instanceof Error ? error.message : 'Unknown error'}`,
        duration: Date.now() - startTime
      });
    }
  }
}

// Export singleton instance
export const supabaseTester = new SupabaseTester();

// Convenience function for quick testing
export const testSupabaseConnection = () => supabaseTester.runAllTests();


==================================================
FILE: .\src\utils\__tests__\calculations.test.ts
==================================================
import { describe, it, expect } from 'vitest';
import {
  calculateBMI,
  calculateBMR,
  calculateTDEE,
  calculateActivityFactor,
  calculateTargetCalories,
  calculateBodyFat,
  calculateIdealWeight,
  calculateMacros,
  calculateWaterIntake,
  calculateFitnessMetrics,
  type MeasurementData
} from '../calculations';

describe('Fitness Calculations', () => {
  describe('calculateBMI', () => {
    it('should calculate BMI correctly', () => {
      const result = calculateBMI(70, 175);
      expect(result.bmi).toBeCloseTo(22.9, 1);
      expect(result.category).toBe('');
      expect(result.color).toBe('text-emerald-500');
    });

    it('should handle invalid inputs', () => {
      const result = calculateBMI(0, 175);
      expect(result.bmi).toBe(0);
      expect(result.category).toBe('');
    });

    it('should categorize BMI ranges correctly', () => {
      // Severe underweight (< 16)
      expect(calculateBMI(43, 175).category).toBe(' ');
      // Moderate underweight (16-17)
      expect(calculateBMI(50, 175).category).toBe(' ');
      // Underweight (17-18.5)
      expect(calculateBMI(54, 175).category).toBe(' ');
      // Normal
      expect(calculateBMI(65, 175).category).toBe('');
      // Overweight
      expect(calculateBMI(80, 175).category).toBe(' ');
      // Obese
      expect(calculateBMI(100, 175).category).toBe('  1');
    });
  });

  describe('calculateBMR', () => {
    const baseData: MeasurementData = {
      weight: 70,
      height: 175,
      age: 30,
      gender: 'male',
      activity: 1.55
    };

    it('should calculate BMR for male using Mifflin-St Jeor formula', () => {
      const bmr = calculateBMR(baseData);
      expect(bmr).toBeGreaterThan(1500);
      expect(bmr).toBeLessThan(2000);
    });

    it('should calculate BMR for female', () => {
      const femaleData = { ...baseData, gender: 'female' as const };
      const bmr = calculateBMR(femaleData);
      expect(bmr).toBeGreaterThan(1300);
      expect(bmr).toBeLessThan(1700);
    });

    it('should handle body fat percentage in calculation', () => {
      const dataWithBodyFat = { ...baseData, bodyFat: 15 };
      const bmr = calculateBMR(dataWithBodyFat);
      expect(bmr).toBeGreaterThan(0);
    });

    it('should return 0 for invalid inputs', () => {
      const invalidData = { ...baseData, weight: 0 };
      const bmr = calculateBMR(invalidData);
      expect(bmr).toBe(0);
    });
  });

  describe('calculateTDEE', () => {
    it('should calculate TDEE correctly', () => {
      const tdee = calculateTDEE(1700, 1.55);
      expect(tdee).toBeCloseTo(2635, 0);
    });

    it('should handle invalid BMR', () => {
      const tdee = calculateTDEE(0, 1.55);
      expect(tdee).toBe(0);
    });

    it('should handle invalid activity factor', () => {
      const tdee = calculateTDEE(1700, 0.5);
      expect(tdee).toBe(0); // Invalid activity factor returns 0
    });
  });

  describe('calculateActivityFactor', () => {
    it('should adjust activity factor based on training days', () => {
      expect(calculateActivityFactor(1.2, 6)).toBe(1.725); // Very active
      expect(calculateActivityFactor(1.2, 4)).toBe(1.55);  // Moderately active
      expect(calculateActivityFactor(1.2, 2)).toBe(1.375); // Lightly active
      expect(calculateActivityFactor(1.2, 0)).toBe(1.2);   // Sedentary
    });

    it('should adjust based on goal', () => {
      const baseActivity = 1.55;
      expect(calculateActivityFactor(baseActivity, 3, 'weight-loss')).toBeLessThan(baseActivity);
      expect(calculateActivityFactor(baseActivity, 3, 'muscle-gain')).toBeGreaterThan(baseActivity);
    });

    it('should constrain values within valid range', () => {
      // Invalid base activity gets reset to default (1.55)
      expect(calculateActivityFactor(3.0, 3)).toBe(1.55);
      expect(calculateActivityFactor(0.5, 3)).toBe(1.55); // Invalid gets reset to default
    });
  });

  describe('calculateTargetCalories', () => {
    it('should calculate maintenance calories', () => {
      const result = calculateTargetCalories(2500);
      expect(result.calories).toBe(2500);
      expect(result.adjustment).toBe(0);
    });

    it('should create deficit for weight loss', () => {
      const result = calculateTargetCalories(2500, 'weight-loss');
      expect(result.calories).toBeLessThan(2500);
      expect(result.adjustment).toBe(-500);
    });

    it('should create surplus for weight gain', () => {
      const result = calculateTargetCalories(2500, 'weight-gain');
      expect(result.calories).toBeGreaterThan(2500);
      expect(result.adjustment).toBe(400);
    });

    it('should create surplus for muscle gain', () => {
      const result = calculateTargetCalories(2500, 'muscle-gain');
      expect(result.calories).toBeGreaterThan(2500);
      expect(result.adjustment).toBe(300);
    });
  });

  describe('calculateBodyFat', () => {
    const baseData: MeasurementData = {
      weight: 70,
      height: 175,
      age: 30,
      gender: 'male',
      activity: 1.55,
      waist: 80,
      hip: 95,
      neck: 38
    };

    it('should return provided body fat percentage', () => {
      const dataWithBF = { ...baseData, bodyFat: 15 };
      expect(calculateBodyFat(dataWithBF)).toBe(15);
    });

    it('should calculate body fat using Navy formula for men', () => {
      const result = calculateBodyFat(baseData);
      expect(result).toBeGreaterThan(0);
      expect(result).toBeLessThan(50);
    });

    it('should calculate body fat for women', () => {
      const femaleData = { ...baseData, gender: 'female' as const };
      const result = calculateBodyFat(femaleData);
      expect(result).toBeGreaterThan(0);
      expect(result).toBeLessThan(50);
    });
  });

  describe('calculateIdealWeight', () => {
    it('should calculate ideal weight range', () => {
      const result = calculateIdealWeight(175, 'male');
      expect(result.min).toBeGreaterThan(50);
      expect(result.max).toBeLessThan(80);
      expect(result.ideal).toBeGreaterThan(result.min);
      expect(result.ideal).toBeLessThan(result.max);
    });

    it('should handle invalid height', () => {
      const result = calculateIdealWeight(0, 'male');
      expect(result.min).toBe(0);
      expect(result.max).toBe(0);
      expect(result.ideal).toBe(0);
    });
  });

  describe('calculateMacros', () => {
    it('should calculate macros for muscle gain', () => {
      const result = calculateMacros(70, 3000, 'muscle-gain');
      expect(result.protein).toBeCloseTo(168, 0); // 2.4g/kg
      expect(result.fat).toBeGreaterThan(0);
      expect(result.carbs).toBeGreaterThan(0);
      expect(result.protein * 4 + result.fat * 9 + result.carbs * 4).toBeCloseTo(3000, -50);
    });

    it('should calculate macros for weight loss', () => {
      const result = calculateMacros(70, 2200, 'weight-loss');
      expect(result.protein).toBeCloseTo(140, 0); // 2.0g/kg
      expect(result.fat).toBeGreaterThan(0);
      expect(result.carbs).toBeGreaterThan(0);
    });

    it('should handle invalid inputs', () => {
      const result = calculateMacros(0, 2000);
      expect(result.protein).toBe(0);
      expect(result.fat).toBe(0);
      expect(result.carbs).toBe(0);
    });
  });

  describe('calculateWaterIntake', () => {
    it('should calculate water intake based on weight', () => {
      const water = calculateWaterIntake(70, 1.55);
      expect(water).toBeCloseTo(2100, -100); // ~30ml/kg adjusted for activity
    });

    it('should adjust for activity level', () => {
      const sedentary = calculateWaterIntake(70, 1.2);
      const active = calculateWaterIntake(70, 1.725);
      expect(active).toBeGreaterThan(sedentary);
    });
  });

  describe('calculateFitnessMetrics', () => {
    const sampleData: MeasurementData = {
      weight: 70,
      height: 175,
      age: 30,
      gender: 'male',
      activity: 1.55,
      waist: 80,
      hip: 95,
      neck: 38,
      trainingDays: 4,
      goal: 'muscle-gain'
    };

    it('should calculate complete fitness metrics', () => {
      const result = calculateFitnessMetrics(sampleData);

      expect(result.bmi).toBeGreaterThan(0);
      expect(result.bmr).toBeGreaterThan(0);
      expect(result.tdee).toBeGreaterThan(result.bmr);
      expect(result.targetCalories).toBeGreaterThan(result.tdee);
      expect(result.protein).toBeGreaterThan(0);
      expect(result.fat).toBeGreaterThan(0);
      expect(result.carbs).toBeGreaterThan(0);
    });

    it('should handle all goal types', () => {
      const goals = ['weight-loss', 'weight-gain', 'muscle-gain', 'recomp', undefined];

      goals.forEach(goal => {
        const data = { ...sampleData, goal };
        const result = calculateFitnessMetrics(data);
        expect(result.targetCalories).toBeGreaterThan(0);
      });
    });
  });
});








==================================================
FILE: .\supabase\functions\import_map.json
==================================================
{
  "imports": {
    "https://esm.sh/web-push@3.6.7": "https://esm.sh/web-push@3.6.7",
    "https://esm.sh/@supabase/supabase-js@2": "https://esm.sh/@supabase/supabase-js@2"
  }
}








==================================================
FILE: .\supabase\functions\send-push-notification\index.ts
==================================================
import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
import webpush from 'https://esm.sh/web-push@3.6.7';

const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};

interface PushMessage {
  title: string;
  body: string;
  url?: string;
  userId?: string;
  actions?: Array<{
    action: string;
    title: string;
  }>;
}

serve(async (req) => {
  // Handle CORS preflight requests
  if (req.method === 'OPTIONS') {
    return new Response('ok', { headers: corsHeaders });
  }

  try {
    const supabaseClient = createClient(
      Deno.env.get('SUPABASE_URL') ?? '',
      Deno.env.get('SUPABASE_ANON_KEY') ?? '',
      {
        global: {
          headers: { Authorization: req.headers.get('Authorization')! },
        },
      }
    );

    const { data: { user } } = await supabaseClient.auth.getUser();

    if (!user) {
      throw new Error('Not authenticated');
    }

    // Get the request body
    const { title, body, url, userId, actions }: PushMessage = await req.json();

    if (!title || !body) {
      throw new Error('Title and body are required');
    }

    // Configure web-push with VAPID keys
    const vapidKeys = {
      subject: 'mailto:admin@flexpro.com',
      publicKey: Deno.env.get('VAPID_PUBLIC_KEY') ?? '',
      privateKey: Deno.env.get('VAPID_PRIVATE_KEY') ?? '',
    };

    webpush.setVapidDetails(
      vapidKeys.subject,
      vapidKeys.publicKey,
      vapidKeys.privateKey
    );

    // Get push subscriptions for the target user (or current user if no userId specified)
    const targetUserId = userId || user.id;

    const { data: subscriptions, error } = await supabaseClient
      .from('user_push_subscriptions')
      .select('subscription')
      .eq('user_id', targetUserId);

    if (error) {
      throw error;
    }

    if (!subscriptions || subscriptions.length === 0) {
      return new Response(
        JSON.stringify({ message: 'No push subscriptions found for user' }),
        {
          headers: { ...corsHeaders, 'Content-Type': 'application/json' },
          status: 200,
        }
      );
    }

    // Prepare the push payload
    const payload = JSON.stringify({
      title,
      body,
      url: url || '/',
      actions: actions || [
        { action: 'view', title: 'View' },
        { action: 'dismiss', title: 'Dismiss' },
      ],
      timestamp: new Date().toISOString(),
    });

    // Send push notifications to all subscriptions
    const results = await Promise.allSettled(
      subscriptions.map(async (sub) => {
        try {
          const pushSubscription = {
            endpoint: sub.subscription.endpoint,
            keys: {
              p256dh: sub.subscription.keys.p256dh,
              auth: sub.subscription.keys.auth,
            },
          };

          await webpush.sendNotification(pushSubscription, payload);
          return { success: true, endpoint: pushSubscription.endpoint };
        } catch (error) {
          console.error('Failed to send push notification:', error);
          return { success: false, endpoint: sub.subscription.endpoint, error: error.message };
        }
      })
    );

    const successful = results.filter(r => r.status === 'fulfilled' && r.value.success).length;
    const failed = results.length - successful;

    return new Response(
      JSON.stringify({
        message: `Push notifications sent: ${successful} successful, ${failed} failed`,
        results: results.map(r => r.status === 'fulfilled' ? r.value : { success: false, error: r.reason }),
      }),
      {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        status: 200,
      }
    );

  } catch (error) {
    console.error('Error in send-push-notification function:', error);

    return new Response(
      JSON.stringify({ error: error.message }),
      {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        status: 400,
      }
    );
  }
});







